import {
  require_AgoraRTC_N_production
} from "./chunk-T5KVJT5L.js";
import {
  require_react
} from "./chunk-XDVZA6Z7.js";
import {
  __commonJS,
  __export,
  __reExport,
  __toESM
} from "./chunk-OS7ZSSJM.js";

// node_modules/agora-rtm-sdk/index.js
var require_agora_rtm_sdk = __commonJS({
  "node_modules/agora-rtm-sdk/index.js"(exports, module) {
    "use strict";
    !function(e, t2) {
      "object" == typeof exports && "undefined" != typeof module ? module.exports = t2() : "function" == typeof define && define.amd ? define(t2) : (e = "undefined" != typeof globalThis ? globalThis : e || self).AgoraRTM = t2();
    }(exports, function() {
      function be(e, t2) {
        var n2 = Object.keys(e);
        if (Object.getOwnPropertySymbols) {
          var r = Object.getOwnPropertySymbols(e);
          t2 && (r = r.filter(function(t3) {
            return Object.getOwnPropertyDescriptor(e, t3).enumerable;
          })), n2.push.apply(n2, r);
        }
        return n2;
      }
      function ua(e) {
        for (var t2 = 1; t2 < arguments.length; t2++) {
          var n2 = null != arguments[t2] ? arguments[t2] : {};
          t2 % 2 ? be(Object(n2), true).forEach(function(t3) {
            m(e, t3, n2[t3]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n2)) : be(Object(n2)).forEach(function(t3) {
            Object.defineProperty(e, t3, Object.getOwnPropertyDescriptor(n2, t3));
          });
        }
        return e;
      }
      function X(e) {
        return (X = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e2) {
          return typeof e2;
        } : function(e2) {
          return e2 && "function" == typeof Symbol && e2.constructor === Symbol && e2 !== Symbol.prototype ? "symbol" : typeof e2;
        })(e);
      }
      function sl(e, t2, n2, r, i, o, a2) {
        try {
          var s = e[o](a2), u2 = s.value;
        } catch (e2) {
          return void n2(e2);
        }
        s.done ? t2(u2) : Promise.resolve(u2).then(r, i);
      }
      function J(e) {
        return function() {
          var t2 = this, n2 = arguments;
          return new Promise(function(r, i) {
            function o(e2) {
              sl(s, r, i, o, a2, "next", e2);
            }
            function a2(e2) {
              sl(s, r, i, o, a2, "throw", e2);
            }
            var s = e.apply(t2, n2);
            o(void 0);
          });
        };
      }
      function W(e, t2) {
        if (!(e instanceof t2)) throw new TypeError("Cannot call a class as a function");
      }
      function tl(e, t2) {
        for (var n2 = 0; n2 < t2.length; n2++) {
          var r = t2[n2];
          r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, r.key, r);
        }
      }
      function Ha(e, t2, n2) {
        return t2 && tl(e.prototype, t2), n2 && tl(e, n2), e;
      }
      function m(e, t2, n2) {
        return t2 in e ? Object.defineProperty(e, t2, { value: n2, enumerable: true, configurable: true, writable: true }) : e[t2] = n2, e;
      }
      function la(e, t2) {
        if ("function" != typeof t2 && null !== t2) throw new TypeError("Super expression must either be null or a function");
        e.prototype = Object.create(t2 && t2.prototype, { constructor: { value: e, writable: true, configurable: true } }), t2 && df(e, t2);
      }
      function wd(e) {
        return (wd = Object.setPrototypeOf ? Object.getPrototypeOf : function(e2) {
          return e2.__proto__ || Object.getPrototypeOf(e2);
        })(e);
      }
      function df(e, t2) {
        return (df = Object.setPrototypeOf || function(e2, t3) {
          return e2.__proto__ = t3, e2;
        })(e, t2);
      }
      function ul() {
        if ("undefined" == typeof Reflect || !Reflect.construct || Reflect.construct.sham) return false;
        if ("function" == typeof Proxy) return true;
        try {
          return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
          })), true;
        } catch (e) {
          return false;
        }
      }
      function Sh(e, t2, n2) {
        return (Sh = ul() ? Reflect.construct : function(e2, t3, n3) {
          var r = [null];
          return r.push.apply(r, t3), e2 = new (Function.bind.apply(e2, r))(), n3 && df(e2, n3.prototype), e2;
        }).apply(null, arguments);
      }
      function ef(e) {
        var t2 = "function" == typeof Map ? /* @__PURE__ */ new Map() : void 0;
        return (ef = function(e2) {
          function n2() {
            return Sh(e2, arguments, wd(this).constructor);
          }
          if (null === e2 || -1 === Function.toString.call(e2).indexOf("[native code]")) return e2;
          if ("function" != typeof e2) throw new TypeError("Super expression must either be null or a function");
          if (void 0 !== t2) {
            if (t2.has(e2)) return t2.get(e2);
            t2.set(e2, n2);
          }
          return n2.prototype = Object.create(e2.prototype, { constructor: { value: n2, enumerable: false, writable: true, configurable: true } }), df(n2, e2);
        })(e);
      }
      function ff(e, t2) {
        if (null == e) return {};
        if (null == e) var n2 = {};
        else {
          n2 = {};
          var r, i = Object.keys(e);
          for (r = 0; r < i.length; r++) {
            var o = i[r];
            0 <= t2.indexOf(o) || (n2[o] = e[o]);
          }
        }
        if (Object.getOwnPropertySymbols) for (r = Object.getOwnPropertySymbols(e), o = 0; o < r.length; o++) i = r[o], 0 <= t2.indexOf(i) || Object.prototype.propertyIsEnumerable.call(e, i) && (n2[i] = e[i]);
        return n2;
      }
      function n(e) {
        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return e;
      }
      function ma(e) {
        var t2 = ul();
        return function() {
          var r = wd(e);
          if (t2) {
            var i = wd(this).constructor;
            r = Reflect.construct(r, arguments, i);
          } else r = r.apply(this, arguments);
          return r = !r || "object" != typeof r && "function" != typeof r ? n(this) : r;
        };
      }
      function Th(e, t2, n2) {
        return (Th = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e2, t3, n3) {
          for (; !Object.prototype.hasOwnProperty.call(e2, t3) && null !== (e2 = wd(e2)); ) ;
          if (e2) return (t3 = Object.getOwnPropertyDescriptor(e2, t3)).get ? t3.get.call(n3) : t3.value;
        })(e, t2, n2 || e);
      }
      function ra(e, t2) {
        var n2 = Array.isArray(e) ? e : void 0;
        if (!n2) if (null == (n2 = e && ("undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"]))) n2 = void 0;
        else {
          var r, i = [], o = true, a2 = false;
          try {
            for (n2 = n2.call(e); !(o = (r = n2.next()).done) && (i.push(r.value), !t2 || i.length !== t2); o = true) ;
          } catch (e2) {
            a2 = true;
            var s = e2;
          } finally {
            try {
              o || null == n2.return || n2.return();
            } finally {
              if (a2) throw s;
            }
          }
          n2 = i;
        }
        if (!(e = n2 || vl(e, t2))) throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        return e;
      }
      function G(e) {
        var t2 = Array.isArray(e) ? Uh(e) : void 0;
        if (t2 || (t2 = "undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"] ? Array.from(e) : void 0), !(e = t2 || vl(e))) throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        return e;
      }
      function vl(e, t2) {
        if (e) {
          if ("string" == typeof e) return Uh(e, t2);
          var n2 = Object.prototype.toString.call(e).slice(8, -1);
          if ("Object" === n2 && e.constructor && (n2 = e.constructor.name), "Map" === n2 || "Set" === n2) return Array.from(e);
          if ("Arguments" === n2 || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)) return Uh(e, t2);
        }
      }
      function Uh(e, t2) {
        (null == t2 || t2 > e.length) && (t2 = e.length);
        for (var n2 = 0, r = Array(t2); n2 < t2; n2++) r[n2] = e[n2];
        return r;
      }
      function fa(e, t2, n2, r, i) {
        var o = {};
        return Object.keys(r).forEach(function(e2) {
          o[e2] = r[e2];
        }), o.enumerable = !!o.enumerable, o.configurable = !!o.configurable, ("value" in o || o.initializer) && (o.writable = true), o = n2.slice().reverse().reduce(function(n3, r2) {
          return r2(e, t2, n3) || n3;
        }, o), i && void 0 !== o.initializer && (o.value = o.initializer ? o.initializer.call(i) : void 0, o.initializer = void 0), void 0 === o.initializer && (Object.defineProperty(e, t2, o), o = null), o;
      }
      function $a(e) {
        var t2 = { exports: {} };
        return e(t2, t2.exports), t2.exports;
      }
      function wl(e, t2) {
        var n2, r = 3 > arguments.length ? e : arguments[2];
        return va(e) === r ? e[t2] : (n2 = Fb.f(e, t2)) ? Q(n2, "value") ? n2.value : void 0 === n2.get ? void 0 : n2.get.call(r) : ha(n2 = Vb(e)) ? wl(n2, t2, r) : void 0;
      }
      function rs(e) {
        var t2 = e.charCodeAt(0) << 24, n2 = 0 | ss(~t2), r = 0, i = 0 | e.length, o = "";
        if (5 > n2 && i >= n2) {
          for (t2 = t2 << n2 >>> 24 + n2, r = 1; r < n2; r = r + 1 | 0) t2 = t2 << 6 | 63 & e.charCodeAt(r);
          65535 >= t2 ? o += xd(t2) : 1114111 >= t2 ? o += xd(55296 + ((t2 = t2 - 65536 | 0) >> 10) | 0, 56320 + (1023 & t2) | 0) : r = 0;
        }
        for (; r < i; r = r + 1 | 0) o += "ï¿½";
        return o;
      }
      function xl() {
      }
      function ts(e) {
        var t2 = 0 | e.charCodeAt(0);
        if (55296 <= t2 && 56319 >= t2) {
          var n2 = 0 | e.charCodeAt(1);
          if (!(n2 == n2 && 56320 <= n2 && 57343 >= n2)) return xd(239, 191, 189);
          if (65535 < (t2 = (t2 - 55296 << 10) + n2 - 56320 + 65536 | 0)) return xd(240 | t2 >>> 18, 128 | t2 >>> 12 & 63, 128 | t2 >>> 6 & 63, 128 | 63 & t2);
        }
        return 127 >= t2 ? e : 2047 >= t2 ? xd(192 | t2 >>> 6, 128 | 63 & t2) : xd(224 | t2 >>> 12, 128 | t2 >>> 6 & 63, 128 | 63 & t2);
      }
      function yl() {
      }
      function ea() {
        ea.init.call(this);
      }
      function ng(e) {
        if ("function" != typeof e) throw new TypeError('The "listener" argument must be of type Function. Received type ' + X(e));
      }
      function zl(e, t2, n2, r) {
        ng(n2);
        var i = e._events;
        if (void 0 === i) i = e._events = /* @__PURE__ */ Object.create(null), e._eventsCount = 0;
        else {
          void 0 !== i.newListener && (e.emit("newListener", t2, n2.listener ? n2.listener : n2), i = e._events);
          var o = i[t2];
        }
        return void 0 === o ? (i[t2] = n2, ++e._eventsCount) : ("function" == typeof o ? o = i[t2] = r ? [n2, o] : [o, n2] : r ? o.unshift(n2) : o.push(n2), 0 < (n2 = void 0 === e._maxListeners ? ea.defaultMaxListeners : e._maxListeners) && o.length > n2 && !o.warned && (o.warned = true, (n2 = Error("Possible EventEmitter memory leak detected. " + o.length + " " + String(t2) + " listeners added. Use emitter.setMaxListeners() to increase limit")).name = "MaxListenersExceededWarning", n2.emitter = e, n2.type = t2, n2.count = o.length, console && console.warn && console.warn(n2))), e;
      }
      function us() {
        if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = true, 0 === arguments.length ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
      }
      function Al(e, t2, n2) {
        return e = { fired: false, wrapFn: void 0, target: e, type: t2, listener: n2 }, (t2 = us.bind(e)).listener = n2, e.wrapFn = t2;
      }
      function Bl(e, t2, n2) {
        if (void 0 === (e = e._events)) return [];
        if (void 0 === (t2 = e[t2])) return [];
        if ("function" == typeof t2) return n2 ? [t2.listener || t2] : [t2];
        if (n2) for (n2 = Array(t2.length), e = 0; e < n2.length; ++e) n2[e] = t2[e].listener || t2[e];
        else n2 = Cl(t2, t2.length);
        return n2;
      }
      function Dl(e) {
        var t2 = this._events;
        if (void 0 !== t2) {
          if ("function" == typeof (e = t2[e])) return 1;
          if (void 0 !== e) return e.length;
        }
        return 0;
      }
      function Cl(e, t2) {
        for (var n2 = Array(t2), r = 0; r < t2; ++r) n2[r] = e[r];
        return n2;
      }
      function vs(e, t2, n2) {
        "function" == typeof e.on && El(e, "error", t2, n2);
      }
      function El(e, t2, n2, r) {
        if ("function" == typeof e.on) r.once ? e.once(t2, n2) : e.on(t2, n2);
        else {
          if ("function" != typeof e.addEventListener) throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + X(e));
          e.addEventListener(t2, function i(o) {
            r.once && e.removeEventListener(t2, i), n2(o);
          });
        }
      }
      function ws(e) {
        return e ? G(e) : xs(function() {
          return [];
        }, function(e2, t2) {
          return e2.push(t2), e2;
        });
      }
      function Fl(e, t2) {
        var n2, r, i, o;
        return w.wrap(function(a2) {
          for (; ; ) switch (a2.prev = a2.next) {
            case 0:
              n2 = Gl(e)([Hl, Hl, function(e2, t3) {
                return t3;
              }])[2], r = 0;
            case 2:
              if (!(r < t2.length)) {
                a2.next = 17;
                break;
              }
              if (i = t2[r], !((o = n2(Vh, i)) instanceof og)) {
                a2.next = 11;
                break;
              }
              if ((o = Wh(o.deref())) === Vh) {
                a2.next = 10;
                break;
              }
              return a2.next = 10, o;
            case 10:
              return a2.abrupt("return");
            case 11:
              if (o === Vh) {
                a2.next = 14;
                break;
              }
              return a2.next = 14, o;
            case 14:
              r++, a2.next = 2;
              break;
            case 17:
            case "end":
              return a2.stop();
          }
        }, ys);
      }
      function pg(e, t2) {
        return null != t2 && "function" == typeof t2[Symbol.iterator] ? Fl(pg(e), t2) : function(t3) {
          var n2 = t3[2];
          return zs(t3, function(t4, r) {
            return n2(t4, e(r));
          });
        };
      }
      function Ac(e) {
        return Object.prototype.toString.call(e).slice(8, -1);
      }
      function yd(e) {
        return "Object" === Ac(e) && (e.constructor === Object && Object.getPrototypeOf(e) === Object.prototype);
      }
      function Il(e) {
        var t2;
        return (t2 = "Boolean" === Ac(e) || "Null" === Ac(e) || "Undefined" === Ac(e)) || (t2 = "Number" === Ac(e) && !isNaN(e)), t2 || "String" === Ac(e) || "Symbol" === Ac(e);
      }
      function zd(e) {
        var t2 = -1, n2 = null == e ? 0 : e.length;
        for (this.clear(); ++t2 < n2; ) {
          var r = e[t2];
          this.set(r[0], r[1]);
        }
      }
      function ce(e) {
        var t2 = -1, n2 = null == e ? 0 : e.length;
        for (this.clear(); ++t2 < n2; ) {
          var r = e[t2];
          this.set(r[0], r[1]);
        }
      }
      function de(e) {
        var t2 = -1, n2 = null == e ? 0 : e.length;
        for (this.clear(); ++t2 < n2; ) {
          var r = e[t2];
          this.set(r[0], r[1]);
        }
      }
      function gf(e) {
        var t2 = -1, n2 = null == e ? 0 : e.length;
        for (this.__data__ = new qg(); ++t2 < n2; ) this.add(e[t2]);
      }
      function ee(e) {
        this.size = (this.__data__ = new rg(e)).size;
      }
      function fe(e, t2, n2, r, i, o) {
        var a2, s = 1 & t2, u2 = 2 & t2, c2 = 4 & t2;
        if (n2 && (a2 = i ? n2(e, r, i, o) : n2(e)), void 0 !== a2) return a2;
        if (!lb(e)) return e;
        if (r = Va(e)) {
          if (a2 = As(e), !s) return Xh(e, a2);
        } else {
          var l = hf(e), f = "[object Function]" == l || "[object GeneratorFunction]" == l;
          if (jf(e)) return Jl(e, s);
          if ("[object Object]" == l || "[object Arguments]" == l || f && !i) {
            if (a2 = u2 || f ? {} : Kl(e), !s) return u2 ? Bs(e, Cs(a2, e)) : Ds(e, Es(a2, e));
          } else {
            if (!wa[l]) return i ? e : {};
            a2 = Fs(e, l, s);
          }
        }
        if (o || (o = new ge()), i = o.get(e)) return i;
        o.set(e, a2), Gs(e) ? e.forEach(function(r2) {
          a2.add(fe(r2, t2, n2, r2, e, o));
        }) : Hs(e) && e.forEach(function(r2, i2) {
          a2.set(i2, fe(r2, t2, n2, i2, e, o));
        }), u2 = c2 ? u2 ? Ll : Yh : u2 ? kf : Ad;
        var h = r ? void 0 : u2(e);
        return Is(h || e, function(r2, i2) {
          h && (r2 = e[i2 = r2]), Ml(a2, i2, fe(r2, t2, n2, i2, e, o));
        }), a2;
      }
      function Zh(e, t2) {
        if ("function" != typeof e || null != t2 && "function" != typeof t2) throw new TypeError("Expected a function");
        var n2 = function n3() {
          var r = arguments, i = t2 ? t2.apply(this, r) : r[0], o = n3.cache;
          return o.has(i) ? o.get(i) : (r = e.apply(this, r), n3.cache = o.set(i, r) || o, r);
        };
        return n2.cache = new (Zh.Cache || qg)(), n2;
      }
      function Nl(e) {
        if ("string" == typeof e) return e;
        if (Va(e)) return he(e, Nl) + "";
        if (ie(e)) return Ol ? Ol.call(e) : "";
        var t2 = e + "";
        return "0" == t2 && 1 / e == -Js ? "-0" : t2;
      }
      function $h(e, t2, n2, r, i) {
        var o = -1, a2 = e.length;
        for (n2 || (n2 = Ks), i || (i = []); ++o < a2; ) {
          var s = e[o];
          0 < t2 && n2(s) ? 1 < t2 ? $h(s, t2 - 1, n2, r, i) : ai(i, s) : r || (i[i.length] = s);
        }
        return i;
      }
      function je(e, t2, n2, r, i) {
        if (e === t2) t2 = true;
        else if (null == e || null == t2 || !gc(e) && !gc(t2)) t2 = e != e && t2 != t2;
        else e: {
          var o = Va(e), a2 = Va(t2), s = o ? "[object Array]" : hf(e), u2 = a2 ? "[object Array]" : hf(t2), c2 = "[object Object]" == (s = "[object Arguments]" == s ? "[object Object]" : s);
          if (a2 = "[object Object]" == (u2 = "[object Arguments]" == u2 ? "[object Object]" : u2), (u2 = s == u2) && jf(e)) {
            if (!jf(t2)) {
              t2 = false;
              break e;
            }
            o = true, c2 = false;
          }
          if (u2 && !c2) i || (i = new ge()), t2 = o || bi(e) ? Pl(e, t2, n2, r, je, i) : Ls(e, t2, s, n2, r, je, i);
          else {
            if (!(1 & n2) && (o = c2 && Ql.call(e, "__wrapped__"), s = a2 && Ql.call(t2, "__wrapped__"), o || s)) {
              e = o ? e.value() : e, t2 = s ? t2.value() : t2, i || (i = new ge()), t2 = je(e, t2, n2, r, i);
              break e;
            }
            if (u2) t: if (i || (i = new ge()), o = 1 & n2, s = Yh(e), a2 = s.length, u2 = Yh(t2).length, a2 == u2 || o) {
              for (u2 = a2; u2--; ) {
                var l = s[u2];
                if (!(o ? l in t2 : Ms.call(t2, l))) {
                  t2 = false;
                  break t;
                }
              }
              if (c2 = i.get(e), l = i.get(t2), c2 && l) t2 = c2 == t2 && l == e;
              else {
                c2 = true, i.set(e, t2), i.set(t2, e);
                for (var f = o; ++u2 < a2; ) {
                  var h = e[l = s[u2]], p = t2[l];
                  if (r) var d = o ? r(p, h, l, t2, e, i) : r(h, p, l, e, t2, i);
                  if (void 0 === d ? h !== p && !je(h, p, n2, r, i) : !d) {
                    c2 = false;
                    break;
                  }
                  f || (f = "constructor" == l);
                }
                c2 && !f && ((n2 = e.constructor) != (r = t2.constructor) && "constructor" in e && "constructor" in t2 && !("function" == typeof n2 && n2 instanceof n2 && "function" == typeof r && r instanceof r) && (c2 = false)), i.delete(e), i.delete(t2), t2 = c2;
              }
            } else t2 = false;
            else t2 = false;
          }
        }
        return t2;
      }
      function xa(e, t2, n2) {
        this.low = 0 | e, this.high = 0 | t2, this.unsigned = !!n2;
      }
      function mb(e) {
        return true === (e && e.__isLong__);
      }
      function Bd(e, t2) {
        var n2;
        if (t2) {
          if ((t2 = 0 <= (e >>>= 0) && 256 > e) && (n2 = Rl[e])) return n2;
          n2 = ya(e, 0 > (0 | e) ? -1 : 0, true), t2 && (Rl[e] = n2);
        } else {
          if ((t2 = -128 <= (e |= 0) && 128 > e) && (n2 = Sl[e])) return n2;
          n2 = ya(e, 0 > e ? -1 : 0, false), t2 && (Sl[e] = n2);
        }
        return n2;
      }
      function Gb(e, t2) {
        if (isNaN(e)) return t2 ? Cd : Hb;
        if (t2) {
          if (0 > e) return Cd;
          if (e >= Tl) return Ul;
        } else {
          if (e <= -Vl) return nb;
          if (e + 1 >= Vl) return Wl;
        }
        return 0 > e ? Gb(-e, t2).neg() : ya(e % ke | 0, e / ke | 0, t2);
      }
      function ya(e, t2, n2) {
        return new xa(e, t2, n2);
      }
      function ci(e, t2, n2) {
        if (0 === e.length) throw Error("empty string");
        if ("NaN" === e || "Infinity" === e || "+Infinity" === e || "-Infinity" === e) return Hb;
        if ("number" == typeof t2 ? (n2 = t2, t2 = false) : t2 = !!t2, 2 > (n2 = n2 || 10) || 36 < n2) throw RangeError("radix");
        var r;
        if (0 < (r = e.indexOf("-"))) throw Error("interior hyphen");
        if (0 === r) return ci(e.substring(1), t2, n2).neg();
        r = Gb(sg(n2, 8));
        for (var i = Hb, o = 0; o < e.length; o += 8) {
          var a2 = Math.min(8, e.length - o), s = parseInt(e.substring(o, o + a2), n2);
          8 > a2 ? (a2 = Gb(sg(n2, a2)), i = i.mul(a2).add(Gb(s))) : i = (i = i.mul(r)).add(Gb(s));
        }
        return i.unsigned = t2, i;
      }
      function Wb(e, t2) {
        return "number" == typeof e ? Gb(e, t2) : "string" == typeof e ? ci(e, t2) : ya(e.low, e.high, "boolean" == typeof t2 ? t2 : e.unsigned);
      }
      function O(e, t2) {
        function n2() {
          this.constructor = e;
        }
        di(e, t2), e.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
      }
      function le(e) {
        return "function" == typeof e;
      }
      function me(e) {
        setTimeout(function() {
          throw e;
        }, 0);
      }
      function ei(e) {
        return null !== e && "object" === X(e);
      }
      function Xl(e) {
        return e.reduce(function(e2, t2) {
          return e2.concat(t2 instanceof lf ? t2.errors : t2);
        }, []);
      }
      function fi(e) {
        for (; e; ) {
          var t2 = e.destination, n2 = e.isStopped;
          if (e.closed || n2) return false;
          e = t2 && t2 instanceof ia ? t2 : null;
        }
        return true;
      }
      function Yc(e) {
        return e;
      }
      function gi() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        return Yl(e);
      }
      function Yl(e) {
        return 0 === e.length ? Yc : 1 === e.length ? e[0] : function(t2) {
          return e.reduce(function(e2, t3) {
            return t3(e2);
          }, t2);
        };
      }
      function Zl(e) {
        if (e || (e = Ib.Promise || Promise), !e) throw Error("no Promise impl found");
        return e;
      }
      function $l() {
        return function(e) {
          return e.lift(new Ns(e));
        };
      }
      function mf(e) {
        return e ? Os(e) : vb;
      }
      function Os(e) {
        return new Y(function(t2) {
          return e.schedule(function() {
            return t2.complete();
          });
        });
      }
      function Zc(e) {
        return e && "function" == typeof e.schedule;
      }
      function hi(e, t2) {
        return new Y(function(n2) {
          var r = new Oa(), i = 0;
          return r.add(t2.schedule(function() {
            i === e.length ? n2.complete() : (n2.next(e[i++]), n2.closed || r.add(this.schedule()));
          })), r;
        });
      }
      function nf(e, t2) {
        return t2 ? hi(e, t2) : new Y(am(e));
      }
      function bb() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        return Zc(t2 = e[e.length - 1]) ? (e.pop(), hi(e, t2)) : nf(e);
      }
      function Z(e, t2) {
        return new Y(t2 ? function(n2) {
          return t2.schedule(Ps, 0, { error: e, subscriber: n2 });
        } : function(t3) {
          return t3.error(e);
        });
      }
      function Ps(e) {
        e.subscriber.error(e.error);
      }
      function Qs(e, t2) {
        return void 0 === t2 && (t2 = 0), function(n2) {
          return n2.lift(new Rs(e, t2));
        };
      }
      function bm(e) {
        return e in ii && (delete ii[e], true);
      }
      function hc() {
      }
      function ba(e, t2) {
        return function(n2) {
          if ("function" != typeof e) throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");
          return n2.lift(new Ss(e, t2));
        };
      }
      function cm(e, t2, n2) {
        if (t2) {
          if (!Zc(t2)) return function() {
            for (var r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
            return cm(e, n2).apply(void 0, r).pipe(ba(function(e2) {
              return Jb(e2) ? t2.apply(void 0, e2) : t2(e2);
            }));
          };
          n2 = t2;
        }
        return function() {
          for (var t3 = [], r = 0; r < arguments.length; r++) t3[r] = arguments[r];
          var i, o = this, a2 = { context: o, subject: i, callbackFunc: e, scheduler: n2 };
          return new Y(function(r2) {
            if (n2) return n2.schedule(Ts, 0, { args: t3, subscriber: r2, params: a2 });
            if (!i) {
              i = new of();
              try {
                e.apply(o, t3.concat([function() {
                  for (var e2 = [], t4 = 0; t4 < arguments.length; t4++) e2[t4] = arguments[t4];
                  i.next(1 >= e2.length ? e2[0] : e2), i.complete();
                }]));
              } catch (e2) {
                fi(i) ? i.error(e2) : console.warn(e2);
              }
            }
            return i.subscribe(r2);
          });
        };
      }
      function Ts(e) {
        var t2 = this, n2 = e.args, r = e.subscriber, i = e.params;
        e = i.callbackFunc;
        var o = i.context, a2 = i.scheduler, s = i.subject;
        if (!s) {
          s = i.subject = new of(), i = function() {
            for (var e2 = [], n3 = 0; n3 < arguments.length; n3++) e2[n3] = arguments[n3];
            t2.add(a2.schedule(Us, 0, { value: 1 >= e2.length ? e2[0] : e2, subject: s }));
          };
          try {
            e.apply(o, n2.concat([i]));
          } catch (e2) {
            s.error(e2);
          }
        }
        this.add(s.subscribe(r));
      }
      function Us(e) {
        var t2 = e.subject;
        t2.next(e.value), t2.complete();
      }
      function dm(e, t2, n2) {
        if (t2) {
          if (!Zc(t2)) return function() {
            for (var r = [], i = 0; i < arguments.length; i++) r[i] = arguments[i];
            return dm(e, n2).apply(void 0, r).pipe(ba(function(e2) {
              return Jb(e2) ? t2.apply(void 0, e2) : t2(e2);
            }));
          };
          n2 = t2;
        }
        return function() {
          for (var t3 = [], r = 0; r < arguments.length; r++) t3[r] = arguments[r];
          var i = { subject: void 0, args: t3, callbackFunc: e, scheduler: n2, context: this };
          return new Y(function(r2) {
            var o = i.context, a2 = i.subject;
            if (n2) return n2.schedule(Vs, 0, { params: i, subscriber: r2, context: o });
            if (!a2) {
              a2 = i.subject = new of();
              try {
                e.apply(o, t3.concat([function() {
                  for (var e2 = [], t4 = 0; t4 < arguments.length; t4++) e2[t4] = arguments[t4];
                  (t4 = e2.shift()) ? a2.error(t4) : (a2.next(1 >= e2.length ? e2[0] : e2), a2.complete());
                }]));
              } catch (e2) {
                fi(a2) ? a2.error(e2) : console.warn(e2);
              }
            }
            return a2.subscribe(r2);
          });
        };
      }
      function Vs(e) {
        var t2 = this, n2 = e.params, r = e.subscriber;
        e = e.context;
        var i = n2.callbackFunc, o = n2.args, a2 = n2.scheduler, s = n2.subject;
        if (!s) {
          s = n2.subject = new of(), n2 = function() {
            for (var e2 = [], n3 = 0; n3 < arguments.length; n3++) e2[n3] = arguments[n3];
            (n3 = e2.shift()) ? t2.add(a2.schedule(em, 0, { err: n3, subject: s })) : t2.add(a2.schedule(Ws, 0, { value: 1 >= e2.length ? e2[0] : e2, subject: s }));
          };
          try {
            i.apply(e, o.concat([n2]));
          } catch (e2) {
            this.add(a2.schedule(em, 0, { err: e2, subject: s }));
          }
        }
        this.add(s.subscribe(r));
      }
      function Ws(e) {
        var t2 = e.subject;
        t2.next(e.value), t2.complete();
      }
      function em(e) {
        e.subject.error(e.err);
      }
      function fm(e) {
        return !!e && "function" != typeof e.subscribe && "function" == typeof e.then;
      }
      function ji(e, t2, n2, r, i) {
        if (void 0 === i && (i = new Xs(e, n2, r)), !i.closed) return t2 instanceof Y ? t2.subscribe(i) : pf(t2)(i);
      }
      function Ys(e, t2) {
        return new Y(function(n2) {
          var r = new Oa();
          return r.add(t2.schedule(function() {
            var i = e[ne]();
            r.add(i.subscribe({ next: function(e2) {
              r.add(t2.schedule(function() {
                return n2.next(e2);
              }));
            }, error: function(e2) {
              r.add(t2.schedule(function() {
                return n2.error(e2);
              }));
            }, complete: function() {
              r.add(t2.schedule(function() {
                return n2.complete();
              }));
            } }));
          })), r;
        });
      }
      function Zs(e, t2) {
        return new Y(function(n2) {
          var r = new Oa();
          return r.add(t2.schedule(function() {
            return e.then(function(e2) {
              r.add(t2.schedule(function() {
                n2.next(e2), r.add(t2.schedule(function() {
                  return n2.complete();
                }));
              }));
            }, function(e2) {
              r.add(t2.schedule(function() {
                return n2.error(e2);
              }));
            });
          })), r;
        });
      }
      function $s(e, t2) {
        if (!e) throw Error("Iterable cannot be null");
        return new Y(function(n2) {
          var r, i = new Oa();
          return i.add(function() {
            r && "function" == typeof r.return && r.return();
          }), i.add(t2.schedule(function() {
            r = e[$c](), i.add(t2.schedule(function() {
              if (!n2.closed) {
                try {
                  var e2 = r.next(), t3 = e2.value, i2 = e2.done;
                } catch (e3) {
                  return void n2.error(e3);
                }
                i2 ? n2.complete() : (n2.next(t3), this.schedule());
              }
            }));
          })), i;
        });
      }
      function gm(e, t2) {
        if (null != e) {
          if (e && "function" == typeof e[ne]) return Ys(e, t2);
          if (fm(e)) return Zs(e, t2);
          if (hm(e)) return hi(e, t2);
          if (e && "function" == typeof e[$c] || "string" == typeof e) return $s(e, t2);
        }
        throw new TypeError((null !== e && X(e) || e) + " is not observable");
      }
      function Kb(e, t2) {
        return t2 ? gm(e, t2) : e instanceof Y ? e : new Y(pf(e));
      }
      function ic(e, t2) {
        if (!t2.closed) {
          if (e instanceof Y) return e.subscribe(t2);
          try {
            var n2 = pf(e)(t2);
          } catch (e2) {
            t2.error(e2);
          }
          return n2;
        }
      }
      function cb(e, t2, n2) {
        return void 0 === n2 && (n2 = Number.POSITIVE_INFINITY), "function" == typeof t2 ? function(r) {
          return r.pipe(cb(function(n3, r2) {
            return Kb(e(n3, r2)).pipe(ba(function(e2, i) {
              return t2(n3, e2, r2, i);
            }));
          }, n2));
        } : ("number" == typeof t2 && (n2 = t2), function(t3) {
          return t3.lift(new at(e, n2));
        });
      }
      function tg(e) {
        return void 0 === e && (e = Number.POSITIVE_INFINITY), cb(Yc, e);
      }
      function im() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        return tg(1)(bb.apply(void 0, e));
      }
      function ad(e) {
        return new Y(function(t2) {
          try {
            var n2 = e();
          } catch (e2) {
            return void t2.error(e2);
          }
          return (n2 ? Kb(n2) : mf()).subscribe(t2);
        });
      }
      function jm() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        if (1 === e.length) {
          var n2 = e[0];
          if (Jb(n2)) return ug(n2, null);
          if (ei(n2) && Object.getPrototypeOf(n2) === Object.prototype) return ug((e = Object.keys(n2)).map(function(e2) {
            return n2[e2];
          }), e);
        }
        if ("function" == typeof e[e.length - 1]) {
          var r = e.pop();
          return ug(e = 1 === e.length && Jb(e[0]) ? e[0] : e, null).pipe(ba(function(e2) {
            return r.apply(void 0, e2);
          }));
        }
        return ug(e, null);
      }
      function ug(e, t2) {
        return new Y(function(n2) {
          var r = e.length;
          if (0 === r) n2.complete();
          else for (var i = Array(r), o = 0, a2 = 0, s = function(s2) {
            var u3 = Kb(e[s2]), c2 = false;
            n2.add(u3.subscribe({ next: function(e2) {
              c2 || (c2 = true, a2++), i[s2] = e2;
            }, error: function(e2) {
              return n2.error(e2);
            }, complete: function() {
              ++o !== r && c2 || (a2 === r && n2.next(t2 ? t2.reduce(function(e2, t3, n3) {
                return e2[t3] = i[n3], e2;
              }, {}) : i), n2.complete());
            } }));
          }, u2 = 0; u2 < r; u2++) s(u2);
        });
      }
      function gb(e, t2, n2, r) {
        return le(n2) && (r = n2, n2 = void 0), r ? gb(e, t2, n2).pipe(ba(function(e2) {
          return Jb(e2) ? r.apply(void 0, e2) : r(e2);
        })) : new Y(function(r2) {
          km(e, t2, function(e2) {
            1 < arguments.length ? r2.next(Array.prototype.slice.call(arguments)) : r2.next(e2);
          }, r2, n2);
        });
      }
      function km(e, t2, n2, r, i) {
        if (e && "function" == typeof e.addEventListener && "function" == typeof e.removeEventListener) {
          e.addEventListener(t2, n2, i);
          var o = function() {
            return e.removeEventListener(t2, n2, i);
          };
        } else if (e && "function" == typeof e.on && "function" == typeof e.off) e.on(t2, n2), o = function() {
          return e.off(t2, n2);
        };
        else if (e && "function" == typeof e.addListener && "function" == typeof e.removeListener) e.addListener(t2, n2), o = function() {
          return e.removeListener(t2, n2);
        };
        else {
          if (!e || !e.length) throw new TypeError("Invalid event target");
          for (var a2 = 0, s = e.length; a2 < s; a2++) km(e[a2], t2, n2, r, i);
        }
        r.add(o);
      }
      function lm(e, t2, n2) {
        return n2 ? lm(e, t2).pipe(ba(function(e2) {
          return Jb(e2) ? n2.apply(void 0, e2) : n2(e2);
        })) : new Y(function(n3) {
          var r = function() {
            for (var e2 = [], t3 = 0; t3 < arguments.length; t3++) e2[t3] = arguments[t3];
            return n3.next(1 === e2.length ? e2[0] : e2);
          };
          try {
            var i = e(r);
          } catch (e2) {
            return void n3.error(e2);
          }
          if (le(t2)) return function() {
            return t2(r, i);
          };
        });
      }
      function bt(e) {
        var t2 = e.subscriber, n2 = e.condition;
        if (!t2.closed) {
          if (e.needIterate) try {
            e.state = e.iterate(e.state);
          } catch (e2) {
            return void t2.error(e2);
          }
          else e.needIterate = true;
          if (n2) {
            var r = void 0;
            try {
              r = n2(e.state);
            } catch (e2) {
              return void t2.error(e2);
            }
            if (!r) return void t2.complete();
            if (t2.closed) return;
          }
          try {
            var i = e.resultSelector(e.state);
          } catch (e2) {
            return void t2.error(e2);
          }
          if (!t2.closed && (t2.next(i), !t2.closed)) return this.schedule(e);
        }
      }
      function ki(e) {
        return !Jb(e) && 0 <= e - parseFloat(e) + 1;
      }
      function mm(e, t2) {
        return void 0 === e && (e = 0), void 0 === t2 && (t2 = bd), (!ki(e) || 0 > e) && (e = 0), t2 && "function" == typeof t2.schedule || (t2 = bd), new Y(function(n2) {
          return n2.add(t2.schedule(ct, e, { subscriber: n2, counter: 0, period: e })), n2;
        });
      }
      function ct(e) {
        var t2 = e.subscriber, n2 = e.counter;
        e = e.period, t2.next(n2), this.schedule({ subscriber: t2, counter: n2 + 1, period: e }, e);
      }
      function Xb() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        t2 = Number.POSITIVE_INFINITY;
        var n2 = null, r = e[e.length - 1];
        return Zc(r) ? (n2 = e.pop(), 1 < e.length && "number" == typeof e[e.length - 1] && (t2 = e.pop())) : "number" == typeof r && (t2 = e.pop()), null === n2 && 1 === e.length && e[0] instanceof Y ? e[0] : tg(t2)(nf(e, n2));
      }
      function li() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        if (0 === e.length) return vb;
        var n2 = e[0], r = e.slice(1);
        return 1 === e.length && Jb(n2) ? li.apply(void 0, n2) : new Y(function(e2) {
          var t3 = function() {
            return e2.add(li.apply(void 0, r).subscribe(e2));
          };
          return Kb(n2).subscribe({ next: function(t4) {
            e2.next(t4);
          }, error: t3, complete: t3 });
        });
      }
      function dt(e) {
        var t2 = e.keys, n2 = e.index, r = e.subscriber, i = e.subscription;
        if (e = e.obj, !r.closed) if (n2 < t2.length) {
          var o = t2[n2];
          r.next([o, e[o]]), i.add(this.schedule({ keys: t2, index: n2 + 1, subscriber: r, subscription: i, obj: e }));
        } else r.complete();
      }
      function et(e, t2) {
        function n2() {
          return !n2.pred.apply(n2.thisArg, arguments);
        }
        return n2.pred = e, n2.thisArg = t2, n2;
      }
      function wb(e, t2) {
        return function(n2) {
          return n2.lift(new ft(e, t2));
        };
      }
      function Ca() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        if (1 === e.length) {
          if (!Jb(e[0])) return e[0];
          e = e[0];
        }
        return nf(e, void 0).lift(new gt());
      }
      function ht(e) {
        var t2 = e.start, n2 = e.index, r = e.subscriber;
        n2 >= e.count ? r.complete() : (r.next(t2), r.closed || (e.index = n2 + 1, e.start = t2 + 1, this.schedule(e)));
      }
      function Bc(e, t2, n2) {
        void 0 === e && (e = 0);
        var r = -1;
        return ki(t2) ? r = 1 > Number(t2) ? 1 : Number(t2) : Zc(t2) && (n2 = t2), Zc(n2) || (n2 = bd), new Y(function(t3) {
          var i = ki(e) ? e : +e - n2.now();
          return n2.schedule(it, i, { index: 0, period: r, subscriber: t3 });
        });
      }
      function it(e) {
        var t2 = e.index, n2 = e.period, r = e.subscriber;
        if (r.next(t2), !r.closed) {
          if (-1 === n2) return r.complete();
          e.index = t2 + 1, this.schedule(e, n2);
        }
      }
      function mi() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        return "function" == typeof (t2 = e[e.length - 1]) && e.pop(), nf(e, void 0).lift(new jt(t2));
      }
      function Ga(e) {
        return function(t2) {
          var n2 = new kt(e);
          return t2 = t2.lift(n2), n2.caught = t2;
        };
      }
      function ni(e, t2) {
        return cb(e, t2, 1);
      }
      function nm(e) {
        return void 0 === e && (e = null), function(t2) {
          return t2.lift(new lt(e));
        };
      }
      function cd(e, t2) {
        void 0 === t2 && (t2 = bd);
        var n2 = e instanceof Date && !isNaN(+e) ? +e - t2.now() : Math.abs(e);
        return function(e2) {
          return e2.lift(new mt(n2, t2));
        };
      }
      function om(e, t2) {
        return function(n2) {
          return n2.lift(new nt(e, t2));
        };
      }
      function Dd(e) {
        return void 0 === e && (e = ot), function(t2) {
          return t2.lift(new pt(e));
        };
      }
      function ot() {
        return new vg();
      }
      function Ka(e) {
        return function(t2) {
          return 0 === e ? mf() : t2.lift(new qt(e));
        };
      }
      function pm(e, t2) {
        return t2 ? function(n2) {
          return n2.pipe(pm(function(n3, r) {
            return Kb(e(n3, r)).pipe(ba(function(e2, i) {
              return t2(n3, e2, r, i);
            }));
          }));
        } : function(t3) {
          return t3.lift(new rt(e));
        };
      }
      function wg(e) {
        return function(t2) {
          return t2.lift(new st(e));
        };
      }
      function aa(e, t2) {
        var n2 = 2 <= arguments.length;
        return function(r) {
          return r.pipe(e ? wb(function(t3, n3) {
            return e(t3, n3, r);
          }) : Yc, Ka(1), n2 ? nm(t2) : Dd(function() {
            return new vg();
          }));
        };
      }
      function tt() {
        return function(e) {
          return e.lift(new ut());
        };
      }
      function qm(e) {
        return function(t2) {
          return 0 === e ? mf() : t2.lift(new vt(e));
        };
      }
      function qf(e) {
        return function(t2) {
          return t2.lift(new wt(e));
        };
      }
      function xg(e, t2) {
        var n2 = false;
        return 2 <= arguments.length && (n2 = true), function(r) {
          return r.lift(new xt(e, t2, n2));
        };
      }
      function rm(e, t2) {
        return 2 <= arguments.length ? function(n2) {
          return gi(xg(e, t2), qm(1), nm(t2))(n2);
        } : function(t3) {
          return gi(xg(function(t4, n2, r) {
            return e(t4, n2, r + 1);
          }), qm(1))(t3);
        };
      }
      function yt(e, t2) {
        return function(n2) {
          var r = "function" == typeof e ? e : function() {
            return e;
          };
          if ("function" == typeof t2) return n2.lift(new zt(r, t2));
          var i = Object.create(n2, At);
          return i.source = n2, i.subjectFactory = r, i;
        };
      }
      function oe(e) {
        return function(t2) {
          return t2.lift(new Bt(e, t2));
        };
      }
      function Ct() {
        return new Pa();
      }
      function pe() {
        return function(e) {
          return $l()(yt(Ct)(e));
        };
      }
      function sm(e, t2, n2) {
        var r = e && "object" === X(e) ? e : { bufferSize: e, windowTime: t2, refCount: false, scheduler: n2 };
        return function(e2) {
          return e2.lift(Dt(r));
        };
      }
      function Dt(e) {
        var t2, n2, r = e.bufferSize, i = void 0 === r ? Number.POSITIVE_INFINITY : r, o = void 0 === (r = e.windowTime) ? Number.POSITIVE_INFINITY : r, a2 = e.refCount, s = e.scheduler, u2 = 0, c2 = false, l = false;
        return function(e2) {
          if (u2++, !t2 || c2) {
            c2 = false;
            var r2 = (t2 = new qe(i, o, s)).subscribe(this);
            n2 = e2.subscribe({ next: function(e3) {
              t2.next(e3);
            }, error: function(e3) {
              c2 = true, t2.error(e3);
            }, complete: function() {
              l = true, n2 = void 0, t2.complete();
            } }), l && (n2 = void 0);
          } else r2 = t2.subscribe(this);
          this.add(function() {
            u2--, r2.unsubscribe(), r2 = void 0, n2 && !l && a2 && 0 === u2 && (n2.unsubscribe(), t2 = n2 = void 0);
          });
        };
      }
      function Cc(e, t2) {
        return "function" == typeof t2 ? function(n2) {
          return n2.pipe(Cc(function(n3, r) {
            return Kb(e(n3, r)).pipe(ba(function(e2, i) {
              return t2(n3, e2, r, i);
            }));
          }));
        } : function(t3) {
          return t3.lift(new Et(e));
        };
      }
      function ob(e) {
        return function(t2) {
          return t2.lift(new Ft(e));
        };
      }
      function Gt(e, t2) {
        return void 0 === t2 && (t2 = false), function(n2) {
          return n2.lift(new Ht(e, t2));
        };
      }
      function ca(e, t2, n2) {
        return function(r) {
          return r.lift(new It(e, t2, n2));
        };
      }
      function Jt(e, t2, n2) {
        return void 0 === t2 && (t2 = bd), void 0 === n2 && (n2 = Kt), function(r) {
          return r.lift(new Lt(e, t2, n2.leading, n2.trailing));
        };
      }
      function Mt(e) {
        e.subscriber.clearThrottle();
      }
      function Nt(e, t2, n2) {
        return void 0 === n2 && (n2 = bd), function(r) {
          var i = e instanceof Date && !isNaN(+e), o = i ? +e - n2.now() : Math.abs(e);
          return r.lift(new Ot(o, i, t2, n2));
        };
      }
      function hb(e, t2) {
        return void 0 === t2 && (t2 = bd), Nt(e, Z(new pb()), t2);
      }
      function Pt() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        return function(t3) {
          var n2;
          return "function" == typeof e[e.length - 1] && (n2 = e.pop()), t3.lift(new Qt(e, n2));
        };
      }
      function tm(e, t2, n2, r, i) {
        e !== t2 && um(t2, function(o, a2) {
          if (i || (i = new ge()), lb(o)) {
            o = i;
            var s = oi(e, a2), u2 = oi(t2, a2), c2 = o.get(u2);
            if (c2) pi(e, a2, c2);
            else {
              var l = void 0 === (c2 = r ? r(s, u2, a2 + "", e, t2, o) : void 0);
              if (l) {
                var f = Va(u2), h = !f && jf(u2), p = !f && !h && bi(u2);
                c2 = u2, f || h || p ? Va(s) ? c2 = s : gc(s) && Ed(s) ? c2 = Xh(s) : h ? (l = false, c2 = Jl(u2, true)) : p ? (l = false, c2 = vm(u2, true)) : c2 = [] : wm(u2) || rf(u2) ? (c2 = s, rf(s) ? c2 = re(s, kf(s)) : lb(s) && !qi(s) || (c2 = Kl(u2))) : l = false;
              }
              l && (o.set(u2, c2), tm(c2, u2, n2, r, o), o.delete(u2)), pi(e, a2, c2);
            }
          } else void 0 === (s = r ? r(oi(e, a2), o, a2 + "", e, t2, i) : void 0) && (s = o), pi(e, a2, s);
        }, kf);
      }
      function Rt(e) {
        var t2 = 1, n2 = ri;
        1 == (1 >= arguments.length ? 0 : arguments.length - 1) ? "number" == typeof (1 >= arguments.length ? void 0 : arguments[1]) ? t2 = 1 >= arguments.length ? void 0 : arguments[1] : n2 = 1 >= arguments.length ? void 0 : arguments[1] : 2 == (1 >= arguments.length ? 0 : arguments.length - 1) && (t2 = 1 >= arguments.length ? void 0 : arguments[1], n2 = 2 >= arguments.length ? void 0 : arguments[2]);
        var r = t2 || 1;
        return function(t3) {
          return t3.pipe(xg(function(t4, i) {
            var o = n2.now(), a2 = o - e;
            if ((t4 = t4.filter(function(e2) {
              return e2.until > a2;
            })).length >= r) {
              var s = t4[t4.length - 1], u2 = t4[0].until + e * Math.floor(t4.length / r);
              t4.push({ delay: s.until < o ? u2 - o : u2 - s.until, until: u2, value: i });
            } else t4.push({ delay: 0, until: o, value: i });
            return t4;
          }, []), ba(function(e2) {
            return e2[e2.length - 1];
          }), ni(function(e2) {
            var t4 = bb(e2.value);
            return e2.delay ? t4.pipe(cd(e2.delay, n2)) : t4;
          }));
        };
      }
      function St(e, t2) {
        var n2 = (t2 = void 0 === t2 ? { protocols: xm, makeWebSocket: ym } : t2).protocols, r = void 0 === n2 ? xm : n2, i = void 0 === (t2 = t2.makeWebSocket) ? ym : t2;
        return new Y(function(t3) {
          var n3, o = new Pa(), a2 = i(e, r), s = false, u2 = false, c2 = function(e2) {
            if (n3) throw s = true, e2 = Error("Web socket message factory function called more than once"), t3.error(e2), e2;
            return n3 = e2.subscribe(function(e3) {
              a2.send(e3);
            }), o;
          };
          return a2.onopen = function() {
            u2 ? (s = true, a2.close()) : t3.next(c2);
          }, a2.onmessage = function(e2) {
            o.next(e2.data);
          }, a2.onerror = function(e2) {
            s = true, t3.error(Error(e2.message));
          }, a2.onclose = function(e2) {
            s || (s = true, u2 ? (t3.complete(), o.complete()) : t3.error(Error(1e3 === e2.code ? "Normal closure" : e2.reason)));
          }, function() {
            u2 = true, n3 && n3.unsubscribe(), s || (s = true, a2.close());
          };
        });
      }
      function yg() {
        this._listeners = {};
      }
      function zm(e) {
        return "undefined" != typeof Float32Array ? function() {
          function t2(e2, t3, n3) {
            o[0] = e2, t3[n3] = a2[0], t3[n3 + 1] = a2[1], t3[n3 + 2] = a2[2], t3[n3 + 3] = a2[3];
          }
          function n2(e2, t3, n3) {
            o[0] = e2, t3[n3] = a2[3], t3[n3 + 1] = a2[2], t3[n3 + 2] = a2[1], t3[n3 + 3] = a2[0];
          }
          function r(e2, t3) {
            return a2[0] = e2[t3], a2[1] = e2[t3 + 1], a2[2] = e2[t3 + 2], a2[3] = e2[t3 + 3], o[0];
          }
          function i(e2, t3) {
            return a2[3] = e2[t3], a2[2] = e2[t3 + 1], a2[1] = e2[t3 + 2], a2[0] = e2[t3 + 3], o[0];
          }
          var o = new Float32Array([-0]), a2 = new Uint8Array(o.buffer), s = 128 === a2[3];
          e.writeFloatLE = s ? t2 : n2, e.writeFloatBE = s ? n2 : t2, e.readFloatLE = s ? r : i, e.readFloatBE = s ? i : r;
        }() : function() {
          function t2(e2, t3, n3, r) {
            var i = 0 > t3 ? 1 : 0;
            if (i && (t3 = -t3), 0 === t3) e2(0 < 1 / t3 ? 0 : 2147483648, n3, r);
            else if (isNaN(t3)) e2(2143289344, n3, r);
            else if (34028234663852886e22 < t3) e2((i << 31 | 2139095040) >>> 0, n3, r);
            else if (11754943508222875e-54 > t3) e2((i << 31 | Math.round(t3 / 1401298464324817e-60)) >>> 0, n3, r);
            else {
              var o = Math.floor(Math.log(t3) / Math.LN2);
              e2((i << 31 | o + 127 << 23 | 8388607 & Math.round(t3 * Math.pow(2, -o) * 8388608)) >>> 0, n3, r);
            }
          }
          function n2(e2, t3, n3) {
            return n3 = e2(t3, n3), e2 = 2 * (n3 >> 31) + 1, t3 = n3 >>> 23 & 255, n3 &= 8388607, 255 === t3 ? n3 ? NaN : 1 / 0 * e2 : 0 === t3 ? 1401298464324817e-60 * e2 * n3 : e2 * Math.pow(2, t3 - 150) * (n3 + 8388608);
          }
          e.writeFloatLE = t2.bind(null, Am), e.writeFloatBE = t2.bind(null, Bm), e.readFloatLE = n2.bind(null, Cm), e.readFloatBE = n2.bind(null, Dm);
        }(), "undefined" != typeof Float64Array ? function() {
          function t2(e2, t3, n3) {
            o[0] = e2, t3[n3] = a2[0], t3[n3 + 1] = a2[1], t3[n3 + 2] = a2[2], t3[n3 + 3] = a2[3], t3[n3 + 4] = a2[4], t3[n3 + 5] = a2[5], t3[n3 + 6] = a2[6], t3[n3 + 7] = a2[7];
          }
          function n2(e2, t3, n3) {
            o[0] = e2, t3[n3] = a2[7], t3[n3 + 1] = a2[6], t3[n3 + 2] = a2[5], t3[n3 + 3] = a2[4], t3[n3 + 4] = a2[3], t3[n3 + 5] = a2[2], t3[n3 + 6] = a2[1], t3[n3 + 7] = a2[0];
          }
          function r(e2, t3) {
            return a2[0] = e2[t3], a2[1] = e2[t3 + 1], a2[2] = e2[t3 + 2], a2[3] = e2[t3 + 3], a2[4] = e2[t3 + 4], a2[5] = e2[t3 + 5], a2[6] = e2[t3 + 6], a2[7] = e2[t3 + 7], o[0];
          }
          function i(e2, t3) {
            return a2[7] = e2[t3], a2[6] = e2[t3 + 1], a2[5] = e2[t3 + 2], a2[4] = e2[t3 + 3], a2[3] = e2[t3 + 4], a2[2] = e2[t3 + 5], a2[1] = e2[t3 + 6], a2[0] = e2[t3 + 7], o[0];
          }
          var o = new Float64Array([-0]), a2 = new Uint8Array(o.buffer), s = 128 === a2[7];
          e.writeDoubleLE = s ? t2 : n2, e.writeDoubleBE = s ? n2 : t2, e.readDoubleLE = s ? r : i, e.readDoubleBE = s ? i : r;
        }() : function() {
          function t2(e2, t3, n3, r, i, o) {
            var a2 = 0 > r ? 1 : 0;
            if (a2 && (r = -r), 0 === r) e2(0, i, o + t3), e2(0 < 1 / r ? 0 : 2147483648, i, o + n3);
            else if (isNaN(r)) e2(0, i, o + t3), e2(2146959360, i, o + n3);
            else if (17976931348623157e292 < r) e2(0, i, o + t3), e2((a2 << 31 | 2146435072) >>> 0, i, o + n3);
            else if (22250738585072014e-324 > r) e2((r /= 5e-324) >>> 0, i, o + t3), e2((a2 << 31 | r / 4294967296) >>> 0, i, o + n3);
            else {
              var s = Math.floor(Math.log(r) / Math.LN2);
              1024 === s && (s = 1023), e2(4503599627370496 * (r *= Math.pow(2, -s)) >>> 0, i, o + t3), e2((a2 << 31 | s + 1023 << 20 | 1048576 * r & 1048575) >>> 0, i, o + n3);
            }
          }
          function n2(e2, t3, n3, r, i) {
            return t3 = e2(r, i + t3), r = e2(r, i + n3), e2 = 2 * (r >> 31) + 1, t3 = 4294967296 * (1048575 & r) + t3, 2047 === (n3 = r >>> 20 & 2047) ? t3 ? NaN : 1 / 0 * e2 : 0 === n3 ? 5e-324 * e2 * t3 : e2 * Math.pow(2, n3 - 1075) * (t3 + 4503599627370496);
          }
          e.writeDoubleLE = t2.bind(null, Am, 0, 4), e.writeDoubleBE = t2.bind(null, Bm, 4, 0), e.readDoubleLE = n2.bind(null, Cm, 0, 4), e.readDoubleBE = n2.bind(null, Dm, 4, 0);
        }(), e;
      }
      function Am(e, t2, n2) {
        t2[n2] = 255 & e, t2[n2 + 1] = e >>> 8 & 255, t2[n2 + 2] = e >>> 16 & 255, t2[n2 + 3] = e >>> 24;
      }
      function Bm(e, t2, n2) {
        t2[n2] = e >>> 24, t2[n2 + 1] = e >>> 16 & 255, t2[n2 + 2] = e >>> 8 & 255, t2[n2 + 3] = 255 & e;
      }
      function Cm(e, t2) {
        return (e[t2] | e[t2 + 1] << 8 | e[t2 + 2] << 16 | e[t2 + 3] << 24) >>> 0;
      }
      function Dm(e, t2) {
        return (e[t2] << 24 | e[t2 + 1] << 16 | e[t2 + 2] << 8 | e[t2 + 3]) >>> 0;
      }
      function Wa(e, t2) {
        this.lo = e >>> 0, this.hi = t2 >>> 0;
      }
      function sf(e, t2, n2) {
        this.fn = e, this.len = t2, this.next = void 0, this.val = n2;
      }
      function si() {
      }
      function Tt(e) {
        this.head = e.head, this.tail = e.tail, this.len = e.len, this.next = e.states;
      }
      function ja() {
        this.len = 0, this.tail = this.head = new sf(si, 0, 0), this.states = null;
      }
      function ti(e, t2, n2) {
        t2[n2] = 255 & e;
      }
      function ui(e, t2) {
        this.len = e, this.next = void 0, this.val = t2;
      }
      function vi(e, t2, n2) {
        for (; e.hi; ) t2[n2++] = 127 & e.lo | 128, e.lo = (e.lo >>> 7 | e.hi << 25) >>> 0, e.hi >>>= 7;
        for (; 127 < e.lo; ) t2[n2++] = 127 & e.lo | 128, e.lo >>>= 7;
        t2[n2++] = e.lo;
      }
      function wi(e, t2, n2) {
        t2[n2] = 255 & e, t2[n2 + 1] = e >>> 8 & 255, t2[n2 + 2] = e >>> 16 & 255, t2[n2 + 3] = e >>> 24;
      }
      function jc() {
        xi.call(this);
      }
      function Ut(e, t2, n2) {
        40 > e.length ? V.utf8.write(e, t2, n2) : t2.utf8Write ? t2.utf8Write(e, n2) : t2.write(e, n2);
      }
      function Yb(e, t2) {
        return RangeError("index out of range: " + e.pos + " + " + (t2 || 1) + " > " + e.len);
      }
      function La(e) {
        this.buf = e, this.pos = 0, this.len = e.length;
      }
      function yi() {
        var e = new Em(0, 0), t2 = 0;
        if (!(4 < this.len - this.pos)) {
          for (; 3 > t2; ++t2) {
            if (this.pos >= this.len) throw Yb(this);
            if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, 128 > this.buf[this.pos++]) return e;
          }
          return e.lo = (e.lo | (127 & this.buf[this.pos++]) << 7 * t2) >>> 0, e;
        }
        for (; 4 > t2; ++t2) if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 7 * t2) >>> 0, 128 > this.buf[this.pos++]) return e;
        if (e.lo = (e.lo | (127 & this.buf[this.pos]) << 28) >>> 0, e.hi = (e.hi | (127 & this.buf[this.pos]) >> 4) >>> 0, 128 > this.buf[this.pos++]) return e;
        if (t2 = 0, 4 < this.len - this.pos) {
          for (; 5 > t2; ++t2) if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, 128 > this.buf[this.pos++]) return e;
        } else for (; 5 > t2; ++t2) {
          if (this.pos >= this.len) throw Yb(this);
          if (e.hi = (e.hi | (127 & this.buf[this.pos]) << 7 * t2 + 3) >>> 0, 128 > this.buf[this.pos++]) return e;
        }
        throw Error("invalid varint encoding");
      }
      function zg(e, t2) {
        return (e[t2 - 4] | e[t2 - 3] << 8 | e[t2 - 2] << 16 | e[t2 - 1] << 24) >>> 0;
      }
      function Fm() {
        if (this.pos + 8 > this.len) throw Yb(this, 8);
        return new Em(zg(this.buf, this.pos += 4), zg(this.buf, this.pos += 4));
      }
      function Fd(e) {
        zi.call(this, e);
      }
      function tf(e, t2, n2) {
        if ("function" != typeof e) throw TypeError("rpcImpl must be a function");
        V.EventEmitter.call(this), this.rpcImpl = e, this.requestDelimited = !!t2, this.responseDelimited = !!n2;
      }
      function za(e) {
        return "string" == typeof e && /^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e) && "null" !== e;
      }
      function Gm(e) {
        try {
          var t2 = e.split(".").map(function(e2) {
            return Number(e2);
          });
        } catch (e2) {
          return false;
        }
        if (4 !== t2.length || 0 === t2[0]) return false;
        for (e = 0; e < t2.length; e++) {
          var n2 = t2[e];
          if (!Number.isInteger(n2) || 0 > n2 || 255 < n2) return false;
        }
        return true;
      }
      function Hm(e, t2) {
        if (!Array.isArray(t2) || 0 === t2.length || 32 < t2.length || t2.some(function(e2) {
          return 0 === e2.length || 32 < e2.length;
        })) throw new I("arguments is not valid", Ja);
        if (!za(e)) throw new I("ID is invalid", Ja);
      }
      function uf(e) {
        var t2 = e.attributes, n2 = e.attrSizeMap, r = e.maxAttrsCount, i = e.maxAttrValueSize;
        if (e = e.maxTotalSize, !yd(t2)) throw new I("attributes must be an object", Ja);
        if (Object.keys(t2).length > r) throw new ib("Exceed the limit of ".concat(r, " attributes"), se);
        if (0 === Object.keys(t2).length) throw new I("The attributes is an empty object", Ja);
        var o = 0, a2 = 0;
        for (t2 = Object.entries(t2); a2 < t2.length; a2++) {
          var s = ra(t2[a2], 2), u2 = s[1];
          s = new Blob([s[0]]).size;
          var c2 = new Blob([u2]).size;
          if (0 === s || 32 < s) throw new I("Invalid attribute key", Ja);
          if (c2 > i) throw new ib("Invalid attribute value, over the limit of ".concat(i, " bytes"), se);
          if ("string" != typeof u2 || 0 === u2.length) throw new I("Invalid attribute value", Ja);
          o += s, o += c2;
        }
        if (o > e) throw new ib("The attributes size overflow", se);
        if (void 0 !== n2) {
          if (Object.keys(n2).length > r) throw new ib("Exceed the limit of ".concat(r, " attributes"), se);
          for (o = r = 0, n2 = Object.entries(n2); o < n2.length; o++) {
            if (a2 = (t2 = ra(n2[o], 2))[1], 0 === (t2 = new Blob([t2[0]]).size)) throw new I("Invalid attribute key", Ja);
            if (a2 > i) throw new ib("Invalid attribute value, over the limit of ".concat(i, " bytes"), se);
            r += t2, r += a2;
          }
          if (r > e) throw new ib("The attributes size overflow", se);
        }
      }
      function Ag(e, t2) {
        return Math.floor(Math.random() * (Math.floor(t2) - Math.ceil(e) + 1)) + e;
      }
      function Bg() {
        var e = Ag(0, 4294967295), t2 = Ag(1, 4294967295);
        return new U(e, t2, true);
      }
      function Xa(e) {
        return e.toString().padEnd(32, "0");
      }
      function Im(e, t2) {
        return new TypeError("Unexpected ".concat(e, ": ").concat(t2));
      }
      function Jm(e, t2) {
        return e = e.split(".").map(function(e2) {
          return Number(e2);
        }), t2 = t2.split(".").map(function(e2) {
          return Number(e2);
        }), Math.sqrt(1e3 * Math.pow(e[0] - t2[0], 2) + 100 * Math.pow(e[1] - t2[1], 2) + 10 * Math.pow(e[2] - t2[2], 2) + 1 * Math.pow(e[3] - t2[3], 2));
      }
      function Km(e) {
        return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER) ? e.toNumber() : e.toString();
      }
      function Ai(e, t2) {
        t2 = "".concat(e).concat(t2 || "");
        var n2 = Lm.get(t2) || 1;
        return Lm.set(t2, n2 + 1), "".concat(e).concat(n2);
      }
      function Mm(e, t2) {
        var n2 = "number" == typeof t2 ? t2 : void 0 !== t2 && "string" != typeof t2 ? t2.code : void 0;
        return t2 = "number" != typeof t2 && "string" != typeof t2 && void 0 !== t2 && void 0 !== t2.serverCode ? t2.serverCode : void 0, n2 = "".concat(void 0 !== n2 ? " Error Code ".concat(n2) : "").concat(void 0 !== t2 ? ", server Code ".concat(t2) : ""), e = "string" == typeof e && e ? Cg(e) : Array.isArray(e) && "string" == typeof e[0] && e[0] ? Cg(Nm.apply(void 0, [e[0]].concat(G(e.slice(1))))) : "", "".concat("" === n2 ? "" : "".concat(n2, " - ")).concat(e);
      }
      function Om(e) {
        return Bi.apply(this, arguments);
      }
      function Bi() {
        return (Bi = J(w.mark(function e(t2) {
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                return e2.abrupt("return", new Promise(function(e3) {
                  setTimeout(function() {
                    e3();
                  }, t2);
                }));
              case 1:
              case "end":
                return e2.stop();
            }
          }, e);
        }))).apply(this, arguments);
      }
      function Pm(e) {
        return e instanceof Blob || "[object Blob]" === Object.prototype.toString.call(e);
      }
      function Dg(e) {
        var t2 = 255 & e, n2 = e >> 8 & 255, r = e >> 16 & 255;
        return "".concat(e >> 24 & 255, ".").concat(r, ".").concat(n2, ".").concat(t2);
      }
      function te(e, t2, n2) {
        return Ci.apply(this, arguments);
      }
      function Ci() {
        return (Ci = J(w.mark(function e(t2, n2, r) {
          var i, o, a2, s, u2, c2, l, f, h, p, d, v2, b, g, y2, m2, E2, _, O2, I2, A, k, R2, T2, N2, S2;
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                if (i = n2.body, o = n2.headers, a2 = void 0 === o ? {} : o, s = n2.timeout, u2 = void 0 === s ? 1e4 : s, c2 = n2.signal, l = n2.withCredentials, f = void 0 !== l && l, h = (r || {}).useBinaryResponse, p = void 0 !== h && h, (d = new XMLHttpRequest()).open("POST", t2, true), d.responseType = p ? "arraybuffer" : "text", d.withCredentials = f, d.timeout = u2, v2 = i instanceof FormData, b = i instanceof Uint8Array, !(1 < (g = Object.keys(a2).filter(function(e3) {
                  return "content-type" === e3.toLowerCase();
                })).length)) {
                  e2.next = 14;
                  break;
                }
                throw new RangeError("multiple content-type");
              case 14:
                0 === g.length && (b ? a2["Content-Type"] = "application/octet-stream" : v2 || (a2["Content-Type"] = "application/json"));
              case 15:
                if ("setRequestHeader" in d) {
                  e2.next = 46;
                  break;
                }
                return d.abort(), e2.next = 19, fetch(t2, { body: v2 || b ? i : JSON.stringify(i), cache: "no-cache", credentials: f ? "include" : "same-origin", headers: a2, method: "POST", mode: "cors", referrer: "no-referrer", signal: c2 });
              case 19:
                if (y2 = e2.sent, !(200 <= (m2 = y2.status) && 300 > m2 || 304 === m2)) {
                  e2.next = 31;
                  break;
                }
                if (!p) {
                  e2.next = 27;
                  break;
                }
                return e2.next = 25, y2.arrayBuffer();
              case 25:
                return E2 = e2.sent, e2.abrupt("return", { status: m2, responseData: E2 });
              case 27:
                return e2.next = 29, y2.text();
              case 29:
                return _ = e2.sent, e2.abrupt("return", { status: m2, responseText: _ });
              case 31:
                return O2 = new da(["Post XHR failure, status %d", m2]), e2.prev = 32, e2.next = 35, y2.text();
              case 35:
                throw I2 = e2.sent, O2.statusCode = m2, O2.message = I2 || "Request failed, status ".concat(m2), O2;
              case 41:
                throw e2.prev = 41, e2.t0 = e2.catch(32), O2.statusCode = m2, O2.message = "Request failed, status ".concat(m2), O2;
              case 46:
                if (0 !== Object.keys(a2).length) for (A = 0, k = Object.entries(a2); A < k.length; A++) R2 = ra(k[A], 2), T2 = R2[0], N2 = R2[1], d.setRequestHeader(T2, N2);
                return void 0 !== c2 && (S2 = function e3() {
                  d.abort(), c2.removeEventListener("abort", e3);
                }, c2.addEventListener("abort", S2)), v2 || b ? d.send(i) : d.send(JSON.stringify(i)), e2.abrupt("return", new Promise(function(e3, t3) {
                  d.onload = function() {
                    var n3 = d.status;
                    if (200 <= n3 && 300 > n3 || 304 === n3) e3(p ? { status: n3, responseData: d.response } : { status: n3, responseText: d.responseText });
                    else {
                      var r2 = new da(["Post XHR failure, status %d", n3]);
                      r2.statusCode = n3, r2.message = d.response || "Request failed, status ".concat(d.status), t3(r2);
                    }
                  }, d.ontimeout = function(e4) {
                    t3(new db(["XHR request timed out after %d ms", u2], { originalError: e4 }));
                  }, d.onerror = function() {
                    var e4 = new da(["Post XHR failure, status %d", d.status]);
                    e4.statusCode = d.status, e4.message = d.response || "Request failed, status ".concat(d.status), t3(e4);
                  }, d.onabort = function() {
                    try {
                      t3(new DOMException("The request aborted.", "AbortError"));
                    } catch (n3) {
                      var e4 = Error("The request aborted.");
                      e4.name = "AbortError", t3(e4);
                    }
                  };
                }));
              case 50:
              case "end":
                return e2.stop();
            }
          }, e, null, [[32, 41]]);
        }))).apply(this, arguments);
      }
      function Rm(e) {
        return Hi.apply(this, arguments);
      }
      function Hi() {
        return (Hi = J(w.mark(function e(t2) {
          var n2;
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                return (n2 = new Image()).src = t2, e2.abrupt("return", new Promise(function(e3, t3) {
                  n2.onload = function() {
                    e3({ width: n2.width, height: n2.height });
                  }, n2.onerror = t3;
                }));
              case 3:
              case "end":
                return e2.stop();
            }
          }, e);
        }))).apply(this, arguments);
      }
      function Xt(e, t2) {
        return Ii.apply(this, arguments);
      }
      function Ii() {
        return (Ii = J(w.mark(function e(t2, n2) {
          var r, i, o, a2, s, u2, c2, l, f, h;
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                if (r = t2.thumbnailHeight, i = void 0 === r ? 0 : r, o = t2.thumbnailWidth, a2 = void 0 === o ? 0 : o, s = t2.width, u2 = void 0 === s ? 0 : s, c2 = t2.height, l = void 0 === c2 ? 0 : c2, f = t2.thumbnail, h = [], "number" == typeof i && "number" == typeof a2 && "number" == typeof u2 && "number" == typeof l) {
                  e2.next = 5;
                  break;
                }
                throw new I("Invalid message params", wf);
              case 5:
                return 0 >= u2 && 0 >= l && h.push(Rm(Sm(n2)).then(function(e3) {
                  u2 = e3.width, l = e3.height;
                })), 0 >= a2 && 0 >= i && void 0 !== f && h.push(Ji(f).then(function() {
                  var e3 = J(w.mark(function e4(t3) {
                    var n3;
                    return w.wrap(function(e5) {
                      for (; ; ) switch (e5.prev = e5.next) {
                        case 0:
                          return e5.next = 2, Rm(Sm(t3));
                        case 2:
                          n3 = e5.sent, a2 = n3.width, i = n3.height;
                        case 5:
                        case "end":
                          return e5.stop();
                      }
                    }, e4);
                  }));
                  return function(t3) {
                    return e3.apply(this, arguments);
                  };
                }())), e2.next = 9, Promise.all(h).catch(function() {
                });
              case 9:
                return e2.abrupt("return", { width: u2, height: l, thumbnailWidth: a2, thumbnailHeight: i });
              case 10:
              case "end":
                return e2.stop();
            }
          }, e);
        }))).apply(this, arguments);
      }
      function Tm(e, t2) {
        if (!yd(e)) throw new I("message object is not a plain object", t2);
        if (void 0 === e.messageType) if (e.rawMessage instanceof Uint8Array) {
          if (e.messageType = "RAW", void 0 !== e.text) throw new I("Raw messages cannot have text property. Use description instead", t2);
        } else {
          if ("string" != typeof e.text) throw new I("messageType is undefined", t2);
          if (e.messageType = "TEXT", void 0 !== e.rawMessage) throw new I("Text messages cannot have rawMessage property", t2);
        }
      }
      function Gg(e) {
        return Ki.apply(this, arguments);
      }
      function Ki() {
        return (Ki = J(w.mark(function e(t2) {
          var n2, r, i, o, a2, s, u2, c2, l, f, h, p, d, v2, b, g, y2, m2, E2, _, O2;
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                if (n2 = t2.message, r = t2.peerId, i = t2.toPeer, o = t2.session, a2 = t2.errorCodes, s = t2.diff, u2 = t2.logger, c2 = t2.options, void 0 !== o) {
                  e2.next = 3;
                  break;
                }
                throw new K("The client is not logged in. Cannot do the operation", a2.NOT_LOGGED_IN);
              case 3:
                if (l = false, "TEXT" !== n2.messageType || !n2.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix") || !i) {
                  e2.next = 11;
                  break;
                }
                if (f = n2.text.split("_"), h = ra(f, 3), p = h[0], d = h[1], void 0 !== h[2] && za(d) && "AgoraRTMLegacyEndcallCompatibleMessagePrefix" === p) {
                  e2.next = 10;
                  break;
                }
                throw new I("Message is not valid", ve);
              case 10:
                l = true;
              case 11:
                if (v2 = Date.now(), b = o.messageSentTimes.length - 1, !((g = o.messageSentTimes[b]) && g + 3e3 < v2)) {
                  e2.next = 18;
                  break;
                }
                o.messageSentTimes = [v2], e2.next = 29;
                break;
              case 18:
                y2 = b;
              case 19:
                if (!(0 <= y2)) {
                  e2.next = 28;
                  break;
                }
                if (!(o.messageSentTimes[y2] + 3e3 < v2)) {
                  e2.next = 23;
                  break;
                }
                return o.messageSentTimes = o.messageSentTimes.slice(y2 + 1, b + 1), e2.abrupt("break", 28);
              case 23:
                if (!(180 <= b - y2 + 1)) {
                  e2.next = 25;
                  break;
                }
                throw new ib("Message sent failed, exceeded the 180 message in 3 seconds", a2.TOO_OFTEN);
              case 25:
                y2--, e2.next = 19;
                break;
              case 28:
                o.messageSentTimes.push(v2);
              case 29:
                e2.t0 = n2.messageType, e2.next = "TEXT" === e2.t0 ? 32 : "RAW" === e2.t0 ? 37 : "FILE" === e2.t0 || "IMAGE" === e2.t0 ? 39 : 40;
                break;
              case 32:
                if (!l) {
                  e2.next = 36;
                  break;
                }
                return m2 = n2.text.split("_"), E2 = ra(m2, 3), _ = E2[1], O2 = E2[2], u2.info("[rtm-API] EndCall message send api is called"), e2.abrupt("return", o.sendInvitationMessage({ peerId: r, type: "CallCancel", extra: O2, channelId: _, callId: "0" }));
              case 36:
                return e2.abrupt("return", o.sendTextMessage(n2.text, r, i, c2, 1e4 - s));
              case 37:
                return void 0 === n2.description && (n2.description = ""), e2.abrupt("return", o.sendRawMessage(n2.rawMessage, n2.description, r, i, c2, 1e4 - s));
              case 39:
                return e2.abrupt("return", o.sendMediaMessage(n2.messageType, n2, r, i, c2, 1e4 - s));
              case 40:
                throw new I("Invalid message type", ve);
              case 41:
              case "end":
                return e2.stop();
            }
          }, e);
        }))).apply(this, arguments);
      }
      function Yt(e) {
        var t2 = !(1 < arguments.length && void 0 !== arguments[1]) || arguments[1], n2 = e.replace(/(https?:\/\/)?(www.)?/i, "");
        return t2 || (n2 = n2.split(".").slice(e.length - 2).join(".")), -1 !== n2.indexOf("/") ? n2.split("/")[0] : n2;
      }
      function oa(e) {
        if ("string" != typeof e) return "[Sensitive Info]";
        var t2 = Math.floor(0.7 * e.length), n2 = e.length;
        return Um(e, t2, n2, "*".repeat(n2 - t2));
      }
      function Vm(e, t2, n2) {
        function r(i) {
          if (void 0 === e) return e;
          if (Il(i)) return i;
          if (Array.isArray(i)) return i.map(r);
          var o = {}, a2 = 0;
          for (i = Hg(i); a2 < i.length; a2++) {
            var s = ra(i[a2], 2), u2 = s[0];
            if ("string" == typeof (s = s[1]) && n2.includes(u2)) {
              o[u2] = "string" == typeof s ? oa(s) : "[Sensitive Info]";
              break;
            }
            t2.includes(u2) ? o[u2] = "[Hidden Info]" : o[u2] = null == s ? s : n2.includes(u2) ? "[Sensitive Info]" : r(s);
          }
          return o;
        }
        return Array.isArray(e) ? e.map(r) : r(e);
      }
      function Wm(e) {
        return Object.getOwnPropertyNames(e).forEach(function(t2) {
          "object" == X(t2 = e[t2]) && null !== t2 && Wm(t2);
        }), Object.freeze(e);
      }
      function pa(e) {
        return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset, e.byteOffset + e.byteLength));
      }
      function Ig(e) {
        return new TextEncoder().encode(e).length;
      }
      function Xm() {
        for (var e = 0, t2 = arguments.length, n2 = Array(t2), r = 0; r < t2; r++) n2[r] = arguments[r];
        for (t2 = 0; t2 < n2.length; t2++) e += n2[t2].length;
        for (e = new Uint8Array(e), r = t2 = 0; r < n2.length; r++) {
          var i = n2[r];
          e.set(i, t2), t2 += i.length;
        }
        return e;
      }
      function we(e, t2, n2) {
        var r = e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);
        if (e = null == r ? void 0 : r[1], r = null == r ? void 0 : r[2]) {
          var i;
          for (r = r.substr(1).split("&"), i = 0; i < r.length; i++) if (r[i].split("=")[0] == t2) {
            r[i] = t2 + "=" + encodeURIComponent(n2);
            break;
          }
          return i == r.length && r.push(t2 + "=" + encodeURIComponent(n2)), e + "?" + r.join("&");
        }
        return e + "?" + t2 + "=" + encodeURIComponent(n2);
      }
      function Ji(e) {
        return new Promise(function(t2, n2) {
          var r = new FileReader();
          r.onloadend = function() {
            var e2 = r.result || new ArrayBuffer(0);
            t2(e2);
          }, r.onerror = n2, r.readAsArrayBuffer(e);
        });
      }
      function Zt(e, t2) {
        e = e = [e], "string" == typeof (t2 = t2 || {}) && (t2 = { type: t2 });
        try {
          var n2 = new Blob(e, t2);
        } catch (i) {
          if ("TypeError" !== i.name) throw i;
          n2 = new ("undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder)();
          for (var r = 0; r < e.length; r += 1) n2.append(e[r]);
          n2 = n2.getBlob(t2.type);
        }
        return n2;
      }
      function Um(e, t2, n2, r) {
        return "string" != typeof e ? "[Sensitive Info]" : e.substring(0, t2) + r + e.substring(n2);
      }
      function Ym(e) {
        var t2 = [];
        return function e2(n2) {
          if (null === n2 || "object" !== X(n2)) return n2;
          if (-1 !== t2.indexOf(n2)) return "[Circular]";
          if (t2.push(n2), "function" == typeof n2.toJSON) try {
            var r = e2(n2.toJSON());
            return t2.pop(), r;
          } catch (e3) {
            return "[Throws: " + (e3 ? e3.message : "?") + "]";
          }
          return Array.isArray(n2) ? (r = n2.map(e2), t2.pop(), r) : (r = Object.keys(n2).reduce(function(t3, r2) {
            e: {
              if ($t.call(n2, r2)) try {
                var i = n2[r2];
                break e;
              } catch (e3) {
                i = "[Throws: " + (e3 ? e3.message : "?") + "]";
                break e;
              }
              i = n2[r2];
            }
            return t3[r2] = e2(i), t3;
          }, {}), t2.pop(), r);
        }(e);
      }
      function au(e) {
        if (!(100 < (e = String(e)).length) && (e = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))) {
          var t2 = parseFloat(e[1]);
          switch ((e[2] || "ms").toLowerCase()) {
            case "years":
            case "year":
            case "yrs":
            case "yr":
            case "y":
              return 315576e5 * t2;
            case "weeks":
            case "week":
            case "w":
              return 6048e5 * t2;
            case "days":
            case "day":
            case "d":
              return 864e5 * t2;
            case "hours":
            case "hour":
            case "hrs":
            case "hr":
            case "h":
              return 36e5 * t2;
            case "minutes":
            case "minute":
            case "mins":
            case "min":
            case "m":
              return 6e4 * t2;
            case "seconds":
            case "second":
            case "secs":
            case "sec":
            case "s":
              return 1e3 * t2;
            case "milliseconds":
            case "millisecond":
            case "msecs":
            case "msec":
            case "ms":
              return t2;
          }
        }
      }
      function Jg(e, t2, n2, r) {
        return Math.round(e / n2) + " " + r + (t2 >= 1.5 * n2 ? "s" : "");
      }
      function bu(e) {
        var t2 = e.areas, n2 = e.excludedArea;
        if (1 === t2.length && t2[0] === F.GLOBAL && n2 === F.CHINA) return xe([F.OVERSEA]);
        if (t2.includes(F.GLOBAL)) {
          if (e = xf(Kg).filter(function(e2) {
            return e2 !== F.GLOBAL && e2 !== F.OVERSEA;
          }), n2 in yf) {
            t2 = yf[n2];
            var r = [].concat(G(null != t2 ? t2 : []), [n2]);
            return xe(e.filter(function(e2) {
              return !r.includes(e2);
            }));
          }
          if (Zm(n2)) {
            var i = cu(n2);
            return xe(e.filter(function(e2) {
              return e2 !== n2 && e2 !== i;
            }));
          }
        }
        if (Zm(n2) || n2 in yf) return xe(t2);
        throw new I("Invalid excludedArea area config");
      }
      function Ma(e, t2, n2) {
        void 0 === n2 && (n2 = Object.getOwnPropertyDescriptor(e, t2));
        var r = n2.value;
        return n2.value = function() {
          for (var e2 = this, n3 = arguments.length, i = Array(n3), o = 0; o < n3; o++) i[o] = arguments[o];
          this.invokeTracker.apply(this, ["%s: ".concat(0 < i.length ? "%s with args: ".concat(i.map(function() {
            return "%o";
          })) : "%s"), this.name, t2].concat(G(i.map(ye))));
          try {
            var a2 = r.apply(this, i);
          } catch (e3) {
            throw this.logError.apply(this, ["".concat(void 0 !== e3.code ? "Error Code ".concat(e3.code, ": ") : "", "%s failed").concat(0 < i.length ? " with args: ".concat(i.map(function() {
              return "%o";
            })) : ""), t2].concat(G(i.map(ye)))), e3.originalError && this.logError(e3.originalError), this.errorTracker(e3), e3;
          }
          var s = Date.now();
          return J(w.mark(function n4() {
            var r2, o2;
            return w.wrap(function(n5) {
              for (; ; ) switch (n5.prev = n5.next) {
                case 0:
                  return n5.prev = 0, n5.next = 3, a2;
                case 3:
                  r2 = n5.sent, n5.next = 12;
                  break;
                case 6:
                  return n5.prev = 6, n5.t0 = n5.catch(0), e2.logError.apply(e2, ["".concat(void 0 !== n5.t0.code ? "Error Code ".concat(n5.t0.code, ": ") : "", "%s failed").concat(0 < i.length ? " with args: ".concat(i.map(function() {
                    return "%o";
                  })) : ""), t2].concat(G(i.map(ye)))), n5.t0.originalError && e2.logError(n5.t0.originalError), e2.errorTracker(n5.t0), n5.abrupt("return");
                case 12:
                  r2 !== a2 ? void 0 === r2 ? e2.resultTracker("%s promise resolves after %dms", t2, Date.now() - s) : e2.resultTracker("%s promise resolves after %dms, result is %o", t2, Date.now() - s, ye(r2)) : "Object" !== Ac(r2) || yd(r2) ? e2.resultTracker("%s result is %o", t2, ye(r2)) : e2.resultTracker("%s result is %s", t2, r2.name || (null === (o2 = r2.constructor) || void 0 === o2 ? void 0 : o2.name));
                case 13:
                case "end":
                  return n5.stop();
              }
            }, n4, null, [[0, 6]]);
          }))(), a2;
        }, n2;
      }
      function Nb(e, t2, n2) {
        void 0 === n2 && (n2 = Object.getOwnPropertyDescriptor(e, t2));
        var r = n2.value;
        return n2.value = function() {
          for (var e2 = this, n3 = arguments.length, i = Array(n3), o = 0; o < n3; o++) i[o] = arguments[o];
          this.invokeTracker.apply(this, ["%s: ".concat(0 < i.length ? "%s with args: ".concat(i.map(function() {
            return "%o";
          })) : "%s"), this.name, t2].concat(i));
          try {
            var a2 = r.apply(this, i);
          } catch (e3) {
            throw this.logError.apply(this, ["".concat(void 0 !== e3.code ? "Error Code ".concat(e3.code, ": ") : "", "%s failed").concat(0 < i.length ? " with args: ".concat(i.map(function() {
              return "%o";
            })) : ""), t2].concat(i)), e3.originalError && this.logError(e3.originalError), this.errorTracker(e3), e3;
          }
          var s = Date.now();
          return J(w.mark(function n4() {
            var r2, o2;
            return w.wrap(function(n5) {
              for (; ; ) switch (n5.prev = n5.next) {
                case 0:
                  return n5.prev = 0, n5.next = 3, a2;
                case 3:
                  r2 = n5.sent, n5.next = 12;
                  break;
                case 6:
                  return n5.prev = 6, n5.t0 = n5.catch(0), e2.logError.apply(e2, ["".concat(void 0 !== n5.t0.code ? "Error Code ".concat(n5.t0.code, ": ") : "", "%s failed").concat(0 < i.length ? " with args: ".concat(i.map(function() {
                    return "%o";
                  })) : ""), t2].concat(i)), n5.t0.originalError && e2.logError(n5.t0.originalError), e2.errorTracker(n5.t0), n5.abrupt("return");
                case 12:
                  r2 !== a2 ? void 0 === r2 ? e2.resultTracker("%s promise resolves after %dms", t2, Date.now() - s) : e2.resultTracker("%s promise resolves after %dms, result is %o", t2, Date.now() - s, r2) : "Object" !== Ac(r2) || yd(r2) ? e2.resultTracker("%s result is %o", t2, r2) : e2.resultTracker("%s result is %s", t2, r2.name || (null === (o2 = r2.constructor) || void 0 === o2 ? void 0 : o2.name));
                case 13:
                case "end":
                  return n5.stop();
              }
            }, n4, null, [[0, 6]]);
          }))(), a2;
        }, n2;
      }
      function du(e, t2) {
        var n2 = "".concat(e, "Uri");
        if ("number" != typeof (n2 = Li[n2]) || 0 === n2) throw new TypeError("Got Unknown URI Name");
        return t2 = new (e = $m[e])(t2), t2 = e.encode(t2).finish(), new eu({ uri: n2, data: t2 });
      }
      function an(e, t2) {
        return "".concat(e.split(".").join("-"), ".edge.").concat(t2 ? "sd-rtn.com" : "agora.io");
      }
      function eb(e, t2, n2) {
        return Mi.apply(this, arguments);
      }
      function Mi() {
        return (Mi = J(w.mark(function e(t2, n2, r) {
          var i, o;
          return w.wrap(function(e2) {
            for (; ; ) switch (e2.prev = e2.next) {
              case 0:
                e2.next = 2;
                break;
              case 2:
                return i = fu[t2].encode(n2).finish(), o = function() {
                  var e3 = J(w.mark(function e4(n3) {
                    var a2, s, u2, c2 = arguments;
                    return w.wrap(function(e5) {
                      for (; ; ) switch (e5.prev = e5.next) {
                        case 0:
                          if (!(3 < (s = 1 < c2.length && void 0 !== c2[1] ? c2[1] : 0))) {
                            e5.next = 3;
                            break;
                          }
                          return e5.abrupt("return");
                        case 3:
                          return u2 = we(u2 = r ? "https://".concat(null !== (a2 = null == M ? void 0 : M.PROXY_NGINX[0]) && void 0 !== a2 ? a2 : "webrtc-cloud-proxy.sd-rtn.com", "/rs/?h=").concat(n3, "&p=6443&d=events/proto-raw") : "https://".concat(n3, ":6443/events/proto-raw"), "sentTs", Math.ceil(Date.now() / 1e3).toString()), u2 = we(u2, "id", gu[t2].toString()), e5.next = 8, te(u2, { body: i, timeout: 2e4, headers: { "Content-Type": "application/octet-stream" } }).catch(function(e6) {
                            return o(n3, s + 1);
                          });
                        case 8:
                        case "end":
                          return e5.stop();
                      }
                    }, e4);
                  }));
                  return function(t3) {
                    return e3.apply(this, arguments);
                  };
                }(), e2.prev = 4, e2.next = 7, o((null == M ? void 0 : M.EVENT_REPORT_DOMAIN[0]) || "webcollector-rtm.agora.io");
              case 7:
                e2.next = 13;
                break;
              case 9:
                return e2.prev = 9, e2.t0 = e2.catch(4), e2.next = 13, o(M && bn(1 < (null == M ? void 0 : M.EVENT_REPORT_DOMAIN.length) ? null == M ? void 0 : M.EVENT_REPORT_DOMAIN.slice(1) : null == M ? void 0 : M.EVENT_REPORT_DOMAIN) || "rtm.statscollector.sd-rtn.com");
              case 13:
              case "end":
                return e2.stop();
            }
          }, e, null, [[4, 9]]);
        }))).apply(this, arguments);
      }
      function fb(e) {
        return void 0 === e ? U.fromNumber(0) : U.fromNumber(Date.now() - e);
      }
      function hu(e) {
        return btoa(String.fromCharCode.apply({}, e.replace(/\r|\n/g, "").replace(/([\dA-Fa-f]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ").map(function(e2) {
          return parseInt(e2, 16);
        }))).replace(/={1,2}$/, "");
      }
      function Lg(e, t2) {
        return U.fromValue(e).eq(t2);
      }
      function Mg(e, t2) {
        var n2 = void 0 === t2 ? e.val : t2, r = e.isBoolean;
        t2 = e.isNumber;
        var i = e.oneof, o = e.len;
        if (2 !== [r, t2, i].filter(function(e2) {
          return !e2;
        }).length) throw new TypeError("invalid field type");
        if (void 0 !== n2 && (e = false, void 0 !== i && (i = Ni(i), iu(i, Lg).length === i.length && void 0 !== ju(i, function(e2) {
          return Lg(n2, e2);
        }) && (e = true)), r = void 0 !== r && (0 === n2 || 1 === n2) && 1 === o, t2 = void 0 !== t2 && n2.toString(2).length <= o, !(e || r || t2))) throw Error("invalid field value");
      }
      function cn(e) {
        return function() {
          var t2 = e();
          if (!t2) throw new K("Client is not logged in. Cannot do the operation");
          return t2;
        };
      }
      var Ya = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}, Ng = function(e) {
        return e && e.Math == Math && e;
      }, y = Ng("object" == typeof globalThis && globalThis) || Ng("object" == typeof window && window) || Ng("object" == typeof self && self) || Ng("object" == typeof Ya && Ya) || /* @__PURE__ */ function() {
        return this;
      }() || Function("return this")(), R = function(e) {
        try {
          return !!e();
        } catch (e2) {
          return true;
        }
      }, ka = !R(function() {
        return 7 != Object.defineProperty({}, 1, { get: function() {
          return 7;
        } })[1];
      }), dn = {}.propertyIsEnumerable, en = Object.getOwnPropertyDescriptor, zf = en && !dn.call({ 1: 2 }, 1) ? function(e) {
        return !!(e = en(this, e)) && e.enumerable;
      } : dn, dd = function(e, t2) {
        return { enumerable: !(1 & e), configurable: !(2 & e), writable: !(4 & e), value: t2 };
      }, ku = {}.toString, Zb = function(e) {
        return ku.call(e).slice(8, -1);
      }, lu = "".split, Af = R(function() {
        return !Object("z").propertyIsEnumerable(0);
      }) ? function(e) {
        return "String" == Zb(e) ? lu.call(e, "") : Object(e);
      } : Object, jb = function(e) {
        if (null == e) throw TypeError("Can't call method on " + e);
        return e;
      }, qb = function(e) {
        return Af(jb(e));
      }, ha = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e;
      }, lc = function(e, t2) {
        if (!ha(e)) return e;
        var n2, r;
        if (t2 && "function" == typeof (n2 = e.toString) && !ha(r = n2.call(e)) || "function" == typeof (n2 = e.valueOf) && !ha(r = n2.call(e)) || !t2 && "function" == typeof (n2 = e.toString) && !ha(r = n2.call(e))) return r;
        throw TypeError("Can't convert object to primitive value");
      }, Qa = function(e) {
        return Object(jb(e));
      }, mu = {}.hasOwnProperty, Q = function(e, t2) {
        return mu.call(Qa(e), t2);
      }, ze = y.document, Og = ha(ze) && ha(ze.createElement), fn = !ka && !R(function() {
        return 7 != Object.defineProperty(Og ? ze.createElement("div") : {}, "a", { get: function() {
          return 7;
        } }).a;
      }), gn = Object.getOwnPropertyDescriptor, Fb = { f: ka ? gn : function(e, t2) {
        if (e = qb(e), t2 = lc(t2, true), fn) try {
          return gn(e, t2);
        } catch (e2) {
        }
        if (Q(e, t2)) return dd(!zf.call(e, t2), e[t2]);
      } }, va = function(e) {
        if (!ha(e)) throw TypeError(String(e) + " is not an object");
        return e;
      }, hn = Object.defineProperty, Ra = { f: ka ? hn : function(e, t2, n2) {
        if (va(e), t2 = lc(t2, true), va(n2), fn) try {
          return hn(e, t2, n2);
        } catch (e2) {
        }
        if ("get" in n2 || "set" in n2) throw TypeError("Accessors not supported");
        return "value" in n2 && (e[t2] = n2.value), e;
      } }, Na = ka ? function(e, t2, n2) {
        return Ra.f(e, t2, dd(1, n2));
      } : function(e, t2, n2) {
        return e[t2] = n2, e;
      }, Oi = function(e, t2) {
        try {
          Na(y, e, t2);
        } catch (n2) {
          y[e] = t2;
        }
        return t2;
      }, ed = y["__core-js_shared__"] || Oi("__core-js_shared__", {}), nu = Function.toString;
      "function" != typeof ed.inspectSource && (ed.inspectSource = function(e) {
        return nu.call(e);
      });
      var Pi = ed.inspectSource, jn = y.WeakMap, ou = "function" == typeof jn && /native code/.test(Pi(jn)), fd = $a(function(e) {
        (e.exports = function(e2, t2) {
          return ed[e2] || (ed[e2] = void 0 !== t2 ? t2 : {});
        })("versions", []).push({ version: "3.12.1", mode: "global", copyright: "Â© 2021 Denis Pushkarev (zloirock.ru)" });
      }), pu = 0, qu = Math.random(), Ae = function(e) {
        return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++pu + qu).toString(36);
      }, kn = fd("keys"), Pg = function(e) {
        return kn[e] || (kn[e] = Ae(e));
      }, Be = {}, ru = y.WeakMap;
      if (ou || ed.state) var Gd = ed.state || (ed.state = new ru()), su = Gd.get, ln = Gd.has, tu = Gd.set, Qi = function(e, t2) {
        if (ln.call(Gd, e)) throw new TypeError("Object already initialized");
        return t2.facade = e, tu.call(Gd, e, t2), t2;
      }, Qg = function(e) {
        return su.call(Gd, e) || {};
      }, Ri = function(e) {
        return ln.call(Gd, e);
      };
      else {
        var Ce = Pg("state");
        Be[Ce] = true, Qi = function(e, t2) {
          if (Q(e, Ce)) throw new TypeError("Object already initialized");
          return t2.facade = e, Na(e, Ce, t2), t2;
        }, Qg = function(e) {
          return Q(e, Ce) ? e[Ce] : {};
        }, Ri = function(e) {
          return Q(e, Ce);
        };
      }
      var Za = { set: Qi, get: Qg, has: Ri, enforce: function(e) {
        return Ri(e) ? Qg(e) : Qi(e, {});
      }, getterFor: function(e) {
        return function(t2) {
          var n2;
          if (!ha(t2) || (n2 = Qg(t2)).type !== e) throw TypeError("Incompatible receiver, " + e + " required");
          return n2;
        };
      } }, Ta = $a(function(e) {
        var t2 = Za.get, n2 = Za.enforce, r = String(String).split("String");
        (e.exports = function(e2, t3, i, o) {
          var a2 = !!o && !!o.unsafe, s = !!o && !!o.enumerable;
          if (o = !!o && !!o.noTargetGet, "function" == typeof i) {
            "string" != typeof t3 || Q(i, "name") || Na(i, "name", t3);
            var u2 = n2(i);
            u2.source || (u2.source = r.join("string" == typeof t3 ? t3 : ""));
          }
          e2 === y ? s ? e2[t3] = i : Oi(t3, i) : (a2 ? !o && e2[t3] && (s = true) : delete e2[t3], s ? e2[t3] = i : Na(e2, t3, i));
        })(Function.prototype, "toString", function() {
          return "function" == typeof this && t2(this).source || Pi(this);
        });
      }), mn = function(e) {
        return "function" == typeof e ? e : void 0;
      }, mc = function(e, t2) {
        return 2 > arguments.length ? mn(y[e]) || mn(y[e]) : y[e] && y[e][t2] || y[e] && y[e][t2];
      }, uu = Math.ceil, vu = Math.floor, $b = function(e) {
        return isNaN(e = +e) ? 0 : (0 < e ? vu : uu)(e);
      }, wu = Math.min, ta = function(e) {
        return 0 < e ? wu($b(e), 9007199254740991) : 0;
      }, xu = Math.max, yu = Math.min, xb = function(e, t2) {
        return 0 > (e = $b(e)) ? xu(e + t2, 0) : yu(e, t2);
      }, nn = function(e) {
        return function(t2, n2, r) {
          t2 = qb(t2);
          var i = ta(t2.length);
          if (r = xb(r, i), e && n2 != n2) {
            for (; i > r; ) if ((n2 = t2[r++]) != n2) return true;
          } else for (; i > r; r++) if ((e || r in t2) && t2[r] === n2) return e || r || 0;
          return !e && -1;
        };
      }, on = nn(true), Si = nn(false), pn = function(e, t2) {
        e = qb(e);
        var n2, r = 0, i = [];
        for (n2 in e) !Q(Be, n2) && Q(e, n2) && i.push(n2);
        for (; t2.length > r; ) Q(e, n2 = t2[r++]) && (~Si(i, n2) || i.push(n2));
        return i;
      }, Rg = "constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "), zu = Rg.concat("length", "prototype"), Hd = { f: Object.getOwnPropertyNames || function(e) {
        return pn(e, zu);
      } }, Bf = { f: Object.getOwnPropertySymbols }, qn = mc("Reflect", "ownKeys") || function(e) {
        var t2 = Hd.f(va(e)), n2 = Bf.f;
        return n2 ? t2.concat(n2(e)) : t2;
      }, rn = function(e, t2) {
        for (var n2 = qn(t2), r = Ra.f, i = Fb.f, o = 0; o < n2.length; o++) {
          var a2 = n2[o];
          Q(e, a2) || r(e, a2, i(t2, a2));
        }
      }, Au = /#|\.prototype\./, nc = function(e, t2) {
        return (e = Bu[Cu(e)]) == Du || e != Eu && ("function" == typeof t2 ? R(t2) : !!t2);
      }, Cu = nc.normalize = function(e) {
        return String(e).replace(Au, ".").toLowerCase();
      }, Bu = nc.data = {}, Eu = nc.NATIVE = "N", Du = nc.POLYFILL = "P", Fu = Fb.f, N = function(e, t2) {
        var n2, r, i, o = e.target, a2 = e.global, s = e.stat;
        if (r = a2 ? y : s ? y[o] || Oi(o, {}) : (y[o] || {}).prototype) for (i in t2) {
          var u2 = t2[i], c2 = e.noTargetGet ? (n2 = Fu(r, i)) && n2.value : r[i];
          if (!(n2 = nc(a2 ? i : o + (s ? "." : "#") + i, e.forced)) && void 0 !== c2) {
            if (typeof u2 == typeof c2) continue;
            rn(u2, c2);
          }
          (e.sham || c2 && c2.sham) && Na(u2, "sham", true);
          try {
            Ta(r, i, u2, e);
          } catch (e2) {
          }
        }
      }, yb = function(e) {
        if ("function" != typeof e) throw TypeError(String(e) + " is not a function");
        return e;
      }, Id = function(e, t2, n2) {
        if (yb(e), void 0 === t2) return e;
        switch (n2) {
          case 0:
            return function() {
              return e.call(t2);
            };
          case 1:
            return function(n3) {
              return e.call(t2, n3);
            };
          case 2:
            return function(n3, r) {
              return e.call(t2, n3, r);
            };
          case 3:
            return function(n3, r, i) {
              return e.call(t2, n3, r, i);
            };
        }
        return function() {
          return e.apply(t2, arguments);
        };
      }, gd = Array.isArray || function(e) {
        return "Array" == Zb(e);
      }, De = mc("navigator", "userAgent") || "", sn = y.process, tn = sn && sn.versions, un = tn && tn.v8;
      if (un) var hd = un.split("."), Ti = 4 > hd[0] ? 1 : hd[0] + hd[1];
      else De && (hd = De.match(/Edge\/(\d+)/), (!hd || 74 <= hd[1]) && (hd = De.match(/Chrome\/(\d+)/)) && (Ti = hd[1]));
      var id = Ti && +Ti, oc = !!Object.getOwnPropertySymbols && !R(function() {
        return !String(Symbol()) || !Symbol.sham && id && 41 > id;
      }), vn = oc && !Symbol.sham && "symbol" == typeof Symbol.iterator, Cf = fd("wks"), Df = y.Symbol, Gu = vn ? Df : Df && Df.withoutSetter || Ae, qa = function(e) {
        return Q(Cf, e) && (oc || "string" == typeof Cf[e]) || (oc && Q(Df, e) ? Cf[e] = Df[e] : Cf[e] = Gu("Symbol." + e)), Cf[e];
      }, Hu = qa("species"), Sg = function(e, t2) {
        if (gd(e)) {
          var n2 = e.constructor;
          "function" != typeof n2 || n2 !== Array && !gd(n2.prototype) ? ha(n2) && (null === (n2 = n2[Hu]) && (n2 = void 0)) : n2 = void 0;
        }
        return new (void 0 === n2 ? Array : n2)(0 === t2 ? 0 : t2);
      }, wn = [].push, jd = function(e) {
        var t2 = 1 == e, n2 = 2 == e, r = 3 == e, i = 4 == e, o = 6 == e, a2 = 7 == e, s = 5 == e || o;
        return function(u2, c2, l, f) {
          var h = Qa(u2), p = Af(h);
          c2 = Id(c2, l, 3), l = ta(p.length);
          var d, v2 = 0;
          for (f = f || Sg, u2 = t2 ? f(u2, l) : n2 || a2 ? f(u2, 0) : void 0; l > v2; v2++) if ((s || v2 in p) && (d = c2(f = p[v2], v2, h), e)) if (t2) u2[v2] = d;
          else if (d) switch (e) {
            case 3:
              return true;
            case 5:
              return f;
            case 6:
              return v2;
            case 2:
              wn.call(u2, f);
          }
          else switch (e) {
            case 4:
              return false;
            case 7:
              wn.call(u2, f);
          }
          return o ? -1 : r || i ? i : u2;
        };
      }, Jd = jd(0), xn = jd(1), yn = jd(2), Iu = jd(3), Ju = jd(4), zn = jd(5), An = jd(6);
      jd(7);
      var Ku = qa("species"), Ef = function(e) {
        return 51 <= id || !R(function() {
          var t2 = [];
          return (t2.constructor = {})[Ku] = function() {
            return { foo: 1 };
          }, 1 !== t2[e](Boolean).foo;
        });
      }, Lu = Ef("filter");
      N({ target: "Array", proto: true, forced: !Lu }, { filter: function(e) {
        return yn(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var Dc = Object.keys || function(e) {
        return pn(e, Rg);
      }, Mu = R(function() {
        Dc(1);
      });
      N({ target: "Object", stat: true, forced: Mu }, { keys: function(e) {
        return Dc(Qa(e));
      } });
      var Ee = function(e, t2) {
        var n2 = [][e];
        return !!n2 && R(function() {
          n2.call(null, t2 || function() {
            throw 1;
          }, 1);
        });
      }, Nu = [].join, Ou = Af != Object, Pu = Ee("join", ",");
      N({ target: "Array", proto: true, forced: Ou || !Pu }, { join: function(e) {
        return Nu.call(qb(this), void 0 === e ? "," : e);
      } });
      var Qu = Ef("map");
      N({ target: "Array", proto: true, forced: !Qu }, { map: function(e) {
        return xn(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var Ui = function(e) {
        var t2 = e.return;
        if (void 0 !== t2) return va(t2.call(e)).value;
      }, Fe = {}, Ru = qa("iterator"), Su = Array.prototype, Vi = function(e) {
        return void 0 !== e && (Fe.Array === e || Su[Ru] === e);
      }, Ge = function(e, t2, n2) {
        (t2 = lc(t2)) in e ? Ra.f(e, t2, dd(0, n2)) : e[t2] = n2;
      }, Tu = qa("toStringTag"), Bn = {};
      Bn[Tu] = "z";
      var Wi = "[object z]" === String(Bn), Uu = qa("toStringTag"), Vu = "Arguments" == Zb(/* @__PURE__ */ function() {
        return arguments;
      }()), Ff = Wi ? Zb : function(e) {
        var t2;
        if (void 0 === e) var n2 = "Undefined";
        else {
          if (null === e) var r = "Null";
          else {
            e: {
              var i = e = Object(e);
              try {
                r = i[Uu];
                break e;
              } catch (e2) {
              }
              r = void 0;
            }
            r = "string" == typeof (n2 = r) ? n2 : Vu ? Zb(e) : "Object" == (t2 = Zb(e)) && "function" == typeof e.callee ? "Arguments" : t2;
          }
          n2 = r;
        }
        return n2;
      }, Wu = qa("iterator"), Xi = function(e) {
        if (null != e) return e[Wu] || e["@@iterator"] || Fe[Ff(e)];
      }, Cn = qa("iterator"), Dn = false;
      try {
        var Xu = 0, En = { next: function() {
          return { done: !!Xu++ };
        }, return: function() {
          Dn = true;
        } };
        En[Cn] = function() {
          return this;
        }, Array.from(En, function() {
          throw 2;
        });
      } catch (c2) {
      }
      var Tg = function(e, t2) {
        if (!t2 && !Dn) return false;
        var n2 = false;
        try {
          (t2 = {})[Cn] = function() {
            return { next: function() {
              return { done: n2 = true };
            } };
          }, e(t2);
        } catch (e2) {
        }
        return n2;
      }, Yu = !Tg(function(e) {
        Array.from(e);
      });
      N({ target: "Array", stat: true, forced: Yu }, { from: function(e) {
        var t2, n2 = Qa(e), r = "function" == typeof this ? this : Array, i = arguments.length, o = 1 < i ? arguments[1] : void 0, a2 = void 0 !== o, s = Xi(n2), u2 = 0;
        if (a2 && (o = Id(o, 2 < i ? arguments[2] : void 0, 2)), null == s || r == Array && Vi(s)) {
          var c2 = ta(n2.length);
          for (r = new r(c2); c2 > u2; u2++) s = a2 ? o(n2[u2], u2) : n2[u2], Ge(r, u2, s);
        } else for (i = (n2 = s.call(n2)).next, r = new r(); !(t2 = i.call(n2)).done; u2++) {
          if (a2) {
            s = n2;
            var l = o;
            t2 = [t2.value, u2];
            try {
              c2 = l(va(t2)[0], t2[1]);
            } catch (e2) {
              throw Ui(s), e2;
            }
          } else c2 = t2.value;
          Ge(r, u2, s = c2);
        }
        return r.length = u2, r;
      } });
      var Fn = function(e) {
        return function(t2, n2) {
          t2 = String(jb(t2)), n2 = $b(n2);
          var r, i = t2.length;
          if (0 > n2 || n2 >= i) return e ? "" : void 0;
          var o = t2.charCodeAt(n2);
          return 55296 > o || 56319 < o || n2 + 1 === i || 56320 > (r = t2.charCodeAt(n2 + 1)) || 57343 < r ? e ? t2.charAt(n2) : o : e ? t2.slice(n2, n2 + 2) : r - 56320 + (o - 55296 << 10) + 65536;
        };
      };
      Fn(false);
      var Gn = Fn(true), Hn = !R(function() {
        function e() {
        }
        return e.prototype.constructor = null, Object.getPrototypeOf(new e()) !== e.prototype;
      }), In = Pg("IE_PROTO"), Zu = Object.prototype, Vb = Hn ? Object.getPrototypeOf : function(e) {
        return e = Qa(e), Q(e, In) ? e[In] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? Zu : null;
      }, Yi = qa("iterator"), Jn = false, $u = function() {
        return this;
      }, Kd;
      if ([].keys) {
        var Kn = [].keys();
        if ("next" in Kn) {
          var Ln = Vb(Vb(Kn));
          Ln !== Object.prototype && (Kd = Ln);
        } else Jn = true;
      }
      (null == Kd || R(function() {
        var e = {};
        return Kd[Yi].call(e) !== e;
      })) && (Kd = {}), Q(Kd, Yi) || Na(Kd, Yi, $u);
      var Ug = Kd, Vg = Jn, av = ka ? Object.defineProperties : function(e, t2) {
        va(e);
        for (var n2, r = Dc(t2), i = r.length, o = 0; i > o; ) Ra.f(e, n2 = r[o++], t2[n2]);
        return e;
      }, Zi = mc("document", "documentElement"), Mn = Pg("IE_PROTO"), $i = function() {
      }, aj, Wg = function() {
        try {
          aj = document.domain && new ActiveXObject("htmlfile");
        } catch (e2) {
        }
        if (aj) {
          var e = aj;
          e.write("<script><\/script>"), e.close(), e = e.parentWindow.Object;
        } else (e = Og ? ze.createElement("iframe") : {}).style.display = "none", Zi.appendChild(e), e.src = "javascript:", (e = e.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), e = e.F;
        for (Wg = e, e = Rg.length; e--; ) delete Wg.prototype[Rg[e]];
        return Wg();
      };
      Be[Mn] = true;
      var ac = Object.create || function(e, t2) {
        if (null !== e) {
          $i.prototype = va(e);
          var n2 = new $i();
          $i.prototype = null, n2[Mn] = e;
        } else n2 = Wg();
        return void 0 === t2 ? n2 : av(n2, t2);
      }, bv = Ra.f, Nn = qa("toStringTag"), Ec = function(e, t2, n2) {
        e && !Q(e = n2 ? e : e.prototype, Nn) && bv(e, Nn, { configurable: true, value: t2 });
      }, cv = function() {
        return this;
      }, dv = function(e, t2, n2) {
        return t2 += " Iterator", e.prototype = ac(Ug, { next: dd(1, n2) }), Ec(e, t2, false), Fe[t2] = cv, e;
      }, Ua = Object.setPrototypeOf || ("__proto__" in {} ? function() {
        var e = false, t2 = {};
        try {
          var n2 = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set;
          n2.call(t2, []), e = t2 instanceof Array;
        } catch (e2) {
        }
        return function(t3, r) {
          if (va(t3), !ha(r) && null !== r) throw TypeError("Can't set " + String(r) + " as a prototype");
          return e ? n2.call(t3, r) : t3.__proto__ = r, t3;
        };
      }() : void 0), Gf = qa("iterator"), ev = function() {
        return this;
      }, bj = function(e, t2, n2, r, i, o, a2) {
        dv(n2, t2, r), r = function(e2) {
          if (e2 === i && h) return h;
          if (!Vg && e2 in l) return l[e2];
          switch (e2) {
            case "keys":
            case "values":
            case "entries":
              return function() {
                return new n2(this, e2);
              };
          }
          return function() {
            return new n2(this);
          };
        };
        var s, u2 = t2 + " Iterator", c2 = false, l = e.prototype, f = l[Gf] || l["@@iterator"] || i && l[i], h = !Vg && f || r(i), p = "Array" == t2 && l.entries || f;
        if (p && (e = Vb(p.call(new e())), Ug !== Object.prototype && e.next && (Vb(e) !== Ug && (Ua ? Ua(e, Ug) : "function" != typeof e[Gf] && Na(e, Gf, ev)), Ec(e, u2, true))), "values" == i && f && "values" !== f.name && (c2 = true, h = function() {
          return f.call(this);
        }), l[Gf] !== h && Na(l, Gf, h), Fe[t2] = h, i) {
          var d = { values: r("values"), keys: o ? h : r("keys"), entries: r("entries") };
          if (a2) for (s in d) !Vg && !c2 && s in l || Ta(l, s, d[s]);
          else N({ target: t2, proto: true, forced: Vg || c2 }, d);
        }
        return d;
      }, fv = Za.set, gv = Za.getterFor("String Iterator");
      bj(String, "String", function(e) {
        fv(this, { type: "String Iterator", string: String(e), index: 0 });
      }, function() {
        var e = gv(this), t2 = e.string, n2 = e.index;
        return n2 >= t2.length ? { value: void 0, done: true } : (t2 = Gn(t2, n2), e.index += t2.length, { value: t2, done: false });
      });
      var cj = qa("unscopables"), dj = Array.prototype;
      null == dj[cj] && Ra.f(dj, cj, { configurable: true, value: ac(null) });
      var Ld = function(e) {
        dj[cj][e] = true;
      }, On = true;
      "find" in [] && Array(1).find(function() {
        On = false;
      }), N({ target: "Array", proto: true, forced: On }, { find: function(e) {
        return zn(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } }), Ld("find");
      var Pn = function(e) {
        var t2 = String(jb(this)), n2 = "";
        if (0 > (e = $b(e)) || 1 / 0 == e) throw RangeError("Wrong number of repetitions");
        for (; 0 < e; (e >>>= 1) && (t2 += t2)) 1 & e && (n2 += t2);
        return n2;
      };
      N({ target: "String", proto: true }, { repeat: Pn }), N({ target: "Number", stat: true }, { MAX_SAFE_INTEGER: 9007199254740991 }), N({ target: "Number", stat: true }, { isNaN: function(e) {
        return e != e;
      } }), y.Number.isNaN;
      var hv = Wi ? {}.toString : function() {
        return "[object " + Ff(this) + "]";
      };
      Wi || Ta(Object.prototype, "toString", hv, { unsafe: true });
      var Fc = y.Promise, Hf = function(e, t2, n2) {
        for (var r in t2) Ta(e, r, t2[r], n2);
        return e;
      }, Qn = qa("species"), If = function(e) {
        e = mc(e);
        var t2 = Ra.f;
        ka && e && !e[Qn] && t2(e, Qn, { configurable: true, get: function() {
          return this;
        } });
      }, Gc = function(e, t2, n2) {
        if (!(e instanceof t2)) throw TypeError("Incorrect " + (n2 ? n2 + " " : "") + "invocation");
        return e;
      }, Jf = function(e, t2) {
        this.stopped = e, this.result = t2;
      }, Xg = function(e, t2, n2) {
        var r, i = !(!n2 || !n2.AS_ENTRIES), o = !(!n2 || !n2.IS_ITERATOR), a2 = !(!n2 || !n2.INTERRUPTED), s = Id(t2, n2 && n2.that, 1 + i + a2), u2 = function(e2) {
          return c2 && Ui(c2), new Jf(true, e2);
        };
        if (t2 = function(e2) {
          return i ? (va(e2), a2 ? s(e2[0], e2[1], u2) : s(e2[0], e2[1])) : a2 ? s(e2, u2) : s(e2);
        }, o) var c2 = e;
        else {
          if ("function" != typeof (o = Xi(e))) throw TypeError("Target is not iterable");
          if (Vi(o)) {
            for (o = 0, n2 = ta(e.length); n2 > o; o++) if ((r = t2(e[o])) && r instanceof Jf) return r;
            return new Jf(false);
          }
          c2 = o.call(e);
        }
        for (e = c2.next; !(o = e.call(c2)).done; ) {
          try {
            r = t2(o.value);
          } catch (e2) {
            throw Ui(c2), e2;
          }
          if ("object" == typeof r && r && r instanceof Jf) return r;
        }
        return new Jf(false);
      }, iv = qa("species"), kd = function(e, t2) {
        var n2;
        return void 0 === (e = va(e).constructor) || null == (n2 = va(e)[iv]) ? t2 : yb(n2);
      }, Rn = /(?:iphone|ipod|ipad).*applewebkit/i.test(De), Hc = "process" == Zb(y.process), Yg = y.location, ej = y.setImmediate, Sn = y.clearImmediate, jv = y.process, Tn = y.MessageChannel, fj = y.Dispatch, gj = 0, Kf = {}, hj = function(e) {
        if (Kf.hasOwnProperty(e)) {
          var t2 = Kf[e];
          delete Kf[e], t2();
        }
      }, ij = function(e) {
        return function() {
          hj(e);
        };
      }, Un = function(e) {
        hj(e.data);
      }, Vn = function(e) {
        y.postMessage(e + "", Yg.protocol + "//" + Yg.host);
      };
      if (!ej || !Sn) if (ej = function(e) {
        for (var t2 = [], n2 = 1; arguments.length > n2; ) t2.push(arguments[n2++]);
        return Kf[++gj] = function() {
          ("function" == typeof e ? e : Function(e)).apply(void 0, t2);
        }, Lf(gj), gj;
      }, Sn = function(e) {
        delete Kf[e];
      }, Hc) var Lf = function(e) {
        jv.nextTick(ij(e));
      };
      else if (fj && fj.now) Lf = function(e) {
        fj.now(ij(e));
      };
      else if (Tn && !Rn) {
        var Wn = new Tn(), Xn = Wn.port2;
        Wn.port1.onmessage = Un, Lf = Id(Xn.postMessage, Xn, 1);
      } else y.addEventListener && "function" == typeof postMessage && !y.importScripts && Yg && "file:" !== Yg.protocol && !R(Vn) ? (Lf = Vn, y.addEventListener("message", Un, false)) : Lf = "onreadystatechange" in (Og ? ze.createElement("script") : {}) ? function(e) {
        Zi.appendChild(Og ? ze.createElement("script") : {}).onreadystatechange = function() {
          Zi.removeChild(this), hj(e);
        };
      } : function(e) {
        setTimeout(ij(e), 0);
      };
      var jj = ej, kv = /web0s(?!.*chrome)/i.test(De), lv = Fb.f, Yn = y.MutationObserver || y.WebKitMutationObserver, Zn = y.document, $n = y.process, Zg = y.Promise, ao = lv(y, "queueMicrotask"), bo = ao && ao.value, Md, Mf;
      if (!bo) {
        var ah = function() {
          var e;
          for (Hc && (e = $n.domain) && e.exit(); Md; ) {
            var t2 = Md.fn;
            Md = Md.next;
            try {
              t2();
            } catch (e2) {
              throw Md ? $g() : Mf = void 0, e2;
            }
          }
          Mf = void 0, e && e.enter();
        };
        if (Rn || Hc || kv || !Yn || !Zn) if (Zg && Zg.resolve) {
          var kj = Zg.resolve(void 0);
          kj.constructor = Zg;
          var mv = kj.then, $g = function() {
            mv.call(kj, ah);
          };
        } else $g = Hc ? function() {
          $n.nextTick(ah);
        } : function() {
          jj.call(y, ah);
        };
        else {
          var co = true, eo = Zn.createTextNode("");
          new Yn(ah).observe(eo, { characterData: true }), $g = function() {
            eo.data = co = !co;
          };
        }
      }
      var fo = bo || function(e) {
        e = { fn: e, next: void 0 }, Mf && (Mf.next = e), Md || (Md = e, $g()), Mf = e;
      }, nv = function(e) {
        var t2, n2;
        this.promise = new e(function(e2, r) {
          if (void 0 !== t2 || void 0 !== n2) throw TypeError("Bad Promise constructor");
          t2 = e2, n2 = r;
        }), this.resolve = yb(t2), this.reject = yb(n2);
      }, lj = { f: function(e) {
        return new nv(e);
      } }, mj = function(e, t2) {
        return va(e), ha(t2) && t2.constructor === e ? t2 : ((0, (e = lj.f(e)).resolve)(t2), e.promise);
      }, ov = function(e, t2) {
        var n2 = y.console;
        n2 && n2.error && (1 === arguments.length ? n2.error(e) : n2.error(e, t2));
      }, nj = function(e) {
        try {
          return { error: false, value: e() };
        } catch (e2) {
          return { error: true, value: e2 };
        }
      }, pv = "object" == typeof window, qv = qa("species"), go = Za.get, rv = Za.set, sv = Za.getterFor("Promise"), Nd = Fc && Fc.prototype, zb = Fc, bh = Nd, ho = y.TypeError, oj = y.document, pj = y.process, He = lj.f, tv = He, uv = !!(oj && oj.createEvent && y.dispatchEvent), io = "function" == typeof PromiseRejectionEvent, jo = false, Nf = nc("Promise", function() {
        var e = Pi(zb) !== String(zb);
        if (!e && 66 === id) return true;
        if (51 <= id && /native code/.test(zb)) return false;
        var t2 = new zb(function(e2) {
          e2(1);
        }), n2 = function(e2) {
          e2(function() {
          }, function() {
          });
        };
        return (t2.constructor = {})[qv] = n2, !(jo = t2.then(function() {
        }) instanceof n2) || !e && pv && !io;
      }), vv = Nf || !Tg(function(e) {
        zb.all(e).catch(function() {
        });
      }), ko = function(e) {
        var t2;
        return !(!ha(e) || "function" != typeof (t2 = e.then)) && t2;
      }, qj = function(e, t2) {
        if (!e.notified) {
          e.notified = true;
          var n2 = e.reactions;
          fo(function() {
            for (var r = e.value, i = 1 == e.state, o = 0; n2.length > o; ) {
              var a2, s = n2[o++], u2 = i ? s.ok : s.fail, c2 = s.resolve, l = s.reject, f = s.domain;
              try {
                if (u2) {
                  if (i || (2 === e.rejection && wv(e), e.rejection = 1), true === u2) var h = r;
                  else if (f && f.enter(), h = u2(r), f) {
                    f.exit();
                    var p = true;
                  }
                  h === s.promise ? l(ho("Promise-chain cycle")) : (a2 = ko(h)) ? a2.call(h, c2, l) : c2(h);
                } else l(r);
              } catch (e2) {
                f && !p && f.exit(), l(e2);
              }
            }
            e.reactions = [], e.notified = false, t2 && !e.rejection && xv(e);
          });
        }
      }, lo = function(e, t2, n2) {
        var r;
        if (uv) {
          var i = oj.createEvent("Event");
          i.promise = t2, i.reason = n2, i.initEvent(e, false, true), y.dispatchEvent(i);
        } else i = { promise: t2, reason: n2 };
        !io && (r = y["on" + e]) ? r(i) : "unhandledrejection" === e && ov("Unhandled promise rejection", n2);
      }, xv = function(e) {
        jj.call(y, function() {
          var t2 = e.facade, n2 = e.value;
          if (1 !== e.rejection && !e.parent) {
            var r = nj(function() {
              Hc ? pj.emit("unhandledRejection", n2, t2) : lo("unhandledrejection", t2, n2);
            });
            if (e.rejection = Hc || 1 !== e.rejection && !e.parent ? 2 : 1, r.error) throw r.value;
          }
        });
      }, wv = function(e) {
        jj.call(y, function() {
          var t2 = e.facade;
          Hc ? pj.emit("rejectionHandled", t2) : lo("rejectionhandled", t2, e.value);
        });
      }, Ie = function(e, t2, n2) {
        return function(r) {
          e(t2, r, n2);
        };
      }, Je = function(e, t2, n2) {
        e.done || (e.done = true, n2 && (e = n2), e.value = t2, e.state = 2, qj(e, true));
      }, rj = function(e, t2, n2) {
        if (!e.done) {
          e.done = true, n2 && (e = n2);
          try {
            if (e.facade === t2) throw ho("Promise can't be resolved itself");
            var r = ko(t2);
            r ? fo(function() {
              var n3 = { done: false };
              try {
                r.call(t2, Ie(rj, n3, e), Ie(Je, n3, e));
              } catch (t3) {
                Je(n3, t3, e);
              }
            }) : (e.value = t2, e.state = 1, qj(e, false));
          } catch (t3) {
            Je({ done: false }, t3, e);
          }
        }
      };
      if (Nf) {
        zb = function(e) {
          Gc(this, zb, "Promise"), yb(e), sj.call(this);
          var t2 = go(this);
          try {
            e(Ie(rj, t2), Ie(Je, t2));
          } catch (e2) {
            Je(t2, e2);
          }
        }, bh = zb.prototype;
        var sj = function(e) {
          rv(this, { type: "Promise", done: false, notified: false, parent: false, reactions: [], rejection: false, state: 0, value: void 0 });
        };
        sj.prototype = Hf(bh, { then: function(e, t2) {
          var n2 = sv(this), r = He(kd(this, zb));
          return r.ok = "function" != typeof e || e, r.fail = "function" == typeof t2 && t2, r.domain = Hc ? pj.domain : void 0, n2.parent = true, n2.reactions.push(r), 0 != n2.state && qj(n2, false), r.promise;
        }, catch: function(e) {
          return this.then(void 0, e);
        } });
        var yv = function() {
          var e = new sj(), t2 = go(e);
          this.promise = e, this.resolve = Ie(rj, t2), this.reject = Ie(Je, t2);
        };
        if (lj.f = He = function(e) {
          return e === zb || e === zv ? new yv(e) : tv(e);
        }, "function" == typeof Fc && Nd !== Object.prototype) {
          var Av = Nd.then;
          jo || (Ta(Nd, "then", function(e, t2) {
            var n2 = this;
            return new zb(function(e2, t3) {
              Av.call(n2, e2, t3);
            }).then(e, t2);
          }, { unsafe: true }), Ta(Nd, "catch", bh.catch, { unsafe: true }));
          try {
            delete Nd.constructor;
          } catch (c2) {
          }
          Ua && Ua(Nd, bh);
        }
      }
      N({ global: true, wrap: true, forced: Nf }, { Promise: zb }), Ec(zb, "Promise", false), If("Promise");
      var zv = mc("Promise");
      N({ target: "Promise", stat: true, forced: Nf }, { reject: function(e) {
        var t2 = He(this);
        return t2.reject.call(void 0, e), t2.promise;
      } }), N({ target: "Promise", stat: true, forced: Nf }, { resolve: function(e) {
        return mj(this, e);
      } }), N({ target: "Promise", stat: true, forced: vv }, { all: function(e) {
        var t2 = this, n2 = He(t2), r = n2.resolve, i = n2.reject, o = nj(function() {
          var n3 = yb(t2.resolve), o2 = [], a2 = 0, s = 1;
          Xg(e, function(e2) {
            var u2 = a2++, c2 = false;
            o2.push(void 0), s++, n3.call(t2, e2).then(function(e3) {
              c2 || (c2 = true, o2[u2] = e3, --s || r(o2));
            }, i);
          }), --s || r(o2);
        });
        return o.error && i(o.value), n2.promise;
      }, race: function(e) {
        var t2 = this, n2 = He(t2), r = n2.reject, i = nj(function() {
          var i2 = yb(t2.resolve);
          Xg(e, function(e2) {
            i2.call(t2, e2).then(n2.resolve, r);
          });
        });
        return i.error && r(i.value), n2.promise;
      } });
      var mo = [].indexOf, no = !!mo && 0 > 1 / [1].indexOf(1, -0), Bv = Ee("indexOf");
      N({ target: "Array", proto: true, forced: no || !Bv }, { indexOf: function(e) {
        return no ? mo.apply(this, arguments) || 0 : Si(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var tj = function() {
        var e = va(this), t2 = "";
        return e.global && (t2 += "g"), e.ignoreCase && (t2 += "i"), e.multiline && (t2 += "m"), e.dotAll && (t2 += "s"), e.unicode && (t2 += "u"), e.sticky && (t2 += "y"), t2;
      }, pc = R(function() {
        var e = RegExp("a", "y");
        return e.lastIndex = 2, null != e.exec("abcd");
      }), Cv = R(function() {
        var e = RegExp("^r", "gy");
        return e.lastIndex = 2, null != e.exec("str");
      }), ch = RegExp.prototype.exec, Dv = fd("native-string-replace", String.prototype.replace), oo = ch, uj = (c = /a/, a = /b*/g, ch.call(c, "a"), ch.call(a, "a"), 0 !== c.lastIndex || 0 !== a.lastIndex), po = pc || Cv, vj = void 0 !== /()??/.exec("")[1], c, a;
      (uj || vj || po) && (oo = function(e) {
        var t2, n2 = po && this.sticky, r = tj.call(this), i = this.source, o = 0, a2 = e;
        if (n2) {
          -1 === (r = r.replace("y", "")).indexOf("g") && (r += "g"), a2 = String(e).slice(this.lastIndex), 0 < this.lastIndex && (!this.multiline || this.multiline && "\n" !== e[this.lastIndex - 1]) && (i = "(?: " + i + ")", a2 = " " + a2, o++);
          var s = new RegExp("^(?:" + i + ")", r);
        }
        if (vj && (s = new RegExp("^" + i + "$(?!\\s)", r)), uj) var u2 = this.lastIndex;
        var c2 = ch.call(n2 ? s : this, a2);
        return n2 ? c2 ? (c2.input = c2.input.slice(o), c2[0] = c2[0].slice(o), c2.index = this.lastIndex, this.lastIndex += c2[0].length) : this.lastIndex = 0 : uj && c2 && (this.lastIndex = this.global ? c2.index + c2[0].length : u2), vj && c2 && 1 < c2.length && Dv.call(c2[0], s, function() {
          for (t2 = 1; t2 < arguments.length - 2; t2++) void 0 === arguments[t2] && (c2[t2] = void 0);
        }), c2;
      });
      var Of = oo;
      N({ target: "RegExp", proto: true, forced: /./.exec !== Of }, { exec: Of });
      var Ev = qa("species"), wj = RegExp.prototype, Fv = !R(function() {
        var e = /./;
        return e.exec = function() {
          var e2 = [];
          return e2.groups = { a: "7" }, e2;
        }, "7" !== "".replace(e, "$<a>");
      }), qo = "$0" === "a".replace(/./, "$0"), ro = qa("replace"), so = !!/./[ro] && "" === /./[ro]("a", "$0"), Gv = !R(function() {
        var e = /(?:)/, t2 = e.exec;
        return e.exec = function() {
          return t2.apply(this, arguments);
        }, 2 !== (e = "ab".split(e)).length || "a" !== e[0] || "b" !== e[1];
      }), dh = function(e, t2, n2, r) {
        var i = qa(e), o = !R(function() {
          var t3 = {};
          return t3[i] = function() {
            return 7;
          }, 7 != ""[e](t3);
        }), a2 = o && !R(function() {
          var t3 = false, n3 = /a/;
          return "split" === e && ((n3 = { constructor: {} }).constructor[Ev] = function() {
            return n3;
          }, n3.flags = "", n3[i] = /./[i]), n3.exec = function() {
            return t3 = true, null;
          }, n3[i](""), !t3;
        });
        if (!o || !a2 || "replace" === e && (!Fv || !qo || so) || "split" === e && !Gv) {
          var s = /./[i], u2 = (n2 = n2(i, ""[e], function(e2, t3, n3, r2, i2) {
            var a3 = t3.exec;
            return a3 === Of || a3 === wj.exec ? o && !i2 ? { done: true, value: s.call(t3, n3, r2) } : { done: true, value: e2.call(n3, t3, r2) } : { done: false };
          }, { REPLACE_KEEPS_$0: qo, REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: so }))[1];
          Ta(String.prototype, e, n2[0]), Ta(wj, i, 2 == t2 ? function(e2, t3) {
            return u2.call(e2, this, t3);
          } : function(e2) {
            return u2.call(e2, this);
          });
        }
        r && Na(wj[i], "sham", true);
      }, xj = function(e, t2, n2) {
        return t2 + (n2 ? Gn(e, t2).length : 1);
      }, Hv = Math.floor, Iv = "".replace, Jv = /\$([$&'`]|\d{1,2}|<[^>]*>)/g, Kv = /\$([$&'`]|\d{1,2})/g, Lv = function(e, t2, n2, r, i, o) {
        var a2 = n2 + e.length, s = r.length, u2 = Kv;
        return void 0 !== i && (i = Qa(i), u2 = Jv), Iv.call(o, u2, function(o2, u3) {
          switch (u3.charAt(0)) {
            case "$":
              return "$";
            case "&":
              return e;
            case "`":
              return t2.slice(0, n2);
            case "'":
              return t2.slice(a2);
            case "<":
              o2 = i[u3.slice(1, -1)];
              break;
            default:
              var c2 = +u3;
              if (0 === c2) return o2;
              if (c2 > s) return 0 === (c2 = Hv(c2 / 10)) ? o2 : c2 <= s ? void 0 === r[c2 - 1] ? u3.charAt(1) : r[c2 - 1] + u3.charAt(1) : o2;
              o2 = r[c2 - 1];
          }
          return void 0 === o2 ? "" : o2;
        });
      }, Ke = function(e, t2) {
        var n2 = e.exec;
        if ("function" == typeof n2) {
          if ("object" != typeof (e = n2.call(e, t2))) throw TypeError("RegExp exec method returned something other than an Object or null");
          return e;
        }
        if ("RegExp" !== Zb(e)) throw TypeError("RegExp#exec called on incompatible receiver");
        return Of.call(e, t2);
      }, Mv = Math.max, Nv = Math.min, Ov = function(e) {
        return void 0 === e ? e : String(e);
      };
      dh("replace", 2, function(e, t2, n2, r) {
        var i = r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE, o = r.REPLACE_KEEPS_$0, a2 = i ? "$" : "$0";
        return [function(n3, r2) {
          var i2 = jb(this), o2 = null == n3 ? void 0 : n3[e];
          return void 0 !== o2 ? o2.call(n3, i2, r2) : t2.call(String(i2), n3, r2);
        }, function(e2, r2) {
          if (!i && o || "string" == typeof r2 && -1 === r2.indexOf(a2)) {
            var s = n2(t2, e2, this, r2);
            if (s.done) return s.value;
          }
          var u2 = va(e2);
          e2 = String(this), (s = "function" == typeof r2) || (r2 = String(r2));
          var c2 = u2.global;
          if (c2) {
            var l = u2.unicode;
            u2.lastIndex = 0;
          }
          for (var f = []; ; ) {
            var h = Ke(u2, e2);
            if (null === h) break;
            if (f.push(h), !c2) break;
            "" === String(h[0]) && (u2.lastIndex = xj(e2, ta(u2.lastIndex), l));
          }
          for (l = "", c2 = u2 = 0; c2 < f.length; c2++) {
            h = f[c2];
            for (var p = String(h[0]), d = Mv(Nv($b(h.index), e2.length), 0), v2 = [], b = 1; b < h.length; b++) v2.push(Ov(h[b]));
            h = h.groups, s ? (v2 = [p].concat(v2, d, e2), void 0 !== h && v2.push(h), h = String(r2.apply(void 0, v2))) : h = Lv(p, e2, d, v2, h, r2), d >= u2 && (l += e2.slice(u2, d) + h, u2 = d + p.length);
          }
          return l + e2.slice(u2);
        }];
      });
      var Pv = Ef("slice"), Qv = qa("species"), Rv = [].slice, Sv = Math.max;
      N({ target: "Array", proto: true, forced: !Pv }, { slice: function(e, t2) {
        var n2 = qb(this), r = ta(n2.length);
        if (e = xb(e, r), t2 = xb(void 0 === t2 ? r : t2, r), gd(n2)) {
          var i = n2.constructor;
          if ("function" != typeof i || i !== Array && !gd(i.prototype) ? ha(i) && (null === (i = i[Qv]) && (i = void 0)) : i = void 0, i === Array || void 0 === i) return Rv.call(n2, e, t2);
        }
        for (i = new (void 0 === i ? Array : i)(Sv(t2 - e, 0)), r = 0; e < t2; e++, r++) e in n2 && Ge(i, r, n2[e]);
        return i.length = r, i;
      } });
      var Tv = Za.set, Uv = Za.getterFor("Array Iterator"), ld = bj(Array, "Array", function(e, t2) {
        Tv(this, { type: "Array Iterator", target: qb(e), index: 0, kind: t2 });
      }, function() {
        var e = Uv(this), t2 = e.target, n2 = e.kind, r = e.index++;
        return !t2 || r >= t2.length ? (e.target = void 0, { value: void 0, done: true }) : "keys" == n2 ? { value: r, done: false } : "values" == n2 ? { value: t2[r], done: false } : { value: [r, t2[r]], done: false };
      }, "values");
      Fe.Arguments = Fe.Array, Ld("keys"), Ld("values"), Ld("entries");
      var to = "undefined" != typeof ArrayBuffer && "undefined" != typeof DataView, Le = function(e) {
        if (void 0 === e) return 0;
        e = $b(e);
        var t2 = ta(e);
        if (e !== t2) throw RangeError("Wrong length or index");
        return t2;
      }, Vv = Math.abs, Ic = Math.pow, Wv = Math.floor, Xv = Math.log, Yv = Math.LN2, yj = function(e) {
        var t2 = Qa(this), n2 = ta(t2.length), r = arguments.length, i = xb(1 < r ? arguments[1] : void 0, n2);
        for (n2 = void 0 === (r = 2 < r ? arguments[2] : void 0) ? n2 : xb(r, n2); n2 > i; ) t2[i++] = e;
        return t2;
      }, Zv = Hd.f, $v = Ra.f, Me = Za.get, uo = Za.set, bc = y.ArrayBuffer, Ab = bc, cc = y.DataView, eh = cc && cc.prototype, vo = Object.prototype, fh = y.RangeError, wo = function(e, t2, n2) {
        var r, i = Array(n2), o = (1 << (n2 = 8 * n2 - t2 - 1)) - 1, a2 = o >> 1, s = 23 === t2 ? Ic(2, -24) - Ic(2, -77) : 0, u2 = 0 > e || 0 === e && 0 > 1 / e ? 1 : 0, c2 = 0;
        if ((e = Vv(e)) != e || 1 / 0 === e) {
          e = e != e ? 1 : 0;
          var l = o;
        } else l = Wv(Xv(e) / Yv), 1 > e * (r = Ic(2, -l)) && (l--, r *= 2), 2 <= (e = 1 <= l + a2 ? e + s / r : e + s * Ic(2, 1 - a2)) * r && (l++, r /= 2), l + a2 >= o ? (e = 0, l = o) : 1 <= l + a2 ? (e = (e * r - 1) * Ic(2, t2), l += a2) : (e = e * Ic(2, a2 - 1) * Ic(2, t2), l = 0);
        for (; 8 <= t2; i[c2++] = 255 & e, e /= 256, t2 -= 8) ;
        for (l = l << t2 | e, n2 += t2; 0 < n2; i[c2++] = 255 & l, l /= 256, n2 -= 8) ;
        return i[--c2] |= 128 * u2, i;
      }, xo = function(e, t2) {
        var n2 = e.length, r = 8 * n2 - t2 - 1, i = (1 << r) - 1, o = i >> 1;
        r -= 7, --n2;
        var a2 = e[n2--], s = 127 & a2;
        for (a2 >>= 7; 0 < r; s = 256 * s + e[n2], n2--, r -= 8) ;
        var u2 = s & (1 << -r) - 1;
        for (s >>= -r, r += t2; 0 < r; u2 = 256 * u2 + e[n2], n2--, r -= 8) ;
        if (0 === s) s = 1 - o;
        else {
          if (s === i) return u2 ? NaN : a2 ? -1 / 0 : 1 / 0;
          u2 += Ic(2, t2), s -= o;
        }
        return (a2 ? -1 : 1) * u2 * Ic(2, s - t2);
      }, yo = function(e) {
        return [255 & e];
      }, zo = function(e) {
        return [255 & e, e >> 8 & 255];
      }, Ao = function(e) {
        return [255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255];
      }, Bo = function(e) {
        return e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0];
      }, aw = function(e) {
        return wo(e, 23, 4);
      }, bw = function(e) {
        return wo(e, 52, 8);
      }, gh = function(e, t2) {
        $v(e.prototype, t2, { get: function() {
          return Me(this)[t2];
        } });
      }, md = function(e, t2, n2, r) {
        n2 = Le(n2);
        var i = Me(e);
        if (n2 + t2 > i.byteLength) throw fh("Wrong index");
        return e = Me(i.buffer).bytes, n2 += i.byteOffset, t2 = e.slice(n2, n2 + t2), r ? t2 : t2.reverse();
      }, nd = function(e, t2, n2, r, i, o) {
        n2 = Le(n2);
        var a2 = Me(e);
        if (n2 + t2 > a2.byteLength) throw fh("Wrong index");
        for (e = Me(a2.buffer).bytes, n2 += a2.byteOffset, r = r(+i), i = 0; i < t2; i++) e[n2 + i] = r[o ? i : t2 - i - 1];
      };
      if (to) {
        if (!R(function() {
          bc(1);
        }) || !R(function() {
          new bc(-1);
        }) || R(function() {
          return new bc(), new bc(1.5), new bc(NaN), "ArrayBuffer" != bc.name;
        })) {
          Ab = function(e) {
            return Gc(this, Ab), new bc(Le(e));
          };
          for (var cw = Ab.prototype = bc.prototype, Co = Zv(bc), Do = 0, zj; Co.length > Do; ) (zj = Co[Do++]) in Ab || Na(Ab, zj, bc[zj]);
          cw.constructor = Ab;
        }
        Ua && Vb(eh) !== vo && Ua(eh, vo);
        var hh = new cc(new Ab(2)), Eo = eh.setInt8;
        hh.setInt8(0, 2147483648), hh.setInt8(1, 2147483649), !hh.getInt8(0) && hh.getInt8(1) || Hf(eh, { setInt8: function(e, t2) {
          Eo.call(this, e, t2 << 24 >> 24);
        }, setUint8: function(e, t2) {
          Eo.call(this, e, t2 << 24 >> 24);
        } }, { unsafe: true });
      } else Ab = function(e) {
        Gc(this, Ab, "ArrayBuffer"), e = Le(e), uo(this, { bytes: yj.call(Array(e), 0), byteLength: e }), ka || (this.byteLength = e);
      }, cc = function(e, t2, n2) {
        Gc(this, cc, "DataView"), Gc(e, Ab, "DataView");
        var r = Me(e).byteLength;
        if (0 > (t2 = $b(t2)) || t2 > r) throw fh("Wrong offset");
        if (t2 + (n2 = void 0 === n2 ? r - t2 : ta(n2)) > r) throw fh("Wrong length");
        uo(this, { buffer: e, byteLength: n2, byteOffset: t2 }), ka || (this.buffer = e, this.byteLength = n2, this.byteOffset = t2);
      }, ka && (gh(Ab, "byteLength"), gh(cc, "buffer"), gh(cc, "byteLength"), gh(cc, "byteOffset")), Hf(cc.prototype, { getInt8: function(e) {
        return md(this, 1, e)[0] << 24 >> 24;
      }, getUint8: function(e) {
        return md(this, 1, e)[0];
      }, getInt16: function(e) {
        var t2 = md(this, 2, e, 1 < arguments.length ? arguments[1] : void 0);
        return (t2[1] << 8 | t2[0]) << 16 >> 16;
      }, getUint16: function(e) {
        var t2 = md(this, 2, e, 1 < arguments.length ? arguments[1] : void 0);
        return t2[1] << 8 | t2[0];
      }, getInt32: function(e) {
        return Bo(md(this, 4, e, 1 < arguments.length ? arguments[1] : void 0));
      }, getUint32: function(e) {
        return Bo(md(this, 4, e, 1 < arguments.length ? arguments[1] : void 0)) >>> 0;
      }, getFloat32: function(e) {
        return xo(md(this, 4, e, 1 < arguments.length ? arguments[1] : void 0), 23);
      }, getFloat64: function(e) {
        return xo(md(this, 8, e, 1 < arguments.length ? arguments[1] : void 0), 52);
      }, setInt8: function(e, t2) {
        nd(this, 1, e, yo, t2);
      }, setUint8: function(e, t2) {
        nd(this, 1, e, yo, t2);
      }, setInt16: function(e, t2) {
        nd(this, 2, e, zo, t2, 2 < arguments.length ? arguments[2] : void 0);
      }, setUint16: function(e, t2) {
        nd(this, 2, e, zo, t2, 2 < arguments.length ? arguments[2] : void 0);
      }, setInt32: function(e, t2) {
        nd(this, 4, e, Ao, t2, 2 < arguments.length ? arguments[2] : void 0);
      }, setUint32: function(e, t2) {
        nd(this, 4, e, Ao, t2, 2 < arguments.length ? arguments[2] : void 0);
      }, setFloat32: function(e, t2) {
        nd(this, 4, e, aw, t2, 2 < arguments.length ? arguments[2] : void 0);
      }, setFloat64: function(e, t2) {
        nd(this, 8, e, bw, t2, 2 < arguments.length ? arguments[2] : void 0);
      } });
      Ec(Ab, "ArrayBuffer"), Ec(cc, "DataView");
      var Pf = { ArrayBuffer: Ab, DataView: cc }, Aj = Pf.ArrayBuffer, Fo = Pf.DataView, Go = Aj.prototype.slice, dw = R(function() {
        return !new Aj(2).slice(1, void 0).byteLength;
      });
      N({ target: "ArrayBuffer", proto: true, unsafe: true, forced: dw }, { slice: function(e, t2) {
        if (void 0 !== Go && void 0 === t2) return Go.call(va(this), e);
        var n2 = va(this).byteLength;
        e = xb(e, n2), t2 = xb(void 0 === t2 ? n2 : t2, n2), n2 = new (kd(this, Aj))(ta(t2 - e));
        for (var r = new Fo(this), i = new Fo(n2), o = 0; e < t2; ) i.setUint8(o++, r.getUint8(e++));
        return n2;
      } });
      var ew = Ra.f, ih = y.Int8Array, Bj = ih && ih.prototype, Ho = y.Uint8ClampedArray, Io = Ho && Ho.prototype, qc = ih && Vb(ih), dc = Bj && Vb(Bj), Jo = Object.prototype, Ko = Jo.isPrototypeOf, Lo = qa("toStringTag"), Cj = Ae("TYPED_ARRAY_TAG"), Jc = to && !!Ua && "Opera" !== Ff(y.opera), Mo = false, Bb, rc = { Int8Array: 1, Uint8Array: 1, Uint8ClampedArray: 1, Int16Array: 2, Uint16Array: 2, Int32Array: 4, Uint32Array: 4, Float32Array: 4, Float64Array: 8 }, fw = { BigInt64Array: 8, BigUint64Array: 8 }, jh = function(e) {
        return !!ha(e) && (e = Ff(e), Q(rc, e) || Q(fw, e));
      };
      for (Bb in rc) y[Bb] || (Jc = false);
      if ((!Jc || "function" != typeof qc || qc === Function.prototype) && (qc = function() {
        throw TypeError("Incorrect invocation");
      }, Jc)) for (Bb in rc) y[Bb] && Ua(y[Bb], qc);
      if ((!Jc || !dc || dc === Jo) && (dc = qc.prototype, Jc)) for (Bb in rc) y[Bb] && Ua(y[Bb].prototype, dc);
      if (Jc && Vb(Io) !== dc && Ua(Io, dc), ka && !Q(dc, Lo)) for (Bb in Mo = true, ew(dc, Lo, { get: function() {
        return ha(this) ? this[Cj] : void 0;
      } }), rc) y[Bb] && Na(y[Bb], Cj, Bb);
      var Qf = Jc, No = Mo && Cj, Da = function(e) {
        if (jh(e)) return e;
        throw TypeError("Target is not a typed array");
      }, Ne = function(e) {
        if (Ua) {
          if (Ko.call(qc, e)) return e;
        } else for (var t2 in rc) if (Q(rc, Bb)) {
          var n2 = y[t2];
          if (n2 && (e === n2 || Ko.call(n2, e))) return e;
        }
        throw TypeError("Target is not a typed array constructor");
      }, Aa = function(e, t2, n2) {
        if (ka) {
          if (n2) for (var r in rc) {
            var i = y[r];
            if (i && Q(i.prototype, e)) try {
              delete i.prototype[e];
            } catch (e2) {
            }
          }
          dc[e] && !n2 || Ta(dc, e, n2 ? t2 : Jc && Bj[e] || t2);
        }
      }, Oo = function(e, t2, n2) {
        var r, i;
        if (ka) {
          if (Ua) {
            if (n2) {
              for (r in rc) if ((i = y[r]) && Q(i, e)) try {
                delete i[e];
              } catch (e2) {
              }
            }
            if (qc[e] && !n2) return;
            try {
              return Ta(qc, e, n2 ? t2 : Jc && qc[e] || t2);
            } catch (e2) {
            }
          }
          for (r in rc) !(i = y[r]) || i[e] && !n2 || Ta(i, e, t2);
        }
      }, Po = qc, Rf = dc, gw = y.ArrayBuffer, Od = y.Int8Array, Dj = !Qf || !R(function() {
        Od(1);
      }) || !R(function() {
        new Od(-1);
      }) || !Tg(function(e) {
        new Od(), new Od(null), new Od(1.5), new Od(e);
      }, true) || R(function() {
        return 1 !== new Od(new gw(2), 1, void 0).length;
      }), kh = function(e, t2) {
        if (0 > (e = $b(e))) throw RangeError("The argument can't be less than 0");
        if (e % t2) throw RangeError("Wrong offset");
        return e;
      }, Ej = function(e) {
        var t2 = Qa(e), n2 = arguments.length, r = 1 < n2 ? arguments[1] : void 0, i = void 0 !== r, o = Xi(t2);
        if (null != o && !Vi(o)) {
          var a2 = o.call(t2), s = a2.next;
          for (t2 = []; !(o = s.call(a2)).done; ) t2.push(o.value);
        }
        for (i && 2 < n2 && (r = Id(r, arguments[2], 2)), o = ta(t2.length), a2 = new (Ne(this))(o), n2 = 0; o > n2; n2++) a2[n2] = i ? r(t2[n2], n2) : t2[n2];
        return a2;
      }, lh = function(e, t2, n2) {
        var r, i;
        return Ua && "function" == typeof (r = t2.constructor) && r !== n2 && ha(i = r.prototype) && i !== n2.prototype && Ua(e, i), e;
      }, Sf = $a(function(e) {
        var t2 = Hd.f, n2 = Za.get, r = Za.set, i = Ra.f, o = Fb.f, a2 = Math.round, s = y.RangeError, u2 = Pf.ArrayBuffer, c2 = Pf.DataView, l = function(e2, t3) {
          var n3 = 0, r2 = t3.length;
          for (e2 = new (Ne(e2))(r2); r2 > n3; ) e2[n3] = t3[n3++];
          return e2;
        }, f = function(e2, t3) {
          i(e2, t3, { get: function() {
            return n2(this)[t3];
          } });
        }, h = function(e2) {
          var t3;
          return e2 instanceof u2 || "ArrayBuffer" == (t3 = Ff(e2)) || "SharedArrayBuffer" == t3;
        }, p = function(e2, t3) {
          return jh(e2) && "symbol" != typeof t3 && t3 in e2 && String(+t3) == String(t3);
        }, d = function(e2, t3) {
          return p(e2, t3 = lc(t3, true)) ? dd(2, e2[t3]) : o(e2, t3);
        }, v2 = function(e2, t3, n3) {
          return !(p(e2, t3 = lc(t3, true)) && ha(n3) && Q(n3, "value")) || Q(n3, "get") || Q(n3, "set") || n3.configurable || Q(n3, "writable") && !n3.writable || Q(n3, "enumerable") && !n3.enumerable ? i(e2, t3, n3) : (e2[t3] = n3.value, e2);
        };
        ka ? (Qf || (Fb.f = d, Ra.f = v2, f(Rf, "buffer"), f(Rf, "byteOffset"), f(Rf, "byteLength"), f(Rf, "length")), N({ target: "Object", stat: true, forced: !Qf }, { getOwnPropertyDescriptor: d, defineProperty: v2 }), e.exports = function(e2, o2, f2) {
          var p2 = e2.match(/\d+$/)[0] / 8, d2 = e2 + (f2 ? "Clamped" : "") + "Array", v3 = "get" + e2, b = "set" + e2, g = y[d2], m2 = g;
          e2 = m2 && m2.prototype;
          var E2 = {}, w2 = function(e3, t3) {
            i(e3, t3, { get: function() {
              var e4 = n2(this);
              return e4.view[v3](t3 * p2 + e4.byteOffset, true);
            }, set: function(e4) {
              var r2 = n2(this);
              f2 && (e4 = 0 > (e4 = a2(e4)) ? 0 : 255 < e4 ? 255 : 255 & e4), r2.view[b](t3 * p2 + r2.byteOffset, e4, true);
            }, enumerable: true });
          };
          Qf ? Dj && (m2 = o2(function(e3, t3, n3, r2) {
            return Gc(e3, m2, d2), lh(ha(t3) ? h(t3) ? void 0 !== r2 ? new g(t3, kh(n3, p2), r2) : void 0 !== n3 ? new g(t3, kh(n3, p2)) : new g(t3) : jh(t3) ? l(m2, t3) : Ej.call(m2, t3) : new g(Le(t3)), e3, m2);
          }), Ua && Ua(m2, Po), Jd(t2(g), function(e3) {
            e3 in m2 || Na(m2, e3, g[e3]);
          }), m2.prototype = e2) : (m2 = o2(function(e3, t3, n3, i2) {
            Gc(e3, m2, d2);
            var o3 = 0, a3 = 0;
            if (ha(t3)) {
              if (!h(t3)) return jh(t3) ? l(m2, t3) : Ej.call(m2, t3);
              var f3 = t3;
              if (a3 = kh(n3, p2), t3 = t3.byteLength, void 0 === i2) {
                if (t3 % p2) throw s("Wrong length");
                if (0 > (i2 = t3 - a3)) throw s("Wrong length");
              } else if ((i2 = ta(i2) * p2) + a3 > t3) throw s("Wrong length");
              t3 = i2 / p2;
            } else t3 = Le(t3), f3 = new u2(i2 = t3 * p2);
            for (r(e3, { buffer: f3, byteOffset: a3, byteLength: i2, length: t3, view: new c2(f3) }); o3 < t3; ) w2(e3, o3++);
          }), Ua && Ua(m2, Po), e2 = m2.prototype = ac(Rf)), e2.constructor !== m2 && Na(e2, "constructor", m2), No && Na(e2, No, d2), E2[d2] = m2, N({ global: true, forced: m2 != g, sham: !Qf }, E2), "BYTES_PER_ELEMENT" in m2 || Na(m2, "BYTES_PER_ELEMENT", p2), "BYTES_PER_ELEMENT" in e2 || Na(e2, "BYTES_PER_ELEMENT", p2), If(d2);
        }) : e.exports = function() {
        };
      });
      Sf("Uint8", function(e) {
        return function(t2, n2, r) {
          return e(this, t2, n2, r);
        };
      });
      var hw = Math.min, iw = [].copyWithin || function(e, t2) {
        var n2 = Qa(this), r = ta(n2.length), i = xb(e, r), o = xb(t2, r), a2 = 2 < arguments.length ? arguments[2] : void 0;
        for (r = hw((void 0 === a2 ? r : xb(a2, r)) - o, r - i), a2 = 1, o < i && i < o + r && (a2 = -1, o += r - 1, i += r - 1); 0 < r--; ) o in n2 ? n2[i] = n2[o] : delete n2[i], i += a2, o += a2;
        return n2;
      };
      Aa("copyWithin", function(e, t2) {
        return iw.call(Da(this), e, t2, 2 < arguments.length ? arguments[2] : void 0);
      }), Aa("every", function(e) {
        return Ju(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("fill", function(e) {
        return yj.apply(Da(this), arguments);
      }), Aa("filter", function(e) {
        var t2 = yn(Da(this), e, 1 < arguments.length ? arguments[1] : void 0), n2 = kd(this, this.constructor), r = 0, i = t2.length;
        for (n2 = new (Ne(n2))(i); i > r; ) n2[r] = t2[r++];
        return n2;
      }), Aa("find", function(e) {
        return zn(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("findIndex", function(e) {
        return An(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("forEach", function(e) {
        Jd(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("includes", function(e) {
        return on(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("indexOf", function(e) {
        return Si(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      });
      var Qo = qa("iterator"), Ro = y.Uint8Array, jw = ld.values, kw = ld.keys, lw = ld.entries, Fj = Ro && Ro.prototype[Qo], So = !!Fj && ("values" == Fj.name || null == Fj.name), To = function() {
        return jw.call(Da(this));
      };
      Aa("entries", function() {
        return lw.call(Da(this));
      }), Aa("keys", function() {
        return kw.call(Da(this));
      }), Aa("values", To, !So), Aa(Qo, To, !So);
      var mw = [].join;
      Aa("join", function(e) {
        return mw.apply(Da(this), arguments);
      });
      var nw = Math.min, Gj = [].lastIndexOf, Uo = !!Gj && 0 > 1 / [1].lastIndexOf(1, -0), ow = Ee("lastIndexOf"), pw = Uo || !ow ? function(e) {
        if (Uo) return Gj.apply(this, arguments) || 0;
        var t2 = qb(this), n2 = ta(t2.length), r = n2 - 1;
        for (1 < arguments.length && (r = nw(r, $b(arguments[1]))), 0 > r && (r = n2 + r); 0 <= r; r--) if (r in t2 && t2[r] === e) return r || 0;
        return -1;
      } : Gj;
      Aa("lastIndexOf", function(e) {
        return pw.apply(Da(this), arguments);
      }), Aa("map", function(e) {
        return xn(Da(this), e, 1 < arguments.length ? arguments[1] : void 0, function(e2, t2) {
          return new (Ne(kd(e2, e2.constructor)))(t2);
        });
      });
      var Vo = function(e) {
        return function(t2, n2, r, i) {
          yb(n2), t2 = Qa(t2);
          var o = Af(t2), a2 = ta(t2.length), s = e ? a2 - 1 : 0, u2 = e ? -1 : 1;
          if (2 > r) for (; ; ) {
            if (s in o) {
              i = o[s], s += u2;
              break;
            }
            if (s += u2, e ? 0 > s : a2 <= s) throw TypeError("Reduce of empty array with no initial value");
          }
          for (; e ? 0 <= s : a2 > s; s += u2) s in o && (i = n2(i, o[s], s, t2));
          return i;
        };
      }, Wo = Vo(false), qw = Vo(true);
      Aa("reduce", function(e) {
        return Wo(Da(this), e, arguments.length, 1 < arguments.length ? arguments[1] : void 0);
      }), Aa("reduceRight", function(e) {
        return qw(Da(this), e, arguments.length, 1 < arguments.length ? arguments[1] : void 0);
      });
      var rw = Math.floor;
      Aa("reverse", function() {
        for (var e, t2 = Da(this).length, n2 = rw(t2 / 2), r = 0; r < n2; ) e = this[r], this[r++] = this[--t2], this[t2] = e;
        return this;
      });
      var sw = R(function() {
        new Int8Array(1).set({});
      });
      Aa("set", function(e) {
        Da(this);
        var t2 = kh(1 < arguments.length ? arguments[1] : void 0, 1), n2 = this.length, r = Qa(e), i = ta(r.length), o = 0;
        if (i + t2 > n2) throw RangeError("Wrong length");
        for (; o < i; ) this[t2 + o] = r[o++];
      }, sw);
      var tw = [].slice, uw = R(function() {
        new Int8Array(1).slice();
      });
      Aa("slice", function(e, t2) {
        e = tw.call(Da(this), e, t2);
        var n2 = kd(this, this.constructor);
        t2 = 0;
        var r = e.length;
        for (n2 = new (Ne(n2))(r); r > t2; ) n2[t2] = e[t2++];
        return n2;
      }, uw), Aa("some", function(e) {
        return Iu(Da(this), e, 1 < arguments.length ? arguments[1] : void 0);
      });
      var vw = [].sort;
      Aa("sort", function(e) {
        return vw.call(Da(this), e);
      }), Aa("subarray", function(e, t2) {
        var n2 = Da(this), r = n2.length;
        return e = xb(e, r), new (kd(n2, n2.constructor))(n2.buffer, n2.byteOffset + e * n2.BYTES_PER_ELEMENT, ta((void 0 === t2 ? r : xb(t2, r)) - e));
      });
      var mh = y.Int8Array, Xo = [].toLocaleString, ww = [].slice, xw = !!mh && R(function() {
        Xo.call(new mh(1));
      }), yw = R(function() {
        return [1, 2].toLocaleString() != new mh([1, 2]).toLocaleString();
      }) || !R(function() {
        mh.prototype.toLocaleString.call([1, 2]);
      });
      Aa("toLocaleString", function() {
        return Xo.apply(xw ? ww.call(Da(this)) : Da(this), arguments);
      }, yw);
      var Yo = y.Uint8Array, zw = Yo && Yo.prototype || {}, nh = [].toString, Aw = [].join;
      R(function() {
        nh.call({});
      }) && (nh = function() {
        return Aw.call(this);
      }), Aa("toString", nh, zw.toString != nh);
      var Zo = Pf.ArrayBuffer;
      N({ global: true, forced: y.ArrayBuffer !== Zo }, { ArrayBuffer: Zo }), If("ArrayBuffer");
      var Bw = Ra.f, Hj = Function.prototype, Cw = Hj.toString, Dw = /^\s*function ([^ (]*)/;
      !ka || "name" in Hj || Bw(Hj, "name", { configurable: true, get: function() {
        try {
          return Cw.call(this).match(Dw)[1];
        } catch (e) {
          return "";
        }
      } });
      var $o = RegExp.prototype, ap = $o.toString, Ew = R(function() {
        return "/a/b" != ap.call({ source: "a", flags: "b" });
      }), Fw = "toString" != ap.name;
      (Ew || Fw) && Ta(RegExp.prototype, "toString", function() {
        var e = va(this), t2 = String(e.source), n2 = e.flags;
        return "/" + t2 + "/" + (e = String(void 0 === n2 && e instanceof RegExp && !("flags" in $o) ? tj.call(e) : n2));
      }, { unsafe: true });
      var Gw = Ef("splice"), Hw = Math.max, Iw = Math.min;
      N({ target: "Array", proto: true, forced: !Gw }, { splice: function(e, t2) {
        var n2, r, i = Qa(this), o = ta(i.length), a2 = xb(e, o), s = arguments.length;
        if (0 === s ? s = n2 = 0 : 1 === s ? (s = 0, n2 = o - a2) : (s -= 2, n2 = Iw(Hw($b(t2), 0), o - a2)), 9007199254740991 < o + s - n2) throw TypeError("Maximum allowed length exceeded");
        var u2 = Sg(i, n2);
        for (r = 0; r < n2; r++) {
          var c2 = a2 + r;
          c2 in i && Ge(u2, r, i[c2]);
        }
        if (u2.length = n2, s < n2) {
          for (r = a2; r < o - n2; r++) {
            var l = r + s;
            (c2 = r + n2) in i ? i[l] = i[c2] : delete i[l];
          }
          for (r = o; r > o - n2 + s; r--) delete i[r - 1];
        } else if (s > n2) for (r = o - n2; r > a2; r--) l = r + s - 1, (c2 = r + n2 - 1) in i ? i[l] = i[c2] : delete i[l];
        for (r = 0; r < s; r++) i[r + a2] = arguments[r + 2];
        return i.length = o - n2 + s, u2;
      } });
      var Ij = { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 }, Jj = qa("iterator"), bp = qa("toStringTag"), Kj = ld.values, oh;
      for (oh in Ij) {
        var cp = y[oh], Kc = cp && cp.prototype;
        if (Kc) {
          if (Kc[Jj] !== Kj) try {
            Na(Kc, Jj, Kj);
          } catch (c2) {
            Kc[Jj] = Kj;
          }
          if (Kc[bp] || Na(Kc, bp, oh), Ij[oh]) {
            for (var Oe in ld) if (Kc[Oe] !== ld[Oe]) try {
              Na(Kc, Oe, ld[Oe]);
            } catch (c2) {
              Kc[Oe] = ld[Oe];
            }
          }
        }
      }
      var dp = Object.is || function(e, t2) {
        return e === t2 ? 0 !== e || 1 / e == 1 / t2 : e != e && t2 != t2;
      };
      dh("search", 1, function(e, t2, n2) {
        return [function(t3) {
          var n3 = jb(this), r = null == t3 ? void 0 : t3[e];
          return void 0 !== r ? r.call(t3, n3) : new RegExp(t3)[e](String(n3));
        }, function(e2) {
          var r = n2(t2, e2, this);
          if (r.done) return r.value;
          e2 = va(e2);
          var i = String(this);
          return r = e2.lastIndex, dp(r, 0) || (e2.lastIndex = 0), i = Ke(e2, i), dp(e2.lastIndex, r) || (e2.lastIndex = r), null === i ? -1 : i.index;
        }];
      }), $a(function(e) {
        !function(t2, n2) {
          e.exports ? e.exports = n2(t2) : n2(t2);
        }("undefined" != typeof self ? self : Ya, function(e2) {
          function t2(e3) {
            return btoa(e3).replace(/=+$/, "").replace(/\+/g, "-").replace(/\//g, "_");
          }
          function n2(e3) {
            return e3 = (e3 += "===").slice(0, -e3.length % 4), atob(e3.replace(/-/g, "+").replace(/_/g, "/"));
          }
          function r(e3) {
            for (var t3 = new Uint8Array(e3.length), n3 = 0; n3 < e3.length; n3++) t3[n3] = e3.charCodeAt(n3);
            return t3;
          }
          function i(e3) {
            return e3 instanceof ArrayBuffer && (e3 = new Uint8Array(e3)), String.fromCharCode.apply(String, e3);
          }
          function o(e3) {
            var t3 = { name: (e3.name || e3 || "").toUpperCase().replace("V", "v") };
            switch (t3.name) {
              case "SHA-1":
              case "SHA-256":
              case "SHA-384":
              case "SHA-512":
                break;
              case "AES-CBC":
              case "AES-GCM":
              case "AES-KW":
                e3.length && (t3.length = e3.length);
                break;
              case "HMAC":
                e3.hash && (t3.hash = o(e3.hash)), e3.length && (t3.length = e3.length);
                break;
              case "RSAES-PKCS1-v1_5":
                e3.publicExponent && (t3.publicExponent = new Uint8Array(e3.publicExponent)), e3.modulusLength && (t3.modulusLength = e3.modulusLength);
                break;
              case "RSASSA-PKCS1-v1_5":
              case "RSA-OAEP":
                e3.hash && (t3.hash = o(e3.hash)), e3.publicExponent && (t3.publicExponent = new Uint8Array(e3.publicExponent)), e3.modulusLength && (t3.modulusLength = e3.modulusLength);
                break;
              default:
                throw new SyntaxError("Bad algorithm name");
            }
            return t3;
          }
          function a2(e3) {
            return { HMAC: { "SHA-1": "HS1", "SHA-256": "HS256", "SHA-384": "HS384", "SHA-512": "HS512" }, "RSASSA-PKCS1-v1_5": { "SHA-1": "RS1", "SHA-256": "RS256", "SHA-384": "RS384", "SHA-512": "RS512" }, "RSAES-PKCS1-v1_5": { "": "RSA1_5" }, "RSA-OAEP": { "SHA-1": "RSA-OAEP", "SHA-256": "RSA-OAEP-256" }, "AES-KW": { 128: "A128KW", 192: "A192KW", 256: "A256KW" }, "AES-GCM": { 128: "A128GCM", 192: "A192GCM", 256: "A256GCM" }, "AES-CBC": { 128: "A128CBC", 192: "A192CBC", 256: "A256CBC" } }[e3.name][(e3.hash || {}).name || e3.length || ""];
          }
          function s(e3) {
            (e3 instanceof ArrayBuffer || e3 instanceof Uint8Array) && (e3 = JSON.parse(decodeURIComponent(escape(i(e3)))));
            var t3 = { kty: e3.kty, alg: e3.alg, ext: e3.ext || e3.extractable };
            switch (t3.kty) {
              case "oct":
                t3.k = e3.k;
              case "RSA":
                "n e d p q dp dq qi oth".split(" ").forEach(function(n3) {
                  n3 in e3 && (t3[n3] = e3[n3]);
                });
                break;
              default:
                throw new TypeError("Unsupported key type");
            }
            return t3;
          }
          function u2(e3) {
            return e3 = s(e3), E2 && (e3.extractable = e3.ext, delete e3.ext), r(unescape(encodeURIComponent(JSON.stringify(e3)))).buffer;
          }
          function c2(e3) {
            var n3 = l(e3), r2 = false;
            switch (2 < n3.length && (r2 = true, n3.shift()), e3 = { ext: true }, n3[0][0]) {
              case "1.2.840.113549.1.1.1":
                var o2 = "n e d p q dp dq qi".split(" ");
                for (n3 = l(n3[1]), r2 && n3.shift(), r2 = 0; r2 < n3.length; r2++) n3[r2][0] || (n3[r2] = n3[r2].subarray(1)), e3[o2[r2]] = t2(i(n3[r2]));
                e3.kty = "RSA";
                break;
              default:
                throw new TypeError("Unsupported key type");
            }
            return e3;
          }
          function l(e3, t3) {
            if (e3 instanceof ArrayBuffer && (e3 = new Uint8Array(e3)), t3 || (t3 = { pos: 0, end: e3.length }), 2 > t3.end - t3.pos || t3.end > e3.length) throw new RangeError("Malformed DER");
            var n3 = e3[t3.pos++], r2 = e3[t3.pos++];
            if (128 <= r2) {
              if (r2 &= 127, t3.end - t3.pos < r2) throw new RangeError("Malformed DER");
              for (var o2 = 0; r2--; ) o2 <<= 8, o2 |= e3[t3.pos++];
              r2 = o2;
            }
            if (t3.end - t3.pos < r2) throw new RangeError("Malformed DER");
            switch (n3) {
              case 2:
                n3 = e3.subarray(t3.pos, t3.pos += r2);
                break;
              case 3:
                if (e3[t3.pos++]) throw Error("Unsupported bit string");
                r2--;
              case 4:
                n3 = new Uint8Array(e3.subarray(t3.pos, t3.pos += r2)).buffer;
                break;
              case 5:
                n3 = null;
                break;
              case 6:
                if (!((e3 = btoa(i(e3.subarray(t3.pos, t3.pos += r2)))) in _)) throw Error("Unsupported OBJECT ID " + e3);
                n3 = _[e3];
                break;
              case 48:
                for (n3 = [], r2 = t3.pos + r2; t3.pos < r2; ) n3.push(l(e3, t3));
                break;
              default:
                throw Error("Unsupported DER tag 0x" + n3.toString(16));
            }
            return n3;
          }
          function f(e3, t3) {
            t3 || (t3 = []);
            var n3 = t3.length + 2;
            if (t3.push(0, 0), e3 instanceof Uint8Array) for (var i2 = 2, o2 = e3.length, a3 = 0; a3 < o2; a3++) t3.push(e3[a3]);
            else if (e3 instanceof ArrayBuffer) for (i2 = 4, o2 = e3.byteLength, e3 = new Uint8Array(e3), a3 = 0; a3 < o2; a3++) t3.push(e3[a3]);
            else if (null === e3) i2 = 5, o2 = 0;
            else if ("string" == typeof e3 && e3 in O2) for (i2 = 6, o2 = (e3 = r(atob(O2[e3]))).length, a3 = 0; a3 < o2; a3++) t3.push(e3[a3]);
            else if (e3 instanceof Array) {
              for (a3 = 0; a3 < e3.length; a3++) f(e3[a3], t3);
              i2 = 48, o2 = t3.length - n3;
            } else {
              if (!("object" === X(e3) && 3 === e3.tag && e3.value instanceof ArrayBuffer)) throw Error("Unsupported DER value " + e3);
              for (i2 = 3, o2 = (e3 = new Uint8Array(e3.value)).byteLength, t3.push(0), a3 = 0; a3 < o2; a3++) t3.push(e3[a3]);
              o2++;
            }
            if (128 <= o2) {
              for (a3 = o2, o2 = 4, t3.splice(n3, 0, a3 >> 24 & 255, a3 >> 16 & 255, a3 >> 8 & 255, 255 & a3); 1 < o2 && !(a3 >> 24); ) a3 <<= 8, o2--;
              4 > o2 && t3.splice(n3, 4 - o2), o2 |= 128;
            }
            return t3.splice(n3 - 2, 2, i2, o2), t3;
          }
          function h(e3, t3, n3, r2) {
            Object.defineProperties(this, { _key: { value: e3 }, type: { value: e3.type, enumerable: true }, extractable: { value: void 0 === n3 ? e3.extractable : n3, enumerable: true }, algorithm: { value: void 0 === t3 ? e3.algorithm : t3, enumerable: true }, usages: { value: void 0 === r2 ? e3.usages : r2, enumerable: true } });
          }
          function p(e3) {
            return "verify" === e3 || "encrypt" === e3 || "wrapKey" === e3;
          }
          function d(e3) {
            return "sign" === e3 || "decrypt" === e3 || "unwrapKey" === e3;
          }
          if ("function" != typeof Promise) throw "Promise support required";
          var v2 = e2.crypto || e2.msCrypto;
          if (v2) {
            var b = v2.subtle || v2.webkitSubtle;
            if (b) {
              var g = e2.Crypto || v2.constructor || Object, y2 = e2.SubtleCrypto || b.constructor || Object;
              e2.CryptoKey || e2.Key;
              var m2 = -1 < e2.navigator.userAgent.indexOf("Edge/"), E2 = !!e2.msCrypto && !m2, w2 = !v2.subtle && !!v2.webkitSubtle;
              if (E2 || w2) {
                var _ = { KoZIhvcNAQEB: "1.2.840.113549.1.1.1" }, O2 = { "1.2.840.113549.1.1.1": "KoZIhvcNAQEB" };
                if (["generateKey", "importKey", "unwrapKey"].forEach(function(e3) {
                  var t3 = b[e3];
                  b[e3] = function(i2, l2, f2) {
                    var g2 = [].slice.call(arguments);
                    switch (e3) {
                      case "generateKey":
                        var y3 = o(i2), m3 = l2, _2 = f2;
                        break;
                      case "importKey":
                        y3 = o(f2), m3 = g2[3], _2 = g2[4], "jwk" === i2 && ((l2 = s(l2)).alg || (l2.alg = a2(y3)), l2.key_ops || (l2.key_ops = "oct" !== l2.kty ? "d" in l2 ? _2.filter(d) : _2.filter(p) : _2.slice()), g2[1] = u2(l2));
                        break;
                      case "unwrapKey":
                        y3 = g2[4], m3 = g2[5], _2 = g2[6], g2[2] = f2._key;
                    }
                    if ("generateKey" === e3 && "HMAC" === y3.name && y3.hash) return y3.length = y3.length || { "SHA-1": 512, "SHA-256": 512, "SHA-384": 1024, "SHA-512": 1024 }[y3.hash.name], b.importKey("raw", v2.getRandomValues(new Uint8Array(y3.length + 7 >> 3)), y3, m3, _2);
                    if (w2 && "generateKey" === e3 && "RSASSA-PKCS1-v1_5" === y3.name && (!y3.modulusLength || 2048 <= y3.modulusLength)) return (i2 = o(i2)).name = "RSAES-PKCS1-v1_5", delete i2.hash, b.generateKey(i2, true, ["encrypt", "decrypt"]).then(function(e4) {
                      return Promise.all([b.exportKey("jwk", e4.publicKey), b.exportKey("jwk", e4.privateKey)]);
                    }).then(function(e4) {
                      return e4[0].alg = e4[1].alg = a2(y3), e4[0].key_ops = _2.filter(p), e4[1].key_ops = _2.filter(d), Promise.all([b.importKey("jwk", e4[0], y3, true, e4[0].key_ops), b.importKey("jwk", e4[1], y3, m3, e4[1].key_ops)]);
                    }).then(function(e4) {
                      return { publicKey: e4[0], privateKey: e4[1] };
                    });
                    if ((w2 || E2 && "SHA-1" === (y3.hash || {}).name) && "importKey" === e3 && "jwk" === i2 && "HMAC" === y3.name && "oct" === l2.kty) return b.importKey("raw", r(n2(l2.k)), f2, g2[3], g2[4]);
                    if (w2 && "importKey" === e3 && ("spki" === i2 || "pkcs8" === i2)) return b.importKey("jwk", c2(l2), f2, g2[3], g2[4]);
                    if (E2 && "unwrapKey" === e3) return b.decrypt(g2[3], f2, l2).then(function(e4) {
                      return b.importKey(i2, e4, g2[4], g2[5], g2[6]);
                    });
                    try {
                      var O3 = t3.apply(b, g2);
                    } catch (e4) {
                      return Promise.reject(e4);
                    }
                    return E2 && (O3 = new Promise(function(e4, t4) {
                      O3.onabort = O3.onerror = function(e5) {
                        t4(e5);
                      }, O3.oncomplete = function(t5) {
                        e4(t5.target.result);
                      };
                    })), O3 = O3.then(function(e4) {
                      return "HMAC" !== y3.name || y3.length || (y3.length = 8 * e4.algorithm.length), 0 == y3.name.search("RSA") && (y3.modulusLength || (y3.modulusLength = (e4.publicKey || e4).algorithm.modulusLength), y3.publicExponent || (y3.publicExponent = (e4.publicKey || e4).algorithm.publicExponent)), e4.publicKey && e4.privateKey ? { publicKey: new h(e4.publicKey, y3, m3, _2.filter(p)), privateKey: new h(e4.privateKey, y3, m3, _2.filter(d)) } : new h(e4, y3, m3, _2);
                    });
                  };
                }), ["exportKey", "wrapKey"].forEach(function(e3) {
                  var o2 = b[e3];
                  b[e3] = function(u3, c3, l2) {
                    var h2 = [].slice.call(arguments);
                    switch (e3) {
                      case "exportKey":
                        h2[1] = c3._key;
                        break;
                      case "wrapKey":
                        h2[1] = c3._key, h2[2] = l2._key;
                    }
                    if ((w2 || E2 && "SHA-1" === (c3.algorithm.hash || {}).name) && "exportKey" === e3 && "jwk" === u3 && "HMAC" === c3.algorithm.name && (h2[0] = "raw"), !w2 || "exportKey" !== e3 || "spki" !== u3 && "pkcs8" !== u3 || (h2[0] = "jwk"), E2 && "wrapKey" === e3) return b.exportKey(u3, c3).then(function(e4) {
                      return "jwk" === u3 && (e4 = r(unescape(encodeURIComponent(JSON.stringify(s(e4)))))), b.encrypt(h2[3], l2, e4);
                    });
                    try {
                      var v3 = o2.apply(b, h2);
                    } catch (e4) {
                      return Promise.reject(e4);
                    }
                    return E2 && (v3 = new Promise(function(e4, t3) {
                      v3.onabort = v3.onerror = function(e5) {
                        t3(e5);
                      }, v3.oncomplete = function(t4) {
                        e4(t4.target.result);
                      };
                    })), "exportKey" === e3 && "jwk" === u3 && (v3 = v3.then(function(e4) {
                      return (w2 || E2 && "SHA-1" === (c3.algorithm.hash || {}).name) && "HMAC" === c3.algorithm.name ? { kty: "oct", alg: a2(c3.algorithm), key_ops: c3.usages.slice(), ext: true, k: t2(i(e4)) } : ((e4 = s(e4)).alg || (e4.alg = a2(c3.algorithm)), e4.key_ops || (e4.key_ops = "public" === c3.type ? c3.usages.filter(p) : "private" === c3.type ? c3.usages.filter(d) : c3.usages.slice()), e4);
                    })), !w2 || "exportKey" !== e3 || "spki" !== u3 && "pkcs8" !== u3 || (v3 = v3.then(function(e4) {
                      var t3 = [["", null]], i2 = false;
                      switch ((e4 = s(e4)).kty) {
                        case "RSA":
                          for (var o3 = "n e d p q dp dq qi".split(" "), a3 = [], u4 = 0; u4 < o3.length && o3[u4] in e4; u4++) {
                            var c4 = a3[u4] = r(n2(e4[o3[u4]]));
                            128 & c4[0] && (a3[u4] = new Uint8Array(c4.length + 1), a3[u4].set(c4, 1));
                          }
                          2 < a3.length && (i2 = true, a3.unshift(new Uint8Array([0]))), t3[0][0] = "1.2.840.113549.1.1.1";
                          break;
                        default:
                          throw new TypeError("Unsupported key type");
                      }
                      return t3.push(new Uint8Array(f(a3)).buffer), i2 ? t3.unshift(new Uint8Array([0])) : t3[1] = { tag: 3, value: t3[1] }, new Uint8Array(f(t3)).buffer;
                    })), v3;
                  };
                }), ["encrypt", "decrypt", "sign", "verify"].forEach(function(e3) {
                  var t3 = b[e3];
                  b[e3] = function(n3, r2, i2, a3) {
                    if (E2 && (!i2.byteLength || a3 && !a3.byteLength)) throw Error("Empty input is not allowed");
                    var s2 = [].slice.call(arguments), u3 = o(n3);
                    if (!E2 || "sign" !== e3 && "verify" !== e3 || "RSASSA-PKCS1-v1_5" !== n3 && "HMAC" !== n3 || (s2[0] = { name: n3 }), E2 && r2.algorithm.hash && (s2[0].hash = s2[0].hash || r2.algorithm.hash), E2 && "decrypt" === e3 && "AES-GCM" === u3.name) {
                      var c3 = n3.tagLength >> 3;
                      s2[2] = (i2.buffer || i2).slice(0, i2.byteLength - c3), n3.tag = (i2.buffer || i2).slice(i2.byteLength - c3);
                    }
                    E2 && "AES-GCM" === u3.name && void 0 === s2[0].tagLength && (s2[0].tagLength = 128), s2[1] = r2._key;
                    try {
                      var l2 = t3.apply(b, s2);
                    } catch (e4) {
                      return Promise.reject(e4);
                    }
                    return E2 && (l2 = new Promise(function(t4, n4) {
                      l2.onabort = l2.onerror = function(e4) {
                        n4(e4);
                      }, l2.oncomplete = function(n5) {
                        if (n5 = n5.target.result, "encrypt" === e3 && n5 instanceof AesGcmEncryptResult) {
                          var r3 = n5.ciphertext, i3 = n5.tag;
                          (n5 = new Uint8Array(r3.byteLength + i3.byteLength)).set(new Uint8Array(r3), 0), n5.set(new Uint8Array(i3), r3.byteLength), n5 = n5.buffer;
                        }
                        t4(n5);
                      };
                    })), l2;
                  };
                }), E2) {
                  var I2 = b.digest;
                  b.digest = function(e3, t3) {
                    if (!t3.byteLength) throw Error("Empty input is not allowed");
                    try {
                      var n3 = I2.call(b, e3, t3);
                    } catch (e4) {
                      return Promise.reject(e4);
                    }
                    return n3 = new Promise(function(e4, t4) {
                      n3.onabort = n3.onerror = function(e5) {
                        t4(e5);
                      }, n3.oncomplete = function(t5) {
                        e4(t5.target.result);
                      };
                    });
                  }, e2.crypto = Object.create(v2, { getRandomValues: { value: function(e3) {
                    return v2.getRandomValues(e3);
                  } }, subtle: { value: b } }), e2.CryptoKey = h;
                }
                w2 && (v2.subtle = b, e2.Crypto = g, e2.SubtleCrypto = y2, e2.CryptoKey = h);
              }
            }
          }
        });
      });
      var Jw = qa("match"), Lj = function(e) {
        var t2;
        return ha(e) && (void 0 !== (t2 = e[Jw]) ? !!t2 : "RegExp" == Zb(e));
      }, Kw = [].push, Lw = Math.min;
      dh("split", 2, function(e, t2, n2) {
        var r = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1).length || 2 != "ab".split(/(?:ab)*/).length || 4 != ".".split(/(.?)(.?)/).length || 1 < ".".split(/()()/).length || "".split(/.?/).length ? function(e2, n3) {
          var r2 = String(jb(this));
          if (0 === (n3 = void 0 === n3 ? 4294967295 : n3 >>> 0)) return [];
          if (void 0 === e2) return [r2];
          if (!Lj(e2)) return t2.call(r2, e2, n3);
          var i, o, a2, s = [], u2 = 0;
          for (e2 = new RegExp(e2.source, (e2.ignoreCase ? "i" : "") + (e2.multiline ? "m" : "") + (e2.unicode ? "u" : "") + (e2.sticky ? "y" : "") + "g"); (i = Of.call(e2, r2)) && !((o = e2.lastIndex) > u2 && (s.push(r2.slice(u2, i.index)), 1 < i.length && i.index < r2.length && Kw.apply(s, i.slice(1)), a2 = i[0].length, u2 = o, s.length >= n3)); ) e2.lastIndex === i.index && e2.lastIndex++;
          return u2 === r2.length ? (a2 || !e2.test("")) && s.push("") : s.push(r2.slice(u2)), s.length > n3 ? s.slice(0, n3) : s;
        } : "0".split(void 0, 0).length ? function(e2, n3) {
          return void 0 === e2 && 0 === n3 ? [] : t2.call(this, e2, n3);
        } : t2;
        return [function(t3, n3) {
          var i = jb(this), o = null == t3 ? void 0 : t3[e];
          return void 0 !== o ? o.call(t3, i, n3) : r.call(String(i), t3, n3);
        }, function(e2, i) {
          var o = n2(r, e2, this, i, r !== t2);
          if (o.done) return o.value;
          var a2 = va(e2);
          e2 = String(this);
          var s = kd(a2, RegExp);
          if (o = a2.unicode, a2 = new s(pc ? "^(?:" + a2.source + ")" : a2, (a2.ignoreCase ? "i" : "") + (a2.multiline ? "m" : "") + (a2.unicode ? "u" : "") + (pc ? "g" : "y")), 0 === (i = void 0 === i ? 4294967295 : i >>> 0)) return [];
          if (0 === e2.length) return null === Ke(a2, e2) ? [e2] : [];
          var u2 = 0, c2 = 0;
          for (s = []; c2 < e2.length; ) {
            a2.lastIndex = pc ? 0 : c2;
            var l, f = Ke(a2, pc ? e2.slice(c2) : e2);
            if (null === f || (l = Lw(ta(a2.lastIndex + (pc ? c2 : 0)), e2.length)) === u2) c2 = xj(e2, c2, o);
            else {
              if (s.push(e2.slice(u2, c2)), s.length === i) return s;
              for (u2 = 1; u2 <= f.length - 1; u2++) if (s.push(f[u2]), s.length === i) return s;
              c2 = u2 = l;
            }
          }
          return s.push(e2.slice(u2)), s;
        }];
      }, pc), function(e) {
        e.console || (e.console = {}), e = e.console;
        for (var t2, n2 = function() {
        }, r = ["memory"], i = "assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" "); t2 = r.pop(); ) e[t2] || (e[t2] = {});
        for (; t2 = i.pop(); ) e[t2] || (e[t2] = n2);
      }("undefined" == typeof window ? Ya : window), N({ target: "Object", stat: true }, { setPrototypeOf: Ua });
      var Mw = R(function() {
        Vb(1);
      });
      N({ target: "Object", stat: true, forced: Mw, sham: !Hn }, { getPrototypeOf: function(e) {
        return Vb(Qa(e));
      } });
      var ep = [].slice, Mj = {}, Nw = Function.bind || function(e) {
        var t2 = yb(this), n2 = ep.call(arguments, 1), r = function() {
          var i = n2.concat(ep.call(arguments));
          if (this instanceof r) {
            var o = i.length;
            if (!(o in Mj)) {
              for (var a2 = [], s = 0; s < o; s++) a2[s] = "a[" + s + "]";
              Mj[o] = Function("C,a", "return new C(" + a2.join(",") + ")");
            }
            i = Mj[o](t2, i);
          } else i = t2.apply(e, i);
          return i;
        };
        return ha(t2.prototype) && (r.prototype = t2.prototype), r;
      }, Nj = mc("Reflect", "construct"), fp = R(function() {
        function e() {
        }
        return !(Nj(function() {
        }, [], e) instanceof e);
      }), gp = !R(function() {
        Nj(function() {
        });
      }), hp = fp || gp;
      N({ target: "Reflect", stat: true, forced: hp, sham: hp }, { construct: function(e, t2) {
        yb(e), va(t2);
        var n2 = 3 > arguments.length ? e : yb(arguments[2]);
        if (gp && !fp) return Nj(e, t2, n2);
        if (e == n2) {
          switch (t2.length) {
            case 0:
              return new e();
            case 1:
              return new e(t2[0]);
            case 2:
              return new e(t2[0], t2[1]);
            case 3:
              return new e(t2[0], t2[1], t2[2]);
            case 4:
              return new e(t2[0], t2[1], t2[2], t2[3]);
          }
          return (n2 = [null]).push.apply(n2, t2), new (Nw.apply(e, n2))();
        }
        n2 = n2.prototype, n2 = ac(ha(n2) ? n2 : Object.prototype);
        var r = Function.apply.call(e, n2, t2);
        return ha(r) ? r : n2;
      } }), N({ target: "Reflect", stat: true }, { get: wl });
      var ip = Fb.f, Ow = R(function() {
        ip(1);
      });
      N({ target: "Object", stat: true, forced: !ka || Ow, sham: !ka }, { getOwnPropertyDescriptor: function(e, t2) {
        return ip(qb(e), t2);
      } });
      var jp = Hd.f, Pw = {}.toString, kp = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [], Oj = function(e) {
        if (kp && "[object Window]" == Pw.call(e)) try {
          var t2 = jp(e);
        } catch (e2) {
          t2 = kp.slice();
        }
        else t2 = jp(qb(e));
        return t2;
      }, lp = { f: qa }, Qw = Ra.f, ph = function(e) {
        var t2 = y.Symbol || (y.Symbol = {});
        Q(t2, e) || Qw(t2, e, { value: lp.f(e) });
      }, rb = Pg("hidden"), mp = qa("toPrimitive"), Rw = Za.set, np = Za.getterFor("Symbol"), Ob = Object.prototype, sb = y.Symbol, Tf = mc("JSON", "stringify"), op = Fb.f, od = Ra.f, pp = Oj, Sw = zf, Lc = fd("symbols"), Uf = fd("op-symbols"), Pj = fd("string-to-symbol-registry"), Qj = fd("symbol-to-string-registry"), Tw = fd("wks"), Rj = y.QObject, Sj = !Rj || !Rj.prototype || !Rj.prototype.findChild, Tj = ka && R(function() {
        return 7 != ac(od({}, "a", { get: function() {
          return od(this, "a", { value: 7 }).a;
        } })).a;
      }) ? function(e, t2, n2) {
        var r = op(Ob, t2);
        r && delete Ob[t2], od(e, t2, n2), r && e !== Ob && od(Ob, t2, r);
      } : od, Uj = function(e, t2) {
        var n2 = Lc[e] = ac(sb.prototype);
        return Rw(n2, { type: "Symbol", tag: e, description: t2 }), ka || (n2.description = t2), n2;
      }, Vj = vn ? function(e) {
        return "symbol" == typeof e;
      } : function(e) {
        return Object(e) instanceof sb;
      }, qh = function(e, t2, n2) {
        return e === Ob && qh(Uf, t2, n2), va(e), t2 = lc(t2, true), va(n2), Q(Lc, t2) ? (n2.enumerable ? (Q(e, rb) && e[rb][t2] && (e[rb][t2] = false), n2 = ac(n2, { enumerable: dd(0, false) })) : (Q(e, rb) || od(e, rb, dd(1, {})), e[rb][t2] = true), Tj(e, t2, n2)) : od(e, t2, n2);
      }, qp = function(e, t2) {
        va(e);
        var n2 = qb(t2);
        return t2 = Dc(n2).concat(Wj(n2)), Jd(t2, function(t3) {
          ka && !Xj.call(n2, t3) || qh(e, t3, n2[t3]);
        }), e;
      }, Xj = function(e) {
        e = lc(e, true);
        var t2 = Sw.call(this, e);
        return !(this === Ob && Q(Lc, e) && !Q(Uf, e)) && (!(t2 || !Q(this, e) || !Q(Lc, e) || Q(this, rb) && this[rb][e]) || t2);
      }, rp = function(e, t2) {
        if (e = qb(e), t2 = lc(t2, true), e !== Ob || !Q(Lc, t2) || Q(Uf, t2)) {
          var n2 = op(e, t2);
          return !n2 || !Q(Lc, t2) || Q(e, rb) && e[rb][t2] || (n2.enumerable = true), n2;
        }
      }, sp = function(e) {
        e = pp(qb(e));
        var t2 = [];
        return Jd(e, function(e2) {
          Q(Lc, e2) || Q(Be, e2) || t2.push(e2);
        }), t2;
      }, Wj = function(e) {
        var t2 = e === Ob;
        e = pp(t2 ? Uf : qb(e));
        var n2 = [];
        return Jd(e, function(e2) {
          !Q(Lc, e2) || t2 && !Q(Ob, e2) || n2.push(Lc[e2]);
        }), n2;
      };
      if (oc || (sb = function() {
        if (this instanceof sb) throw TypeError("Symbol is not a constructor");
        var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0, t2 = Ae(e), n2 = function(e2) {
          this === Ob && n2.call(Uf, e2), Q(this, rb) && Q(this[rb], t2) && (this[rb][t2] = false), Tj(this, t2, dd(1, e2));
        };
        return ka && Sj && Tj(Ob, t2, { configurable: true, set: n2 }), Uj(t2, e);
      }, Ta(sb.prototype, "toString", function() {
        return np(this).tag;
      }), Ta(sb, "withoutSetter", function(e) {
        return Uj(Ae(e), e);
      }), zf = Xj, Ra.f = qh, Fb.f = rp, Hd.f = Oj = sp, Bf.f = Wj, lp.f = function(e) {
        return Uj(qa(e), e);
      }, ka && (od(sb.prototype, "description", { configurable: true, get: function() {
        return np(this).description;
      } }), Ta(Ob, "propertyIsEnumerable", Xj, { unsafe: true }))), N({ global: true, wrap: true, forced: !oc, sham: !oc }, { Symbol: sb }), Jd(Dc(Tw), function(e) {
        ph(e);
      }), N({ target: "Symbol", stat: true, forced: !oc }, { for: function(e) {
        if (e = String(e), Q(Pj, e)) return Pj[e];
        var t2 = sb(e);
        return Pj[e] = t2, Qj[t2] = e, t2;
      }, keyFor: function(e) {
        if (!Vj(e)) throw TypeError(e + " is not a symbol");
        if (Q(Qj, e)) return Qj[e];
      }, useSetter: function() {
        Sj = true;
      }, useSimple: function() {
        Sj = false;
      } }), N({ target: "Object", stat: true, forced: !oc, sham: !ka }, { create: function(e, t2) {
        return void 0 === t2 ? ac(e) : qp(ac(e), t2);
      }, defineProperty: qh, defineProperties: qp, getOwnPropertyDescriptor: rp }), N({ target: "Object", stat: true, forced: !oc }, { getOwnPropertyNames: sp, getOwnPropertySymbols: Wj }), N({ target: "Object", stat: true, forced: R(function() {
        Bf.f(1);
      }) }, { getOwnPropertySymbols: function(e) {
        return Bf.f(Qa(e));
      } }), Tf) {
        var Uw = !oc || R(function() {
          var e = sb();
          return "[null]" != Tf([e]) || "{}" != Tf({ a: e }) || "{}" != Tf(Object(e));
        });
        N({ target: "JSON", stat: true, forced: Uw }, { stringify: function(e, t2, n2) {
          for (var r, i = [e], o = 1; arguments.length > o; ) i.push(arguments[o++]);
          if (r = t2, (ha(t2) || void 0 !== e) && !Vj(e)) return gd(t2) || (t2 = function(e2, t3) {
            if ("function" == typeof r && (t3 = r.call(this, e2, t3)), !Vj(t3)) return t3;
          }), i[1] = t2, Tf.apply(null, i);
        } });
      }
      sb.prototype[mp] || Na(sb.prototype, mp, sb.prototype.valueOf), Ec(sb, "Symbol"), Be[rb] = true;
      var Vw = Ra.f, Mc = y.Symbol;
      if (ka && "function" == typeof Mc && (!("description" in Mc.prototype) || void 0 !== Mc().description)) {
        var tp = {}, Vf = function() {
          var e = 1 > arguments.length || void 0 === arguments[0] ? void 0 : String(arguments[0]), t2 = this instanceof Vf ? new Mc(e) : void 0 === e ? Mc() : Mc(e);
          return "" === e && (tp[t2] = true), t2;
        };
        rn(Vf, Mc);
        var Yj = Vf.prototype = Mc.prototype;
        Yj.constructor = Vf;
        var Ww = Yj.toString, Xw = "Symbol(test)" == String(Mc("test")), Yw = /^Symbol\((.*)\)[^)]+$/;
        Vw(Yj, "description", { configurable: true, get: function() {
          var e = ha(this) ? this.valueOf() : this, t2 = Ww.call(e);
          return Q(tp, e) ? "" : "" === (e = Xw ? t2.slice(7, -1) : t2.replace(Yw, "$1")) ? void 0 : e;
        } }), N({ global: true, forced: true }, { Symbol: Vf });
      }
      ph("toStringTag"), Ec(y.JSON, "JSON", true), Ec(Math, "Math", true), function() {
        function e(e2, t3) {
          if (!(e2 instanceof t3)) throw new TypeError("Cannot call a class as a function");
        }
        function t2(e2, t3) {
          for (var n3 = 0; n3 < t3.length; n3++) {
            var r2 = t3[n3];
            r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e2, r2.key, r2);
          }
        }
        function n2(e2, n3, r2) {
          return n3 && t2(e2.prototype, n3), r2 && t2(e2, r2), e2;
        }
        function r(e2, t3) {
          if ("function" != typeof t3 && null !== t3) throw new TypeError("Super expression must either be null or a function");
          e2.prototype = Object.create(t3 && t3.prototype, { constructor: { value: e2, writable: true, configurable: true } }), t3 && o(e2, t3);
        }
        function i(e2) {
          return (i = Object.setPrototypeOf ? Object.getPrototypeOf : function(e3) {
            return e3.__proto__ || Object.getPrototypeOf(e3);
          })(e2);
        }
        function o(e2, t3) {
          return (o = Object.setPrototypeOf || function(e3, t4) {
            return e3.__proto__ = t4, e3;
          })(e2, t3);
        }
        function a2(e2) {
          if (void 0 === e2) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return e2;
        }
        function s(e2) {
          var t3 = function() {
            if ("undefined" == typeof Reflect || !Reflect.construct || Reflect.construct.sham) return false;
            if ("function" == typeof Proxy) return true;
            try {
              return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
              })), true;
            } catch (e3) {
              return false;
            }
          }();
          return function() {
            var n3 = i(e2);
            if (t3) {
              var r2 = i(this).constructor;
              n3 = Reflect.construct(n3, arguments, r2);
            } else n3 = n3.apply(this, arguments);
            return n3 = !n3 || "object" !== X(n3) && "function" != typeof n3 ? a2(this) : n3;
          };
        }
        function u2(e2, t3, n3) {
          return (u2 = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function(e3, t4, n4) {
            for (; !Object.prototype.hasOwnProperty.call(e3, t4) && null !== (e3 = i(e3)); ) ;
            if (e3) return (t4 = Object.getOwnPropertyDescriptor(e3, t4)).get ? t4.get.call(n4) : t4.value;
          })(e2, t3, n3 || e2);
        }
        var c2 = function() {
          function t3() {
            e(this, t3), Object.defineProperty(this, "listeners", { value: {}, writable: true, configurable: true });
          }
          return n2(t3, [{ key: "addEventListener", value: function(e2, t4, n3) {
            e2 in this.listeners || (this.listeners[e2] = []), this.listeners[e2].push({ callback: t4, options: n3 });
          } }, { key: "removeEventListener", value: function(e2, t4) {
            if (e2 in this.listeners) {
              for (var n3 = 0, r2 = (e2 = this.listeners[e2]).length; n3 < r2; n3++) if (e2[n3].callback === t4) {
                e2.splice(n3, 1);
                break;
              }
            }
          } }, { key: "dispatchEvent", value: function(e2) {
            if (e2.type in this.listeners) {
              for (var t4 = this.listeners[e2.type].slice(), n3 = 0, r2 = t4.length; n3 < r2; n3++) {
                var i2 = t4[n3];
                try {
                  i2.callback.call(this, e2);
                } catch (e3) {
                  Promise.resolve().then(function() {
                    throw e3;
                  });
                }
                i2.options && i2.options.once && this.removeEventListener(e2.type, i2.callback);
              }
              return !e2.defaultPrevented;
            }
          } }]), t3;
        }(), l = function(t3) {
          function o2() {
            e(this, o2);
            var t4 = l2.call(this);
            return t4.listeners || c2.call(a2(t4)), Object.defineProperty(a2(t4), "aborted", { value: false, writable: true, configurable: true }), Object.defineProperty(a2(t4), "onabort", { value: null, writable: true, configurable: true }), t4;
          }
          r(o2, t3);
          var l2 = s(o2);
          return n2(o2, [{ key: "toString", value: function() {
            return "[object AbortSignal]";
          } }, { key: "dispatchEvent", value: function(e2) {
            "abort" === e2.type && (this.aborted = true, "function" == typeof this.onabort && this.onabort.call(this, e2)), u2(i(o2.prototype), "dispatchEvent", this).call(this, e2);
          } }]), o2;
        }(c2), f = function() {
          function t3() {
            e(this, t3), Object.defineProperty(this, "signal", { value: new l(), writable: true, configurable: true });
          }
          return n2(t3, [{ key: "abort", value: function() {
            try {
              var e2 = new Event("abort");
            } catch (t4) {
              "undefined" != typeof document ? document.createEvent ? (e2 = document.createEvent("Event")).initEvent("abort", false, false) : (e2 = document.createEventObject()).type = "abort" : e2 = { type: "abort", bubbles: false, cancelable: false };
            }
            this.signal.dispatchEvent(e2);
          } }, { key: "toString", value: function() {
            return "[object AbortController]";
          } }]), t3;
        }();
        "undefined" != typeof Symbol && Symbol.toStringTag && (f.prototype[Symbol.toStringTag] = "AbortController", l.prototype[Symbol.toStringTag] = "AbortSignal"), function(e2) {
          if (e2.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {
            console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");
            var t3 = true;
          } else t3 = "function" == typeof e2.Request && !e2.Request.prototype.hasOwnProperty("signal") || !e2.AbortController;
          t3 && (e2.AbortController = f, e2.AbortSignal = l);
        }("undefined" != typeof self ? self : Ya);
      }();
      var Zw = Math.floor, $w = Math.log, ax = Math.LOG2E;
      N({ target: "Math", stat: true }, { clz32: function(e) {
        return (e >>>= 0) ? 31 - Zw($w(e + 0.5) * ax) : 32;
      } });
      var bx = Math.log, cx = Math.LN2, ss = Math.clz32 || function(e) {
        return 31 - bx(e >>> 0) / cx | 0;
      }, xd = String.fromCharCode, up = {}.toString, Zj = window.Uint8Array, ak = Zj || Array, dx = up.call((window.ArrayBuffer || ak).prototype), bk;
      xl.prototype.decode = function(e) {
        if (e = e && e.buffer || e, up.call(e) !== dx) throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");
        for (var t2 = "", n2 = 0, r = 0 | (e = Zj ? new ak(e) : e).length; n2 < r; n2 = n2 + 32768 | 0) t2 += xd.apply(0, e[Zj ? "slice" : "subarray"](n2, n2 + 32768 | 0));
        return t2.replace(/[\xc0-\xff][\x80-\xbf]*/g, rs);
      }, window.TextDecoder || (window.TextDecoder = xl), yl.prototype.encode = function(e) {
        for (var t2 = 0 | (e = void 0 === e ? "" : ("" + e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g, ts)).length, n2 = new ak(t2), r = 0; r < t2; r = r + 1 | 0) n2[r] = e.charCodeAt(r);
        return n2;
      }, window.TextEncoder || (window.TextEncoder = yl), function(e) {
        var t2, n2, r, i, o, a2, s, u2, c2, l, f;
        !function(e2) {
          e2.LOGIN = "LOGIN", e2.LOGIN_SUCCESS = "LOGIN_SUCCESS", e2.LOGIN_FAILURE = "LOGIN_FAILURE", e2.LOGIN_TIMEOUT = "LOGIN_TIMEOUT", e2.INTERRUPTED = "INTERRUPTED", e2.LOGOUT = "LOGOUT", e2.BANNED_BY_SERVER = "BANNED_BY_SERVER", e2.REMOTE_LOGIN = "REMOTE_LOGIN";
        }(t2 || (t2 = {})), e.ConnectionChangeReason = t2, function(e2) {
          e2.DISCONNECTED = "DISCONNECTED", e2.CONNECTING = "CONNECTING", e2.CONNECTED = "CONNECTED", e2.RECONNECTING = "RECONNECTING", e2.ABORTED = "ABORTED";
        }(n2 || (n2 = {})), e.ConnectionState = n2, function(e2) {
          e2.IDLE = "IDLE", e2.SENT_TO_REMOTE = "SENT_TO_REMOTE", e2.RECEIVED_BY_REMOTE = "RECEIVED_BY_REMOTE", e2.ACCEPTED_BY_REMOTE = "ACCEPTED_BY_REMOTE", e2.REFUSED_BY_REMOTE = "REFUSED_BY_REMOTE", e2.CANCELED = "CANCELED", e2.FAILURE = "FAILURE";
        }(r || (r = {})), e.LocalInvitationState = r, function(e2) {
          e2.INVITATION_RECEIVED = "INVITATION_RECEIVED", e2.ACCEPT_SENT_TO_LOCAL = "ACCEPT_SENT_TO_LOCAL", e2.REFUSED = "REFUSED", e2.ACCEPTED = "ACCEPTED", e2.CANCELED = "CANCELED", e2.FAILURE = "FAILURE";
        }(i || (i = {})), e.RemoteInvitationState = i, function(e2) {
          e2.UNKNOWN = "UNKNOWN", e2.PEER_NO_RESPONSE = "PEER_NO_RESPONSE", e2.INVITATION_EXPIRE = "INVITATION_EXPIRE", e2.PEER_OFFLINE = "PEER_OFFLINE", e2.NOT_LOGGEDIN = "NOT_LOGGEDIN";
        }(o || (o = {})), e.LocalInvitationFailureReason = o, function(e2) {
          e2.UNKNOWN = "UNKNOWN", e2.PEER_OFFLINE = "PEER_OFFLINE", e2.ACCEPT_FAILURE = "ACCEPT_FAILURE", e2.INVITATION_EXPIRE = "INVITATION_EXPIRE";
        }(a2 || (a2 = {})), e.RemoteInvitationFailureReason = a2, function(e2) {
          e2.ONLINE = "ONLINE", e2.UNREACHABLE = "UNREACHABLE", e2.OFFLINE = "OFFLINE";
        }(s || (s = {})), e.PeerOnlineState = s, (u2 || (u2 = {})).ONLINE_STATUS = "ONLINE_STATUS", e.PeerSubscriptionOption = u2, function(e2) {
          e2.TEXT = "TEXT", e2.RAW = "RAW", e2.IMAGE = "IMAGE", e2.FILE = "FILE";
        }(c2 || (c2 = {})), e.MessageType = c2, function(e2) {
          e2.CN = "CN", e2.NA = "NA", e2.EU = "EU", e2.AS = "AS", e2.JP = "JP", e2.IN = "IN", e2.GLOB = "GLOB", e2.OC = "OC", e2.SA = "SA", e2.AF = "AF", e2.OVS = "OVS";
        }(l || (l = {})), e.LegacyAreaCode = l, function(e2) {
          e2.GLOBAL = "GLOBAL", e2.INDIA = "INDIA", e2.JAPAN = "JAPAN", e2.ASIA = "ASIA", e2.EUROPE = "EUROPE", e2.CHINA = "CHINA", e2.NORTH_AMERICA = "NORTH_AMERICA";
        }(f || (f = {})), e.AreaCode = f;
      }(bk || (bk = {}));
      var S = bk;
      N({ target: "Array", proto: true }, { includes: function(e) {
        return on(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } }), Ld("includes");
      var ck = function(e) {
        if (Lj(e)) throw TypeError("The method doesn't accept regular expressions");
        return e;
      }, ex = qa("match"), dk = function(e) {
        var t2 = /./;
        try {
          "/./"[e](t2);
        } catch (n2) {
          try {
            return t2[ex] = false, "/./"[e](t2);
          } catch (e2) {
          }
        }
        return false;
      };
      N({ target: "String", proto: true, forced: !dk("includes") }, { includes: function(e) {
        return !!~String(jb(this)).indexOf(ck(e), 1 < arguments.length ? arguments[1] : void 0);
      } });
      var Nc = { RECONNECTING_AP_INTERVAL: 2500, RECONNECTING_AP_NUM: 2, DISABLE_MESSAGE_COMPRESSION: false, LOG_UPLOAD_INTERVAL: 3e3, LOG_HANDLER: void 0 };
      ph("iterator"), ph("asyncIterator");
      var ek = Ee("forEach") ? [].forEach : function(e) {
        return Jd(this, e, 1 < arguments.length ? arguments[1] : void 0);
      }, vp;
      for (vp in Ij) {
        var wp = y[vp], rh = wp && wp.prototype;
        if (rh && rh.forEach !== ek) try {
          Na(rh, "forEach", ek);
        } catch (c2) {
          rh.forEach = ek;
        }
      }
      var fx = [].reverse, xp = [1, 2];
      N({ target: "Array", proto: true, forced: String(xp) === String(xp.reverse()) }, { reverse: function() {
        return gd(this) && (this.length = this.length), fx.call(this);
      } });
      var w = $a(function(e) {
        e = function(e2) {
          function t2(e3, t3, n3) {
            return Object.defineProperty(e3, t3, { value: n3, enumerable: true, configurable: true, writable: true }), e3[t3];
          }
          function n2(e3, t3, n3, o2) {
            return t3 = Object.create((t3 && t3.prototype instanceof i ? t3 : i).prototype), o2 = new h(o2 || []), t3._invoke = /* @__PURE__ */ function(e4, t4, n4) {
              var i2 = _;
              return function(o3, a3) {
                if (i2 === I2) throw Error("Generator is already running");
                if (i2 === A) {
                  if ("throw" === o3) throw a3;
                  return d();
                }
                for (n4.method = o3, n4.arg = a3; ; ) {
                  if ((o3 = n4.delegate) && (o3 = c2(o3, n4))) {
                    if (o3 === k) continue;
                    return o3;
                  }
                  if ("next" === n4.method) n4.sent = n4._sent = n4.arg;
                  else if ("throw" === n4.method) {
                    if (i2 === _) throw i2 = A, n4.arg;
                    n4.dispatchException(n4.arg);
                  } else "return" === n4.method && n4.abrupt("return", n4.arg);
                  if (i2 = I2, "normal" === (o3 = r(e4, t4, n4)).type) {
                    if (i2 = n4.done ? A : O2, o3.arg === k) continue;
                    return { value: o3.arg, done: n4.done };
                  }
                  "throw" === o3.type && (i2 = A, n4.method = "throw", n4.arg = o3.arg);
                }
              };
            }(e3, n3, o2), t3;
          }
          function r(e3, t3, n3) {
            try {
              return { type: "normal", arg: e3.call(t3, n3) };
            } catch (e4) {
              return { type: "throw", arg: e4 };
            }
          }
          function i() {
          }
          function o() {
          }
          function a2() {
          }
          function s(e3) {
            ["next", "throw", "return"].forEach(function(n3) {
              t2(e3, n3, function(e4) {
                return this._invoke(n3, e4);
              });
            });
          }
          function u2(e3, t3) {
            function n3(i3, o2, a3, s2) {
              if ("throw" !== (i3 = r(e3[i3], e3, o2)).type) {
                var u3 = i3.arg;
                return (i3 = u3.value) && "object" === X(i3) && g.call(i3, "__await") ? t3.resolve(i3.__await).then(function(e4) {
                  n3("next", e4, a3, s2);
                }, function(e4) {
                  n3("throw", e4, a3, s2);
                }) : t3.resolve(i3).then(function(e4) {
                  u3.value = e4, a3(u3);
                }, function(e4) {
                  return n3("throw", e4, a3, s2);
                });
              }
              s2(i3.arg);
            }
            var i2;
            this._invoke = function(e4, r2) {
              function o2() {
                return new t3(function(t4, i3) {
                  n3(e4, r2, t4, i3);
                });
              }
              return i2 = i2 ? i2.then(o2, o2) : o2();
            };
          }
          function c2(e3, t3) {
            var n3 = e3.iterator[t3.method];
            if (n3 === v2) {
              if (t3.delegate = null, "throw" === t3.method) {
                if (e3.iterator.return && (t3.method = "return", t3.arg = v2, c2(e3, t3), "throw" === t3.method)) return k;
                t3.method = "throw", t3.arg = new TypeError("The iterator does not provide a 'throw' method");
              }
              return k;
            }
            return "throw" === (n3 = r(n3, e3.iterator, t3.arg)).type ? (t3.method = "throw", t3.arg = n3.arg, t3.delegate = null, k) : (n3 = n3.arg) ? n3.done ? (t3[e3.resultName] = n3.value, t3.next = e3.nextLoc, "return" !== t3.method && (t3.method = "next", t3.arg = v2), t3.delegate = null, k) : n3 : (t3.method = "throw", t3.arg = new TypeError("iterator result is not an object"), t3.delegate = null, k);
          }
          function l(e3) {
            var t3 = { tryLoc: e3[0] };
            1 in e3 && (t3.catchLoc = e3[1]), 2 in e3 && (t3.finallyLoc = e3[2], t3.afterLoc = e3[3]), this.tryEntries.push(t3);
          }
          function f(e3) {
            var t3 = e3.completion || {};
            t3.type = "normal", delete t3.arg, e3.completion = t3;
          }
          function h(e3) {
            this.tryEntries = [{ tryLoc: "root" }], e3.forEach(l, this), this.reset(true);
          }
          function p(e3) {
            if (e3) {
              var t3 = e3[m2];
              if (t3) return t3.call(e3);
              if ("function" == typeof e3.next) return e3;
              if (!isNaN(e3.length)) {
                var n3 = -1;
                return (t3 = function t4() {
                  for (; ++n3 < e3.length; ) if (g.call(e3, n3)) return t4.value = e3[n3], t4.done = false, t4;
                  return t4.value = v2, t4.done = true, t4;
                }).next = t3;
              }
            }
            return { next: d };
          }
          function d() {
            return { value: v2, done: true };
          }
          var v2, b = Object.prototype, g = b.hasOwnProperty, y2 = "function" == typeof Symbol ? Symbol : {}, m2 = y2.iterator || "@@iterator", E2 = y2.asyncIterator || "@@asyncIterator", w2 = y2.toStringTag || "@@toStringTag";
          try {
            t2({}, "");
          } catch (e3) {
            t2 = function(e4, t3, n3) {
              return e4[t3] = n3;
            };
          }
          e2.wrap = n2;
          var _ = "suspendedStart", O2 = "suspendedYield", I2 = "executing", A = "completed", k = {};
          t2(y2 = {}, m2, function() {
            return this;
          });
          var R2 = Object.getPrototypeOf;
          (R2 = R2 && R2(R2(p([])))) && R2 !== b && g.call(R2, m2) && (y2 = R2);
          var T2 = a2.prototype = i.prototype = Object.create(y2);
          return o.prototype = a2, t2(T2, "constructor", a2), t2(a2, "constructor", o), o.displayName = t2(a2, w2, "GeneratorFunction"), e2.isGeneratorFunction = function(e3) {
            return !!(e3 = "function" == typeof e3 && e3.constructor) && (e3 === o || "GeneratorFunction" === (e3.displayName || e3.name));
          }, e2.mark = function(e3) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e3, a2) : (e3.__proto__ = a2, t2(e3, w2, "GeneratorFunction")), e3.prototype = Object.create(T2), e3;
          }, e2.awrap = function(e3) {
            return { __await: e3 };
          }, s(u2.prototype), t2(u2.prototype, E2, function() {
            return this;
          }), e2.AsyncIterator = u2, e2.async = function(t3, r2, i2, o2, a3) {
            void 0 === a3 && (a3 = Promise);
            var s2 = new u2(n2(t3, r2, i2, o2), a3);
            return e2.isGeneratorFunction(r2) ? s2 : s2.next().then(function(e3) {
              return e3.done ? e3.value : s2.next();
            });
          }, s(T2), t2(T2, w2, "Generator"), t2(T2, m2, function() {
            return this;
          }), t2(T2, "toString", function() {
            return "[object Generator]";
          }), e2.keys = function(e3) {
            var t3, n3 = [];
            for (t3 in e3) n3.push(t3);
            return n3.reverse(), function t4() {
              for (; n3.length; ) {
                var r2 = n3.pop();
                if (r2 in e3) return t4.value = r2, t4.done = false, t4;
              }
              return t4.done = true, t4;
            };
          }, e2.values = p, h.prototype = { constructor: h, reset: function(e3) {
            if (this.next = this.prev = 0, this.sent = this._sent = v2, this.done = false, this.delegate = null, this.method = "next", this.arg = v2, this.tryEntries.forEach(f), !e3) for (var t3 in this) "t" === t3.charAt(0) && g.call(this, t3) && !isNaN(+t3.slice(1)) && (this[t3] = v2);
          }, stop: function() {
            this.done = true;
            var e3 = this.tryEntries[0].completion;
            if ("throw" === e3.type) throw e3.arg;
            return this.rval;
          }, dispatchException: function(e3) {
            function t3(t4, r3) {
              return o2.type = "throw", o2.arg = e3, n3.next = t4, r3 && (n3.method = "next", n3.arg = v2), !!r3;
            }
            if (this.done) throw e3;
            for (var n3 = this, r2 = this.tryEntries.length - 1; 0 <= r2; --r2) {
              var i2 = this.tryEntries[r2], o2 = i2.completion;
              if ("root" === i2.tryLoc) return t3("end");
              if (i2.tryLoc <= this.prev) {
                var a3 = g.call(i2, "catchLoc"), s2 = g.call(i2, "finallyLoc");
                if (a3 && s2) {
                  if (this.prev < i2.catchLoc) return t3(i2.catchLoc, true);
                  if (this.prev < i2.finallyLoc) return t3(i2.finallyLoc);
                } else if (a3) {
                  if (this.prev < i2.catchLoc) return t3(i2.catchLoc, true);
                } else {
                  if (!s2) throw Error("try statement without catch or finally");
                  if (this.prev < i2.finallyLoc) return t3(i2.finallyLoc);
                }
              }
            }
          }, abrupt: function(e3, t3) {
            for (var n3 = this.tryEntries.length - 1; 0 <= n3; --n3) {
              var r2 = this.tryEntries[n3];
              if (r2.tryLoc <= this.prev && g.call(r2, "finallyLoc") && this.prev < r2.finallyLoc) {
                var i2 = r2;
                break;
              }
            }
            return i2 && ("break" === e3 || "continue" === e3) && i2.tryLoc <= t3 && t3 <= i2.finallyLoc && (i2 = null), (n3 = i2 ? i2.completion : {}).type = e3, n3.arg = t3, i2 ? (this.method = "next", this.next = i2.finallyLoc, k) : this.complete(n3);
          }, complete: function(e3, t3) {
            if ("throw" === e3.type) throw e3.arg;
            return "break" === e3.type || "continue" === e3.type ? this.next = e3.arg : "return" === e3.type ? (this.rval = this.arg = e3.arg, this.method = "return", this.next = "end") : "normal" === e3.type && t3 && (this.next = t3), k;
          }, finish: function(e3) {
            for (var t3 = this.tryEntries.length - 1; 0 <= t3; --t3) {
              var n3 = this.tryEntries[t3];
              if (n3.finallyLoc === e3) return this.complete(n3.completion, n3.afterLoc), f(n3), k;
            }
          }, catch: function(e3) {
            for (var t3 = this.tryEntries.length - 1; 0 <= t3; --t3) {
              var n3 = this.tryEntries[t3];
              if (n3.tryLoc === e3) {
                if ("throw" === (e3 = n3.completion).type) {
                  var r2 = e3.arg;
                  f(n3);
                }
                return r2;
              }
            }
            throw Error("illegal catch attempt");
          }, delegateYield: function(e3, t3, n3) {
            return this.delegate = { iterator: p(e3), resultName: t3, nextLoc: n3 }, "next" === this.method && (this.arg = v2), k;
          } }, e2;
        }(e.exports);
        try {
          regeneratorRuntime = e;
        } catch (t2) {
          "object" === ("undefined" == typeof globalThis ? "undefined" : X(globalThis)) ? globalThis.regeneratorRuntime = e : Function("r", "regeneratorRuntime = r")(e);
        }
      }), yp = !R(function() {
        return Object.isExtensible(Object.preventExtensions({}));
      }), fk = $a(function(e) {
        var t2 = Ra.f, n2 = Ae("meta"), r = 0, i = Object.isExtensible || function() {
          return true;
        }, o = function(e2) {
          t2(e2, n2, { value: { objectID: "O" + ++r, weakData: {} } });
        }, a2 = e.exports = { REQUIRED: false, fastKey: function(e2, t3) {
          if (!ha(e2)) return "symbol" == typeof e2 ? e2 : ("string" == typeof e2 ? "S" : "P") + e2;
          if (!Q(e2, n2)) {
            if (!i(e2)) return "F";
            if (!t3) return "E";
            o(e2);
          }
          return e2[n2].objectID;
        }, getWeakData: function(e2, t3) {
          if (!Q(e2, n2)) {
            if (!i(e2)) return true;
            if (!t3) return false;
            o(e2);
          }
          return e2[n2].weakData;
        }, onFreeze: function(e2) {
          return yp && a2.REQUIRED && i(e2) && !Q(e2, n2) && o(e2), e2;
        } };
        Be[n2] = true;
      }), zp = function(e, t2, n2) {
        var r = -1 !== e.indexOf("Map"), i = -1 !== e.indexOf("Weak"), o = r ? "set" : "add", a2 = y[e], s = a2 && a2.prototype, u2 = a2, c2 = {}, l = function(e2) {
          var t3 = s[e2];
          Ta(s, e2, "add" == e2 ? function(e3) {
            return t3.call(this, 0 === e3 ? 0 : e3), this;
          } : "delete" == e2 ? function(e3) {
            return !(i && !ha(e3)) && t3.call(this, 0 === e3 ? 0 : e3);
          } : "get" == e2 ? function(e3) {
            return i && !ha(e3) ? void 0 : t3.call(this, 0 === e3 ? 0 : e3);
          } : "has" == e2 ? function(e3) {
            return !(i && !ha(e3)) && t3.call(this, 0 === e3 ? 0 : e3);
          } : function(e3, n3) {
            return t3.call(this, 0 === e3 ? 0 : e3, n3), this;
          });
        };
        if (nc(e, "function" != typeof a2 || !(i || s.forEach && !R(function() {
          new a2().entries().next();
        })))) u2 = n2.getConstructor(t2, e, r, o), fk.REQUIRED = true;
        else if (nc(e, true)) {
          var f = new u2(), h = f[o](i ? {} : -0, 1) != f, p = R(function() {
            f.has(1);
          }), d = Tg(function(e2) {
            new a2(e2);
          }), v2 = !i && R(function() {
            for (var e2 = new a2(), t3 = 5; t3--; ) e2[o](t3, t3);
            return !e2.has(-0);
          });
          d || ((u2 = t2(function(t3, n3) {
            return Gc(t3, u2, e), t3 = lh(new a2(), t3, u2), null != n3 && Xg(n3, t3[o], { that: t3, AS_ENTRIES: r }), t3;
          })).prototype = s, s.constructor = u2), (p || v2) && (l("delete"), l("has"), r && l("get")), (v2 || h) && l(o), i && s.clear && delete s.clear;
        }
        return c2[e] = u2, N({ global: true, forced: u2 != a2 }, c2), Ec(u2, e), i || n2.setStrong(u2, e, r), u2;
      }, gx = Ra.f, Ap = fk.fastKey, Bp = Za.set, gk = Za.getterFor, Cp = { getConstructor: function(e, t2, n2, r) {
        var i = e(function(e2, o2) {
          Gc(e2, i, t2), Bp(e2, { type: t2, index: ac(null), first: void 0, last: void 0, size: 0 }), ka || (e2.size = 0), null != o2 && Xg(o2, e2[r], { that: e2, AS_ENTRIES: n2 });
        }), o = gk(t2), a2 = function(e2, t3, n3) {
          var r2, i2 = o(e2), a3 = s(e2, t3);
          return a3 ? a3.value = n3 : (i2.last = a3 = { index: r2 = Ap(t3, true), key: t3, value: n3, previous: t3 = i2.last, next: void 0, removed: false }, i2.first || (i2.first = a3), t3 && (t3.next = a3), ka ? i2.size++ : e2.size++, "F" !== r2 && (i2.index[r2] = a3)), e2;
        }, s = function(e2, t3) {
          e2 = o(e2);
          var n3 = Ap(t3);
          if ("F" !== n3) return e2.index[n3];
          for (e2 = e2.first; e2; e2 = e2.next) if (e2.key == t3) return e2;
        };
        return Hf(i.prototype, { clear: function() {
          for (var e2 = o(this), t3 = e2.index, n3 = e2.first; n3; ) n3.removed = true, n3.previous && (n3.previous = n3.previous.next = void 0), delete t3[n3.index], n3 = n3.next;
          e2.first = e2.last = void 0, ka ? e2.size = 0 : this.size = 0;
        }, delete: function(e2) {
          var t3 = o(this);
          if (e2 = s(this, e2)) {
            var n3 = e2.next, r2 = e2.previous;
            delete t3.index[e2.index], e2.removed = true, r2 && (r2.next = n3), n3 && (n3.previous = r2), t3.first == e2 && (t3.first = n3), t3.last == e2 && (t3.last = r2), ka ? t3.size-- : this.size--;
          }
          return !!e2;
        }, forEach: function(e2) {
          for (var t3, n3 = o(this), r2 = Id(e2, 1 < arguments.length ? arguments[1] : void 0, 3); t3 = t3 ? t3.next : n3.first; ) for (r2(t3.value, t3.key, this); t3 && t3.removed; ) t3 = t3.previous;
        }, has: function(e2) {
          return !!s(this, e2);
        } }), Hf(i.prototype, n2 ? { get: function(e2) {
          return (e2 = s(this, e2)) && e2.value;
        }, set: function(e2, t3) {
          return a2(this, 0 === e2 ? 0 : e2, t3);
        } } : { add: function(e2) {
          return a2(this, e2 = 0 === e2 ? 0 : e2, e2);
        } }), ka && gx(i.prototype, "size", { get: function() {
          return o(this).size;
        } }), i;
      }, setStrong: function(e, t2, n2) {
        var r = t2 + " Iterator", i = gk(t2), o = gk(r);
        bj(e, t2, function(e2, t3) {
          Bp(this, { type: r, target: e2, state: i(e2), kind: t3, last: void 0 });
        }, function() {
          for (var e2 = o(this), t3 = e2.kind, n3 = e2.last; n3 && n3.removed; ) n3 = n3.previous;
          return e2.target && (e2.last = n3 = n3 ? n3.next : e2.state.first) ? "keys" == t3 ? { value: n3.key, done: false } : "values" == t3 ? { value: n3.value, done: false } : { value: [n3.key, n3.value], done: false } : (e2.target = void 0, { value: void 0, done: true });
        }, n2 ? "entries" : "values", !n2, true), If(t2);
      } };
      zp("Set", function(e) {
        return function() {
          return e(this, arguments.length ? arguments[0] : void 0);
        };
      }, Cp);
      var hx = /^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/, ix = /[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/, hk = function(e) {
        return function(t2) {
          return t2 = String(jb(t2)), 1 & e && (t2 = t2.replace(hx, "")), 2 & e && (t2 = t2.replace(ix, "")), t2;
        };
      };
      hk(1), hk(2);
      var ik = hk(3), sh = y.parseInt, jx = /^[+-]?0[Xx]/, Dp = 8 !== sh("	\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF08") || 22 !== sh("	\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF0x16") ? function(e, t2) {
        return e = ik(String(e)), sh(e, t2 >>> 0 || (jx.test(e) ? 16 : 10));
      } : sh;
      N({ global: true, forced: parseInt != Dp }, { parseInt: Dp });
      var kx = Hd.f, lx = Fb.f, mx = Ra.f, pd = y.Number, th = pd.prototype, nx = "Number" == Zb(ac(th)), Ep = function(e) {
        var t2, n2 = lc(e, false);
        if ("string" == typeof n2 && 2 < n2.length) {
          if (43 === (e = (n2 = ik(n2)).charCodeAt(0)) || 45 === e) {
            if (88 === (e = n2.charCodeAt(2)) || 120 === e) return NaN;
          } else if (48 === e) {
            switch (n2.charCodeAt(1)) {
              case 66:
              case 98:
                e = 2;
                var r = 49;
                break;
              case 79:
              case 111:
                e = 8, r = 55;
                break;
              default:
                return +n2;
            }
            var i = (n2 = n2.slice(2)).length;
            for (t2 = 0; t2 < i; t2++) {
              var o = n2.charCodeAt(t2);
              if (48 > o || o > r) return NaN;
            }
            return parseInt(n2, e);
          }
        }
        return +n2;
      };
      if (nc("Number", !pd(" 0o1") || !pd("0b1") || pd("+0x1"))) {
        for (var Pd = function(e) {
          var t2 = 1 > arguments.length ? 0 : e, n2 = this;
          return n2 instanceof Pd && (nx ? R(function() {
            th.valueOf.call(n2);
          }) : "Number" != Zb(n2)) ? lh(new pd(Ep(t2)), n2, Pd) : Ep(t2);
        }, Fp = ka ? kx(pd) : "MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "), jk = 0, uh; Fp.length > jk; jk++) Q(pd, uh = Fp[jk]) && !Q(Pd, uh) && mx(Pd, uh, lx(pd, uh));
        Pd.prototype = th, th.constructor = Pd, Ta(y, "Number", Pd);
      }
      var Gp = qa("isConcatSpreadable"), ox = 51 <= id || !R(function() {
        var e = [];
        return e[Gp] = false, e.concat()[0] !== e;
      }), px = Ef("concat");
      N({ target: "Array", proto: true, forced: !ox || !px }, { concat: function(e) {
        var t2, n2 = Qa(this), r = Sg(n2, 0), i = 0, o = -1;
        for (t2 = arguments.length; o < t2; o++) {
          var a2 = -1 === o ? n2 : arguments[o], s = a2;
          if (ha(s)) {
            var u2 = s[Gp];
            s = void 0 !== u2 ? !!u2 : gd(s);
          } else s = false;
          if (s) {
            if (9007199254740991 < i + (u2 = ta(a2.length))) throw TypeError("Maximum allowed index exceeded");
            for (s = 0; s < u2; s++, i++) s in a2 && Ge(r, i, a2[s]);
          } else {
            if (9007199254740991 <= i) throw TypeError("Maximum allowed index exceeded");
            Ge(r, i++, a2);
          }
        }
        return r.length = i, r;
      } });
      var kk = mc("Reflect", "apply"), qx = Function.apply, rx = !R(function() {
        kk(function() {
        });
      });
      N({ target: "Reflect", stat: true, forced: rx }, { apply: function(e, t2, n2) {
        return yb(e), va(n2), kk ? kk(e, t2, n2) : qx.call(e, t2, n2);
      } }), N({ target: "Reflect", stat: true }, { ownKeys: qn });
      var sx = Oj, tx = R(function() {
        return !Object.getOwnPropertyNames(1);
      });
      N({ target: "Object", stat: true, forced: tx }, { getOwnPropertyNames: sx });
      var Pe = "object" === ("undefined" == typeof Reflect ? "undefined" : X(Reflect)) ? Reflect : null, Hp = Pe && "function" == typeof Pe.apply ? Pe.apply : function(e, t2, n2) {
        return Function.prototype.apply.call(e, t2, n2);
      }, ux = Pe && "function" == typeof Pe.ownKeys ? Pe.ownKeys : Object.getOwnPropertySymbols ? function(e) {
        return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e));
      } : function(e) {
        return Object.getOwnPropertyNames(e);
      }, Ip = Number.isNaN || function(e) {
        return e != e;
      };
      ea.EventEmitter = ea, ea.prototype._events = void 0, ea.prototype._eventsCount = 0, ea.prototype._maxListeners = void 0;
      var Jp = 10;
      Object.defineProperty(ea, "defaultMaxListeners", { enumerable: true, get: function() {
        return Jp;
      }, set: function(e) {
        if ("number" != typeof e || 0 > e || Ip(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + ".");
        Jp = e;
      } }), ea.init = function() {
        void 0 !== this._events && this._events !== Object.getPrototypeOf(this)._events || (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
      }, ea.prototype.setMaxListeners = function(e) {
        if ("number" != typeof e || 0 > e || Ip(e)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + e + ".");
        return this._maxListeners = e, this;
      }, ea.prototype.getMaxListeners = function() {
        return void 0 === this._maxListeners ? ea.defaultMaxListeners : this._maxListeners;
      }, ea.prototype.emit = function(e) {
        for (var t2 = [], n2 = 1; n2 < arguments.length; n2++) t2.push(arguments[n2]);
        n2 = "error" === e;
        var r = this._events;
        if (void 0 !== r) n2 = n2 && void 0 === r.error;
        else if (!n2) return false;
        if (n2) {
          var i;
          if (0 < t2.length && (i = t2[0]), i instanceof Error) throw i;
          throw (t2 = Error("Unhandled error." + (i ? " (" + i.message + ")" : ""))).context = i, t2;
        }
        if (void 0 === (n2 = r[e])) return false;
        if ("function" == typeof n2) Hp(n2, this, t2);
        else for (r = Cl(n2, i = n2.length), n2 = 0; n2 < i; ++n2) Hp(r[n2], this, t2);
        return true;
      }, ea.prototype.addListener = function(e, t2) {
        return zl(this, e, t2, false);
      }, ea.prototype.on = ea.prototype.addListener, ea.prototype.prependListener = function(e, t2) {
        return zl(this, e, t2, true);
      }, ea.prototype.once = function(e, t2) {
        return ng(t2), this.on(e, Al(this, e, t2)), this;
      }, ea.prototype.prependOnceListener = function(e, t2) {
        return ng(t2), this.prependListener(e, Al(this, e, t2)), this;
      }, ea.prototype.removeListener = function(e, t2) {
        var n2;
        ng(t2);
        var r = this._events;
        if (void 0 === r) return this;
        var i = r[e];
        if (void 0 === i) return this;
        if (i === t2 || i.listener === t2) 0 == --this._eventsCount ? this._events = /* @__PURE__ */ Object.create(null) : (delete r[e], r.removeListener && this.emit("removeListener", e, i.listener || t2));
        else if ("function" != typeof i) {
          var o = -1;
          for (n2 = i.length - 1; 0 <= n2; n2--) if (i[n2] === t2 || i[n2].listener === t2) {
            var a2 = i[n2].listener;
            o = n2;
            break;
          }
          if (0 > o) return this;
          if (0 === o) i.shift();
          else {
            for (; o + 1 < i.length; o++) i[o] = i[o + 1];
            i.pop();
          }
          1 === i.length && (r[e] = i[0]), void 0 !== r.removeListener && this.emit("removeListener", e, a2 || t2);
        }
        return this;
      }, ea.prototype.off = ea.prototype.removeListener, ea.prototype.removeAllListeners = function(e) {
        var t2 = this._events;
        if (void 0 === t2) return this;
        if (void 0 === t2.removeListener) return 0 === arguments.length ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : void 0 !== t2[e] && (0 == --this._eventsCount ? this._events = /* @__PURE__ */ Object.create(null) : delete t2[e]), this;
        if (0 === arguments.length) {
          var n2 = Object.keys(t2);
          for (t2 = 0; t2 < n2.length; ++t2) {
            var r = n2[t2];
            "removeListener" !== r && this.removeAllListeners(r);
          }
          return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
        }
        if ("function" == typeof (n2 = t2[e])) this.removeListener(e, n2);
        else if (void 0 !== n2) for (t2 = n2.length - 1; 0 <= t2; t2--) this.removeListener(e, n2[t2]);
        return this;
      }, ea.prototype.listeners = function(e) {
        return Bl(this, e, true);
      }, ea.prototype.rawListeners = function(e) {
        return Bl(this, e, false);
      }, ea.listenerCount = function(e, t2) {
        return "function" == typeof e.listenerCount ? e.listenerCount(t2) : Dl.call(e, t2);
      }, ea.prototype.listenerCount = Dl, ea.prototype.eventNames = function() {
        return 0 < this._eventsCount ? ux(this._events) : [];
      }, ea.once = function(e, t2) {
        return new Promise(function(n2, r) {
          function i(n3) {
            e.removeListener(t2, o), r(n3);
          }
          function o() {
            "function" == typeof e.removeListener && e.removeListener("error", i), n2([].slice.call(arguments));
          }
          El(e, t2, o, { once: true }), "error" !== t2 && vs(e, i, { once: true });
        });
      };
      var Qe = Object.assign, Kp = Object.defineProperty, Lp = !Qe || R(function() {
        if (ka && 1 !== Qe({ b: 1 }, Qe(Kp({}, "a", { enumerable: true, get: function() {
          Kp(this, "b", { value: 3, enumerable: false });
        } }), { b: 2 })).b) return true;
        var e = {}, t2 = {}, n2 = Symbol();
        return e[n2] = 7, "abcdefghijklmnopqrst".split("").forEach(function(e2) {
          t2[e2] = e2;
        }), 7 != Qe({}, e)[n2] || "abcdefghijklmnopqrst" != Dc(Qe({}, t2)).join("");
      }) ? function(e, t2) {
        for (var n2 = Qa(e), r = arguments.length, i = 1, o = Bf.f, a2 = zf; r > i; ) for (var s, u2 = Af(arguments[i++]), c2 = o ? Dc(u2).concat(o(u2)) : Dc(u2), l = c2.length, f = 0; l > f; ) s = c2[f++], (!ka || a2.call(u2, s)) && (n2[s] = u2[s]);
        return n2;
      } : Qe;
      N({ target: "Object", stat: true, forced: Object.assign !== Lp }, { assign: Lp }), zp("Map", function(e) {
        return function() {
          return e(this, arguments.length ? arguments[0] : void 0);
        };
      }, Cp);
      var vx = Math.log, wx = Math.LN2;
      N({ target: "Math", stat: true }, { log2: function(e) {
        return vx(e) / wx;
      } });
      var xx = Ra.f, yx = Hd.f, zx = Za.enforce, Ax = qa("match"), sc = y.RegExp, lk = sc.prototype, Wf = /a/g, mk = /a/g, nk = new sc(Wf) !== Wf;
      if (ka && nc("RegExp", !nk || pc || R(function() {
        return mk[Ax] = false, sc(Wf) != Wf || sc(mk) == mk || "/a/i" != sc(Wf, "i");
      }))) {
        for (var Oc = function(e, t2) {
          var n2, r = this instanceof Oc, i = Lj(e), o = void 0 === t2;
          return !r && i && e.constructor === Oc && o || (nk ? i && !o && (e = e.source) : e instanceof Oc && (o && (t2 = tj.call(e)), e = e.source), pc && (n2 = !!t2 && -1 < t2.indexOf("y")) && (t2 = t2.replace(/y/g, "")), e = lh(nk ? new sc(e, t2) : sc(e, t2), r ? this : lk, Oc), pc && n2 && (zx(e).sticky = true)), e;
        }, Bx = function(e) {
          e in Oc || xx(Oc, e, { configurable: true, get: function() {
            return sc[e];
          }, set: function(t2) {
            sc[e] = t2;
          } });
        }, Mp = yx(sc), Np = 0; Mp.length > Np; ) Bx(Mp[Np++]);
        lk.constructor = Oc, Oc.prototype = lk, Ta(y, "RegExp", Oc);
      }
      If("RegExp"), Sf("Float32", function(e) {
        return function(t2, n2, r) {
          return e(this, t2, n2, r);
        };
      }), Sf("Float64", function(e) {
        return function(t2, n2, r) {
          return e(this, t2, n2, r);
        };
      }), Sf("Uint32", function(e) {
        return function(t2, n2, r) {
          return e(this, t2, n2, r);
        };
      }), Sf("Uint16", function(e) {
        return function(t2, n2, r) {
          return e(this, t2, n2, r);
        };
      });
      var ok = function(e, t2) {
        return e === t2 ? 0 : null == e ? null == t2 ? 0 : -1 : null == t2 ? null == e ? 0 : 1 : "function" == typeof e.compare ? e.compare(t2) : "function" == typeof t2.compare ? -t2.compare(e) : e < t2 ? -1 : e > t2 ? 1 : 0;
      }, pk = [], Op = pk.sort, Cx = R(function() {
        pk.sort(void 0);
      }), Dx = R(function() {
        pk.sort(null);
      }), Ex = Ee("sort");
      N({ target: "Array", proto: true, forced: Cx || !Dx || !Ex }, { sort: function(e) {
        return void 0 === e ? Op.call(Qa(this)) : Op.call(Qa(this), yb(e));
      } });
      var Pp = Object.getPrototypeOf({}), Xf = function(e, t2) {
        var n2;
        return e === t2 || (null == e ? e == t2 : "function" === X(e.equiv) ? e.equiv(t2) : null == t2 ? e == t2 : "function" === X(t2.equiv) ? t2.equiv(e) : "string" !== X(e) && "string" !== X(t2) && (null != (n2 = Object.getPrototypeOf(e)) && n2 !== Pp || null != (n2 = Object.getPrototypeOf(t2)) && n2 !== Pp ? "function" !== X(e) && void 0 !== e.length && "function" !== X(t2) && void 0 !== t2.length ? Gx(e, t2) : e instanceof Set && t2 instanceof Set ? Hx(e, t2) : e instanceof Map && t2 instanceof Map ? Ix(e, t2) : e instanceof Date && t2 instanceof Date ? e.getTime() === t2.getTime() : e instanceof RegExp && t2 instanceof RegExp ? e.toString() === t2.toString() : e != e && t2 != t2 : Fx(e, t2)));
      }, Gx = function(e, t2) {
        var n2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : Xf, r = e.length;
        if (r === t2.length) for (; 0 <= --r && n2(e[r], t2[r]); ) ;
        return 0 > r;
      }, Hx = function(e, t2) {
        var n2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : Xf;
        return e.size === t2.size && n2(G(e.keys()).sort(), G(t2.keys()).sort());
      }, Ix = function(e, t2) {
        var n2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : Xf;
        return e.size === t2.size && n2(G(e).sort(), G(t2).sort());
      }, Fx = function(e, t2) {
        var n2 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : Xf;
        if (Object.keys(e).length !== Object.keys(t2).length) return false;
        for (var r in e) if (!t2.hasOwnProperty(r) || !n2(e[r], t2[r])) return false;
        return true;
      }, Qp = function(e) {
        var t2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : function(e2) {
          return void 0 !== e2 ? ": " + e2 : "";
        };
        return function(n2) {
          function r(n3) {
            return W(this, r), i.call(this, e(n3) + t2(n3));
          }
          la(r, n2);
          var i = ma(r);
          return r;
        }(ef(Error));
      }, Jx = Qp(function() {
        return "illegal argument(s)";
      }), vh = function(e) {
        throw new Jx(e);
      }, qk = Qp(function() {
        return "index out of bounds";
      }), Rp = 1 / 4294967295, Kx = function() {
        function e() {
          W(this, e);
        }
        return Ha(e, [{ key: "float", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
          return this.int() * Rp * e2;
        } }, { key: "norm", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
          return 2 * (this.int() * Rp - 0.5) * e2;
        } }, { key: "minmax", value: function(e2, t2) {
          return this.float() * (t2 - e2) + e2;
        } }]), e;
      }(), rk = Math.random, Lx = new (function(e) {
        function t2() {
          return W(this, t2), n2.apply(this, arguments);
        }
        la(t2, e);
        var n2 = ma(t2);
        return Ha(t2, [{ key: "int", value: function() {
          return 4294967296 * rk() >>> 0;
        } }, { key: "float", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
          return rk() * e2;
        } }, { key: "norm", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 1;
          return 2 * (rk() - 0.5) * e2;
        } }]), t2;
      }(Kx))(), Vh = Symbol(), Hl = function() {
      }, Mx = fk.onFreeze, sk = Object.freeze, Nx = R(function() {
        sk(1);
      });
      N({ target: "Object", stat: true, forced: Nx, sham: !yp }, { freeze: function(e) {
        return sk && ha(e) ? sk(Mx(e)) : e;
      } });
      var Ox = Ee("reduce"), Px = !Hc && 79 < id && 83 > id;
      N({ target: "Array", proto: true, forced: !Ox || Px }, { reduce: function(e) {
        return Wo(this, e, arguments.length, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var Gl = function(e) {
        return null != e && "function" == typeof e.xform ? e.xform() : e;
      }, og = function() {
        function e(t2) {
          W(this, e), this.value = t2;
        }
        return Ha(e, [{ key: "deref", value: function() {
          return this.value;
        } }]), e;
      }(), Wh = function(e) {
        return e instanceof og ? e.deref() : e;
      }, xs = function(e, t2) {
        return [e, function(e2) {
          return e2;
        }, t2];
      }, Qx = w.mark(function(e, t2) {
        var n2, r, i, o, a2, s;
        return w.wrap(function(u2) {
          for (; ; ) switch (u2.prev = u2.next) {
            case 0:
              n2 = Gl(e)(ws()), r = n2[1], i = n2[2], o = 0;
            case 4:
              if (!(o < t2.length)) {
                u2.next = 15;
                break;
              }
              if (a2 = t2[o], !((s = i([], a2)) instanceof og)) {
                u2.next = 10;
                break;
              }
              return u2.delegateYield(Wh(r(s.deref())), "t0", 9);
            case 9:
              return u2.abrupt("return");
            case 10:
              if (!s.length) {
                u2.next = 12;
                break;
              }
              return u2.delegateYield(s, "t1", 12);
            case 12:
              o++, u2.next = 4;
              break;
            case 15:
              return u2.delegateYield(Wh(r([])), "t2", 16);
            case 16:
            case "end":
              return u2.stop();
          }
        }, Qx);
      }), ys = w.mark(Fl), zs = function(e, t2) {
        return [e[0], e[1], t2];
      }, Sp = true;
      "findIndex" in [] && Array(1).findIndex(function() {
        Sp = false;
      }), N({ target: "Array", proto: true, forced: Sp }, { findIndex: function(e) {
        return An(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } }), Ld("findIndex"), N({ target: "Array", proto: true }, { fill: yj }), Ld("fill");
      var Rx = function() {
        function e(t2) {
          W(this, e), this._length = 0, t2 && this.into(t2);
        }
        return Ha(e, [{ key: "length", get: function() {
          return this._length;
        } }, { key: "copy", value: function() {
          return new e(this);
        } }, { key: "empty", value: function() {
          return new e();
        } }, { key: "clear", value: function() {
          this.release();
        } }, { key: "release", value: function() {
          for (var e2, t2 = this.head; t2; ) e2 = t2.next, delete t2.value, delete t2.prev, delete t2.next, t2 = e2;
          return delete this.head, delete this.tail, this._length = 0, true;
        } }, { key: "compare", value: function(e2) {
          var t2 = this._length;
          if (t2 < e2._length) return -1;
          if (t2 > e2._length) return 1;
          if (0 === t2) return 0;
          t2 = this.head, e2 = e2.head;
          for (var n2 = 0; t2 && 0 == n2; ) n2 = ok(t2.value, e2.value), t2 = t2.next, e2 = e2.next;
          return n2;
        } }, { key: "equiv", value: function(t2) {
          if (!(t2 instanceof e || null != t2 && "function" != typeof t2 && void 0 !== t2.length) || this._length !== t2.length) return false;
          if (!this._length || this === t2) return true;
          for (var n2 = this.head, r = 0; r < t2.length; r++) {
            if (!Xf(n2.value, t2[r])) return false;
            n2 = n2.next;
          }
          return true;
        } }, { key: Symbol.iterator, value: w.mark(function e2() {
          var t2;
          return w.wrap(function(e3) {
            for (; ; ) switch (e3.prev = e3.next) {
              case 0:
                t2 = this.head;
              case 1:
                if (!t2) {
                  e3.next = 7;
                  break;
                }
                return e3.next = 4, t2.value;
              case 4:
                t2 = t2.next, e3.next = 1;
                break;
              case 7:
              case "end":
                return e3.stop();
            }
          }, e2, this);
        }) }, { key: "seq", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0, t2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : this.length;
          if (!(e2 >= t2 || 0 > e2)) {
            e2 = this.nthCell(e2);
            var n2 = this.nthCell(t2 - 1);
            return t2 = function e3(t3) {
              return { first: function() {
                return t3.value;
              }, next: function() {
                return t3 !== n2 && t3.next ? e3(t3.next) : void 0;
              } };
            }, e2 ? t2(e2) : void 0;
          }
        } }, { key: "cycle", value: w.mark(function e2() {
          return w.wrap(function(e3) {
            for (; ; ) switch (e3.prev = e3.next) {
              case 0:
                return e3.delegateYield(this, "t0", 2);
              case 2:
                e3.next = 0;
                break;
              case 4:
              case "end":
                return e3.stop();
            }
          }, e2, this);
        }) }, { key: "$reduce", value: function(e2, t2) {
          for (var n2 = this.head; n2 && !(t2 instanceof og); ) t2 = e2(t2, n2.value), n2 = n2.next;
          return t2;
        } }, { key: "drop", value: function() {
          var e2 = this.head;
          if (e2) return (this.head = e2.next) ? delete this.head.prev : delete this.tail, this._length--, e2.value;
        } }, { key: "cons", value: function(e2) {
          return e2 = { value: e2, next: this.head }, this.head ? this.head.prev = e2 : this.tail = e2, this.head = e2, this._length++, this;
        } }, { key: "insertBefore", value: function(e2, t2) {
          return e2 || vh("cell is undefined"), t2 = { value: t2, next: e2, prev: e2.prev }, e2.prev ? e2.prev.next = t2 : this.head = t2, e2.prev = t2, this._length++, this;
        } }, { key: "insertAfter", value: function(e2, t2) {
          return e2 || vh("cell is undefined"), t2 = { value: t2, next: e2.next, prev: e2 }, e2.next ? e2.next.prev = t2 : this.tail = t2, e2.next = t2, this._length++, this;
        } }, { key: "insertBeforeNth", value: function(e2, t2) {
          if (0 > e2 && (e2 += this._length), 0 >= e2) return this.cons(t2);
          if (0 > e2 || e2 >= this._length) throw new qk(e2);
          return this.insertBefore(this.nthCellUnsafe(e2), t2);
        } }, { key: "insertAfterNth", value: function(e2, t2) {
          if (0 > e2 && (e2 += this._length), e2 >= this._length - 1) return this.push(t2);
          if (0 > e2 || e2 >= this._length) throw new qk(e2);
          return this.insertAfter(this.nthCellUnsafe(e2), t2);
        } }, { key: "insertSorted", value: function(e2, t2) {
          t2 = t2 || ok;
          for (var n2 = this.head; n2; ) {
            if (0 >= t2(e2, n2.value)) return this.insertBefore(n2, e2);
            n2 = n2.next;
          }
          return this.push(e2);
        } }, { key: "find", value: function(e2) {
          for (var t2 = this.head; t2; ) {
            if (t2.value === e2) return t2;
            t2 = t2.next;
          }
        } }, { key: "findWith", value: function(e2) {
          for (var t2 = this.head; t2; ) {
            if (e2(t2.value)) return t2;
            t2 = t2.next;
          }
        } }, { key: "concat", value: function() {
          for (var e2 = this.copy(), t2 = arguments.length, n2 = Array(t2), r = 0; r < t2; r++) n2[r] = arguments[r];
          for (t2 = 0; t2 < n2.length; t2++) e2.into(n2[t2]);
          return e2;
        } }, { key: "into", value: function(e2) {
          for (var t2 = 0; t2 < e2.length; t2++) this.push(e2[t2]);
        } }, { key: "slice", value: function() {
          var t2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0, n2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : this.length;
          t2 = 0 > t2 ? t2 + this._length : t2, n2 = 0 > n2 ? n2 + this._length : n2, (0 > t2 || 0 > n2) && vh("invalid indices: ${from} / ${to}");
          for (var r = new e(), i = this.nthCell(t2); i && ++t2 <= n2; ) r.push(i.value), i = i.next;
          return r;
        } }, { key: "splice", value: function(t2) {
          var n2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : 0, r = 2 < arguments.length ? arguments[2] : void 0;
          if ("number" == typeof t2) {
            if (0 > t2 && (t2 += this._length), 0 > t2 || t2 >= this._length) throw new qk(t2);
            var i = this.nthCellUnsafe(t2);
          } else i = t2;
          var o = new e();
          if (0 < n2) for (; i && 0 < n2--; ) this.remove(i), o.push(i.value), i = i.next;
          else i && (i = i.next);
          if (r) if (i) for (n2 = 0; n2 < r.length; n2++) this.insertBefore(i, r[n2]);
          else for (i = 0; i < r.length; i++) this.push(r[i]);
          return o;
        } }, { key: "remove", value: function(e2) {
          return e2.prev ? e2.prev.next = e2.next : this.head = e2.next, e2.next ? e2.next.prev = e2.prev : this.tail = e2.prev, this._length--, this;
        } }, { key: "swap", value: function(e2, t2) {
          if (e2 !== t2) {
            var n2 = e2.value;
            e2.value = t2.value, t2.value = n2;
          }
          return this;
        } }, { key: "push", value: function(e2) {
          return this.tail ? (e2 = { value: e2, prev: this.tail }, this.tail = this.tail.next = e2, this._length++, this) : this.cons(e2);
        } }, { key: "pop", value: function() {
          var e2 = this.tail;
          if (e2) return (this.tail = e2.prev) ? delete this.tail.next : delete this.head, this._length--, e2.value;
        } }, { key: "first", value: function() {
          return this.head && this.head.value;
        } }, { key: "peek", value: function() {
          return this.tail && this.tail.value;
        } }, { key: "setHead", value: function(e2) {
          return this.head ? (this.head.value = e2, this) : this.cons(e2);
        } }, { key: "setTail", value: function(e2) {
          return this.tail ? (this.tail.value = e2, this) : this.push(e2);
        } }, { key: "setNth", value: function(e2, t2) {
          var n2 = this.nthCell(e2);
          return !n2 && vh("index out of bounds: ".concat(e2)), n2.value = t2, this;
        } }, { key: "nth", value: function(e2, t2) {
          return (e2 = this.nthCell(e2)) ? e2.value : t2;
        } }, { key: "nthCell", value: function(e2) {
          if (0 > e2 && (e2 += this._length), !(0 > e2 || e2 >= this._length)) return this.nthCellUnsafe(e2);
        } }, { key: "rotateLeft", value: function() {
          switch (this._length) {
            case 0:
            case 1:
              return this;
            case 2:
              return this.swap(this.head, this.tail);
            default:
              return this.push(this.drop());
          }
        } }, { key: "rotateRight", value: function() {
          switch (this._length) {
            case 0:
            case 1:
              return this;
            case 2:
              return this.swap(this.head, this.tail);
            default:
              var e2 = this.peek();
              return this.pop(), this.cons(e2);
          }
        } }, { key: "map", value: function(t2) {
          for (var n2 = new e(), r = this.head; r; ) n2.push(t2(r.value)), r = r.next;
          return n2;
        } }, { key: "filter", value: function(t2) {
          for (var n2 = new e(), r = this.head; r; ) t2(r.value) && n2.push(r.value), r = r.next;
          return n2;
        } }, { key: "reduce", value: function(e2, t2) {
          for (var n2 = this.head; n2; ) t2 = e2(t2, n2.value), n2 = n2.next;
          return t2;
        } }, { key: "shuffle", value: function(e2) {
          var t2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : Lx;
          if (2 > this._length) return this;
          for (e2 = null != e2 ? e2 : Math.ceil(1.5 * Math.log2(this._length)); 0 < e2; e2--) for (var n2 = this.head; n2; ) {
            var r = n2.next;
            0.5 > t2.float() ? this.asHead(n2) : this.asTail(n2), n2 = r;
          }
          return this;
        } }, { key: "sort", value: function() {
          var e2 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : ok;
          if (!this._length) return this;
          for (var t2 = 1; ; ) {
            var n2 = this.head;
            this.tail = this.head = void 0;
            for (var r = 0; n2; ) {
              r++;
              for (var i = n2, o = 0, a2 = 0; a2 < t2 && (o++, i = i.next); a2++) ;
              for (a2 = t2; 0 < o || 0 < a2 && i; ) {
                if (0 === o) {
                  var s = i;
                  i = i.next, a2--;
                } else i && 0 !== a2 ? 0 >= e2(n2.value, i.value) ? (s = n2, n2 = n2.next, o--) : (s = i, i = i.next, a2--) : (s = n2, n2 = n2.next, o--);
                this.tail ? this.tail.next = s : this.head = s, s.prev = this.tail, this.tail = s;
              }
              n2 = i;
            }
            if (this.tail.next = void 0, 1 >= r) return this;
            t2 *= 2;
          }
        } }, { key: "reverse", value: function() {
          for (var e2 = this.head, t2 = this.tail, n2 = (this._length >>> 1) + (1 & this._length); e2 && t2 && 0 < n2; ) {
            var r = e2.value;
            e2.value = t2.value, t2.value = r, e2 = e2.next, t2 = t2.prev, n2--;
          }
          return this;
        } }, { key: "asHead", value: function(e2) {
          return e2 === this.head || (this.remove(e2), this.head.prev = e2, e2.next = this.head, e2.prev = void 0, this.head = e2, this._length++), this;
        } }, { key: "asTail", value: function(e2) {
          return e2 === this.tail || (this.remove(e2), this.tail.next = e2, e2.prev = this.tail, e2.next = void 0, this.tail = e2, this._length++), this;
        } }, { key: "toString", value: function() {
          for (var e2 = [], t2 = this.head; t2; ) e2.push(String(t2.value)), t2 = t2.next;
          return e2.join(", ");
        } }, { key: "toJSON", value: function() {
          return G(this);
        } }, { key: "nthCellUnsafe", value: function(e2) {
          if (e2 <= this._length >> 1) var t2 = this.head, n2 = "next";
          else t2 = this.tail, n2 = "prev", e2 = this._length - e2 - 1;
          for (; 0 < e2-- && t2; ) t2 = t2[n2];
          return t2;
        } }]), e;
      }(), tc = function() {
        function e(t2, n2) {
          W(this, e), n2 = Object.assign({ maxlen: 1 / 0, maxsize: 1 / 0, map: function() {
            return /* @__PURE__ */ new Map();
          }, ksize: function() {
            return 0;
          }, vsize: function() {
            return 0;
          } }, n2), this.map = n2.map(), this.items = new Rx(), this._size = 0, this.opts = n2, t2 && this.into(t2);
        }
        return Ha(e, [{ key: "length", get: function() {
          return this.items.length;
        } }, { key: "size", get: function() {
          return this._size;
        } }, { key: Symbol.iterator, value: function() {
          return this.entries();
        } }, { key: "entries", value: function() {
          return pg(function(e2) {
            return [e2.k, e2];
          }, this.items);
        } }, { key: "keys", value: function() {
          return pg(function(e2) {
            return e2.k;
          }, this.items);
        } }, { key: "values", value: function() {
          return pg(function(e2) {
            return e2.v;
          }, this.items);
        } }, { key: "copy", value: function() {
          var e2 = this.empty();
          e2.items = this.items.copy();
          for (var t2 = e2.items.head; t2; ) e2.map.set(t2.value.k, t2), t2 = t2.next;
          return e2;
        } }, { key: "empty", value: function() {
          return new e(null, this.opts);
        } }, { key: "release", value: function() {
          this._size = 0, this.map.clear();
          var e2 = this.opts.release;
          if (e2) {
            for (var t2; t2 = this.items.drop(); ) e2(t2.k, t2.v);
            return true;
          }
          return this.items.release();
        } }, { key: "has", value: function(e2) {
          return this.map.has(e2);
        } }, { key: "get", value: function(e2, t2) {
          return (e2 = this.map.get(e2)) ? this.resetEntry(e2) : t2;
        } }, { key: "set", value: function(e2, t2) {
          var n2 = this.opts.ksize(e2) + this.opts.vsize(t2), r = this.map.get(e2);
          return this._size += Math.max(0, n2 - (r ? r.value.s : 0)), this.ensureSize() && this.doSetEntry(r, e2, t2, n2), t2;
        } }, { key: "into", value: function(e2) {
          for (var t2 = 0; t2 < e2.length; t2++) {
            var n2 = e2[t2];
            this.set(n2[0], n2[1]);
          }
          return this;
        } }, { key: "getSet", value: function(e2, t2) {
          var n2 = this, r = this.map.get(e2);
          return r ? Promise.resolve(this.resetEntry(r)) : t2().then(function(t3) {
            return n2.set(e2, t3);
          });
        } }, { key: "delete", value: function(e2) {
          return !!(e2 = this.map.get(e2)) && (this.removeEntry(e2), true);
        } }, { key: "resetEntry", value: function(e2) {
          return this.items.asTail(e2), e2.value.v;
        } }, { key: "ensureSize", value: function() {
          for (var e2 = this.opts.release, t2 = this.opts.maxsize, n2 = this.opts.maxlen; this._size > t2 || this.length >= n2; ) {
            var r = this.items.drop();
            if (!r) return false;
            this.map.delete(r.k), e2 && e2(r.k, r.v), this._size -= r.s;
          }
          return true;
        } }, { key: "removeEntry", value: function(e2) {
          var t2 = e2.value;
          this.map.delete(t2.k), this.items.remove(e2), this.opts.release && this.opts.release(t2.k, t2.v), this._size -= t2.s;
        } }, { key: "doSetEntry", value: function(e2, t2, n2, r) {
          e2 ? (e2.value.v = n2, e2.value.s = r, this.items.asTail(e2)) : (this.items.push({ k: t2, v: n2, s: r }), this.map.set(t2, this.items.tail));
        } }]), e;
      }(), Sx = function(e) {
        function t2(e2, r) {
          return W(this, t2), r = Object.assign({ ttl: 36e5 }, r), n2.call(this, e2, r);
        }
        la(t2, e);
        var n2 = ma(t2);
        return Ha(t2, [{ key: "empty", value: function() {
          return new t2(null, this.opts);
        } }, { key: "has", value: function(e2) {
          return void 0 !== this.get(e2);
        } }, { key: "get", value: function(e2, t3) {
          if (e2 = this.map.get(e2)) {
            if (e2.value.t >= Date.now()) return this.resetEntry(e2);
            this.removeEntry(e2);
          }
          return t3;
        } }, { key: "set", value: function(e2, t3) {
          var n3 = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : this.opts.ttl, r = this.opts.ksize(e2) + this.opts.vsize(t3), i = this.map.get(e2);
          return this._size += Math.max(0, r - (i ? i.value.s : 0)), this.ensureSize() && (n3 = Date.now() + n3, i ? (i.value.v = t3, i.value.s = r, i.value.t = n3, this.items.asTail(i)) : (this.items.push({ k: e2, v: t3, s: r, t: n3 }), this.map.set(e2, this.items.tail))), t3;
        } }, { key: "getSet", value: function(e2, t3) {
          var n3 = this, r = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : this.opts.ttl, i = this.get(e2);
          return i ? Promise.resolve(i) : t3().then(function(t4) {
            return n3.set(e2, t4, r);
          });
        } }, { key: "prune", value: function() {
          for (var e2 = Date.now(), t3 = this.items.head; t3; ) t3.value.t < e2 && this.removeEntry(t3), t3 = t3.next;
        } }, { key: "ensureSize", value: function() {
          for (var e2 = this.opts.maxsize, n3 = this.opts.maxlen, r = Date.now(), i = this.items.head; i && (this._size > e2 || this.length >= n3); ) i.value.t < r && this.removeEntry(i), i = i.next;
          return Th(wd(t2.prototype), "ensureSize", this).call(this);
        } }]), t2;
      }(tc), Tp = "object" == X(Ya) && Ya && Ya.Object === Object && Ya, Tx = "object" == ("undefined" == typeof self ? "undefined" : X(self)) && self && self.Object === Object && self, Cb = Tp || Tx || Function("return this")(), Pb = Cb.Symbol, Up = Object.prototype, Ux = Up.hasOwnProperty, Vx = Up.toString, Yf = Pb ? Pb.toStringTag : void 0, Wx = Object.prototype.toString, Vp = Pb ? Pb.toStringTag : void 0, Qd = function(e) {
        if (null == e) e = void 0 === e ? "[object Undefined]" : "[object Null]";
        else if (Vp && Vp in Object(e)) {
          var t2 = Ux.call(e, Yf), n2 = e[Yf];
          try {
            e[Yf] = void 0;
            var r = true;
          } catch (e2) {
          }
          var i = Vx.call(e);
          r && (t2 ? e[Yf] = n2 : delete e[Yf]), e = i;
        } else e = Wx.call(e);
        return e;
      }, lb = function(e) {
        var t2 = X(e);
        return null != e && ("object" == t2 || "function" == t2);
      }, qi = function(e) {
        return !!lb(e) && ("[object Function]" == (e = Qd(e)) || "[object GeneratorFunction]" == e || "[object AsyncFunction]" == e || "[object Proxy]" == e);
      }, tk = Cb["__core-js_shared__"], Wp = function() {
        var e = /[^.]+$/.exec(tk && tk.keys && tk.keys.IE_PROTO || "");
        return e ? "Symbol(src)_1." + e : "";
      }(), Xx = Function.prototype.toString, Rd = function(e) {
        if (null != e) {
          try {
            return Xx.call(e);
          } catch (e2) {
          }
          return e + "";
        }
        return "";
      }, Yx = /^\[object .+?Constructor\]$/, Zx = RegExp("^" + Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), Sd = function(e, t2) {
        return e = null == e ? void 0 : e[t2], !lb(e) || Wp && Wp in e || !(qi(e) ? Zx : Yx).test(Rd(e)) ? void 0 : e;
      }, Zf = Sd(Object, "create"), $x = Object.prototype.hasOwnProperty, ay = Object.prototype.hasOwnProperty;
      zd.prototype.clear = function() {
        this.__data__ = Zf ? Zf(null) : {}, this.size = 0;
      }, zd.prototype.delete = function(e) {
        return e = this.has(e) && delete this.__data__[e], this.size -= e ? 1 : 0, e;
      }, zd.prototype.get = function(e) {
        var t2 = this.__data__;
        return Zf ? "__lodash_hash_undefined__" === (e = t2[e]) ? void 0 : e : $x.call(t2, e) ? t2[e] : void 0;
      }, zd.prototype.has = function(e) {
        var t2 = this.__data__;
        return Zf ? void 0 !== t2[e] : ay.call(t2, e);
      }, zd.prototype.set = function(e, t2) {
        var n2 = this.__data__;
        return this.size += this.has(e) ? 0 : 1, n2[e] = Zf && void 0 === t2 ? "__lodash_hash_undefined__" : t2, this;
      };
      var $f = function(e, t2) {
        return e === t2 || e != e && t2 != t2;
      }, wh = function(e, t2) {
        for (var n2 = e.length; n2--; ) if ($f(e[n2][0], t2)) return n2;
        return -1;
      }, by = Array.prototype.splice;
      ce.prototype.clear = function() {
        this.__data__ = [], this.size = 0;
      }, ce.prototype.delete = function(e) {
        var t2 = this.__data__;
        return !(0 > (e = wh(t2, e))) && (e == t2.length - 1 ? t2.pop() : by.call(t2, e, 1), --this.size, true);
      }, ce.prototype.get = function(e) {
        var t2 = this.__data__;
        return 0 > (e = wh(t2, e)) ? void 0 : t2[e][1];
      }, ce.prototype.has = function(e) {
        return -1 < wh(this.__data__, e);
      }, ce.prototype.set = function(e, t2) {
        var n2 = this.__data__, r = wh(n2, e);
        return 0 > r ? (++this.size, n2.push([e, t2])) : n2[r][1] = t2, this;
      };
      var rg = ce, ag = Sd(Cb, "Map"), xh = function(e, t2) {
        e = e.__data__;
        var n2 = X(t2);
        return ("string" == n2 || "number" == n2 || "symbol" == n2 || "boolean" == n2 ? "__proto__" !== t2 : null === t2) ? e["string" == typeof t2 ? "string" : "hash"] : e.map;
      };
      de.prototype.clear = function() {
        this.size = 0, this.__data__ = { hash: new zd(), map: new (ag || rg)(), string: new zd() };
      }, de.prototype.delete = function(e) {
        return e = xh(this, e).delete(e), this.size -= e ? 1 : 0, e;
      }, de.prototype.get = function(e) {
        return xh(this, e).get(e);
      }, de.prototype.has = function(e) {
        return xh(this, e).has(e);
      }, de.prototype.set = function(e, t2) {
        var n2 = xh(this, e), r = n2.size;
        return n2.set(e, t2), this.size += n2.size == r ? 0 : 1, this;
      };
      var qg = de;
      gf.prototype.add = gf.prototype.push = function(e) {
        return this.__data__.set(e, "__lodash_hash_undefined__"), this;
      }, gf.prototype.has = function(e) {
        return this.__data__.has(e);
      };
      var Xp = function(e, t2, n2, r) {
        var i = e.length;
        for (n2 += r ? 1 : -1; r ? n2-- : ++n2 < i; ) if (t2(e[n2], n2, e)) return n2;
        return -1;
      }, cy = function(e) {
        return e != e;
      }, dy = function(e, t2) {
        var n2;
        if (n2 = !(null == e || !e.length)) {
          if (t2 == t2) e: {
            n2 = -1;
            for (var r = e.length; ++n2 < r; ) if (e[n2] === t2) {
              e = n2;
              break e;
            }
            e = -1;
          }
          else e = Xp(e, cy, 0);
          n2 = -1 < e;
        }
        return n2;
      }, ey = function(e, t2, n2) {
        for (var r = -1, i = null == e ? 0 : e.length; ++r < i; ) if (n2(t2, e[r])) return true;
        return false;
      }, fy = function(e, t2) {
        return e.has(t2);
      }, Re = Sd(Cb, "Set"), gy = function() {
      }, uk = function(e) {
        var t2 = -1, n2 = Array(e.size);
        return e.forEach(function(e2) {
          n2[++t2] = e2;
        }), n2;
      }, hy = 1 / 0, iy = Re && 1 / uk(new Re([, -0]))[1] == hy ? function(e) {
        return new Re(e);
      } : gy, vk = function(e, t2, n2) {
        var r = -1, i = dy, o = e.length, a2 = true, s = [], u2 = s;
        if (n2) a2 = false, i = ey;
        else if (200 <= o) {
          if (i = t2 ? null : iy(e)) return uk(i);
          a2 = false, i = fy, u2 = new gf();
        } else u2 = t2 ? [] : s;
        e: for (; ++r < o; ) {
          var c2 = e[r], l = t2 ? t2(c2) : c2;
          if (c2 = n2 || 0 !== c2 ? c2 : 0, a2 && l == l) {
            for (var f = u2.length; f--; ) if (u2[f] === l) continue e;
            t2 && u2.push(l), s.push(c2);
          } else i(u2, l, n2) || (u2 !== s && u2.push(l), s.push(c2));
        }
        return s;
      }, Yp = function(e) {
        for (var t2 = -1, n2 = null == e ? 0 : e.length, r = {}; ++t2 < n2; ) {
          var i = e[t2];
          r[i[0]] = i[1];
        }
        return r;
      }, he = function(e, t2) {
        for (var n2 = -1, r = null == e ? 0 : e.length, i = Array(r); ++n2 < r; ) i[n2] = t2(e[n2], n2, e);
        return i;
      };
      ee.prototype.clear = function() {
        this.__data__ = new rg(), this.size = 0;
      }, ee.prototype.delete = function(e) {
        var t2 = this.__data__;
        return e = t2.delete(e), this.size = t2.size, e;
      }, ee.prototype.get = function(e) {
        return this.__data__.get(e);
      }, ee.prototype.has = function(e) {
        return this.__data__.has(e);
      }, ee.prototype.set = function(e, t2) {
        var n2 = this.__data__;
        if (n2 instanceof rg) {
          var r = n2.__data__;
          if (!ag || 199 > r.length) return r.push([e, t2]), this.size = ++n2.size, this;
          n2 = this.__data__ = new qg(r);
        }
        return n2.set(e, t2), this.size = n2.size, this;
      };
      var ge = ee, Is = function(e, t2) {
        for (var n2 = -1, r = null == e ? 0 : e.length; ++n2 < r && false !== t2(e[n2], n2, e); ) ;
        return e;
      }, yh = function() {
        try {
          var e = Sd(Object, "defineProperty");
          return e({}, "", {}), e;
        } catch (e2) {
        }
      }(), bg = function(e, t2, n2) {
        "__proto__" == t2 && yh ? yh(e, t2, { configurable: true, enumerable: true, value: n2, writable: true }) : e[t2] = n2;
      }, jy = Object.prototype.hasOwnProperty, Ml = function(e, t2, n2) {
        var r = e[t2];
        jy.call(e, t2) && $f(r, n2) && (void 0 !== n2 || t2 in e) || bg(e, t2, n2);
      }, re = function(e, t2, n2, r) {
        var i = !n2;
        n2 || (n2 = {});
        for (var o = -1, a2 = t2.length; ++o < a2; ) {
          var s = t2[o], u2 = r ? r(n2[s], e[s], s, n2, e) : void 0;
          void 0 === u2 && (u2 = e[s]), i ? bg(n2, s, u2) : Ml(n2, s, u2);
        }
        return n2;
      }, gc = function(e) {
        return null != e && "object" == X(e);
      }, Zp = function(e) {
        return gc(e) && "[object Arguments]" == Qd(e);
      }, $p = Object.prototype, ky = $p.hasOwnProperty, ly = $p.propertyIsEnumerable, rf = Zp(/* @__PURE__ */ function() {
        return arguments;
      }()) ? Zp : function(e) {
        return gc(e) && ky.call(e, "callee") && !ly.call(e, "callee");
      }, Va = Array.isArray, my = function() {
        return false;
      }, jf = $a(function(e, t2) {
        var n2 = (t2 = t2 && !t2.nodeType && t2) && e && !e.nodeType && e;
        t2 = n2 && n2.exports === t2 ? Cb.Buffer : void 0, e.exports = (t2 ? t2.isBuffer : void 0) || my;
      }), ny = /^(?:0|[1-9]\d*)$/, wk = function(e, t2) {
        var n2 = X(e);
        return !!(t2 = null == t2 ? 9007199254740991 : t2) && ("number" == n2 || "symbol" != n2 && ny.test(e)) && -1 < e && 0 == e % 1 && e < t2;
      }, xk = function(e) {
        return "number" == typeof e && -1 < e && 0 == e % 1 && 9007199254740991 >= e;
      }, Ea = {};
      Ea["[object Float32Array]"] = Ea["[object Float64Array]"] = Ea["[object Int8Array]"] = Ea["[object Int16Array]"] = Ea["[object Int32Array]"] = Ea["[object Uint8Array]"] = Ea["[object Uint8ClampedArray]"] = Ea["[object Uint16Array]"] = Ea["[object Uint32Array]"] = true, Ea["[object Arguments]"] = Ea["[object Array]"] = Ea["[object ArrayBuffer]"] = Ea["[object Boolean]"] = Ea["[object DataView]"] = Ea["[object Date]"] = Ea["[object Error]"] = Ea["[object Function]"] = Ea["[object Map]"] = Ea["[object Number]"] = Ea["[object Object]"] = Ea["[object RegExp]"] = Ea["[object Set]"] = Ea["[object String]"] = Ea["[object WeakMap]"] = false;
      var oy = function(e) {
        return gc(e) && xk(e.length) && !!Ea[Qd(e)];
      }, zh = function(e) {
        return function(t2) {
          return e(t2);
        };
      }, Se = $a(function(e, t2) {
        var n2 = t2 && !t2.nodeType && t2;
        n2 = (t2 = n2 && e && !e.nodeType && e) && t2.exports === n2 && Tp.process;
        e: {
          try {
            var r = t2 && t2.require && t2.require("util").types;
            if (r) {
              var i = r;
              break e;
            }
            i = n2 && n2.binding && n2.binding("util");
            break e;
          } catch (e2) {
          }
          i = void 0;
        }
        e.exports = i;
      }), aq = Se && Se.isTypedArray, bi = aq ? zh(aq) : oy, py = Object.prototype.hasOwnProperty, bq = function(e, t2) {
        var n2 = Va(e), r = !n2 && rf(e), i = !n2 && !r && jf(e), o = !n2 && !r && !i && bi(e);
        if (n2 = n2 || r || i || o) {
          r = e.length;
          for (var a2 = String, s = -1, u2 = Array(r); ++s < r; ) u2[s] = a2(s);
          r = u2;
        } else r = [];
        for (var c2 in a2 = r.length, e) !t2 && !py.call(e, c2) || n2 && ("length" == c2 || i && ("offset" == c2 || "parent" == c2) || o && ("buffer" == c2 || "byteLength" == c2 || "byteOffset" == c2) || wk(c2, a2)) || r.push(c2);
        return r;
      }, qy = Object.prototype, yk = function(e) {
        var t2 = e && e.constructor;
        return e === ("function" == typeof t2 && t2.prototype || qy);
      }, cq = function(e, t2) {
        return function(n2) {
          return e(t2(n2));
        };
      }, ry = cq(Object.keys, Object), sy = Object.prototype.hasOwnProperty, Ed = function(e) {
        return null != e && xk(e.length) && !qi(e);
      }, Ad = function(e) {
        if (Ed(e)) e = bq(e);
        else if (yk(e)) {
          var t2, n2 = [];
          for (t2 in Object(e)) sy.call(e, t2) && "constructor" != t2 && n2.push(t2);
          e = n2;
        } else e = ry(e);
        return e;
      }, Es = function(e, t2) {
        return e && re(t2, Ad(t2), e);
      }, ty = Object.prototype.hasOwnProperty, kf = function(e) {
        if (Ed(e)) e = bq(e, true);
        else if (lb(e)) {
          var t2 = yk(e), n2 = [];
          for (r in e) ("constructor" != r || !t2 && ty.call(e, r)) && n2.push(r);
          e = n2;
        } else {
          var r = [];
          if (null != e) for (t2 in Object(e)) r.push(t2);
          e = r;
        }
        return e;
      }, Cs = function(e, t2) {
        return e && re(t2, kf(t2), e);
      }, Jl = $a(function(e, t2) {
        var n2 = (t2 = t2 && !t2.nodeType && t2) && e && !e.nodeType && e, r = (t2 = n2 && n2.exports === t2 ? Cb.Buffer : void 0) ? t2.allocUnsafe : void 0;
        e.exports = function(e2, t3) {
          return t3 ? e2.slice() : (t3 = e2.length, t3 = r ? r(t3) : new e2.constructor(t3), e2.copy(t3), t3);
        };
      }), Xh = function(e, t2) {
        var n2 = -1, r = e.length;
        for (t2 || (t2 = Array(r)); ++n2 < r; ) t2[n2] = e[n2];
        return t2;
      }, uy = function(e, t2) {
        for (var n2 = -1, r = null == e ? 0 : e.length, i = 0, o = []; ++n2 < r; ) {
          var a2 = e[n2];
          t2(a2, n2, e) && (o[i++] = a2);
        }
        return o;
      }, dq = function() {
        return [];
      }, vy = Object.prototype.propertyIsEnumerable, eq = Object.getOwnPropertySymbols, zk = eq ? function(e) {
        return null == e ? [] : (e = Object(e), uy(eq(e), function(t2) {
          return vy.call(e, t2);
        }));
      } : dq, Ds = function(e, t2) {
        return re(e, zk(e), t2);
      }, ai = function(e, t2) {
        for (var n2 = -1, r = t2.length, i = e.length; ++n2 < r; ) e[i + n2] = t2[n2];
        return e;
      }, Ak = cq(Object.getPrototypeOf, Object), fq = Object.getOwnPropertySymbols ? function(e) {
        for (var t2 = []; e; ) ai(t2, zk(e)), e = Ak(e);
        return t2;
      } : dq, Bs = function(e, t2) {
        return re(e, fq(e), t2);
      }, gq = function(e, t2, n2) {
        return t2 = t2(e), Va(e) ? t2 : ai(t2, n2(e));
      }, Yh = function(e) {
        return gq(e, Ad, zk);
      }, Ll = function(e) {
        return gq(e, kf, fq);
      }, Bk = Sd(Cb, "DataView"), Ck = Sd(Cb, "Promise"), Dk = Sd(Cb, "WeakMap"), wy = Rd(Bk), xy = Rd(ag), yy = Rd(Ck), zy = Rd(Re), Ay = Rd(Dk), Td = Qd;
      (Bk && "[object DataView]" != Td(new Bk(new ArrayBuffer(1))) || ag && "[object Map]" != Td(new ag()) || Ck && "[object Promise]" != Td(Ck.resolve()) || Re && "[object Set]" != Td(new Re()) || Dk && "[object WeakMap]" != Td(new Dk())) && (Td = function(e) {
        var t2 = Qd(e);
        if (e = (e = "[object Object]" == t2 ? e.constructor : void 0) ? Rd(e) : "") switch (e) {
          case wy:
            return "[object DataView]";
          case xy:
            return "[object Map]";
          case yy:
            return "[object Promise]";
          case zy:
            return "[object Set]";
          case Ay:
            return "[object WeakMap]";
        }
        return t2;
      });
      var hf = Td, By = Object.prototype.hasOwnProperty, As = function(e) {
        var t2 = e.length, n2 = new e.constructor(t2);
        return t2 && "string" == typeof e[0] && By.call(e, "index") && (n2.index = e.index, n2.input = e.input), n2;
      }, Ah = Cb.Uint8Array, Ek = function(e) {
        var t2 = new e.constructor(e.byteLength);
        return new Ah(t2).set(new Ah(e)), t2;
      }, Cy = /\w*$/, hq = Pb ? Pb.prototype : void 0, iq = hq ? hq.valueOf : void 0, vm = function(e, t2) {
        return t2 = t2 ? Ek(e.buffer) : e.buffer, new e.constructor(t2, e.byteOffset, e.length);
      }, Fs = function(e, t2, n2) {
        var r = e.constructor;
        switch (t2) {
          case "[object ArrayBuffer]":
            return Ek(e);
          case "[object Boolean]":
          case "[object Date]":
            return new r(+e);
          case "[object DataView]":
            return t2 = n2 ? Ek(e.buffer) : e.buffer, new e.constructor(t2, e.byteOffset, e.byteLength);
          case "[object Float32Array]":
          case "[object Float64Array]":
          case "[object Int8Array]":
          case "[object Int16Array]":
          case "[object Int32Array]":
          case "[object Uint8Array]":
          case "[object Uint8ClampedArray]":
          case "[object Uint16Array]":
          case "[object Uint32Array]":
            return vm(e, n2);
          case "[object Map]":
            return new r();
          case "[object Number]":
          case "[object String]":
            return new r(e);
          case "[object RegExp]":
            return (t2 = new e.constructor(e.source, Cy.exec(e))).lastIndex = e.lastIndex, t2;
          case "[object Set]":
            return new r();
          case "[object Symbol]":
            return iq ? Object(iq.call(e)) : {};
        }
      }, jq = Object.create, Dy = /* @__PURE__ */ function() {
        function e() {
        }
        return function(t2) {
          return lb(t2) ? jq ? jq(t2) : (e.prototype = t2, t2 = new e(), e.prototype = void 0, t2) : {};
        };
      }(), Kl = function(e) {
        return "function" != typeof e.constructor || yk(e) ? {} : Dy(Ak(e));
      }, Ey = function(e) {
        return gc(e) && "[object Map]" == hf(e);
      }, kq = Se && Se.isMap, Hs = kq ? zh(kq) : Ey, Fy = function(e) {
        return gc(e) && "[object Set]" == hf(e);
      }, lq = Se && Se.isSet, Gs = lq ? zh(lq) : Fy, wa = {};
      wa["[object Arguments]"] = wa["[object Array]"] = wa["[object ArrayBuffer]"] = wa["[object DataView]"] = wa["[object Boolean]"] = wa["[object Date]"] = wa["[object Float32Array]"] = wa["[object Float64Array]"] = wa["[object Int8Array]"] = wa["[object Int16Array]"] = wa["[object Int32Array]"] = wa["[object Map]"] = wa["[object Number]"] = wa["[object Object]"] = wa["[object RegExp]"] = wa["[object Set]"] = wa["[object String]"] = wa["[object Symbol]"] = wa["[object Uint8Array]"] = wa["[object Uint8ClampedArray]"] = wa["[object Uint16Array]"] = wa["[object Uint32Array]"] = true, wa["[object Error]"] = wa["[object Function]"] = wa["[object WeakMap]"] = false;
      var ie = function(e) {
        return "symbol" == X(e) || gc(e) && "[object Symbol]" == Qd(e);
      }, Gy = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, Hy = /^\w*$/, Fk = function(e, t2) {
        if (Va(e)) return false;
        var n2 = X(e);
        return !("number" != n2 && "symbol" != n2 && "boolean" != n2 && null != e && !ie(e)) || (Hy.test(e) || !Gy.test(e) || null != t2 && e in Object(t2));
      };
      Zh.Cache = qg;
      var Iy = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, Jy = /\\(\\)?/g, Ky = function(e) {
        var t2 = (e = Zh(e, function(e2) {
          return 500 === t2.size && t2.clear(), e2;
        })).cache;
        return e;
      }(function(e) {
        var t2 = [];
        return 46 === e.charCodeAt(0) && t2.push(""), e.replace(Iy, function(e2, n2, r, i) {
          t2.push(r ? i.replace(Jy, "$1") : n2 || e2);
        }), t2;
      }), Js = 1 / 0, mq = Pb ? Pb.prototype : void 0, Ol = mq ? mq.toString : void 0, Bh = function(e, t2) {
        return Va(e) ? e : Fk(e, t2) ? [e] : Ky(null == e ? "" : Nl(e));
      }, Ly = 1 / 0, cg = function(e) {
        if ("string" == typeof e || ie(e)) return e;
        var t2 = e + "";
        return "0" == t2 && 1 / e == -Ly ? "-0" : t2;
      }, Ch = function(e, t2) {
        for (var n2 = 0, r = (t2 = Bh(t2, e)).length; null != e && n2 < r; ) e = e[cg(t2[n2++])];
        return n2 && n2 == r ? e : void 0;
      }, My = function(e, t2) {
        if (!(2 > (t2 = Bh(t2, e)).length)) {
          var n2 = t2, r = 0, i = -1, o = -1, a2 = n2.length;
          for (0 > r && (r = -r > a2 ? 0 : a2 + r), 0 > (i = i > a2 ? a2 : i) && (i += a2), a2 = r > i ? 0 : i - r >>> 0, r >>>= 0, i = Array(a2); ++o < a2; ) i[o] = n2[o + r];
          e = Ch(e, i);
        }
        return (n2 = null == e) || (n2 = null == t2 ? 0 : t2.length, n2 = delete e[cg(n2 ? t2[n2 - 1] : void 0)]), n2;
      }, nq = Function.prototype.toString, Ny = Object.prototype.hasOwnProperty, Oy = nq.call(Object), wm = function(e) {
        return !(!gc(e) || "[object Object]" != Qd(e)) && (null === (e = Ak(e)) || "function" == typeof (e = Ny.call(e, "constructor") && e.constructor) && e instanceof e && nq.call(e) == Oy);
      }, Py = function(e) {
        return wm(e) ? void 0 : e;
      }, oq = Pb ? Pb.isConcatSpreadable : void 0, Ks = function(e) {
        return Va(e) || rf(e) || !!(oq && e && e[oq]);
      }, Qy = function(e) {
        return null != e && e.length ? $h(e, 1) : [];
      }, Ry = function(e, t2, n2) {
        switch (n2.length) {
          case 0:
            return e.call(t2);
          case 1:
            return e.call(t2, n2[0]);
          case 2:
            return e.call(t2, n2[0], n2[1]);
          case 3:
            return e.call(t2, n2[0], n2[1], n2[2]);
        }
        return e.apply(t2, n2);
      }, pq = Math.max, qq = function(e, t2, n2) {
        return t2 = pq(void 0 === t2 ? e.length - 1 : t2, 0), function() {
          for (var r = arguments, i = -1, o = pq(r.length - t2, 0), a2 = Array(o); ++i < o; ) a2[i] = r[t2 + i];
          for (i = -1, o = Array(t2 + 1); ++i < t2; ) o[i] = r[i];
          return o[t2] = n2(a2), Ry(e, this, o);
        };
      }, Sy = function(e) {
        return function() {
          return e;
        };
      }, Dh = function(e) {
        return e;
      }, Ty = Date.now, rq = /* @__PURE__ */ function(e) {
        var t2 = 0, n2 = 0;
        return function() {
          var r = Ty(), i = 16 - (r - n2);
          if (n2 = r, 0 < i) {
            if (800 <= ++t2) return arguments[0];
          } else t2 = 0;
          return e.apply(void 0, arguments);
        };
      }(yh ? function(e, t2) {
        return yh(e, "toString", { configurable: true, enumerable: false, value: Sy(t2), writable: true });
      } : Dh), Gk = function(e) {
        return rq(qq(e, void 0, Qy), e + "");
      }(function(e, t2) {
        var n2 = {};
        if (null == e) return n2;
        var r = false;
        t2 = he(t2, function(t3) {
          return t3 = Bh(t3, e), r || (r = 1 < t3.length), t3;
        }), re(e, Ll(e), n2), r && (n2 = fe(n2, 7, Py));
        for (var i = t2.length; i--; ) My(n2, t2[i]);
        return n2;
      }), Uy = function(e, t2, n2, r) {
        for (var i = -1, o = null == e ? 0 : e.length; ++i < o; ) {
          var a2 = e[i];
          t2(r, a2, n2(a2), e);
        }
        return r;
      }, um = function(e, t2, n2) {
        for (var r = -1, i = Object(e), o = (n2 = n2(e)).length; o--; ) {
          var a2 = n2[++r];
          if (false === t2(i[a2], a2, i)) break;
        }
        return e;
      }, sq = function(e, t2) {
        return e && um(e, t2, Ad);
      }, Hk = /* @__PURE__ */ function(e, t2) {
        return function(t3, n2) {
          if (null == t3) return t3;
          if (!Ed(t3)) return e(t3, n2);
          for (var r = t3.length, i = -1, o = Object(t3); ++i < r && false !== n2(o[i], i, o); ) ;
          return t3;
        };
      }(sq), Vy = function(e, t2, n2, r) {
        return Hk(e, function(e2, i, o) {
          t2(r, e2, n2(e2), o);
        }), r;
      }, tq = function(e, t2) {
        for (var n2 = -1, r = null == e ? 0 : e.length; ++n2 < r; ) if (t2(e[n2], n2, e)) return true;
        return false;
      }, Pl = function(e, t2, n2, r, i, o) {
        var a2 = 1 & n2, s = e.length, u2 = t2.length;
        if (s != u2 && !(a2 && u2 > s)) return false;
        u2 = o.get(e);
        var c2 = o.get(t2);
        if (u2 && c2) return u2 == t2 && c2 == e;
        u2 = -1, c2 = true;
        var l = 2 & n2 ? new gf() : void 0;
        for (o.set(e, t2), o.set(t2, e); ++u2 < s; ) {
          var f = e[u2], h = t2[u2];
          if (r) var p = a2 ? r(h, f, u2, t2, e, o) : r(f, h, u2, e, t2, o);
          if (void 0 !== p) {
            if (p) continue;
            c2 = false;
            break;
          }
          if (l) {
            if (!tq(t2, function(e2, t3) {
              if (!l.has(t3) && (f === e2 || i(f, e2, n2, r, o))) return l.push(t3);
            })) {
              c2 = false;
              break;
            }
          } else if (f !== h && !i(f, h, n2, r, o)) {
            c2 = false;
            break;
          }
        }
        return o.delete(e), o.delete(t2), c2;
      }, Wy = function(e) {
        var t2 = -1, n2 = Array(e.size);
        return e.forEach(function(e2, r) {
          n2[++t2] = [r, e2];
        }), n2;
      }, uq = Pb ? Pb.prototype : void 0, Ik = uq ? uq.valueOf : void 0, Ls = function(e, t2, n2, r, i, o, a2) {
        switch (n2) {
          case "[object DataView]":
            if (e.byteLength != t2.byteLength || e.byteOffset != t2.byteOffset) break;
            e = e.buffer, t2 = t2.buffer;
          case "[object ArrayBuffer]":
            if (e.byteLength != t2.byteLength || !o(new Ah(e), new Ah(t2))) break;
            return true;
          case "[object Boolean]":
          case "[object Date]":
          case "[object Number]":
            return $f(+e, +t2);
          case "[object Error]":
            return e.name == t2.name && e.message == t2.message;
          case "[object RegExp]":
          case "[object String]":
            return e == t2 + "";
          case "[object Map]":
            var s = Wy;
          case "[object Set]":
            if (s || (s = uk), e.size != t2.size && !(1 & r)) break;
            return (n2 = a2.get(e)) ? n2 == t2 : (r |= 2, a2.set(e, t2), t2 = Pl(s(e), s(t2), r, i, o, a2), a2.delete(e), t2);
          case "[object Symbol]":
            if (Ik) return Ik.call(e) == Ik.call(t2);
        }
        return false;
      }, Ms = Object.prototype.hasOwnProperty, Ql = Object.prototype.hasOwnProperty, Xy = function(e, t2, n2, r) {
        var i = n2.length, o = i, a2 = !r;
        if (null == e) return !o;
        for (e = Object(e); i--; ) {
          var s = n2[i];
          if (a2 && s[2] ? s[1] !== e[s[0]] : !(s[0] in e)) return false;
        }
        for (; ++i < o; ) {
          var u2 = (s = n2[i])[0], c2 = e[u2], l = s[1];
          if (a2 && s[2]) {
            if (void 0 === c2 && !(u2 in e)) return false;
          } else {
            if (s = new ge(), r) var f = r(c2, l, u2, e, t2, s);
            if (void 0 === f ? !je(l, c2, 3, r, s) : !f) return false;
          }
        }
        return true;
      }, Yy = function(e) {
        for (var t2 = Ad(e), n2 = t2.length; n2--; ) {
          var r = t2[n2], i = e[r];
          t2[n2] = [r, i, i == i && !lb(i)];
        }
        return t2;
      }, vq = function(e, t2) {
        return function(n2) {
          return null != n2 && (n2[e] === t2 && (void 0 !== t2 || e in Object(n2)));
        };
      }, Zy = function(e) {
        var t2 = Yy(e);
        return 1 == t2.length && t2[0][2] ? vq(t2[0][0], t2[0][1]) : function(n2) {
          return n2 === e || Xy(n2, e, t2);
        };
      }, $y = function(e, t2) {
        return Fk(e) && t2 == t2 && !lb(t2) ? vq(cg(e), t2) : function(n2) {
          var r = null == n2 ? void 0 : Ch(n2, e);
          if (void 0 === (r = void 0 === r ? void 0 : r) && r === t2) {
            if (r = null != n2) {
              for (var i = -1, o = (r = Bh(r = e, n2)).length, a2 = false; ++i < o; ) {
                var s = cg(r[i]);
                if (!(a2 = null != n2 && null != n2 && s in Object(n2))) break;
                n2 = n2[s];
              }
              a2 || ++i != o ? r = a2 : r = !!(o = null == n2 ? 0 : n2.length) && xk(o) && wk(s, o) && (Va(n2) || rf(n2));
            }
            s = r;
          } else s = je(t2, r, 3);
          return s;
        };
      }, az = function(e) {
        return function(t2) {
          return null == t2 ? void 0 : t2[e];
        };
      }, bz = function(e) {
        return function(t2) {
          return Ch(t2, e);
        };
      }, Te = function(e) {
        return "function" == typeof e ? e : null == e ? Dh : "object" == X(e) ? Va(e) ? $y(e[0], e[1]) : Zy(e) : Fk(e) ? az(cg(e)) : bz(e);
      }, Jk = /* @__PURE__ */ function(e, t2) {
        return function(t3, n2) {
          var r = {};
          return (Va(t3) ? Uy : Vy)(t3, e, Te(n2), r);
        };
      }(function(e, t2, n2) {
        bg(e, n2, t2);
      }), uc = function(e, t2) {
        var n2 = {};
        return t2 = Te(t2), sq(e, function(e2, r, i) {
          bg(n2, r, t2(e2, r, i));
        }), n2;
      };
      N({ target: "String", proto: true, forced: R(function() {
        var e = "".sub('"');
        return e !== e.toLowerCase() || 3 < e.split('"').length;
      }) }, { sub: function() {
        return "<sub>" + String(jb(this)) + "</sub>";
      } });
      var U = xa, Qb = null;
      try {
        Qb = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
      } catch (c2) {
      }
      xa.prototype.__isLong__, Object.defineProperty(xa.prototype, "__isLong__", { value: true }), xa.isLong = mb;
      var Sl = {}, Rl = {};
      xa.fromInt = Bd, xa.fromNumber = Gb, xa.fromBits = ya;
      var sg = Math.pow;
      xa.fromString = ci, xa.fromValue = Wb;
      var ke = 4294967296, Tl = ke * ke, Vl = Tl / 2, wq = Bd(16777216), Hb = Bd(0);
      xa.ZERO = Hb;
      var Cd = Bd(0, true);
      xa.UZERO = Cd;
      var Ue = Bd(1);
      xa.ONE = Ue;
      var xq = Bd(1, true);
      xa.UONE = xq;
      var Kk = Bd(-1);
      xa.NEG_ONE = Kk;
      var Wl = ya(-1, 2147483647, false);
      xa.MAX_VALUE = Wl;
      var Ul = ya(-1, -1, true);
      xa.MAX_UNSIGNED_VALUE = Ul;
      var nb = ya(0, -2147483648, false);
      xa.MIN_VALUE = nb;
      var D = xa.prototype;
      D.toInt = function() {
        return this.unsigned ? this.low >>> 0 : this.low;
      }, D.toNumber = function() {
        return this.unsigned ? (this.high >>> 0) * ke + (this.low >>> 0) : this.high * ke + (this.low >>> 0);
      }, D.toString = function(e) {
        if (2 > (e = e || 10) || 36 < e) throw RangeError("radix");
        if (this.isZero()) return "0";
        if (this.isNegative()) {
          if (this.eq(nb)) {
            var t2 = Gb(e), n2 = this.div(t2);
            return t2 = n2.mul(t2).sub(this), n2.toString(e) + t2.toInt().toString(e);
          }
          return "-" + this.neg().toString(e);
        }
        n2 = Gb(sg(e, 6), this.unsigned), t2 = this;
        for (var r = ""; ; ) {
          var i = t2.div(n2), o = (t2.sub(i.mul(n2)).toInt() >>> 0).toString(e);
          if ((t2 = i).isZero()) return o + r;
          for (; 6 > o.length; ) o = "0" + o;
          r = "" + o + r;
        }
      }, D.getHighBits = function() {
        return this.high;
      }, D.getHighBitsUnsigned = function() {
        return this.high >>> 0;
      }, D.getLowBits = function() {
        return this.low;
      }, D.getLowBitsUnsigned = function() {
        return this.low >>> 0;
      }, D.getNumBitsAbs = function() {
        if (this.isNegative()) return this.eq(nb) ? 64 : this.neg().getNumBitsAbs();
        for (var e = 0 != this.high ? this.high : this.low, t2 = 31; 0 < t2 && 0 == (e & 1 << t2); t2--) ;
        return 0 != this.high ? t2 + 33 : t2 + 1;
      }, D.isZero = function() {
        return 0 === this.high && 0 === this.low;
      }, D.eqz = D.isZero, D.isNegative = function() {
        return !this.unsigned && 0 > this.high;
      }, D.isPositive = function() {
        return this.unsigned || 0 <= this.high;
      }, D.isOdd = function() {
        return 1 == (1 & this.low);
      }, D.isEven = function() {
        return 0 == (1 & this.low);
      }, D.equals = function(e) {
        return mb(e) || (e = Wb(e)), (this.unsigned === e.unsigned || 1 != this.high >>> 31 || 1 != e.high >>> 31) && (this.high === e.high && this.low === e.low);
      }, D.eq = D.equals, D.notEquals = function(e) {
        return !this.eq(e);
      }, D.neq = D.notEquals, D.ne = D.notEquals, D.lessThan = function(e) {
        return 0 > this.comp(e);
      }, D.lt = D.lessThan, D.lessThanOrEqual = function(e) {
        return 0 >= this.comp(e);
      }, D.lte = D.lessThanOrEqual, D.le = D.lessThanOrEqual, D.greaterThan = function(e) {
        return 0 < this.comp(e);
      }, D.gt = D.greaterThan, D.greaterThanOrEqual = function(e) {
        return 0 <= this.comp(e);
      }, D.gte = D.greaterThanOrEqual, D.ge = D.greaterThanOrEqual, D.compare = function(e) {
        if (mb(e) || (e = Wb(e)), this.eq(e)) return 0;
        var t2 = this.isNegative(), n2 = e.isNegative();
        return t2 && !n2 ? -1 : !t2 && n2 ? 1 : this.unsigned ? e.high >>> 0 > this.high >>> 0 || e.high === this.high && e.low >>> 0 > this.low >>> 0 ? -1 : 1 : this.sub(e).isNegative() ? -1 : 1;
      }, D.comp = D.compare, D.negate = function() {
        return !this.unsigned && this.eq(nb) ? nb : this.not().add(Ue);
      }, D.neg = D.negate, D.add = function(e) {
        mb(e) || (e = Wb(e));
        var t2 = this.high >>> 16, n2 = 65535 & this.high, r = this.low >>> 16, i = e.high >>> 16, o = 65535 & e.high, a2 = e.low >>> 16;
        return r = (a2 = ((e = (65535 & this.low) + (65535 & e.low)) >>> 16) + (r + a2)) >>> 16, ya((65535 & a2) << 16 | 65535 & e, (t2 = ((r += n2 + o) >>> 16) + (t2 + i) & 65535) << 16 | 65535 & r, this.unsigned);
      }, D.subtract = function(e) {
        return mb(e) || (e = Wb(e)), this.add(e.neg());
      }, D.sub = D.subtract, D.multiply = function(e) {
        if (this.isZero()) return Hb;
        if (mb(e) || (e = Wb(e)), Qb) {
          var t2 = Qb.mul(this.low, this.high, e.low, e.high);
          return ya(t2, Qb.get_high(), this.unsigned);
        }
        if (e.isZero()) return Hb;
        if (this.eq(nb)) return e.isOdd() ? nb : Hb;
        if (e.eq(nb)) return this.isOdd() ? nb : Hb;
        if (this.isNegative()) return e.isNegative() ? this.neg().mul(e.neg()) : this.neg().mul(e).neg();
        if (e.isNegative()) return this.mul(e.neg()).neg();
        if (this.lt(wq) && e.lt(wq)) return Gb(this.toNumber() * e.toNumber(), this.unsigned);
        t2 = this.high >>> 16;
        var n2 = 65535 & this.high, r = this.low >>> 16, i = 65535 & this.low, o = e.high >>> 16, a2 = 65535 & e.high, s = e.low >>> 16, u2 = i * (e = 65535 & e.low), c2 = (u2 >>> 16) + r * e, l = c2 >>> 16;
        l += (c2 = (65535 & c2) + i * s) >>> 16;
        var f = (l += n2 * e) >>> 16;
        return ya((65535 & c2) << 16 | 65535 & u2, (f = (f += (l = (65535 & l) + r * s) >>> 16) + ((l = (65535 & l) + i * a2) >>> 16) + (t2 * e + n2 * s + r * a2 + i * o) & 65535) << 16 | 65535 & l, this.unsigned);
      }, D.mul = D.multiply, D.divide = function(e) {
        if (mb(e) || (e = Wb(e)), e.isZero()) throw Error("division by zero");
        if (Qb) return this.unsigned || -2147483648 !== this.high || -1 !== e.low || -1 !== e.high ? ya(e = (this.unsigned ? Qb.div_u : Qb.div_s)(this.low, this.high, e.low, e.high), Qb.get_high(), this.unsigned) : this;
        if (this.isZero()) return this.unsigned ? Cd : Hb;
        if (this.unsigned) {
          if (e.unsigned || (e = e.toUnsigned()), e.gt(this)) return Cd;
          if (e.gt(this.shru(1))) return xq;
          var t2 = Cd;
        } else {
          if (this.eq(nb)) {
            if (e.eq(Ue) || e.eq(Kk)) return nb;
            if (e.eq(nb)) return Ue;
            var n2 = this.shr(1).div(e).shl(1);
            if (n2.eq(Hb)) return e.isNegative() ? Ue : Kk;
            var r = this.sub(e.mul(n2));
            return n2.add(r.div(e));
          }
          if (e.eq(nb)) return this.unsigned ? Cd : Hb;
          if (this.isNegative()) return e.isNegative() ? this.neg().div(e.neg()) : this.neg().div(e).neg();
          if (e.isNegative()) return this.div(e.neg()).neg();
          t2 = Hb;
        }
        for (r = this; r.gte(e); ) {
          n2 = Math.max(1, Math.floor(r.toNumber() / e.toNumber()));
          var i = Math.ceil(Math.log(n2) / Math.LN2);
          i = 48 >= i ? 1 : sg(2, i - 48);
          for (var o = Gb(n2), a2 = o.mul(e); a2.isNegative() || a2.gt(r); ) a2 = (o = Gb(n2 -= i, this.unsigned)).mul(e);
          o.isZero() && (o = Ue), t2 = t2.add(o), r = r.sub(a2);
        }
        return t2;
      }, D.div = D.divide, D.modulo = function(e) {
        return mb(e) || (e = Wb(e)), Qb ? ya(e = (this.unsigned ? Qb.rem_u : Qb.rem_s)(this.low, this.high, e.low, e.high), Qb.get_high(), this.unsigned) : this.sub(this.div(e).mul(e));
      }, D.mod = D.modulo, D.rem = D.modulo, D.not = function() {
        return ya(~this.low, ~this.high, this.unsigned);
      }, D.and = function(e) {
        return mb(e) || (e = Wb(e)), ya(this.low & e.low, this.high & e.high, this.unsigned);
      }, D.or = function(e) {
        return mb(e) || (e = Wb(e)), ya(this.low | e.low, this.high | e.high, this.unsigned);
      }, D.xor = function(e) {
        return mb(e) || (e = Wb(e)), ya(this.low ^ e.low, this.high ^ e.high, this.unsigned);
      }, D.shiftLeft = function(e) {
        return mb(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 > e ? ya(this.low << e, this.high << e | this.low >>> 32 - e, this.unsigned) : ya(0, this.low << e - 32, this.unsigned);
      }, D.shl = D.shiftLeft, D.shiftRight = function(e) {
        return mb(e) && (e = e.toInt()), 0 == (e &= 63) ? this : 32 > e ? ya(this.low >>> e | this.high << 32 - e, this.high >> e, this.unsigned) : ya(this.high >> e - 32, 0 <= this.high ? 0 : -1, this.unsigned);
      }, D.shr = D.shiftRight, D.shiftRightUnsigned = function(e) {
        if (mb(e) && (e = e.toInt()), 0 === (e &= 63)) return this;
        var t2 = this.high;
        return 32 > e ? ya(this.low >>> e | t2 << 32 - e, t2 >>> e, this.unsigned) : ya(32 === e ? t2 : t2 >>> e - 32, 0, this.unsigned);
      }, D.shru = D.shiftRightUnsigned, D.shr_u = D.shiftRightUnsigned, D.toSigned = function() {
        return this.unsigned ? ya(this.low, this.high, false) : this;
      }, D.toUnsigned = function() {
        return this.unsigned ? this : ya(this.low, this.high, true);
      }, D.toBytes = function(e) {
        return e ? this.toBytesLE() : this.toBytesBE();
      }, D.toBytesLE = function() {
        var e = this.high, t2 = this.low;
        return [255 & t2, t2 >>> 8 & 255, t2 >>> 16 & 255, t2 >>> 24, 255 & e, e >>> 8 & 255, e >>> 16 & 255, e >>> 24];
      }, D.toBytesBE = function() {
        var e = this.high, t2 = this.low;
        return [e >>> 24, e >>> 16 & 255, e >>> 8 & 255, 255 & e, t2 >>> 24, t2 >>> 16 & 255, t2 >>> 8 & 255, 255 & t2];
      }, xa.fromBytes = function(e, t2, n2) {
        return n2 ? xa.fromBytesLE(e, t2) : xa.fromBytesBE(e, t2);
      }, xa.fromBytesLE = function(e, t2) {
        return new xa(e[0] | e[1] << 8 | e[2] << 16 | e[3] << 24, e[4] | e[5] << 8 | e[6] << 16 | e[7] << 24, t2);
      }, xa.fromBytesBE = function(e, t2) {
        return new xa(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7], e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3], t2);
      };
      var di = function(e, t2) {
        return (di = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e2, t3) {
          e2.__proto__ = t3;
        } || function(e2, t3) {
          for (var n2 in t3) t3.hasOwnProperty(n2) && (e2[n2] = t3[n2]);
        })(e, t2);
      }, Lk = false, Ib = { Promise: void 0, set useDeprecatedSynchronousErrorHandling(e) {
        e ? console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n" + Error().stack) : Lk && console.log("RxJS: Back to a better error behavior. Thank you. <3"), Lk = e;
      }, get useDeprecatedSynchronousErrorHandling() {
        return Lk;
      } }, Eh = { closed: true, next: function(e) {
      }, error: function(e) {
        if (Ib.useDeprecatedSynchronousErrorHandling) throw e;
        me(e);
      }, complete: function() {
      } }, Jb = Array.isArray || function(e) {
        return e && "number" == typeof e.length;
      }, lf = function() {
        function e(e2) {
          return Error.call(this), this.message = e2 ? e2.length + " errors occurred during unsubscription:\n" + e2.map(function(e3, t2) {
            return t2 + 1 + ") " + e3.toString();
          }).join("\n  ") : "", this.name = "UnsubscriptionError", this.errors = e2, this;
        }
        return e.prototype = Object.create(Error.prototype), e;
      }(), Oa = function() {
        function e(e2) {
          this.closed = false, this._subscriptions = this._parentOrParents = null, e2 && (this._ctorUnsubscribe = true, this._unsubscribe = e2);
        }
        return e.prototype.unsubscribe = function() {
          if (!this.closed) {
            var t2 = this._parentOrParents, n2 = this._ctorUnsubscribe, r = this._unsubscribe, i = this._subscriptions;
            if (this.closed = true, this._subscriptions = this._parentOrParents = null, t2 instanceof e) t2.remove(this);
            else if (null !== t2) for (var o = 0; o < t2.length; ++o) t2[o].remove(this);
            if (le(r)) {
              n2 && (this._unsubscribe = void 0);
              try {
                r.call(this);
              } catch (e2) {
                var a2 = e2 instanceof lf ? Xl(e2.errors) : [e2];
              }
            }
            if (Jb(i)) {
              for (o = -1, t2 = i.length; ++o < t2; ) if (ei(n2 = i[o])) try {
                n2.unsubscribe();
              } catch (e2) {
                a2 = a2 || [], e2 instanceof lf ? a2 = a2.concat(Xl(e2.errors)) : a2.push(e2);
              }
            }
            if (a2) throw new lf(a2);
          }
        }, e.prototype.add = function(t2) {
          var n2 = t2;
          if (!t2) return e.EMPTY;
          switch (X(t2)) {
            case "function":
              n2 = new e(t2);
            case "object":
              if (n2 === this || n2.closed || "function" != typeof n2.unsubscribe) return n2;
              if (this.closed) return n2.unsubscribe(), n2;
              n2 instanceof e || (t2 = n2, (n2 = new e())._subscriptions = [t2]);
              break;
            default:
              throw Error("unrecognized teardown " + t2 + " added to Subscription.");
          }
          if (null === (t2 = n2._parentOrParents)) n2._parentOrParents = this;
          else if (t2 instanceof e) {
            if (t2 === this) return n2;
            n2._parentOrParents = [t2, this];
          } else {
            if (-1 !== t2.indexOf(this)) return n2;
            t2.push(this);
          }
          return null === (t2 = this._subscriptions) ? this._subscriptions = [n2] : t2.push(n2), n2;
        }, e.prototype.remove = function(e2) {
          var t2 = this._subscriptions;
          t2 && (-1 !== (e2 = t2.indexOf(e2)) && t2.splice(e2, 1));
        }, e.EMPTY = function(e2) {
          return e2.closed = true, e2;
        }(new e()), e;
      }(), Fh = "function" == typeof Symbol ? Symbol("rxSubscriber") : "@@rxSubscriber_" + Math.random(), ia = function(e) {
        function t2(n2, r, i) {
          var o = e.call(this) || this;
          switch (o.syncErrorValue = null, o.syncErrorThrown = false, o.syncErrorThrowable = false, o.isStopped = false, arguments.length) {
            case 0:
              o.destination = Eh;
              break;
            case 1:
              if (!n2) {
                o.destination = Eh;
                break;
              }
              if ("object" === X(n2)) {
                n2 instanceof t2 ? (o.syncErrorThrowable = n2.syncErrorThrowable, o.destination = n2, n2.add(o)) : (o.syncErrorThrowable = true, o.destination = new yq(o, n2));
                break;
              }
            default:
              o.syncErrorThrowable = true, o.destination = new yq(o, n2, r, i);
          }
          return o;
        }
        return O(t2, e), t2.prototype[Fh] = function() {
          return this;
        }, t2.create = function(e2, n2, r) {
          return (e2 = new t2(e2, n2, r)).syncErrorThrowable = false, e2;
        }, t2.prototype.next = function(e2) {
          this.isStopped || this._next(e2);
        }, t2.prototype.error = function(e2) {
          this.isStopped || (this.isStopped = true, this._error(e2));
        }, t2.prototype.complete = function() {
          this.isStopped || (this.isStopped = true, this._complete());
        }, t2.prototype.unsubscribe = function() {
          this.closed || (this.isStopped = true, e.prototype.unsubscribe.call(this));
        }, t2.prototype._next = function(e2) {
          this.destination.next(e2);
        }, t2.prototype._error = function(e2) {
          this.destination.error(e2), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.destination.complete(), this.unsubscribe();
        }, t2.prototype._unsubscribeAndRecycle = function() {
          var e2 = this._parentOrParents;
          return this._parentOrParents = null, this.unsubscribe(), this.isStopped = this.closed = false, this._parentOrParents = e2, this;
        }, t2;
      }(Oa), yq = function(e) {
        function t2(t3, n2, r, i) {
          var o = e.call(this) || this;
          if (o._parentSubscriber = t3, t3 = o, le(n2)) var a2 = n2;
          else n2 && (a2 = n2.next, r = n2.error, i = n2.complete, n2 !== Eh && (le((t3 = Object.create(n2)).unsubscribe) && o.add(t3.unsubscribe.bind(t3)), t3.unsubscribe = o.unsubscribe.bind(o)));
          return o._context = t3, o._next = a2, o._error = r, o._complete = i, o;
        }
        return O(t2, e), t2.prototype.next = function(e2) {
          if (!this.isStopped && this._next) {
            var t3 = this._parentSubscriber;
            Ib.useDeprecatedSynchronousErrorHandling && t3.syncErrorThrowable ? this.__tryOrSetError(t3, this._next, e2) && this.unsubscribe() : this.__tryOrUnsub(this._next, e2);
          }
        }, t2.prototype.error = function(e2) {
          if (!this.isStopped) {
            var t3 = this._parentSubscriber, n2 = Ib.useDeprecatedSynchronousErrorHandling;
            if (this._error) n2 && t3.syncErrorThrowable ? this.__tryOrSetError(t3, this._error, e2) : this.__tryOrUnsub(this._error, e2), this.unsubscribe();
            else if (t3.syncErrorThrowable) n2 ? (t3.syncErrorValue = e2, t3.syncErrorThrown = true) : me(e2), this.unsubscribe();
            else {
              if (this.unsubscribe(), n2) throw e2;
              me(e2);
            }
          }
        }, t2.prototype.complete = function() {
          var e2 = this;
          if (!this.isStopped) {
            var t3 = this._parentSubscriber;
            if (this._complete) {
              var n2 = function() {
                return e2._complete.call(e2._context);
              };
              Ib.useDeprecatedSynchronousErrorHandling && t3.syncErrorThrowable ? this.__tryOrSetError(t3, n2) : this.__tryOrUnsub(n2);
            }
            this.unsubscribe();
          }
        }, t2.prototype.__tryOrUnsub = function(e2, t3) {
          try {
            e2.call(this._context, t3);
          } catch (e3) {
            if (this.unsubscribe(), Ib.useDeprecatedSynchronousErrorHandling) throw e3;
            me(e3);
          }
        }, t2.prototype.__tryOrSetError = function(e2, t3, n2) {
          if (!Ib.useDeprecatedSynchronousErrorHandling) throw Error("bad call");
          try {
            t3.call(this._context, n2);
          } catch (t4) {
            return Ib.useDeprecatedSynchronousErrorHandling ? (e2.syncErrorValue = t4, e2.syncErrorThrown = true) : me(t4), true;
          }
          return false;
        }, t2.prototype._unsubscribe = function() {
          var e2 = this._parentSubscriber;
          this._parentSubscriber = this._context = null, e2.unsubscribe();
        }, t2;
      }(ia), ne = "function" == typeof Symbol && Symbol.observable || "@@observable", Y = function() {
        function e(e2) {
          this._isScalar = false, e2 && (this._subscribe = e2);
        }
        return e.prototype.lift = function(t2) {
          var n2 = new e();
          return n2.source = this, n2.operator = t2, n2;
        }, e.prototype.subscribe = function(e2, t2, n2) {
          var r = this.operator;
          e: {
            if (e2) {
              if (e2 instanceof ia) break e;
              if (e2[Fh]) {
                e2 = e2[Fh]();
                break e;
              }
            }
            e2 = e2 || t2 || n2 ? new ia(e2, t2, n2) : new ia(Eh);
          }
          if (r ? e2.add(r.call(e2, this.source)) : e2.add(this.source || Ib.useDeprecatedSynchronousErrorHandling && !e2.syncErrorThrowable ? this._subscribe(e2) : this._trySubscribe(e2)), Ib.useDeprecatedSynchronousErrorHandling && e2.syncErrorThrowable && (e2.syncErrorThrowable = false, e2.syncErrorThrown)) throw e2.syncErrorValue;
          return e2;
        }, e.prototype._trySubscribe = function(e2) {
          try {
            return this._subscribe(e2);
          } catch (t2) {
            Ib.useDeprecatedSynchronousErrorHandling && (e2.syncErrorThrown = true, e2.syncErrorValue = t2), fi(e2) ? e2.error(t2) : console.warn(t2);
          }
        }, e.prototype.forEach = function(e2, t2) {
          var n2 = this;
          return new (t2 = Zl(t2))(function(t3, r) {
            var i = n2.subscribe(function(t4) {
              try {
                e2(t4);
              } catch (e3) {
                r(e3), i && i.unsubscribe();
              }
            }, r, t3);
          });
        }, e.prototype._subscribe = function(e2) {
          var t2 = this.source;
          return t2 && t2.subscribe(e2);
        }, e.prototype[ne] = function() {
          return this;
        }, e.prototype.pipe = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++) e2[t2] = arguments[t2];
          return 0 === e2.length ? this : Yl(e2)(this);
        }, e.prototype.toPromise = function(e2) {
          var t2 = this;
          return new (e2 = Zl(e2))(function(e3, n2) {
            var r;
            t2.subscribe(function(e4) {
              return r = e4;
            }, function(e4) {
              return n2(e4);
            }, function() {
              return e3(r);
            });
          });
        }, e.create = function(t2) {
          return new e(t2);
        }, e;
      }(), qd = function() {
        function e() {
          return Error.call(this), this.message = "object unsubscribed", this.name = "ObjectUnsubscribedError", this;
        }
        return e.prototype = Object.create(Error.prototype), e;
      }(), zq = function(e) {
        function t2(t3, n2) {
          var r = e.call(this) || this;
          return r.subject = t3, r.subscriber = n2, r.closed = false, r;
        }
        return O(t2, e), t2.prototype.unsubscribe = function() {
          if (!this.closed) {
            this.closed = true;
            var e2 = this.subject, t3 = e2.observers;
            this.subject = null, !t3 || 0 === t3.length || e2.isStopped || e2.closed || -1 !== (e2 = t3.indexOf(this.subscriber)) && t3.splice(e2, 1);
          }
        }, t2;
      }(Oa), Aq = function(e) {
        function t2(t3) {
          var n2 = e.call(this, t3) || this;
          return n2.destination = t3, n2;
        }
        return O(t2, e), t2;
      }(ia), Pa = function(e) {
        function t2() {
          var t3 = e.call(this) || this;
          return t3.observers = [], t3.closed = false, t3.isStopped = false, t3.hasError = false, t3.thrownError = null, t3;
        }
        return O(t2, e), t2.prototype[Fh] = function() {
          return new Aq(this);
        }, t2.prototype.lift = function(e2) {
          var t3 = new Bq(this, this);
          return t3.operator = e2, t3;
        }, t2.prototype.next = function(e2) {
          if (this.closed) throw new qd();
          if (!this.isStopped) {
            var t3 = this.observers, n2 = t3.length;
            t3 = t3.slice();
            for (var r = 0; r < n2; r++) t3[r].next(e2);
          }
        }, t2.prototype.error = function(e2) {
          if (this.closed) throw new qd();
          this.hasError = true, this.thrownError = e2, this.isStopped = true;
          var t3 = this.observers, n2 = t3.length;
          t3 = t3.slice();
          for (var r = 0; r < n2; r++) t3[r].error(e2);
          this.observers.length = 0;
        }, t2.prototype.complete = function() {
          if (this.closed) throw new qd();
          this.isStopped = true;
          var e2 = this.observers, t3 = e2.length;
          e2 = e2.slice();
          for (var n2 = 0; n2 < t3; n2++) e2[n2].complete();
          this.observers.length = 0;
        }, t2.prototype.unsubscribe = function() {
          this.closed = this.isStopped = true, this.observers = null;
        }, t2.prototype._trySubscribe = function(t3) {
          if (this.closed) throw new qd();
          return e.prototype._trySubscribe.call(this, t3);
        }, t2.prototype._subscribe = function(e2) {
          if (this.closed) throw new qd();
          return this.hasError ? (e2.error(this.thrownError), Oa.EMPTY) : this.isStopped ? (e2.complete(), Oa.EMPTY) : (this.observers.push(e2), new zq(this, e2));
        }, t2.prototype.asObservable = function() {
          var e2 = new Y();
          return e2.source = this, e2;
        }, t2.create = function(e2, t3) {
          return new Bq(e2, t3);
        }, t2;
      }(Y), Bq = function(e) {
        function t2(t3, n2) {
          var r = e.call(this) || this;
          return r.destination = t3, r.source = n2, r;
        }
        return O(t2, e), t2.prototype.next = function(e2) {
          var t3 = this.destination;
          t3 && t3.next && t3.next(e2);
        }, t2.prototype.error = function(e2) {
          var t3 = this.destination;
          t3 && t3.error && this.destination.error(e2);
        }, t2.prototype.complete = function() {
          var e2 = this.destination;
          e2 && e2.complete && this.destination.complete();
        }, t2.prototype._subscribe = function(e2) {
          return this.source ? this.source.subscribe(e2) : Oa.EMPTY;
        }, t2;
      }(Pa), Ns = function() {
        function e(e2) {
          this.connectable = e2;
        }
        return e.prototype.call = function(e2, t2) {
          var n2 = this.connectable;
          return n2._refCount++, e2 = new cz(e2, n2), t2 = t2.subscribe(e2), e2.closed || (e2.connection = n2.connect()), t2;
        }, e;
      }(), cz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).connectable = n2, t3;
        }
        return O(t2, e), t2.prototype._unsubscribe = function() {
          var e2 = this.connectable;
          if (e2) {
            this.connectable = null;
            var t3 = e2._refCount;
            0 >= t3 ? this.connection = null : (e2._refCount = t3 - 1, 1 < t3 ? this.connection = null : (t3 = this.connection, e2 = e2._connection, this.connection = null, !e2 || t3 && e2 !== t3 || e2.unsubscribe()));
          } else this.connection = null;
        }, t2;
      }(ia), Cq = function(e) {
        function t2(t3, n2) {
          var r = e.call(this) || this;
          return r.source = t3, r.subjectFactory = n2, r._refCount = 0, r._isComplete = false, r;
        }
        return O(t2, e), t2.prototype._subscribe = function(e2) {
          return this.getSubject().subscribe(e2);
        }, t2.prototype.getSubject = function() {
          var e2 = this._subject;
          return e2 && !e2.isStopped || (this._subject = this.subjectFactory()), this._subject;
        }, t2.prototype.connect = function() {
          var e2 = this._connection;
          return e2 || (this._isComplete = false, (e2 = this._connection = new Oa()).add(this.source.subscribe(new dz(this.getSubject(), this))), e2.closed && (this._connection = null, e2 = Oa.EMPTY)), e2;
        }, t2.prototype.refCount = function() {
          return $l()(this);
        }, t2;
      }(Y), At = function() {
        var e = Cq.prototype;
        return { operator: { value: null }, _refCount: { value: 0, writable: true }, _subject: { value: null, writable: true }, _connection: { value: null, writable: true }, _subscribe: { value: e._subscribe }, _isComplete: { value: e._isComplete, writable: true }, getSubject: { value: e.getSubject }, connect: { value: e.connect }, refCount: { value: e.refCount } };
      }(), dz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).connectable = n2, t3;
        }
        return O(t2, e), t2.prototype._error = function(t3) {
          this._unsubscribe(), e.prototype._error.call(this, t3);
        }, t2.prototype._complete = function() {
          this.connectable._isComplete = true, this._unsubscribe(), e.prototype._complete.call(this);
        }, t2.prototype._unsubscribe = function() {
          var e2 = this.connectable;
          if (e2) {
            this.connectable = null;
            var t3 = e2._connection;
            e2._refCount = 0, e2._subject = null, e2._connection = null, t3 && t3.unsubscribe();
          }
        }, t2;
      }(Aq);
      !function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).connectable = n2, t3;
        }
        O(t2, e), t2.prototype._unsubscribe = function() {
          var e2 = this.connectable;
          if (e2) {
            this.connectable = null;
            var t3 = e2._refCount;
            0 >= t3 ? this.connection = null : (e2._refCount = t3 - 1, 1 < t3 ? this.connection = null : (t3 = this.connection, e2 = e2._connection, this.connection = null, !e2 || t3 && e2 !== t3 || e2.unsubscribe()));
          } else this.connection = null;
        };
      }(ia), function(e) {
        function t2(t3, n2, r, i, o) {
          return (t3 = e.call(this, t3) || this).keySelector = n2, t3.elementSelector = r, t3.durationSelector = i, t3.subjectSelector = o, t3.groups = null, t3.attemptedToUnsubscribe = false, t3.count = 0, t3;
        }
        O(t2, e), t2.prototype._next = function(e2) {
          try {
            var t3 = this.keySelector(e2);
          } catch (e3) {
            return void this.error(e3);
          }
          this._group(e2, t3);
        }, t2.prototype._group = function(e2, t3) {
          var n2 = this.groups;
          n2 || (n2 = this.groups = /* @__PURE__ */ new Map());
          var r = n2.get(t3);
          if (this.elementSelector) try {
            var i = this.elementSelector(e2);
          } catch (e3) {
            this.error(e3);
          }
          else i = e2;
          if (!r && (r = this.subjectSelector ? this.subjectSelector() : new Pa(), n2.set(t3, r), e2 = new Mk(t3, r, this), this.destination.next(e2), this.durationSelector)) {
            e2 = void 0;
            try {
              e2 = this.durationSelector(new Mk(t3, r));
            } catch (e3) {
              return void this.error(e3);
            }
            this.add(e2.subscribe(new ez(t3, r, this)));
          }
          r.closed || r.next(i);
        }, t2.prototype._error = function(e2) {
          var t3 = this.groups;
          t3 && (t3.forEach(function(t4, n2) {
            t4.error(e2);
          }), t3.clear()), this.destination.error(e2);
        }, t2.prototype._complete = function() {
          var e2 = this.groups;
          e2 && (e2.forEach(function(e3, t3) {
            e3.complete();
          }), e2.clear()), this.destination.complete();
        }, t2.prototype.removeGroup = function(e2) {
          this.groups.delete(e2);
        }, t2.prototype.unsubscribe = function() {
          this.closed || (this.attemptedToUnsubscribe = true, 0 === this.count && e.prototype.unsubscribe.call(this));
        };
      }(ia);
      var ez = function(e) {
        function t2(t3, n2, r) {
          var i = e.call(this, n2) || this;
          return i.key = t3, i.group = n2, i.parent = r, i;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.complete();
        }, t2.prototype._unsubscribe = function() {
          var e2 = this.parent, t3 = this.key;
          this.key = this.parent = null, e2 && e2.removeGroup(t3);
        }, t2;
      }(ia), Mk = function(e) {
        function t2(t3, n2, r) {
          var i = e.call(this) || this;
          return i.key = t3, i.groupSubject = n2, i.refCountSubscription = r, i;
        }
        return O(t2, e), t2.prototype._subscribe = function(e2) {
          var t3 = new Oa(), n2 = this.refCountSubscription, r = this.groupSubject;
          return n2 && !n2.closed && t3.add(new fz(n2)), t3.add(r.subscribe(e2)), t3;
        }, t2;
      }(Y), fz = function(e) {
        function t2(t3) {
          var n2 = e.call(this) || this;
          return n2.parent = t3, t3.count++, n2;
        }
        return O(t2, e), t2.prototype.unsubscribe = function() {
          var t3 = this.parent;
          t3.closed || this.closed || (e.prototype.unsubscribe.call(this), --t3.count, 0 === t3.count && t3.attemptedToUnsubscribe && t3.unsubscribe());
        }, t2;
      }(Oa), gz = function(e) {
        function t2(t3) {
          var n2 = e.call(this) || this;
          return n2._value = t3, n2;
        }
        return O(t2, e), Object.defineProperty(t2.prototype, "value", { get: function() {
          return this.getValue();
        }, enumerable: true, configurable: true }), t2.prototype._subscribe = function(t3) {
          var n2 = e.prototype._subscribe.call(this, t3);
          return n2 && !n2.closed && t3.next(this._value), n2;
        }, t2.prototype.getValue = function() {
          if (this.hasError) throw this.thrownError;
          if (this.closed) throw new qd();
          return this._value;
        }, t2.prototype.next = function(t3) {
          e.prototype.next.call(this, this._value = t3);
        }, t2;
      }(Pa), dg = function(e) {
        function t2(t3, n2) {
          var r = e.call(this, t3, n2) || this;
          return r.scheduler = t3, r.work = n2, r.pending = false, r;
        }
        return O(t2, e), t2.prototype.schedule = function(e2, t3) {
          if (void 0 === t3 && (t3 = 0), this.closed) return this;
          this.state = e2, e2 = this.id;
          var n2 = this.scheduler;
          return null != e2 && (this.id = this.recycleAsyncId(n2, e2, t3)), this.pending = true, this.delay = t3, this.id = this.id || this.requestAsyncId(n2, this.id, t3), this;
        }, t2.prototype.requestAsyncId = function(e2, t3, n2) {
          return void 0 === n2 && (n2 = 0), setInterval(e2.flush.bind(e2, this), n2);
        }, t2.prototype.recycleAsyncId = function(e2, t3, n2) {
          if (void 0 === n2 && (n2 = 0), null !== n2 && this.delay === n2 && false === this.pending) return t3;
          clearInterval(t3);
        }, t2.prototype.execute = function(e2, t3) {
          return this.closed ? Error("executing a cancelled action") : (this.pending = false, (e2 = this._execute(e2, t3)) ? e2 : void (false === this.pending && null != this.id && (this.id = this.recycleAsyncId(this.scheduler, this.id, null))));
        }, t2.prototype._execute = function(e2, t3) {
          t3 = false;
          var n2 = void 0;
          try {
            this.work(e2);
          } catch (e3) {
            t3 = true, n2 = !!e3 && e3 || Error(e3);
          }
          if (t3) return this.unsubscribe(), n2;
        }, t2.prototype._unsubscribe = function() {
          var e2 = this.id, t3 = this.scheduler, n2 = t3.actions, r = n2.indexOf(this);
          this.state = this.work = null, this.pending = false, this.scheduler = null, -1 !== r && n2.splice(r, 1), null != e2 && (this.id = this.recycleAsyncId(t3, e2, null)), this.delay = null;
        }, t2;
      }(function(e) {
        function t2(t3, n2) {
          return e.call(this) || this;
        }
        return O(t2, e), t2.prototype.schedule = function(e2, t3) {
          return this;
        }, t2;
      }(Oa)), hz = function(e) {
        function t2(t3, n2) {
          var r = e.call(this, t3, n2) || this;
          return r.scheduler = t3, r.work = n2, r;
        }
        return O(t2, e), t2.prototype.schedule = function(t3, n2) {
          return void 0 === n2 && (n2 = 0), 0 < n2 ? e.prototype.schedule.call(this, t3, n2) : (this.delay = n2, this.state = t3, this.scheduler.flush(this), this);
        }, t2.prototype.execute = function(t3, n2) {
          return 0 < n2 || this.closed ? e.prototype.execute.call(this, t3, n2) : this._execute(t3, n2);
        }, t2.prototype.requestAsyncId = function(t3, n2, r) {
          return void 0 === r && (r = 0), null !== r && 0 < r || null === r && 0 < this.delay ? e.prototype.requestAsyncId.call(this, t3, n2, r) : t3.flush(this);
        }, t2;
      }(dg), Nk = function() {
        function e(t2, n2) {
          void 0 === n2 && (n2 = e.now), this.SchedulerAction = t2, this.now = n2;
        }
        return e.prototype.schedule = function(e2, t2, n2) {
          return void 0 === t2 && (t2 = 0), new this.SchedulerAction(this, e2).schedule(n2, t2);
        }, e.now = function() {
          return Date.now();
        }, e;
      }(), eg = function(e) {
        function t2(n2, r) {
          void 0 === r && (r = Nk.now);
          var i = e.call(this, n2, function() {
            return t2.delegate && t2.delegate !== i ? t2.delegate.now() : r();
          }) || this;
          return i.actions = [], i.active = false, i.scheduled = void 0, i;
        }
        return O(t2, e), t2.prototype.schedule = function(n2, r, i) {
          return void 0 === r && (r = 0), t2.delegate && t2.delegate !== this ? t2.delegate.schedule(n2, r, i) : e.prototype.schedule.call(this, n2, r, i);
        }, t2.prototype.flush = function(e2) {
          var t3 = this.actions;
          if (this.active) t3.push(e2);
          else {
            var n2;
            this.active = true;
            do {
              if (n2 = e2.execute(e2.state, e2.delay)) break;
            } while (e2 = t3.shift());
            if (this.active = false, n2) {
              for (; e2 = t3.shift(); ) e2.unsubscribe();
              throw n2;
            }
          }
        }, t2;
      }(Nk), fg = new (function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2;
      }(eg))(hz), vb = new Y(function(e) {
        return e.complete();
      }), am = function(e) {
        return function(t2) {
          for (var n2 = 0, r = e.length; n2 < r && !t2.closed; n2++) t2.next(e[n2]);
          t2.complete();
        };
      }, Ok;
      !function(e) {
        e.NEXT = "N", e.ERROR = "E", e.COMPLETE = "C";
      }(Ok || (Ok = {}));
      var Ve = function() {
        function e(e2, t2, n2) {
          this.kind = e2, this.value = t2, this.error = n2, this.hasValue = "N" === e2;
        }
        return e.prototype.observe = function(e2) {
          switch (this.kind) {
            case "N":
              return e2.next && e2.next(this.value);
            case "E":
              return e2.error && e2.error(this.error);
            case "C":
              return e2.complete && e2.complete();
          }
        }, e.prototype.do = function(e2, t2, n2) {
          switch (this.kind) {
            case "N":
              return e2 && e2(this.value);
            case "E":
              return t2 && t2(this.error);
            case "C":
              return n2 && n2();
          }
        }, e.prototype.accept = function(e2, t2, n2) {
          return e2 && "function" == typeof e2.next ? this.observe(e2) : this.do(e2, t2, n2);
        }, e.prototype.toObservable = function() {
          switch (this.kind) {
            case "N":
              return bb(this.value);
            case "E":
              return Z(this.error);
            case "C":
              return mf();
          }
          throw Error("unexpected notification kind value");
        }, e.createNext = function(t2) {
          return void 0 !== t2 ? new e("N", t2) : e.undefinedValueNotification;
        }, e.createError = function(t2) {
          return new e("E", void 0, t2);
        }, e.createComplete = function() {
          return e.completeNotification;
        }, e.completeNotification = new e("C"), e.undefinedValueNotification = new e("N", void 0), e;
      }(), Rs = function() {
        function e(e2, t2) {
          void 0 === t2 && (t2 = 0), this.scheduler = e2, this.delay = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Dq(e2, this.scheduler, this.delay));
        }, e;
      }(), Dq = function(e) {
        function t2(t3, n2, r) {
          return void 0 === r && (r = 0), (t3 = e.call(this, t3) || this).scheduler = n2, t3.delay = r, t3;
        }
        return O(t2, e), t2.dispatch = function(e2) {
          e2.notification.observe(e2.destination), this.unsubscribe();
        }, t2.prototype.scheduleMessage = function(e2) {
          this.destination.add(this.scheduler.schedule(t2.dispatch, this.delay, new iz(e2, this.destination)));
        }, t2.prototype._next = function(e2) {
          this.scheduleMessage(Ve.createNext(e2));
        }, t2.prototype._error = function(e2) {
          this.scheduleMessage(Ve.createError(e2)), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.scheduleMessage(Ve.createComplete()), this.unsubscribe();
        }, t2;
      }(ia), iz = function(e, t2) {
        this.notification = e, this.destination = t2;
      }, qe = function(e) {
        function t2(t3, n2, r) {
          void 0 === t3 && (t3 = Number.POSITIVE_INFINITY), void 0 === n2 && (n2 = Number.POSITIVE_INFINITY);
          var i = e.call(this) || this;
          return i.scheduler = r, i._events = [], i._infiniteTimeWindow = false, i._bufferSize = 1 > t3 ? 1 : t3, i._windowTime = 1 > n2 ? 1 : n2, n2 === Number.POSITIVE_INFINITY ? (i._infiniteTimeWindow = true, i.next = i.nextInfiniteTimeWindow) : i.next = i.nextTimeWindow, i;
        }
        return O(t2, e), t2.prototype.nextInfiniteTimeWindow = function(t3) {
          if (!this.isStopped) {
            var n2 = this._events;
            n2.push(t3), n2.length > this._bufferSize && n2.shift();
          }
          e.prototype.next.call(this, t3);
        }, t2.prototype.nextTimeWindow = function(t3) {
          this.isStopped || (this._events.push(new jz(this._getNow(), t3)), this._trimBufferThenGetEvents()), e.prototype.next.call(this, t3);
        }, t2.prototype._subscribe = function(e2) {
          var t3 = this._infiniteTimeWindow, n2 = t3 ? this._events : this._trimBufferThenGetEvents(), r = this.scheduler, i = n2.length;
          if (this.closed) throw new qd();
          if (this.isStopped || this.hasError) var o = Oa.EMPTY;
          else this.observers.push(e2), o = new zq(this, e2);
          if (r && e2.add(e2 = new Dq(e2, r)), t3) for (t3 = 0; t3 < i && !e2.closed; t3++) e2.next(n2[t3]);
          else for (t3 = 0; t3 < i && !e2.closed; t3++) e2.next(n2[t3].value);
          return this.hasError ? e2.error(this.thrownError) : this.isStopped && e2.complete(), o;
        }, t2.prototype._getNow = function() {
          return (this.scheduler || fg).now();
        }, t2.prototype._trimBufferThenGetEvents = function() {
          for (var e2 = this._getNow(), t3 = this._bufferSize, n2 = this._windowTime, r = this._events, i = r.length, o = 0; o < i && !(e2 - r[o].time < n2); ) o++;
          return i > t3 && (o = Math.max(o, i - t3)), 0 < o && r.splice(0, o), r;
        }, t2;
      }(Pa), jz = function(e, t2) {
        this.time = e, this.value = t2;
      }, of = function(e) {
        function t2() {
          var t3 = null !== e && e.apply(this, arguments) || this;
          return t3.value = null, t3.hasNext = false, t3.hasCompleted = false, t3;
        }
        return O(t2, e), t2.prototype._subscribe = function(t3) {
          return this.hasError ? (t3.error(this.thrownError), Oa.EMPTY) : this.hasCompleted && this.hasNext ? (t3.next(this.value), t3.complete(), Oa.EMPTY) : e.prototype._subscribe.call(this, t3);
        }, t2.prototype.next = function(e2) {
          this.hasCompleted || (this.value = e2, this.hasNext = true);
        }, t2.prototype.error = function(t3) {
          this.hasCompleted || e.prototype.error.call(this, t3);
        }, t2.prototype.complete = function() {
          this.hasCompleted = true, this.hasNext && e.prototype.next.call(this, this.value), e.prototype.complete.call(this);
        }, t2;
      }(Pa), kz = 1, lz = Promise.resolve(), ii = {}, Eq = { setImmediate: function(e) {
        var t2 = kz++;
        return ii[t2] = true, lz.then(function() {
          return bm(t2) && e();
        }), t2;
      }, clearImmediate: function(e) {
        bm(e);
      } }, mz = function(e) {
        function t2(t3, n2) {
          var r = e.call(this, t3, n2) || this;
          return r.scheduler = t3, r.work = n2, r;
        }
        return O(t2, e), t2.prototype.requestAsyncId = function(t3, n2, r) {
          return void 0 === r && (r = 0), null !== r && 0 < r ? e.prototype.requestAsyncId.call(this, t3, n2, r) : (t3.actions.push(this), t3.scheduled || (t3.scheduled = Eq.setImmediate(t3.flush.bind(t3, null))));
        }, t2.prototype.recycleAsyncId = function(t3, n2, r) {
          if (void 0 === r && (r = 0), null !== r && 0 < r || null === r && 0 < this.delay) return e.prototype.recycleAsyncId.call(this, t3, n2, r);
          0 === t3.actions.length && (Eq.clearImmediate(n2), t3.scheduled = void 0);
        }, t2;
      }(dg), ri = new (function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2.prototype.flush = function(e2) {
          this.active = true, this.scheduled = void 0;
          var t3, n2 = this.actions, r = -1, i = n2.length;
          e2 = e2 || n2.shift();
          do {
            if (t3 = e2.execute(e2.state, e2.delay)) break;
          } while (++r < i && (e2 = n2.shift()));
          if (this.active = false, t3) {
            for (; ++r < i && (e2 = n2.shift()); ) e2.unsubscribe();
            throw t3;
          }
        }, t2;
      }(eg))(mz), nz = ri, Pk = new eg(dg), bd = Pk, oz = function(e) {
        function t2(t3, n2) {
          var r = e.call(this, t3, n2) || this;
          return r.scheduler = t3, r.work = n2, r;
        }
        return O(t2, e), t2.prototype.requestAsyncId = function(t3, n2, r) {
          return void 0 === r && (r = 0), null !== r && 0 < r ? e.prototype.requestAsyncId.call(this, t3, n2, r) : (t3.actions.push(this), t3.scheduled || (t3.scheduled = requestAnimationFrame(function() {
            return t3.flush(null);
          })));
        }, t2.prototype.recycleAsyncId = function(t3, n2, r) {
          if (void 0 === r && (r = 0), null !== r && 0 < r || null === r && 0 < this.delay) return e.prototype.recycleAsyncId.call(this, t3, n2, r);
          0 === t3.actions.length && (cancelAnimationFrame(n2), t3.scheduled = void 0);
        }, t2;
      }(dg), Fq = new (function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2.prototype.flush = function(e2) {
          this.active = true, this.scheduled = void 0;
          var t3, n2 = this.actions, r = -1, i = n2.length;
          e2 = e2 || n2.shift();
          do {
            if (t3 = e2.execute(e2.state, e2.delay)) break;
          } while (++r < i && (e2 = n2.shift()));
          if (this.active = false, t3) {
            for (; ++r < i && (e2 = n2.shift()); ) e2.unsubscribe();
            throw t3;
          }
        }, t2;
      }(eg))(oz), pz = function(e) {
        function t2(t3, n2) {
          void 0 === t3 && (t3 = Gq), void 0 === n2 && (n2 = Number.POSITIVE_INFINITY);
          var r = e.call(this, t3, function() {
            return r.frame;
          }) || this;
          return r.maxFrames = n2, r.frame = 0, r.index = -1, r;
        }
        return O(t2, e), t2.prototype.flush = function() {
          for (var e2, t3, n2 = this.actions, r = this.maxFrames; (t3 = n2[0]) && t3.delay <= r && (n2.shift(), this.frame = t3.delay, !(e2 = t3.execute(t3.state, t3.delay))); ) ;
          if (e2) {
            for (; t3 = n2.shift(); ) t3.unsubscribe();
            throw e2;
          }
        }, t2.frameTimeFactor = 10, t2;
      }(eg), Gq = function(e) {
        function t2(t3, n2, r) {
          void 0 === r && (r = t3.index += 1);
          var i = e.call(this, t3, n2) || this;
          return i.scheduler = t3, i.work = n2, i.index = r, i.active = true, i.index = t3.index = r, i;
        }
        return O(t2, e), t2.prototype.schedule = function(n2, r) {
          if (void 0 === r && (r = 0), !this.id) return e.prototype.schedule.call(this, n2, r);
          this.active = false;
          var i = new t2(this.scheduler, this.work);
          return this.add(i), i.schedule(n2, r);
        }, t2.prototype.requestAsyncId = function(e2, n2, r) {
          return void 0 === r && (r = 0), this.delay = e2.frame + r, (e2 = e2.actions).push(this), e2.sort(t2.sortActions), true;
        }, t2.prototype.recycleAsyncId = function(e2, t3, n2) {
        }, t2.prototype._execute = function(t3, n2) {
          if (true === this.active) return e.prototype._execute.call(this, t3, n2);
        }, t2.sortActions = function(e2, t3) {
          return e2.delay === t3.delay ? e2.index === t3.index ? 0 : e2.index > t3.index ? 1 : -1 : e2.delay > t3.delay ? 1 : -1;
        }, t2;
      }(dg), Qk = function() {
        function e() {
          return Error.call(this), this.message = "argument out of range", this.name = "ArgumentOutOfRangeError", this;
        }
        return e.prototype = Object.create(Error.prototype), e;
      }(), vg = function() {
        function e() {
          return Error.call(this), this.message = "no elements in sequence", this.name = "EmptyError", this;
        }
        return e.prototype = Object.create(Error.prototype), e;
      }(), pb = function() {
        function e() {
          return Error.call(this), this.message = "Timeout has occurred", this.name = "TimeoutError", this;
        }
        return e.prototype = Object.create(Error.prototype), e;
      }(), Ss = function() {
        function e(e2, t2) {
          this.project = e2, this.thisArg = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new qz(e2, this.project, this.thisArg));
        }, e;
      }(), qz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).project = n2, t3.count = 0, t3.thisArg = r || t3, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          try {
            var t3 = this.project.call(this.thisArg, e2, this.count++);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.next(t3);
        }, t2;
      }(ia), Rk = function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2.prototype.notifyNext = function(e2, t3, n2, r, i) {
          this.destination.next(t3);
        }, t2.prototype.notifyError = function(e2, t3) {
          this.destination.error(e2);
        }, t2.prototype.notifyComplete = function(e2) {
          this.destination.complete();
        }, t2;
      }(ia), Xs = function(e) {
        function t2(t3, n2, r) {
          var i = e.call(this) || this;
          return i.parent = t3, i.outerValue = n2, i.outerIndex = r, i.index = 0, i;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.parent.notifyNext(this.outerValue, e2, this.outerIndex, this.index++, this);
        }, t2.prototype._error = function(e2) {
          this.parent.notifyError(e2, this), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.parent.notifyComplete(this), this.unsubscribe();
        }, t2;
      }(ia), rz = function(e) {
        return function(t2) {
          return e.then(function(e2) {
            t2.closed || (t2.next(e2), t2.complete());
          }, function(e2) {
            return t2.error(e2);
          }).then(null, me), t2;
        };
      }, $c = "function" == typeof Symbol && Symbol.iterator ? Symbol.iterator : "@@iterator", sz = function(e) {
        return function(t2) {
          for (var n2 = e[$c](); ; ) {
            var r = void 0;
            try {
              r = n2.next();
            } catch (e2) {
              return t2.error(e2), t2;
            }
            if (r.done) {
              t2.complete();
              break;
            }
            if (t2.next(r.value), t2.closed) break;
          }
          return "function" == typeof n2.return && t2.add(function() {
            n2.return && n2.return();
          }), t2;
        };
      }, tz = function(e) {
        return function(t2) {
          var n2 = e[ne]();
          if ("function" != typeof n2.subscribe) throw new TypeError("Provided object does not correctly implement Symbol.observable");
          return n2.subscribe(t2);
        };
      }, hm = function(e) {
        return e && "number" == typeof e.length && "function" != typeof e;
      }, pf = function(e) {
        if (e && "function" == typeof e[ne]) return tz(e);
        if (hm(e)) return am(e);
        if (fm(e)) return rz(e);
        if (e && "function" == typeof e[$c]) return sz(e);
        throw e = ei(e) ? "an invalid object" : "'" + e + "'", new TypeError("You provided " + e + " where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.");
      }, Hq = {}, vz = function() {
        function e(e2) {
          this.resultSelector = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new uz(e2, this.resultSelector));
        }, e;
      }(), uz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).resultSelector = n2, t3.active = 0, t3.values = [], t3.observables = [], t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.values.push(Hq), this.observables.push(e2);
        }, t2.prototype._complete = function() {
          var e2 = this.observables, t3 = e2.length;
          if (0 === t3) this.destination.complete();
          else {
            this.toRespond = this.active = t3;
            for (var n2 = 0; n2 < t3; n2++) this.add(ji(this, e2[n2], void 0, n2));
          }
        }, t2.prototype.notifyComplete = function(e2) {
          0 == --this.active && this.destination.complete();
        }, t2.prototype.notifyNext = function(e2, t3, n2) {
          var r = (e2 = this.values)[n2];
          r = this.toRespond ? r === Hq ? --this.toRespond : this.toRespond : 0, e2[n2] = t3, 0 === r && (this.resultSelector ? this._tryResultSelector(e2) : this.destination.next(e2.slice()));
        }, t2.prototype._tryResultSelector = function(e2) {
          try {
            var t3 = this.resultSelector.apply(this, e2);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.next(t3);
        }, t2;
      }(Rk), vc = function(e) {
        function t2(t3) {
          var n2 = e.call(this) || this;
          return n2.parent = t3, n2;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.parent.notifyNext(e2);
        }, t2.prototype._error = function(e2) {
          this.parent.notifyError(e2), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.parent.notifyComplete(), this.unsubscribe();
        }, t2;
      }(ia);
      !function(e) {
        function t2(t3, n2, r) {
          var i = e.call(this) || this;
          return i.parent = t3, i.outerValue = n2, i.outerIndex = r, i;
        }
        O(t2, e), t2.prototype._next = function(e2) {
          this.parent.notifyNext(this.outerValue, e2, this.outerIndex, this);
        }, t2.prototype._error = function(e2) {
          this.parent.notifyError(e2), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.parent.notifyComplete(this), this.unsubscribe();
        };
      }(ia);
      var wc = function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2.prototype.notifyNext = function(e2) {
          this.destination.next(e2);
        }, t2.prototype.notifyError = function(e2) {
          this.destination.error(e2);
        }, t2.prototype.notifyComplete = function() {
          this.destination.complete();
        }, t2;
      }(ia);
      !function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        O(t2, e), t2.prototype.notifyNext = function(e2, t3, n2, r) {
          this.destination.next(t3);
        }, t2.prototype.notifyError = function(e2) {
          this.destination.error(e2);
        }, t2.prototype.notifyComplete = function(e2) {
          this.destination.complete();
        };
      }(ia);
      var at = function() {
        function e(e2, t2) {
          void 0 === t2 && (t2 = Number.POSITIVE_INFINITY), this.project = e2, this.concurrent = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new wz(e2, this.project, this.concurrent));
        }, e;
      }(), wz = function(e) {
        function t2(t3, n2, r) {
          return void 0 === r && (r = Number.POSITIVE_INFINITY), (t3 = e.call(this, t3) || this).project = n2, t3.concurrent = r, t3.hasCompleted = false, t3.buffer = [], t3.active = 0, t3.index = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.active < this.concurrent ? this._tryNext(e2) : this.buffer.push(e2);
        }, t2.prototype._tryNext = function(e2) {
          var t3 = this.index++;
          try {
            var n2 = this.project(e2, t3);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.active++, this._innerSub(n2);
        }, t2.prototype._innerSub = function(e2) {
          var t3 = new vc(this), n2 = this.destination;
          n2.add(t3), (e2 = ic(e2, t3)) !== t3 && n2.add(e2);
        }, t2.prototype._complete = function() {
          this.hasCompleted = true, 0 === this.active && 0 === this.buffer.length && this.destination.complete(), this.unsubscribe();
        }, t2.prototype.notifyNext = function(e2) {
          this.destination.next(e2);
        }, t2.prototype.notifyComplete = function() {
          var e2 = this.buffer;
          this.active--, 0 < e2.length ? this._next(e2.shift()) : 0 === this.active && this.hasCompleted && this.destination.complete();
        }, t2;
      }(wc), Sk = y.parseFloat, Iq = -1 / 0 != 1 / Sk("	\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\uFEFF-0") ? function(e) {
        e = ik(String(e));
        var t2 = Sk(e);
        return 0 === t2 && "-" == e.charAt(0) ? -0 : t2;
      } : Sk;
      N({ global: true, forced: parseFloat != Iq }, { parseFloat: Iq });
      var Tk = new Y(hc), ft = function() {
        function e(e2, t2) {
          this.predicate = e2, this.thisArg = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new xz(e2, this.predicate, this.thisArg));
        }, e;
      }(), xz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).predicate = n2, t3.thisArg = r, t3.count = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          try {
            var t3 = this.predicate.call(this.thisArg, e2, this.count++);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          t3 && this.destination.next(e2);
        }, t2;
      }(ia), gt = function() {
        function e() {
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new yz(e2));
        }, e;
      }(), yz = function(e) {
        function t2(t3) {
          return (t3 = e.call(this, t3) || this).hasFirst = false, t3.observables = [], t3.subscriptions = [], t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.observables.push(e2);
        }, t2.prototype._complete = function() {
          var e2 = this.observables, t3 = e2.length;
          if (0 === t3) this.destination.complete();
          else {
            for (var n2 = 0; n2 < t3 && !this.hasFirst; n2++) {
              var r = ji(this, e2[n2], void 0, n2);
              this.subscriptions && this.subscriptions.push(r), this.add(r);
            }
            this.observables = null;
          }
        }, t2.prototype.notifyNext = function(e2, t3, n2) {
          if (!this.hasFirst) {
            for (this.hasFirst = true, e2 = 0; e2 < this.subscriptions.length; e2++) if (e2 !== n2) {
              var r = this.subscriptions[e2];
              r.unsubscribe(), this.remove(r);
            }
            this.subscriptions = null;
          }
          this.destination.next(t3);
        }, t2;
      }(Rk), jt = function() {
        function e(e2) {
          this.resultSelector = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new zz(e2, this.resultSelector));
        }, e;
      }(), zz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).resultSelector = n2, t3.iterators = [], t3.active = 0, t3.resultSelector = "function" == typeof n2 ? n2 : void 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          var t3 = this.iterators;
          Jb(e2) ? t3.push(new Az(e2)) : "function" == typeof e2[$c] ? t3.push(new Bz(e2[$c]())) : t3.push(new Cz(this.destination, this, e2));
        }, t2.prototype._complete = function() {
          var e2 = this.iterators, t3 = e2.length;
          if (this.unsubscribe(), 0 === t3) this.destination.complete();
          else {
            this.active = t3;
            for (var n2 = 0; n2 < t3; n2++) {
              var r = e2[n2];
              r.stillUnsubscribed ? this.destination.add(r.subscribe()) : this.active--;
            }
          }
        }, t2.prototype.notifyInactive = function() {
          this.active--, 0 === this.active && this.destination.complete();
        }, t2.prototype.checkIterators = function() {
          for (var e2 = this.iterators, t3 = e2.length, n2 = this.destination, r = 0; r < t3; r++) {
            var i = e2[r];
            if ("function" == typeof i.hasValue && !i.hasValue()) return;
          }
          var o = false, a2 = [];
          for (r = 0; r < t3; r++) {
            var s = (i = e2[r]).next();
            if (i.hasCompleted() && (o = true), s.done) return void n2.complete();
            a2.push(s.value);
          }
          this.resultSelector ? this._tryresultSelector(a2) : n2.next(a2), o && n2.complete();
        }, t2.prototype._tryresultSelector = function(e2) {
          try {
            var t3 = this.resultSelector.apply(this, e2);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.next(t3);
        }, t2;
      }(ia), Bz = function() {
        function e(e2) {
          this.iterator = e2, this.nextResult = e2.next();
        }
        return e.prototype.hasValue = function() {
          return true;
        }, e.prototype.next = function() {
          var e2 = this.nextResult;
          return this.nextResult = this.iterator.next(), e2;
        }, e.prototype.hasCompleted = function() {
          var e2 = this.nextResult;
          return !(!e2 || !e2.done);
        }, e;
      }(), Az = function() {
        function e(e2) {
          this.array = e2, this.length = this.index = 0, this.length = e2.length;
        }
        return e.prototype[$c] = function() {
          return this;
        }, e.prototype.next = function(e2) {
          e2 = this.index++;
          var t2 = this.array;
          return e2 < this.length ? { value: t2[e2], done: false } : { value: null, done: true };
        }, e.prototype.hasValue = function() {
          return this.array.length > this.index;
        }, e.prototype.hasCompleted = function() {
          return this.array.length === this.index;
        }, e;
      }(), Cz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).parent = n2, t3.observable = r, t3.stillUnsubscribed = true, t3.buffer = [], t3.isComplete = false, t3;
        }
        return O(t2, e), t2.prototype[$c] = function() {
          return this;
        }, t2.prototype.next = function() {
          var e2 = this.buffer;
          return 0 === e2.length && this.isComplete ? { value: null, done: true } : { value: e2.shift(), done: false };
        }, t2.prototype.hasValue = function() {
          return 0 < this.buffer.length;
        }, t2.prototype.hasCompleted = function() {
          return 0 === this.buffer.length && this.isComplete;
        }, t2.prototype.notifyComplete = function() {
          0 < this.buffer.length ? (this.isComplete = true, this.parent.notifyInactive()) : this.destination.complete();
        }, t2.prototype.notifyNext = function(e2) {
          this.buffer.push(e2), this.parent.checkIterators();
        }, t2.prototype.subscribe = function() {
          return ic(this.observable, new vc(this));
        }, t2;
      }(wc), Dz = Object.freeze({ __proto__: null, Observable: Y, ConnectableObservable: Cq, GroupedObservable: Mk, observable: ne, Subject: Pa, BehaviorSubject: gz, ReplaySubject: qe, AsyncSubject: of, asap: nz, asapScheduler: ri, async: bd, asyncScheduler: Pk, queue: fg, queueScheduler: fg, animationFrame: Fq, animationFrameScheduler: Fq, VirtualTimeScheduler: pz, VirtualAction: Gq, Scheduler: Nk, Subscription: Oa, Subscriber: ia, Notification: Ve, get NotificationKind() {
        return Ok;
      }, pipe: gi, noop: hc, identity: Yc, isObservable: function(e) {
        return !!e && (e instanceof Y || "function" == typeof e.lift && "function" == typeof e.subscribe);
      }, ArgumentOutOfRangeError: Qk, EmptyError: vg, ObjectUnsubscribedError: qd, UnsubscriptionError: lf, TimeoutError: pb, bindCallback: cm, bindNodeCallback: dm, combineLatest: function() {
        for (var e = [], t2 = 0; t2 < arguments.length; t2++) e[t2] = arguments[t2];
        var n2 = t2 = void 0;
        return Zc(e[e.length - 1]) && (n2 = e.pop()), "function" == typeof e[e.length - 1] && (t2 = e.pop()), 1 === e.length && Jb(e[0]) && (e = e[0]), nf(e, n2).lift(new vz(t2));
      }, concat: im, defer: ad, empty: mf, forkJoin: jm, from: Kb, fromEvent: gb, fromEventPattern: lm, generate: function(e, t2, n2, r, i) {
        if (1 == arguments.length) {
          var o = e.initialState;
          t2 = e.condition, n2 = e.iterate;
          var a2 = e.resultSelector || Yc;
          i = e.scheduler;
        } else void 0 === r || Zc(r) ? (o = e, a2 = Yc, i = r) : (o = e, a2 = r);
        return new Y(function(e2) {
          var r2 = o;
          if (i) return i.schedule(bt, 0, { subscriber: e2, iterate: n2, condition: t2, resultSelector: a2, state: r2 });
          for (; ; ) {
            if (t2) {
              var s = void 0;
              try {
                s = t2(r2);
              } catch (t3) {
                e2.error(t3);
                break;
              }
              if (!s) {
                e2.complete();
                break;
              }
            }
            s = void 0;
            try {
              s = a2(r2);
            } catch (t3) {
              e2.error(t3);
              break;
            }
            if (e2.next(s), e2.closed) break;
            try {
              r2 = n2(r2);
            } catch (t3) {
              e2.error(t3);
              break;
            }
          }
        });
      }, iif: function(e, t2, n2) {
        return void 0 === t2 && (t2 = vb), void 0 === n2 && (n2 = vb), ad(function() {
          return e() ? t2 : n2;
        });
      }, interval: mm, merge: Xb, never: function() {
        return Tk;
      }, of: bb, onErrorResumeNext: li, pairs: function(e, t2) {
        return new Y(t2 ? function(n2) {
          var r = Object.keys(e), i = new Oa();
          return i.add(t2.schedule(dt, 0, { keys: r, index: 0, subscriber: n2, subscription: i, obj: e })), i;
        } : function(t3) {
          for (var n2 = Object.keys(e), r = 0; r < n2.length && !t3.closed; r++) {
            var i = n2[r];
            e.hasOwnProperty(i) && t3.next([i, e[i]]);
          }
          t3.complete();
        });
      }, partition: function(e, t2, n2) {
        return [wb(t2, n2)(new Y(pf(e))), wb(et(t2, n2))(new Y(pf(e)))];
      }, race: Ca, range: function(e, t2, n2) {
        return void 0 === e && (e = 0), new Y(function(r) {
          void 0 === t2 && (t2 = e, e = 0);
          var i = 0, o = e;
          if (n2) return n2.schedule(ht, 0, { index: i, count: t2, start: e, subscriber: r });
          for (; ; ) {
            if (i++ >= t2) {
              r.complete();
              break;
            }
            if (r.next(o++), r.closed) break;
          }
        });
      }, throwError: Z, timer: Bc, using: function(e, t2) {
        return new Y(function(n2) {
          try {
            var r = e();
          } catch (e2) {
            return void n2.error(e2);
          }
          try {
            var i = t2(r);
          } catch (e2) {
            return void n2.error(e2);
          }
          var o = (i ? Kb(i) : vb).subscribe(n2);
          return function() {
            o.unsubscribe(), r && r.unsubscribe();
          };
        });
      }, zip: mi, scheduled: gm, EMPTY: vb, NEVER: Tk, config: Ib }), kt = function() {
        function e(e2) {
          this.selector = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Ez(e2, this.selector, this.caught));
        }, e;
      }(), Ez = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).selector = n2, t3.caught = r, t3;
        }
        return O(t2, e), t2.prototype.error = function(t3) {
          if (!this.isStopped) {
            var n2 = void 0;
            try {
              n2 = this.selector(t3, this.caught);
            } catch (t4) {
              return void e.prototype.error.call(this, t4);
            }
            this._unsubscribeAndRecycle(), t3 = new vc(this), this.add(t3), (n2 = ic(n2, t3)) !== t3 && this.add(n2);
          }
        }, t2;
      }(wc), lt = function() {
        function e(e2) {
          this.defaultValue = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Fz(e2, this.defaultValue));
        }, e;
      }(), Fz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).defaultValue = n2, t3.isEmpty = true, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.isEmpty = false, this.destination.next(e2);
        }, t2.prototype._complete = function() {
          this.isEmpty && this.destination.next(this.defaultValue), this.destination.complete();
        }, t2;
      }(ia), mt = function() {
        function e(e2, t2) {
          this.delay = e2, this.scheduler = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Gz(e2, this.delay, this.scheduler));
        }, e;
      }(), Gz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).delay = n2, t3.scheduler = r, t3.queue = [], t3.active = false, t3.errored = false, t3;
        }
        return O(t2, e), t2.dispatch = function(e2) {
          for (var t3 = e2.source, n2 = t3.queue, r = e2.scheduler, i = e2.destination; 0 < n2.length && 0 >= n2[0].time - r.now(); ) n2.shift().notification.observe(i);
          0 < n2.length ? (t3 = Math.max(0, n2[0].time - r.now()), this.schedule(e2, t3)) : (this.unsubscribe(), t3.active = false);
        }, t2.prototype._schedule = function(e2) {
          this.active = true, this.destination.add(e2.schedule(t2.dispatch, this.delay, { source: this, destination: this.destination, scheduler: e2 }));
        }, t2.prototype.scheduleNotification = function(e2) {
          if (true !== this.errored) {
            var t3 = this.scheduler;
            e2 = new Hz(t3.now() + this.delay, e2), this.queue.push(e2), false === this.active && this._schedule(t3);
          }
        }, t2.prototype._next = function(e2) {
          this.scheduleNotification(Ve.createNext(e2));
        }, t2.prototype._error = function(e2) {
          this.errored = true, this.queue = [], this.destination.error(e2), this.unsubscribe();
        }, t2.prototype._complete = function() {
          this.scheduleNotification(Ve.createComplete()), this.unsubscribe();
        }, t2;
      }(ia), Hz = function(e, t2) {
        this.time = e, this.notification = t2;
      }, nt = function() {
        function e(e2, t2) {
          this.keySelector = e2, this.flushes = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Iz(e2, this.keySelector, this.flushes));
        }, e;
      }(), Iz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).keySelector = n2, t3.values = /* @__PURE__ */ new Set(), r && t3.add(ic(r, new vc(t3))), t3;
        }
        return O(t2, e), t2.prototype.notifyNext = function() {
          this.values.clear();
        }, t2.prototype.notifyError = function(e2) {
          this._error(e2);
        }, t2.prototype._next = function(e2) {
          this.keySelector ? this._useKeySelector(e2) : this._finalizeNext(e2, e2);
        }, t2.prototype._useKeySelector = function(e2) {
          var t3 = this.destination;
          try {
            var n2 = this.keySelector(e2);
          } catch (e3) {
            return void t3.error(e3);
          }
          this._finalizeNext(n2, e2);
        }, t2.prototype._finalizeNext = function(e2, t3) {
          var n2 = this.values;
          n2.has(e2) || (n2.add(e2), this.destination.next(t3));
        }, t2;
      }(wc), pt = function() {
        function e(e2) {
          this.errorFactory = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Jz(e2, this.errorFactory));
        }, e;
      }(), Jz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).errorFactory = n2, t3.hasValue = false, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.hasValue = true, this.destination.next(e2);
        }, t2.prototype._complete = function() {
          if (this.hasValue) return this.destination.complete();
          var e2 = void 0;
          try {
            e2 = this.errorFactory();
          } catch (t3) {
            e2 = t3;
          }
          this.destination.error(e2);
        }, t2;
      }(ia), qt = function() {
        function e(e2) {
          if (this.total = e2, 0 > this.total) throw new Qk();
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Kz(e2, this.total));
        }, e;
      }(), Kz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).total = n2, t3.count = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          var t3 = this.total, n2 = ++this.count;
          n2 <= t3 && (this.destination.next(e2), n2 === t3 && (this.destination.complete(), this.unsubscribe()));
        }, t2;
      }(ia), rt = function() {
        function e(e2) {
          this.project = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Lz(e2, this.project));
        }, e;
      }(), Lz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).project = n2, t3.hasSubscription = false, t3.hasCompleted = false, t3.index = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.hasSubscription || this.tryNext(e2);
        }, t2.prototype.tryNext = function(e2) {
          var t3 = this.index++;
          try {
            var n2 = this.project(e2, t3);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.hasSubscription = true, this._innerSub(n2);
        }, t2.prototype._innerSub = function(e2) {
          var t3 = new vc(this), n2 = this.destination;
          n2.add(t3), (e2 = ic(e2, t3)) !== t3 && n2.add(e2);
        }, t2.prototype._complete = function() {
          this.hasCompleted = true, this.hasSubscription || this.destination.complete(), this.unsubscribe();
        }, t2.prototype.notifyNext = function(e2) {
          this.destination.next(e2);
        }, t2.prototype.notifyError = function(e2) {
          this.destination.error(e2);
        }, t2.prototype.notifyComplete = function() {
          this.hasSubscription = false, this.hasCompleted && this.destination.complete();
        }, t2;
      }(wc), st = function() {
        function e(e2) {
          this.callback = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Mz(e2, this.callback));
        }, e;
      }(), Mz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).add(new Oa(n2)), t3;
        }
        return O(t2, e), t2;
      }(ia), ut = function() {
        function e() {
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Nz(e2));
        }, e;
      }(), Nz = function(e) {
        function t2() {
          return null !== e && e.apply(this, arguments) || this;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
        }, t2;
      }(ia), vt = function() {
        function e(e2) {
          if (this.total = e2, 0 > this.total) throw new Qk();
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Oz(e2, this.total));
        }, e;
      }(), Oz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).total = n2, t3.ring = [], t3.count = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          var t3 = this.ring, n2 = this.total, r = this.count++;
          t3.length < n2 ? t3.push(e2) : t3[r % n2] = e2;
        }, t2.prototype._complete = function() {
          var e2 = this.destination, t3 = this.count;
          if (0 < t3) for (var n2 = this.count >= this.total ? this.total : this.count, r = this.ring, i = 0; i < n2; i++) {
            var o = t3++ % n2;
            e2.next(r[o]);
          }
          e2.complete();
        }, t2;
      }(ia), wt = function() {
        function e(e2) {
          this.value = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Pz(e2, this.value));
        }, e;
      }(), Pz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).value = n2, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.destination.next(this.value);
        }, t2;
      }(ia), xt = function() {
        function e(e2, t2, n2) {
          void 0 === n2 && (n2 = false), this.accumulator = e2, this.seed = t2, this.hasSeed = n2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Qz(e2, this.accumulator, this.seed, this.hasSeed));
        }, e;
      }(), Qz = function(e) {
        function t2(t3, n2, r, i) {
          return (t3 = e.call(this, t3) || this).accumulator = n2, t3._seed = r, t3.hasSeed = i, t3.index = 0, t3;
        }
        return O(t2, e), Object.defineProperty(t2.prototype, "seed", { get: function() {
          return this._seed;
        }, set: function(e2) {
          this.hasSeed = true, this._seed = e2;
        }, enumerable: true, configurable: true }), t2.prototype._next = function(e2) {
          if (this.hasSeed) return this._tryNext(e2);
          this.seed = e2, this.destination.next(e2);
        }, t2.prototype._tryNext = function(e2) {
          var t3 = this.index++;
          try {
            var n2 = this.accumulator(this.seed, e2, t3);
          } catch (e3) {
            this.destination.error(e3);
          }
          this.seed = n2, this.destination.next(n2);
        }, t2;
      }(ia), zt = function() {
        function e(e2, t2) {
          this.subjectFactory = e2, this.selector = t2;
        }
        return e.prototype.call = function(e2, t2) {
          var n2 = this.selector, r = this.subjectFactory();
          return (e2 = n2(r).subscribe(e2)).add(t2.subscribe(r)), e2;
        }, e;
      }(), Bt = function() {
        function e(e2, t2) {
          this.notifier = e2, this.source = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Rz(e2, this.notifier, this.source));
        }, e;
      }(), Rz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).notifier = n2, t3.source = r, t3;
        }
        return O(t2, e), t2.prototype.error = function(t3) {
          if (!this.isStopped) {
            var n2 = this.errors, r = this.retries, i = this.retriesSubscription;
            if (r) this.retriesSubscription = this.errors = void 0;
            else {
              n2 = new Pa();
              try {
                r = (0, this.notifier)(n2);
              } catch (t4) {
                return e.prototype.error.call(this, t4);
              }
              i = ic(r, new vc(this));
            }
            this._unsubscribeAndRecycle(), this.errors = n2, this.retries = r, this.retriesSubscription = i, n2.next(t3);
          }
        }, t2.prototype._unsubscribe = function() {
          var e2 = this.errors, t3 = this.retriesSubscription;
          e2 && (e2.unsubscribe(), this.errors = void 0), t3 && (t3.unsubscribe(), this.retriesSubscription = void 0), this.retries = void 0;
        }, t2.prototype.notifyNext = function() {
          var e2 = this._unsubscribe;
          this._unsubscribe = null, this._unsubscribeAndRecycle(), this._unsubscribe = e2, this.source.subscribe(this);
        }, t2;
      }(wc), Et = function() {
        function e(e2) {
          this.project = e2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Sz(e2, this.project));
        }, e;
      }(), Sz = function(e) {
        function t2(t3, n2) {
          return (t3 = e.call(this, t3) || this).project = n2, t3.index = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          var t3 = this.index++;
          try {
            var n2 = this.project(e2, t3);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this._innerSub(n2);
        }, t2.prototype._innerSub = function(e2) {
          var t3 = this.innerSubscription;
          t3 && t3.unsubscribe(), t3 = new vc(this);
          var n2 = this.destination;
          n2.add(t3), this.innerSubscription = ic(e2, t3), this.innerSubscription !== t3 && n2.add(this.innerSubscription);
        }, t2.prototype._complete = function() {
          var t3 = this.innerSubscription;
          t3 && !t3.closed || e.prototype._complete.call(this), this.unsubscribe();
        }, t2.prototype._unsubscribe = function() {
          this.innerSubscription = void 0;
        }, t2.prototype.notifyComplete = function() {
          this.innerSubscription = void 0, this.isStopped && e.prototype._complete.call(this);
        }, t2.prototype.notifyNext = function(e2) {
          this.destination.next(e2);
        }, t2;
      }(wc), Ft = function() {
        function e(e2) {
          this.notifier = e2;
        }
        return e.prototype.call = function(e2, t2) {
          e2 = new Tz(e2);
          var n2 = ic(this.notifier, new vc(e2));
          return n2 && !e2.seenValue ? (e2.add(n2), t2.subscribe(e2)) : e2;
        }, e;
      }(), Tz = function(e) {
        function t2(t3) {
          return (t3 = e.call(this, t3) || this).seenValue = false, t3;
        }
        return O(t2, e), t2.prototype.notifyNext = function() {
          this.seenValue = true, this.complete();
        }, t2.prototype.notifyComplete = function() {
        }, t2;
      }(wc), Ht = function() {
        function e(e2, t2) {
          this.predicate = e2, this.inclusive = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Uz(e2, this.predicate, this.inclusive));
        }, e;
      }(), Uz = function(e) {
        function t2(t3, n2, r) {
          return (t3 = e.call(this, t3) || this).predicate = n2, t3.inclusive = r, t3.index = 0, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          var t3 = this.destination;
          try {
            var n2 = this.predicate(e2, this.index++);
          } catch (e3) {
            return void t3.error(e3);
          }
          this.nextOrComplete(e2, n2);
        }, t2.prototype.nextOrComplete = function(e2, t3) {
          var n2 = this.destination;
          t3 ? n2.next(e2) : (this.inclusive && n2.next(e2), n2.complete());
        }, t2;
      }(ia), It = function() {
        function e(e2, t2, n2) {
          this.nextOrObserver = e2, this.error = t2, this.complete = n2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Vz(e2, this.nextOrObserver, this.error, this.complete));
        }, e;
      }(), Vz = function(e) {
        function t2(t3, n2, r, i) {
          return (t3 = e.call(this, t3) || this)._tapNext = hc, t3._tapError = hc, t3._tapComplete = hc, t3._tapError = r || hc, t3._tapComplete = i || hc, le(n2) ? (t3._context = t3, t3._tapNext = n2) : n2 && (t3._context = n2, t3._tapNext = n2.next || hc, t3._tapError = n2.error || hc, t3._tapComplete = n2.complete || hc), t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          try {
            this._tapNext.call(this._context, e2);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.next(e2);
        }, t2.prototype._error = function(e2) {
          try {
            this._tapError.call(this._context, e2);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.error(e2);
        }, t2.prototype._complete = function() {
          try {
            this._tapComplete.call(this._context);
          } catch (e2) {
            return void this.destination.error(e2);
          }
          return this.destination.complete();
        }, t2;
      }(ia), Kt = { leading: true, trailing: false };
      !function(e) {
        function t2(t3, n2, r, i) {
          var o = e.call(this, t3) || this;
          return o.destination = t3, o.durationSelector = n2, o._leading = r, o._trailing = i, o._hasValue = false, o;
        }
        O(t2, e), t2.prototype._next = function(e2) {
          this._hasValue = true, this._sendValue = e2, this._throttled || (this._leading ? this.send() : this.throttle(e2));
        }, t2.prototype.send = function() {
          var e2 = this._sendValue;
          this._hasValue && (this.destination.next(e2), this.throttle(e2)), this._hasValue = false, this._sendValue = void 0;
        }, t2.prototype.throttle = function(e2) {
          (e2 = this.tryDurationSelector(e2)) && this.add(this._throttled = ic(e2, new vc(this)));
        }, t2.prototype.tryDurationSelector = function(e2) {
          try {
            return this.durationSelector(e2);
          } catch (e3) {
            return this.destination.error(e3), null;
          }
        }, t2.prototype.throttlingDone = function() {
          var e2 = this._throttled, t3 = this._trailing;
          e2 && e2.unsubscribe(), this._throttled = void 0, t3 && this.send();
        }, t2.prototype.notifyNext = function() {
          this.throttlingDone();
        }, t2.prototype.notifyComplete = function() {
          this.throttlingDone();
        };
      }(wc);
      for (var Lt = function() {
        function e(e2, t2, n2, r) {
          this.duration = e2, this.scheduler = t2, this.leading = n2, this.trailing = r;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Wz(e2, this.duration, this.scheduler, this.leading, this.trailing));
        }, e;
      }(), Wz = function(e) {
        function t2(t3, n2, r, i, o) {
          return (t3 = e.call(this, t3) || this).duration = n2, t3.scheduler = r, t3.leading = i, t3.trailing = o, t3._hasTrailingValue = false, t3._trailingValue = null, t3;
        }
        return O(t2, e), t2.prototype._next = function(e2) {
          this.throttled ? this.trailing && (this._trailingValue = e2, this._hasTrailingValue = true) : (this.add(this.throttled = this.scheduler.schedule(Mt, this.duration, { subscriber: this })), this.leading ? this.destination.next(e2) : this.trailing && (this._trailingValue = e2, this._hasTrailingValue = true));
        }, t2.prototype._complete = function() {
          this._hasTrailingValue && this.destination.next(this._trailingValue), this.destination.complete();
        }, t2.prototype.clearThrottle = function() {
          var e2 = this.throttled;
          e2 && (this.trailing && this._hasTrailingValue && (this.destination.next(this._trailingValue), this._trailingValue = null, this._hasTrailingValue = false), e2.unsubscribe(), this.remove(e2), this.throttled = null);
        }, t2;
      }(ia), Ot = function() {
        function e(e2, t2, n2, r) {
          this.waitFor = e2, this.absoluteTimeout = t2, this.withObservable = n2, this.scheduler = r;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Xz(e2, this.absoluteTimeout, this.waitFor, this.withObservable, this.scheduler));
        }, e;
      }(), Xz = function(e) {
        function t2(t3, n2, r, i, o) {
          return (t3 = e.call(this, t3) || this).absoluteTimeout = n2, t3.waitFor = r, t3.withObservable = i, t3.scheduler = o, t3.scheduleTimeout(), t3;
        }
        return O(t2, e), t2.dispatchTimeout = function(e2) {
          var t3 = e2.withObservable;
          e2._unsubscribeAndRecycle(), e2.add(ic(t3, new vc(e2)));
        }, t2.prototype.scheduleTimeout = function() {
          var e2 = this.action;
          e2 ? this.action = e2.schedule(this, this.waitFor) : this.add(this.action = this.scheduler.schedule(t2.dispatchTimeout, this.waitFor, this));
        }, t2.prototype._next = function(t3) {
          this.absoluteTimeout || this.scheduleTimeout(), e.prototype._next.call(this, t3);
        }, t2.prototype._unsubscribe = function() {
          this.action = void 0, this.withObservable = this.scheduler = null;
        }, t2;
      }(wc), Qt = function() {
        function e(e2, t2) {
          this.observables = e2, this.project = t2;
        }
        return e.prototype.call = function(e2, t2) {
          return t2.subscribe(new Yz(e2, this.observables, this.project));
        }, e;
      }(), Yz = function(e) {
        function t2(t3, n2, r) {
          (t3 = e.call(this, t3) || this).observables = n2, t3.project = r, t3.toRespond = [], r = n2.length, t3.values = Array(r);
          for (var i = 0; i < r; i++) t3.toRespond.push(i);
          for (i = 0; i < r; i++) t3.add(ji(t3, n2[i], void 0, i));
          return t3;
        }
        return O(t2, e), t2.prototype.notifyNext = function(e2, t3, n2) {
          this.values[n2] = t3, 0 < (e2 = this.toRespond).length && (-1 !== (n2 = e2.indexOf(n2)) && e2.splice(n2, 1));
        }, t2.prototype.notifyComplete = function() {
        }, t2.prototype._next = function(e2) {
          0 === this.toRespond.length && (e2 = [e2].concat(this.values), this.project ? this._tryProject(e2) : this.destination.next(e2));
        }, t2.prototype._tryProject = function(e2) {
          try {
            var t3 = this.project.apply(this, e2);
          } catch (e3) {
            return void this.destination.error(e3);
          }
          this.destination.next(t3);
        }, t2;
      }(Rk), Jq = $a(function(e) {
        var t2 = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);
        if (t2) {
          var n2 = new Uint8Array(16);
          e.exports = function() {
            return t2(n2), n2;
          };
        } else {
          var r = Array(16);
          e.exports = function() {
            for (var e2, t3 = 0; 16 > t3; t3++) 0 == (3 & t3) && (e2 = 4294967296 * Math.random()), r[t3] = e2 >>> ((3 & t3) << 3) & 255;
            return r;
          };
        }
      }), ab = [], Gh = 0; 256 > Gh; ++Gh) ab[Gh] = (Gh + 256).toString(16).substr(1);
      var Kq = function(e, t2) {
        return t2 = t2 || 0, [ab[e[t2++]], ab[e[t2++]], ab[e[t2++]], ab[e[t2++]], "-", ab[e[t2++]], ab[e[t2++]], "-", ab[e[t2++]], ab[e[t2++]], "-", ab[e[t2++]], ab[e[t2++]], "-", ab[e[t2++]], ab[e[t2++]], ab[e[t2++]], ab[e[t2++]], ab[e[t2++]], ab[e[t2++]]].join("");
      }, Ud = function(e, t2, n2) {
        if (n2 = t2 && n2 || 0, "string" == typeof e && (t2 = "binary" === e ? Array(16) : null, e = null), (e = (e = e || {}).random || (e.rng || Jq)())[6] = 15 & e[6] | 64, e[8] = 63 & e[8] | 128, t2) for (var r = 0; 16 > r; ++r) t2[n2 + r] = e[r];
        return t2 || Kq(e);
      }, gg = Ud(), Uk = false, Pc, rd, Vk, Wk, sd, Vd, ec, We, Rb, Xk, Qc, Wd, Rc, Sc, Tc, Xe, Uc, Vc;
      !function(e) {
        e[e.ATTRIBUTE_OPERATION_ERR_FAILURE = 2] = "ATTRIBUTE_OPERATION_ERR_FAILURE", e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT = 3] = "ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT", e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW = 4] = "ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW", e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN = 5] = "ATTRIBUTE_OPERATION_ERR_TOO_OFTEN", e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND = 6] = "ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND", e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT = 7] = "ATTRIBUTE_OPERATION_ERR_TIMEOUT", e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN = 102] = "ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN";
      }(Pc || (Pc = {})), function(e) {
        e[e.CHANNEL_MESSAGE_ERR_FAILURE = 1] = "CHANNEL_MESSAGE_ERR_FAILURE", e[e.CHANNEL_MESSAGE_ERR_TIMEOUT = 2] = "CHANNEL_MESSAGE_ERR_TIMEOUT", e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN = 3] = "CHANNEL_MESSAGE_ERR_TOO_OFTEN", e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE = 4] = "CHANNEL_MESSAGE_ERR_INVALID_MESSAGE", e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL = 5] = "CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL", e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN = 102] = "CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN";
      }(rd || (rd = {})), function(e) {
        e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT = 1] = "CREATE_CHANNEL_ERR_INVALID_ARGUMENT";
      }(Vk || (Vk = {})), function(e) {
        e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT = 1] = "CREATE_INSTANCE_ERR_INVALID_ARGUMENT";
      }(Wk || (Wk = {})), function(e) {
        e[e.GET_MEMBERS_ERR_FAILURE = 1] = "GET_MEMBERS_ERR_FAILURE", e[e.GET_MEMBERS_ERR_REJECTED = 2] = "GET_MEMBERS_ERR_REJECTED", e[e.GET_MEMBERS_ERR_TIMEOUT = 3] = "GET_MEMBERS_ERR_TIMEOUT", e[e.GET_MEMBERS_ERR_TOO_OFTEN = 4] = "GET_MEMBERS_ERR_TOO_OFTEN", e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL = 5] = "GET_MEMBERS_ERR_NOT_IN_CHANNEL", e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN = 102] = "GET_MEMBERS_ERR_USER_NOT_LOGGED_IN";
      }(sd || (sd = {})), function(e) {
        e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT = 1] = "INVITATION_API_CALL_ERR_INVALID_ARGUMENT", e[e.INVITATION_API_CALL_ERR_NOT_STARTED = 2] = "INVITATION_API_CALL_ERR_NOT_STARTED", e[e.INVITATION_API_CALL_ERR_ALREADY_END = 3] = "INVITATION_API_CALL_ERR_ALREADY_END", e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT = 4] = "INVITATION_API_CALL_ERR_ALREADY_ACCEPT", e[e.INVITATION_API_CALL_ERR_ALREADY_SENT = 5] = "INVITATION_API_CALL_ERR_ALREADY_SENT";
      }(Vd || (Vd = {})), function(e) {
        e[e.JOIN_CHANNEL_ERR_FAILURE = 1] = "JOIN_CHANNEL_ERR_FAILURE", e[e.JOIN_CHANNEL_ERR_REJECTED = 2] = "JOIN_CHANNEL_ERR_REJECTED", e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT = 3] = "JOIN_CHANNEL_ERR_INVALID_ARGUMENT", e[e.JOIN_CHANNEL_TIMEOUT = 4] = "JOIN_CHANNEL_TIMEOUT", e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT = 5] = "JOIN_CHANNEL_ERR_EXCEED_LIMIT", e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED = 6] = "JOIN_CHANNEL_ERR_ALREADY_JOINED", e[e.JOIN_CHANNEL_ERR_TOO_OFTEN = 7] = "JOIN_CHANNEL_ERR_TOO_OFTEN", e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN = 8] = "JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN", e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN = 102] = "JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN", e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE = 201] = "JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE", e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID = 202] = "JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID";
      }(ec || (ec = {})), function(e) {
        e[e.LEAVE_CHANNEL_ERR_FAILURE = 1] = "LEAVE_CHANNEL_ERR_FAILURE", e[e.LEAVE_CHANNEL_ERR_REJECTED = 2] = "LEAVE_CHANNEL_ERR_REJECTED", e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL = 3] = "LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL", e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN = 102] = "LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN";
      }(We || (We = {})), function(e) {
        e[e.LOGIN_ERR_UNKNOWN = 1] = "LOGIN_ERR_UNKNOWN", e[e.LOGIN_ERR_REJECTED = 2] = "LOGIN_ERR_REJECTED", e[e.LOGIN_ERR_INVALID_ARGUMENT = 3] = "LOGIN_ERR_INVALID_ARGUMENT", e[e.LOGIN_ERR_INVALID_APP_ID = 4] = "LOGIN_ERR_INVALID_APP_ID", e[e.LOGIN_ERR_INVALID_TOKEN = 5] = "LOGIN_ERR_INVALID_TOKEN", e[e.LOGIN_ERR_TOKEN_EXPIRED = 6] = "LOGIN_ERR_TOKEN_EXPIRED", e[e.LOGIN_ERR_NOT_AUTHORIZED = 7] = "LOGIN_ERR_NOT_AUTHORIZED", e[e.LOGIN_ERR_ALREADY_LOGIN = 8] = "LOGIN_ERR_ALREADY_LOGIN", e[e.LOGIN_ERR_TIMEOUT = 9] = "LOGIN_ERR_TIMEOUT", e[e.LOGIN_ERR_TOO_OFTEN = 10] = "LOGIN_ERR_TOO_OFTEN", e[e.LOGIN_ERR_ABORTED_BY_LOGOUT = 201] = "LOGIN_ERR_ABORTED_BY_LOGOUT";
      }(Rb || (Rb = {})), function(e) {
        e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN = 102] = "LOGOUT_ERR_USER_NOT_LOGGED_IN";
      }(Xk || (Xk = {})), function(e) {
        e[e.PEER_MESSAGE_ERR_FAILURE = 1] = "PEER_MESSAGE_ERR_FAILURE", e[e.PEER_MESSAGE_ERR_TIMEOUT = 2] = "PEER_MESSAGE_ERR_TIMEOUT", e[e.PEER_MESSAGE_ERR_TOO_OFTEN = 5] = "PEER_MESSAGE_ERR_TOO_OFTEN", e[e.PEER_MESSAGE_ERR_INVALID_USERID = 6] = "PEER_MESSAGE_ERR_INVALID_USERID", e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE = 7] = "PEER_MESSAGE_ERR_INVALID_MESSAGE", e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE = 8] = "PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE", e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN = 102] = "PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN";
      }(Qc || (Qc = {})), function(e) {
        e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT = 2] = "QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT", e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED = 3] = "QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED", e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT = 4] = "QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT", e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN = 5] = "QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN", e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN = 102] = "QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN";
      }(Wd || (Wd = {})), function(e) {
        e[e.RENEW_TOKEN_ERR_FAILURE = 1] = "RENEW_TOKEN_ERR_FAILURE", e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT = 2] = "RENEW_TOKEN_ERR_INVALID_ARGUMENT", e[e.RENEW_TOKEN_ERR_REJECTED = 3] = "RENEW_TOKEN_ERR_REJECTED", e[e.RENEW_TOKEN_ERR_TOO_OFTEN = 4] = "RENEW_TOKEN_ERR_TOO_OFTEN", e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED = 5] = "RENEW_TOKEN_ERR_TOKEN_EXPIRED", e[e.RENEW_TOKEN_ERR_INVALID_TOKEN = 6] = "RENEW_TOKEN_ERR_INVALID_TOKEN", e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN = 102] = "RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN", e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT = 201] = "RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT";
      }(Rc || (Rc = {})), function(e) {
        e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE = 1] = "GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT = 2] = "GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN = 3] = "GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT = 4] = "GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT = 5] = "GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED = 101] = "GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED", e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN = 102] = "GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN";
      }(Sc || (Sc = {})), function(e) {
        e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE = 1] = "PEER_SUBSCRIPTION_STATUS_ERR_FAILURE", e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT = 2] = "PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT", e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED = 3] = "PEER_SUBSCRIPTION_STATUS_ERR_REJECTED", e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT = 4] = "PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT", e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN = 5] = "PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN", e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW = 6] = "PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW", e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN = 102] = "PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN";
      }(Tc || (Tc = {})), function(e) {
        e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE = 1] = "QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE", e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT = 2] = "QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT", e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN = 3] = "QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN", e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN = 102] = "QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN";
      }(Xe || (Xe = {})), function(e) {
        e[e.UPLOAD_MEDIA_ERR_FAILURE = 1] = "UPLOAD_MEDIA_ERR_FAILURE", e[e.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT = 2] = "UPLOAD_MEDIA_ERR_INVALID_ARGUMENT", e[e.UPLOAD_MEDIA_ERR_TIMEOUT = 3] = "UPLOAD_MEDIA_ERR_TIMEOUT", e[e.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW = 4] = "UPLOAD_MEDIA_ERR_SIZE_OVERFLOW", e[e.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED = 5] = "UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED", e[e.UPLOAD_MEDIA_ERR_INTERRUPTED = 6] = "UPLOAD_MEDIA_ERR_INTERRUPTED", e[e.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN = 102] = "UPLOAD_MEDIA_ERR_NOT_LOGGED_IN";
      }(Uc || (Uc = {})), function(e) {
        e[e.DOWNLOAD_MEDIA_ERR_FAILURE = 1] = "DOWNLOAD_MEDIA_ERR_FAILURE", e[e.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT = 2] = "DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT", e[e.DOWNLOAD_MEDIA_ERR_TIMEOUT = 3] = "DOWNLOAD_MEDIA_ERR_TIMEOUT", e[e.DOWNLOAD_MEDIA_ERR_NOT_EXIST = 4] = "DOWNLOAD_MEDIA_ERR_NOT_EXIST", e[e.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED = 5] = "DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED", e[e.DOWNLOAD_MEDIA_ERR_INTERRUPTED = 6] = "DOWNLOAD_MEDIA_ERR_INTERRUPTED", e[e.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN = 102] = "DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN";
      }(Vc || (Vc = {}));
      var Sb = Pc.ATTRIBUTE_OPERATION_ERR_FAILURE, Ja = Pc.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT, se = Pc.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;
      Pc.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;
      var Lq = Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND, Tb = Pc.ATTRIBUTE_OPERATION_ERR_TIMEOUT, Ub = Pc.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN, hg = rd.CHANNEL_MESSAGE_ERR_FAILURE, Yk = rd.CHANNEL_MESSAGE_ERR_TIMEOUT, Mq = rd.CHANNEL_MESSAGE_ERR_TOO_OFTEN, Hh = rd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;
      rd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;
      var ig = rd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN, Zz = Vk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT, Nq = Wk.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;
      Sc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;
      var Oq = Sc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;
      Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;
      var Pq = Sc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT, $z = Sc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;
      Sc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;
      var aA = Sc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN, bA = sd.GET_MEMBERS_ERR_FAILURE, cA = sd.GET_MEMBERS_ERR_REJECTED;
      sd.GET_MEMBERS_ERR_TIMEOUT, sd.GET_MEMBERS_ERR_TOO_OFTEN;
      var dA = sd.GET_MEMBERS_ERR_NOT_IN_CHANNEL, eA = sd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN, xc = Vd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT, fA = Vd.INVITATION_API_CALL_ERR_NOT_STARTED, Ih = Vd.INVITATION_API_CALL_ERR_ALREADY_END, Qq = Vd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT, gA = Vd.INVITATION_API_CALL_ERR_ALREADY_SENT, Rq = ec.JOIN_CHANNEL_ERR_FAILURE;
      ec.JOIN_CHANNEL_ERR_REJECTED;
      var hA = ec.JOIN_CHANNEL_ERR_INVALID_ARGUMENT, Sq = ec.JOIN_CHANNEL_TIMEOUT, Tq = ec.JOIN_CHANNEL_ERR_EXCEED_LIMIT, Uq = ec.JOIN_CHANNEL_ERR_ALREADY_JOINED;
      ec.JOIN_CHANNEL_ERR_TOO_OFTEN;
      var Vq = ec.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN, Wq = ec.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID, Xq = We.LEAVE_CHANNEL_ERR_FAILURE, Yq = We.LEAVE_CHANNEL_ERR_REJECTED, iA = We.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL, jA = We.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN, Zq = Rb.LOGIN_ERR_UNKNOWN, jg = Rb.LOGIN_ERR_REJECTED, Jh = Rb.LOGIN_ERR_INVALID_ARGUMENT, $q = Rb.LOGIN_ERR_INVALID_APP_ID, ar = Rb.LOGIN_ERR_INVALID_TOKEN, Kh = Rb.LOGIN_ERR_TOKEN_EXPIRED;
      Rb.LOGIN_ERR_NOT_AUTHORIZED;
      var kA = Rb.LOGIN_ERR_ALREADY_LOGIN, lA = Rb.LOGIN_ERR_TIMEOUT, mA = Rb.LOGIN_ERR_TOO_OFTEN, br = Xk.LOGOUT_ERR_USER_NOT_LOGGED_IN, cr = Qc.PEER_MESSAGE_ERR_FAILURE, Zk = Qc.PEER_MESSAGE_ERR_TIMEOUT, dr = Qc.PEER_MESSAGE_ERR_TOO_OFTEN, $k = Qc.PEER_MESSAGE_ERR_INVALID_USERID, ve = Qc.PEER_MESSAGE_ERR_INVALID_MESSAGE, al = Qc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN, nA = Qc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE, er = Wd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;
      Wd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;
      var oA = Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;
      Wd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;
      var pA = Wd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN, qA = Rc.RENEW_TOKEN_ERR_FAILURE, rA = Rc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;
      Rc.RENEW_TOKEN_ERR_REJECTED, Rc.RENEW_TOKEN_ERR_TOO_OFTEN;
      var sA = Rc.RENEW_TOKEN_ERR_TOKEN_EXPIRED, tA = Rc.RENEW_TOKEN_ERR_INVALID_TOKEN, uA = Rc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN, fr = Tc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE, kg = Tc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;
      Tc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;
      var vA = Tc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;
      Tc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;
      var gr = Tc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW, bl = Tc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;
      Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE, Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT, Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN, Xe.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;
      var lg = Uc.UPLOAD_MEDIA_ERR_FAILURE, wf = Uc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT, Lh = Uc.UPLOAD_MEDIA_ERR_TIMEOUT, wA = Uc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW, xA = Uc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED, hr = Uc.UPLOAD_MEDIA_ERR_INTERRUPTED, yA = Uc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN, mg = Vc.DOWNLOAD_MEDIA_ERR_FAILURE, cl = Vc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT, zA = Vc.DOWNLOAD_MEDIA_ERR_TIMEOUT, AA = Vc.DOWNLOAD_MEDIA_ERR_NOT_EXIST, BA = Vc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED, ir = Vc.DOWNLOAD_MEDIA_ERR_INTERRUPTED, CA = Vc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN, DA = function(e, t2) {
        var n2;
        return Hk(e, function(e2, r, i) {
          return !(n2 = t2(e2, r, i));
        }), !!n2;
      }, Mh = function(e, t2, n2) {
        if (!lb(n2)) return false;
        var r = X(t2);
        return !!("number" == r ? Ed(n2) && wk(t2, n2.length) : "string" == r && t2 in n2) && $f(n2[t2], e);
      }, dl = function(e, t2, n2) {
        var r = Va(e) ? tq : DA;
        return n2 && Mh(e, t2, n2) && (t2 = void 0), r(e, Te(t2));
      }, EA = function(e, t2) {
        var n2 = -1, r = Ed(e) ? Array(e.length) : [];
        return Hk(e, function(e2, i, o) {
          r[++n2] = t2(e2, i, o);
        }), r;
      }, FA = function(e, t2) {
        var n2 = e.length;
        for (e.sort(t2); n2--; ) e[n2] = e[n2].value;
        return e;
      }, GA = function(e, t2, n2) {
        t2 = t2.length ? he(t2, function(e2) {
          return Va(e2) ? function(t3) {
            return Ch(t3, 1 === e2.length ? e2[0] : e2);
          } : e2;
        }) : [Dh];
        var r = -1;
        return t2 = he(t2, zh(Te)), e = EA(e, function(e2, n3, i) {
          return { criteria: he(t2, function(t3) {
            return t3(e2);
          }), index: ++r, value: e2 };
        }), FA(e, function(e2, t3) {
          e: {
            for (var r2 = -1, i = e2.criteria, o = t3.criteria, a2 = i.length, s = n2.length; ++r2 < a2; ) {
              t: {
                var u2 = i[r2], c2 = o[r2];
                if (u2 !== c2) {
                  var l = void 0 !== u2, f = null === u2, h = u2 == u2, p = ie(u2), d = void 0 !== c2, v2 = null === c2, b = c2 == c2, g = ie(c2);
                  if (!v2 && !g && !p && u2 > c2 || p && d && b && !v2 && !g || f && d && b || !l && b || !h) {
                    u2 = 1;
                    break t;
                  }
                  if (!f && !p && !g && u2 < c2 || g && l && h && !f && !p || v2 && l && h || !d && h || !b) {
                    u2 = -1;
                    break t;
                  }
                }
                u2 = 0;
              }
              if (u2) {
                e2 = r2 >= s ? u2 : u2 * ("desc" == n2[r2] ? -1 : 1);
                break e;
              }
            }
            e2 = e2.index - t3.index;
          }
          return e2;
        });
      }, jr = function(e, t2) {
        return rq(qq(e, t2, Dh), e + "");
      }, kr = jr(function(e, t2) {
        if (null == e) return [];
        var n2 = t2.length;
        return 1 < n2 && Mh(e, t2[0], t2[1]) ? t2 = [] : 2 < n2 && Mh(t2[0], t2[1], t2[2]) && (t2 = [t2[0]]), GA(e, $h(t2, 1), []);
      }), lr = function(e) {
        if (e.__esModule) return e;
        var t2 = Object.defineProperty({}, "__esModule", { value: true });
        return Object.keys(e).forEach(function(n2) {
          var r = Object.getOwnPropertyDescriptor(e, n2);
          Object.defineProperty(t2, n2, r.get ? r : { enumerable: true, get: function() {
            return e[n2];
          } });
        }), t2;
      }(Dz), mr = $a(function(e, t2) {
        Object.defineProperty(t2, "__esModule", { value: true });
        var n2 = [], r = function(e2, t3) {
          return new WebSocket(e2, t3);
        };
        t2.normalClosureMessage = "Normal closure", t2.default = function(e2, i) {
          var o = (i = void 0 === i ? { protocols: n2, makeWebSocket: r } : i).protocols, a2 = void 0 === o ? n2 : o, s = void 0 === (i = i.makeWebSocket) ? r : i;
          return new lr.Observable(function(n3) {
            var r2, i2 = new lr.Subject(), o2 = s(e2, a2), u2 = false, c2 = false, l = function(e3) {
              if (r2) throw u2 = true, e3 = Error("Web socket message factory function called more than once"), n3.error(e3), e3;
              return r2 = e3.subscribe(function(e4) {
                o2.send(e4);
              }), i2;
            };
            return o2.onopen = function() {
              c2 ? (u2 = true, o2.close()) : n3.next(l);
            }, o2.onmessage = function(e3) {
              i2.next(e3.data);
            }, o2.onerror = function(e3) {
              u2 = true, n3.error(Error(e3.message));
            }, o2.onclose = function(e3) {
              u2 || (u2 = true, c2 ? (n3.complete(), i2.complete()) : n3.error(Error(1e3 === e3.code ? t2.normalClosureMessage : e3.reason)));
            }, function() {
              c2 = true, r2 && r2.unsubscribe(), u2 || (u2 = true, o2.close());
            };
          });
        };
      });
      !function(e) {
        e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") && e.default;
      }(mr);
      var pi = function(e, t2, n2) {
        (void 0 === n2 || $f(e[t2], n2)) && (void 0 !== n2 || t2 in e) || bg(e, t2, n2);
      }, oi = function(e, t2) {
        if (("constructor" !== t2 || "function" != typeof e[t2]) && "__proto__" != t2) return e[t2];
      }, HA = function(e) {
        return jr(function(t2, n2) {
          var r = -1, i = n2.length, o = 1 < i ? n2[i - 1] : void 0, a2 = 2 < i ? n2[2] : void 0;
          for (o = 3 < e.length && "function" == typeof o ? (i--, o) : void 0, a2 && Mh(n2[0], n2[1], a2) && (o = 3 > i ? void 0 : o, i = 1), t2 = Object(t2); ++r < i; ) (a2 = n2[r]) && e(t2, a2, r, o);
          return t2;
        });
      }(function(e, t2, n2, r) {
        tm(e, t2, n2, r);
      }), IA = Math.floor, JA = Math.random, nr = function(e, t2) {
        return e + IA(JA() * (t2 - e + 1));
      }, or = function(e) {
        var t2 = e.length;
        return t2 ? e[nr(0, t2 - 1)] : void 0;
      }, KA = function(e, t2) {
        return he(t2, function(t3) {
          return e[t3];
        });
      }, Ni = function(e) {
        return null == e ? [] : KA(e, Ad(e));
      }, LA = function(e) {
        return or(Ni(e));
      }, bn = function(e) {
        return (Va(e) ? or : LA)(e);
      }, xm = [], ym = function(e, t2) {
        return new WebSocket(e, t2);
      }, MA = Math.floor;
      N({ target: "Number", stat: true }, { isInteger: function(e) {
        return !ha(e) && isFinite(e) && MA(e) === e;
      } }), Oo("from", Ej, Dj);
      var NA = function(e, t2) {
        for (var n2 = Array(arguments.length - 1), r = 0, i = 2, o = true; i < arguments.length; ) n2[r++] = arguments[i++];
        return new Promise(function(i2, a2) {
          n2[r] = function(e2) {
            if (o) if (o = false, e2) a2(e2);
            else {
              for (var t3 = Array(arguments.length - 1), n3 = 0; n3 < t3.length; ) t3[n3++] = arguments[n3];
              i2.apply(null, t3);
            }
          };
          try {
            e.apply(t2 || null, n2);
          } catch (e2) {
            o && (o = false, a2(e2));
          }
        });
      }, OA = $a(function(e, t2) {
        t2.length = function(e2) {
          var t3 = e2.length;
          if (!t3) return 0;
          for (var n3 = 0; 1 < --t3 % 4 && "=" === e2.charAt(t3); ) ++n3;
          return Math.ceil(3 * e2.length) / 4 - n3;
        };
        var n2 = Array(64), r = Array(123);
        for (e = 0; 64 > e; ) r[n2[e] = 26 > e ? e + 65 : 52 > e ? e + 71 : 62 > e ? e - 4 : e - 59 | 43] = e++;
        t2.encode = function(e2, t3, r2) {
          for (var i, o = null, a2 = [], s = 0, u2 = 0; t3 < r2; ) {
            var c2 = e2[t3++];
            switch (u2) {
              case 0:
                a2[s++] = n2[c2 >> 2], i = (3 & c2) << 4, u2 = 1;
                break;
              case 1:
                a2[s++] = n2[i | c2 >> 4], i = (15 & c2) << 2, u2 = 2;
                break;
              case 2:
                a2[s++] = n2[i | c2 >> 6], a2[s++] = n2[63 & c2], u2 = 0;
            }
            8191 < s && ((o || (o = [])).push(String.fromCharCode.apply(String, a2)), s = 0);
          }
          return u2 && (a2[s++] = n2[i], a2[s++] = 61, 1 === u2 && (a2[s++] = 61)), o ? (s && o.push(String.fromCharCode.apply(String, a2.slice(0, s))), o.join("")) : String.fromCharCode.apply(String, a2.slice(0, s));
        }, t2.decode = function(e2, t3, n3) {
          for (var i, o = n3, a2 = 0, s = 0; s < e2.length; ) {
            var u2 = e2.charCodeAt(s++);
            if (61 === u2 && 1 < a2) break;
            if (void 0 === (u2 = r[u2])) throw Error("invalid encoding");
            switch (a2) {
              case 0:
                i = u2, a2 = 1;
                break;
              case 1:
                t3[n3++] = i << 2 | (48 & u2) >> 4, i = u2, a2 = 2;
                break;
              case 2:
                t3[n3++] = (15 & i) << 4 | (60 & u2) >> 2, i = u2, a2 = 3;
                break;
              case 3:
                t3[n3++] = (3 & i) << 6 | u2, a2 = 0;
            }
          }
          if (1 === a2) throw Error("invalid encoding");
          return n3 - o;
        }, t2.test = function(e2) {
          return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e2);
        };
      });
      yg.prototype.on = function(e, t2, n2) {
        return (this._listeners[e] || (this._listeners[e] = [])).push({ fn: t2, ctx: n2 || this }), this;
      }, yg.prototype.off = function(e, t2) {
        if (void 0 === e) this._listeners = {};
        else if (void 0 === t2) this._listeners[e] = [];
        else {
          e = this._listeners[e];
          for (var n2 = 0; n2 < e.length; ) e[n2].fn === t2 ? e.splice(n2, 1) : ++n2;
        }
        return this;
      }, yg.prototype.emit = function(e) {
        var t2 = this._listeners[e];
        if (t2) {
          for (var n2 = [], r = 1; r < arguments.length; ) n2.push(arguments[r++]);
          for (r = 0; r < t2.length; ) t2[r].fn.apply(t2[r++].ctx, n2);
        }
        return this;
      };
      var PA = zm(zm), QA = function(c) {
        try {
          var a = eval("quire".replace(/^/, "re"))(c);
          if (a && (a.length || Object.keys(a).length)) return a;
        } catch (e) {
        }
        return null;
      }, RA = $a(function(e, t2) {
        t2.length = function(e2) {
          for (var t3, n2 = 0, r = 0; r < e2.length; ++r) 128 > (t3 = e2.charCodeAt(r)) ? n2 += 1 : 2048 > t3 ? n2 += 2 : 55296 == (64512 & t3) && 56320 == (64512 & e2.charCodeAt(r + 1)) ? (++r, n2 += 4) : n2 += 3;
          return n2;
        }, t2.read = function(e2, t3, n2) {
          if (1 > n2 - t3) return "";
          for (var r, i = null, o = [], a2 = 0; t3 < n2; ) 128 > (r = e2[t3++]) ? o[a2++] = r : 191 < r && 224 > r ? o[a2++] = (31 & r) << 6 | 63 & e2[t3++] : 239 < r && 365 > r ? (r = ((7 & r) << 18 | (63 & e2[t3++]) << 12 | (63 & e2[t3++]) << 6 | 63 & e2[t3++]) - 65536, o[a2++] = 55296 + (r >> 10), o[a2++] = 56320 + (1023 & r)) : o[a2++] = (15 & r) << 12 | (63 & e2[t3++]) << 6 | 63 & e2[t3++], 8191 < a2 && ((i || (i = [])).push(String.fromCharCode.apply(String, o)), a2 = 0);
          return i ? (a2 && i.push(String.fromCharCode.apply(String, o.slice(0, a2))), i.join("")) : String.fromCharCode.apply(String, o.slice(0, a2));
        }, t2.write = function(e2, t3, n2) {
          for (var r, i, o = n2, a2 = 0; a2 < e2.length; ++a2) 128 > (r = e2.charCodeAt(a2)) ? t3[n2++] = r : (2048 > r ? t3[n2++] = r >> 6 | 192 : (55296 == (64512 & r) && 56320 == (64512 & (i = e2.charCodeAt(a2 + 1))) ? (r = 65536 + ((1023 & r) << 10) + (1023 & i), ++a2, t3[n2++] = r >> 18 | 240, t3[n2++] = r >> 12 & 63 | 128) : t3[n2++] = r >> 12 | 224, t3[n2++] = r >> 6 & 63 | 128), t3[n2++] = 63 & r | 128);
          return n2 - o;
        };
      }), SA = function(e, t2, n2) {
        var r = n2 || 8192, i = r >>> 1, o = null, a2 = r;
        return function(n3) {
          return 1 > n3 || n3 > i ? e(n3) : (a2 + n3 > r && (o = e(r), a2 = 0), n3 = t2.call(o, a2, a2 += n3), 7 & a2 && (a2 = 1 + (7 | a2)), n3);
        };
      }, Xd = Wa.zero = new Wa(0, 0);
      Xd.toNumber = function() {
        return 0;
      }, Xd.zzEncode = Xd.zzDecode = function() {
        return this;
      }, Xd.length = function() {
        return 1;
      };
      var TA = Wa.zeroHash = "\0\0\0\0\0\0\0\0";
      Wa.fromNumber = function(e) {
        if (0 === e) return Xd;
        var t2 = 0 > e;
        t2 && (e = -e);
        var n2 = e >>> 0;
        return e = (e - n2) / 4294967296 >>> 0, t2 && (e = ~e >>> 0, n2 = ~n2 >>> 0, 4294967295 < ++n2 && (n2 = 0, 4294967295 < ++e && (e = 0))), new Wa(n2, e);
      }, Wa.from = function(e) {
        if ("number" == typeof e) return Wa.fromNumber(e);
        if (V.isString(e)) {
          if (!V.Long) return Wa.fromNumber(parseInt(e, 10));
          e = V.Long.fromString(e);
        }
        return e.low || e.high ? new Wa(e.low >>> 0, e.high >>> 0) : Xd;
      }, Wa.prototype.toNumber = function(e) {
        if (!e && this.hi >>> 31) {
          e = 1 + ~this.lo >>> 0;
          var t2 = ~this.hi >>> 0;
          return e || (t2 = t2 + 1 >>> 0), -(e + 4294967296 * t2);
        }
        return this.lo + 4294967296 * this.hi;
      }, Wa.prototype.toLong = function(e) {
        return V.Long ? new V.Long(0 | this.lo, 0 | this.hi, !!e) : { low: 0 | this.lo, high: 0 | this.hi, unsigned: !!e };
      };
      var td = String.prototype.charCodeAt;
      Wa.fromHash = function(e) {
        return e === TA ? Xd : new Wa((td.call(e, 0) | td.call(e, 1) << 8 | td.call(e, 2) << 16 | td.call(e, 3) << 24) >>> 0, (td.call(e, 4) | td.call(e, 5) << 8 | td.call(e, 6) << 16 | td.call(e, 7) << 24) >>> 0);
      }, Wa.prototype.toHash = function() {
        return String.fromCharCode(255 & this.lo, this.lo >>> 8 & 255, this.lo >>> 16 & 255, this.lo >>> 24, 255 & this.hi, this.hi >>> 8 & 255, this.hi >>> 16 & 255, this.hi >>> 24);
      }, Wa.prototype.zzEncode = function() {
        var e = this.hi >> 31;
        return this.hi = ((this.hi << 1 | this.lo >>> 31) ^ e) >>> 0, this.lo = (this.lo << 1 ^ e) >>> 0, this;
      }, Wa.prototype.zzDecode = function() {
        var e = -(1 & this.lo);
        return this.lo = ((this.lo >>> 1 | this.hi << 31) ^ e) >>> 0, this.hi = (this.hi >>> 1 ^ e) >>> 0, this;
      }, Wa.prototype.length = function() {
        var e = this.lo, t2 = (this.lo >>> 28 | this.hi << 4) >>> 0, n2 = this.hi >>> 24;
        return 0 === n2 ? 0 === t2 ? 16384 > e ? 128 > e ? 1 : 2 : 2097152 > e ? 3 : 4 : 16384 > t2 ? 128 > t2 ? 5 : 6 : 2097152 > t2 ? 7 : 8 : 128 > n2 ? 9 : 10;
      };
      var V = $a(function(e, t2) {
        function n2(e2, t3, n3) {
          for (var r2 = Object.keys(t3), i = 0; i < r2.length; ++i) void 0 !== e2[r2[i]] && n3 || (e2[r2[i]] = t3[r2[i]]);
          return e2;
        }
        function r(e2) {
          function t3(e3, r2) {
            if (!(this instanceof t3)) return new t3(e3, r2);
            Object.defineProperty(this, "message", { get: function() {
              return e3;
            } }), Error.captureStackTrace ? Error.captureStackTrace(this, t3) : Object.defineProperty(this, "stack", { value: Error().stack || "" }), r2 && n2(this, r2);
          }
          return (t3.prototype = Object.create(Error.prototype)).constructor = t3, Object.defineProperty(t3.prototype, "name", { get: function() {
            return e2;
          } }), t3.prototype.toString = function() {
            return this.name + ": " + this.message;
          }, t3;
        }
        t2.asPromise = NA, t2.base64 = OA, t2.EventEmitter = yg, t2.float = PA, t2.inquire = QA, t2.utf8 = RA, t2.pool = SA, t2.LongBits = Wa, t2.isNode = !!(void 0 !== Ya && Ya && Ya.process && Ya.process.versions && Ya.process.versions.node), t2.global = t2.isNode && Ya || "undefined" != typeof window && window || "undefined" != typeof self && self || Ya, t2.emptyArray = Object.freeze ? Object.freeze([]) : [], t2.emptyObject = Object.freeze ? Object.freeze({}) : {}, t2.isInteger = Number.isInteger || function(e2) {
          return "number" == typeof e2 && isFinite(e2) && Math.floor(e2) === e2;
        }, t2.isString = function(e2) {
          return "string" == typeof e2 || e2 instanceof String;
        }, t2.isObject = function(e2) {
          return e2 && "object" === X(e2);
        }, t2.isset = t2.isSet = function(e2, t3) {
          var n3 = e2[t3];
          return !(null == n3 || !e2.hasOwnProperty(t3)) && ("object" !== X(n3) || 0 < (Array.isArray(n3) ? n3.length : Object.keys(n3).length));
        }, t2.Buffer = function() {
          try {
            var e2 = t2.inquire("buffer").Buffer;
            return e2.prototype.utf8Write ? e2 : null;
          } catch (e3) {
            return null;
          }
        }(), t2._Buffer_from = null, t2._Buffer_allocUnsafe = null, t2.newBuffer = function(e2) {
          return "number" == typeof e2 ? t2.Buffer ? t2._Buffer_allocUnsafe(e2) : new t2.Array(e2) : t2.Buffer ? t2._Buffer_from(e2) : "undefined" == typeof Uint8Array ? e2 : new Uint8Array(e2);
        }, t2.Array = "undefined" != typeof Uint8Array ? Uint8Array : Array, t2.Long = t2.global.dcodeIO && t2.global.dcodeIO.Long || t2.global.Long || t2.inquire("long"), t2.key2Re = /^true|false|0|1$/, t2.key32Re = /^-?(?:0|[1-9][0-9]*)$/, t2.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/, t2.longToHash = function(e2) {
          return e2 ? t2.LongBits.from(e2).toHash() : t2.LongBits.zeroHash;
        }, t2.longFromHash = function(e2, n3) {
          return e2 = t2.LongBits.fromHash(e2), t2.Long ? t2.Long.fromBits(e2.lo, e2.hi, n3) : e2.toNumber(!!n3);
        }, t2.merge = n2, t2.lcFirst = function(e2) {
          return e2.charAt(0).toLowerCase() + e2.substring(1);
        }, t2.newError = r, t2.ProtocolError = r("ProtocolError"), t2.oneOfGetter = function(e2) {
          for (var t3 = {}, n3 = 0; n3 < e2.length; ++n3) t3[e2[n3]] = 1;
          return function() {
            for (var e3 = Object.keys(this), n4 = e3.length - 1; -1 < n4; --n4) if (1 === t3[e3[n4]] && void 0 !== this[e3[n4]] && null !== this[e3[n4]]) return e3[n4];
          };
        }, t2.oneOfSetter = function(e2) {
          return function(t3) {
            for (var n3 = 0; n3 < e2.length; ++n3) e2[n3] !== t3 && delete this[e2[n3]];
          };
        }, t2.toJSONOptions = { longs: String, enums: String, bytes: String, json: true }, t2._configure = function() {
          var e2 = t2.Buffer;
          e2 ? (t2._Buffer_from = e2.from !== Uint8Array.from && e2.from || function(t3, n3) {
            return new e2(t3, n3);
          }, t2._Buffer_allocUnsafe = e2.allocUnsafe || function(t3) {
            return new e2(t3);
          }) : t2._Buffer_from = t2._Buffer_allocUnsafe = null;
        };
      }), xi = ja, el, Nh = V.LongBits, pr = V.base64, qr = V.utf8, rr = function() {
        return V.Buffer ? function() {
          return (ja.create = function() {
            return new el();
          })();
        } : function() {
          return new ja();
        };
      };
      ja.create = rr(), ja.alloc = function(e) {
        return new V.Array(e);
      }, V.Array !== Array && (ja.alloc = V.pool(ja.alloc, V.Array.prototype.subarray)), ja.prototype._push = function(e, t2, n2) {
        return this.tail = this.tail.next = new sf(e, t2, n2), this.len += t2, this;
      }, ui.prototype = Object.create(sf.prototype), ui.prototype.fn = function(e, t2, n2) {
        for (; 127 < e; ) t2[n2++] = 127 & e | 128, e >>>= 7;
        t2[n2] = e;
      }, ja.prototype.uint32 = function(e) {
        return this.len += (this.tail = this.tail.next = new ui(128 > (e >>>= 0) ? 1 : 16384 > e ? 2 : 2097152 > e ? 3 : 268435456 > e ? 4 : 5, e)).len, this;
      }, ja.prototype.int32 = function(e) {
        return 0 > e ? this._push(vi, 10, Nh.fromNumber(e)) : this.uint32(e);
      }, ja.prototype.sint32 = function(e) {
        return this.uint32((e << 1 ^ e >> 31) >>> 0);
      }, ja.prototype.uint64 = function(e) {
        return e = Nh.from(e), this._push(vi, e.length(), e);
      }, ja.prototype.int64 = ja.prototype.uint64, ja.prototype.sint64 = function(e) {
        return e = Nh.from(e).zzEncode(), this._push(vi, e.length(), e);
      }, ja.prototype.bool = function(e) {
        return this._push(ti, 1, e ? 1 : 0);
      }, ja.prototype.fixed32 = function(e) {
        return this._push(wi, 4, e >>> 0);
      }, ja.prototype.sfixed32 = ja.prototype.fixed32, ja.prototype.fixed64 = function(e) {
        return e = Nh.from(e), this._push(wi, 4, e.lo)._push(wi, 4, e.hi);
      }, ja.prototype.sfixed64 = ja.prototype.fixed64, ja.prototype.float = function(e) {
        return this._push(V.float.writeFloatLE, 4, e);
      }, ja.prototype.double = function(e) {
        return this._push(V.float.writeDoubleLE, 8, e);
      };
      var UA = V.Array.prototype.set ? function(e, t2, n2) {
        t2.set(e, n2);
      } : function(e, t2, n2) {
        for (var r = 0; r < e.length; ++r) t2[n2 + r] = e[r];
      };
      ja.prototype.bytes = function(e) {
        var t2 = e.length >>> 0;
        if (!t2) return this._push(ti, 1, 0);
        if (V.isString(e)) {
          var n2 = ja.alloc(t2 = pr.length(e));
          pr.decode(e, n2, 0), e = n2;
        }
        return this.uint32(t2)._push(UA, t2, e);
      }, ja.prototype.string = function(e) {
        var t2 = qr.length(e);
        return t2 ? this.uint32(t2)._push(qr.write, t2, e) : this._push(ti, 1, 0);
      }, ja.prototype.fork = function() {
        return this.states = new Tt(this), this.head = this.tail = new sf(si, 0, 0), this.len = 0, this;
      }, ja.prototype.reset = function() {
        return this.states ? (this.head = this.states.head, this.tail = this.states.tail, this.len = this.states.len, this.states = this.states.next) : (this.head = this.tail = new sf(si, 0, 0), this.len = 0), this;
      }, ja.prototype.ldelim = function() {
        var e = this.head, t2 = this.tail, n2 = this.len;
        return this.reset().uint32(n2), n2 && (this.tail.next = e.next, this.tail = t2, this.len += n2), this;
      }, ja.prototype.finish = function() {
        for (var e = this.head.next, t2 = this.constructor.alloc(this.len), n2 = 0; e; ) e.fn(e.val, t2, n2), n2 += e.len, e = e.next;
        return t2;
      }, ja._configure = function(e) {
        el = e, ja.create = rr(), el._configure();
      }, (jc.prototype = Object.create(xi.prototype)).constructor = jc, jc._configure = function() {
        jc.alloc = V._Buffer_allocUnsafe, jc.writeBytesBuffer = V.Buffer && V.Buffer.prototype instanceof Uint8Array && "set" === V.Buffer.prototype.set.name ? function(e, t2, n2) {
          t2.set(e, n2);
        } : function(e, t2, n2) {
          if (e.copy) e.copy(t2, n2, 0, e.length);
          else for (var r = 0; r < e.length; ) t2[n2++] = e[r++];
        };
      }, jc.prototype.bytes = function(e) {
        V.isString(e) && (e = V._Buffer_from(e, "base64"));
        var t2 = e.length >>> 0;
        return this.uint32(t2), t2 && this._push(jc.writeBytesBuffer, t2, e), this;
      }, jc.prototype.string = function(e) {
        var t2 = V.Buffer.byteLength(e);
        return this.uint32(t2), t2 && this._push(Ut, t2, e), this;
      }, jc._configure();
      var zi = La, fl, Em = V.LongBits, VA = V.utf8, sr = "undefined" != typeof Uint8Array ? function(e) {
        if (e instanceof Uint8Array || Array.isArray(e)) return new La(e);
        throw Error("illegal buffer");
      } : function(e) {
        if (Array.isArray(e)) return new La(e);
        throw Error("illegal buffer");
      }, tr = function() {
        return V.Buffer ? function(e) {
          return (La.create = function(e2) {
            return V.Buffer.isBuffer(e2) ? new fl(e2) : sr(e2);
          })(e);
        } : sr;
      };
      La.create = tr(), La.prototype._slice = V.Array.prototype.subarray || V.Array.prototype.slice, La.prototype.uint32 = /* @__PURE__ */ function() {
        var e = 4294967295;
        return function() {
          if (e = (127 & this.buf[this.pos]) >>> 0, 128 > this.buf[this.pos++]) return e;
          if (e = (e | (127 & this.buf[this.pos]) << 7) >>> 0, 128 > this.buf[this.pos++]) return e;
          if (e = (e | (127 & this.buf[this.pos]) << 14) >>> 0, 128 > this.buf[this.pos++]) return e;
          if (e = (e | (127 & this.buf[this.pos]) << 21) >>> 0, 128 > this.buf[this.pos++]) return e;
          if (e = (e | (15 & this.buf[this.pos]) << 28) >>> 0, 128 > this.buf[this.pos++]) return e;
          if ((this.pos += 5) > this.len) throw this.pos = this.len, Yb(this, 10);
          return e;
        };
      }(), La.prototype.int32 = function() {
        return 0 | this.uint32();
      }, La.prototype.sint32 = function() {
        var e = this.uint32();
        return e >>> 1 ^ -(1 & e) | 0;
      }, La.prototype.bool = function() {
        return 0 !== this.uint32();
      }, La.prototype.fixed32 = function() {
        if (this.pos + 4 > this.len) throw Yb(this, 4);
        return zg(this.buf, this.pos += 4);
      }, La.prototype.sfixed32 = function() {
        if (this.pos + 4 > this.len) throw Yb(this, 4);
        return 0 | zg(this.buf, this.pos += 4);
      }, La.prototype.float = function() {
        if (this.pos + 4 > this.len) throw Yb(this, 4);
        var e = V.float.readFloatLE(this.buf, this.pos);
        return this.pos += 4, e;
      }, La.prototype.double = function() {
        if (this.pos + 8 > this.len) throw Yb(this, 4);
        var e = V.float.readDoubleLE(this.buf, this.pos);
        return this.pos += 8, e;
      }, La.prototype.bytes = function() {
        var e = this.uint32(), t2 = this.pos, n2 = this.pos + e;
        if (n2 > this.len) throw Yb(this, e);
        return this.pos += e, Array.isArray(this.buf) ? this.buf.slice(t2, n2) : t2 === n2 ? new this.buf.constructor(0) : this._slice.call(this.buf, t2, n2);
      }, La.prototype.string = function() {
        var e = this.bytes();
        return VA.read(e, 0, e.length);
      }, La.prototype.skip = function(e) {
        if ("number" == typeof e) {
          if (this.pos + e > this.len) throw Yb(this, e);
          this.pos += e;
        } else do {
          if (this.pos >= this.len) throw Yb(this);
        } while (128 & this.buf[this.pos++]);
        return this;
      }, La.prototype.skipType = function(e) {
        switch (e) {
          case 0:
            this.skip();
            break;
          case 1:
            this.skip(8);
            break;
          case 2:
            this.skip(this.uint32());
            break;
          case 3:
            for (; 4 != (e = 7 & this.uint32()); ) this.skipType(e);
            break;
          case 5:
            this.skip(4);
            break;
          default:
            throw Error("invalid wire type " + e + " at offset " + this.pos);
        }
        return this;
      }, La._configure = function(e) {
        fl = e, La.create = tr(), fl._configure();
        var t2 = V.Long ? "toLong" : "toNumber";
        V.merge(La.prototype, { int64: function() {
          return yi.call(this)[t2](false);
        }, uint64: function() {
          return yi.call(this)[t2](true);
        }, sint64: function() {
          return yi.call(this).zzDecode()[t2](false);
        }, fixed64: function() {
          return Fm.call(this)[t2](true);
        }, sfixed64: function() {
          return Fm.call(this)[t2](false);
        } });
      }, (Fd.prototype = Object.create(zi.prototype)).constructor = Fd, Fd._configure = function() {
        V.Buffer && (Fd.prototype._slice = V.Buffer.prototype.slice);
      }, Fd.prototype.string = function() {
        var e = this.uint32();
        return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + e, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + e, this.len));
      }, Fd._configure(), (tf.prototype = Object.create(V.EventEmitter.prototype)).constructor = tf, tf.prototype.rpcCall = function e(t2, n2, r, i, o) {
        if (!i) throw TypeError("request must be specified");
        var a2 = this;
        if (!o) return V.asPromise(e, a2, t2, n2, r, i);
        if (a2.rpcImpl) try {
          return a2.rpcImpl(t2, n2[a2.requestDelimited ? "encodeDelimited" : "encode"](i).finish(), function(e2, n3) {
            if (e2) return a2.emit("error", e2, t2), o(e2);
            if (null !== n3) {
              if (!(n3 instanceof r)) try {
                n3 = r[a2.responseDelimited ? "decodeDelimited" : "decode"](n3);
              } catch (e3) {
                return a2.emit("error", e3, t2), o(e3);
              }
              return a2.emit("data", n3, t2), o(null, n3);
            }
            a2.end(true);
          });
        } catch (e2) {
          a2.emit("error", e2, t2), setTimeout(function() {
            o(e2);
          }, 0);
        }
        else setTimeout(function() {
          o(Error("already ended"));
        }, 0);
      }, tf.prototype.end = function(e) {
        return this.rpcImpl && (e || this.rpcImpl(null, null, null), this.rpcImpl = null, this.emit("end").off()), this;
      };
      var WA = $a(function(e, t2) {
        t2.Service = tf;
      }), XA = {}, fc = $a(function(e, t2) {
        function n2() {
          r.util._configure(), r.Writer._configure(r.BufferWriter), r.Reader._configure(r.BufferReader);
        }
        var r = t2;
        r.build = "minimal", r.Writer = xi, r.BufferWriter = jc, r.Reader = zi, r.BufferReader = Fd, r.util = V, r.rpc = WA, r.roots = XA, r.configure = n2, n2();
      });
      fc.util.Long = U, fc.configure();
      var u = fc.Reader, L = fc.Writer, q = fc.util, t = fc.roots.default || (fc.roots.default = {}), YA = t.URI = function() {
        var e = {}, t2 = Object.create(e);
        return t2[e[0] = "Unknown"] = 0, t2[e[1] = "PingUri"] = 1, t2[e[2] = "PongUri"] = 2, t2[e[11] = "UserJoinUri"] = 11, t2[e[12] = "UserRespUri"] = 12, t2[e[21] = "UserQuitUri"] = 21, t2[e[22] = "UserDropUri"] = 22, t2[e[31] = "GroupEnterUri"] = 31, t2[e[32] = "GroupLeaveUri"] = 32, t2[e[33] = "GroupReplyUri"] = 33, t2[e[36] = "GroupEnterNoticeUri"] = 36, t2[e[37] = "GroupLeaveNoticeUri"] = 37, t2[e[38] = "GroupEventNoticeUri"] = 38, t2[e[39] = "GroupCountNoticeUri"] = 39, t2[e[41] = "UserStatusListUri"] = 41, t2[e[42] = "UserStatusResultUri"] = 42, t2[e[51] = "GroupStatusListUri"] = 51, t2[e[52] = "GroupStatusResultUri"] = 52, t2[e[55] = "GroupAllUsersListUri"] = 55, t2[e[56] = "GroupAllUsersResultUri"] = 56, t2[e[100] = "MessageUri"] = 100, t2[e[101] = "AckUri"] = 101, t2[e[115] = "FileUploadIndexGetUri"] = 115, t2[e[116] = "FileUploadIndexRetUri"] = 116, t2[e[117] = "FileUploadIndexSetUri"] = 117, t2[e[118] = "FileUploadIndexFinUri"] = 118, t2[e[119] = "FileUploadIndexErrUri"] = 119, t2[e[125] = "FileDownloadIndexGetUri"] = 125, t2[e[126] = "FileDownloadIndexRetUri"] = 126, t2[e[127] = "FileDownloadIndexErrUri"] = 127, t2[e[201] = "UserJoinNoticeUri"] = 201, t2[e[202] = "UserQuitNoticeUri"] = 202, t2[e[203] = "UserWaitNoticeUri"] = 203, t2[e[301] = "UserAttributeGetUri"] = 301, t2[e[302] = "UserAttributeRetUri"] = 302, t2[e[303] = "UserAttributeSetUri"] = 303, t2[e[304] = "UserAttributeModUri"] = 304, t2[e[305] = "UserAttributeDelUri"] = 305, t2[e[307] = "UserAttributeRspUri"] = 307, t2[e[308] = "UserAttributeErrUri"] = 308, t2[e[311] = "UserAttributeKeysGetUri"] = 311, t2[e[312] = "UserAttributeKeysRetUri"] = 312, t2[e[351] = "GroupAttributeGetUri"] = 351, t2[e[352] = "GroupAttributeRetUri"] = 352, t2[e[353] = "GroupAttributeSetUri"] = 353, t2[e[354] = "GroupAttributeModUri"] = 354, t2[e[355] = "GroupAttributeDelUri"] = 355, t2[e[356] = "GroupAttributeAltUri"] = 356, t2[e[357] = "GroupAttributeRspUri"] = 357, t2[e[358] = "GroupAttributeErrUri"] = 358, t2[e[361] = "GroupAttributeKeysGetUri"] = 361, t2[e[362] = "GroupAttributeKeysRetUri"] = 362, t2[e[401] = "SubscribeUserStatusUri"] = 401, t2[e[402] = "UnsubscribeUserStatusUri"] = 402, t2[e[499] = "SubscribeResponseUri"] = 499, t2;
      }(), Oh = t.Wrapper = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.uri = 0, e.prototype.data = q.newBuffer([]), e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.uri && Object.hasOwnProperty.call(e2, "uri") && t2.uint32(8).int32(e2.uri), null != e2.data && Object.hasOwnProperty.call(e2, "data") && t2.uint32(18).bytes(e2.data), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.Wrapper(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.uri = e2.int32();
                break;
              case 2:
                r.data = e2.bytes();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), ZA = t.Ping = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.ms = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.ms && Object.hasOwnProperty.call(e2, "ms") && t2.uint32(16).uint64(e2.ms), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.Ping(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.ms = e2.uint64();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), $A = t.Pong = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.ms = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.ms && Object.hasOwnProperty.call(e2, "ms") && t2.uint32(16).uint64(e2.ms), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.Pong(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.ms = e2.uint64();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), aB = t.UserJoin = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.opt = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.ticket = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.opt && Object.hasOwnProperty.call(e2, "opt") && t2.uint32(16).uint64(e2.opt), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(24).uint64(e2.instance), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(34).string(e2.account), null != e2.ticket && Object.hasOwnProperty.call(e2, "ticket") && t2.uint32(42).string(e2.ticket), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserJoin(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.opt = e2.uint64();
                break;
              case 3:
                r.instance = e2.uint64();
                break;
              case 4:
                r.account = e2.string();
                break;
              case 5:
                r.ticket = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), bB = t.UserResp = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(24).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserResp(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), cB = t.UserQuit = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserQuit(); e2.pos < n2; ) {
            var i = e2.uint32();
            e2.skipType(7 & i);
          }
          return r;
        }, e;
      }(), dB = t.UserDrop = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(8).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserDrop(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), eB = t.GroupEnter = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupEnter(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), fB = t.GroupLeave = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.account = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(10).string(e2.account), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupLeave(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.account = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), gB = t.GroupReply = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(24).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupReply(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), ur = t.GroupLeaveNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.user = "", e.prototype.group = "", e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.size = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.user && Object.hasOwnProperty.call(e2, "user") && t2.uint32(18).string(e2.user), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(26).string(e2.group), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(32).uint64(e2.instance), null != e2.size && Object.hasOwnProperty.call(e2, "size") && t2.uint32(40).uint32(e2.size), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupLeaveNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.user = e2.string();
                break;
              case 3:
                r.group = e2.string();
                break;
              case 4:
                r.instance = e2.uint64();
                break;
              case 5:
                r.size = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), vr = t.GroupEnterNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.user = "", e.prototype.group = "", e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.size = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.user && Object.hasOwnProperty.call(e2, "user") && t2.uint32(18).string(e2.user), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(26).string(e2.group), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(32).uint64(e2.instance), null != e2.size && Object.hasOwnProperty.call(e2, "size") && t2.uint32(40).uint32(e2.size), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupEnterNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.user = e2.string();
                break;
              case 3:
                r.group = e2.string();
                break;
              case 4:
                r.instance = e2.uint64();
                break;
              case 5:
                r.size = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), wr = t.Message = function() {
        function e(e2) {
          if (this.MiscMap = {}, e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.dialogue = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.sequence = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.options = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.src = "", e.prototype.dst = "", e.prototype.payload = q.newBuffer([]), e.prototype.MiscMap = q.emptyObject, e.prototype.ms = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.dialogue && Object.hasOwnProperty.call(e2, "dialogue") && t2.uint32(16).uint64(e2.dialogue), null != e2.sequence && Object.hasOwnProperty.call(e2, "sequence") && t2.uint32(24).uint64(e2.sequence), null != e2.options && Object.hasOwnProperty.call(e2, "options") && t2.uint32(32).uint64(e2.options), null != e2.src && Object.hasOwnProperty.call(e2, "src") && t2.uint32(42).string(e2.src), null != e2.dst && Object.hasOwnProperty.call(e2, "dst") && t2.uint32(50).string(e2.dst), null != e2.payload && Object.hasOwnProperty.call(e2, "payload") && t2.uint32(58).bytes(e2.payload), null != e2.MiscMap && Object.hasOwnProperty.call(e2, "MiscMap")) for (var n2 = Object.keys(e2.MiscMap), r = 0; r < n2.length; ++r) t2.uint32(66).fork().uint32(10).string(n2[r]).uint32(18).bytes(e2.MiscMap[n2[r]]).ldelim();
          return null != e2.ms && Object.hasOwnProperty.call(e2, "ms") && t2.uint32(72).uint64(e2.ms), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r, i, o = new t.Message(); e2.pos < n2; ) switch (r = e2.uint32(), r >>> 3) {
            case 1:
              o.instance = e2.uint64();
              break;
            case 2:
              o.dialogue = e2.uint64();
              break;
            case 3:
              o.sequence = e2.uint64();
              break;
            case 4:
              o.options = e2.uint64();
              break;
            case 5:
              o.src = e2.string();
              break;
            case 6:
              o.dst = e2.string();
              break;
            case 7:
              o.payload = e2.bytes();
              break;
            case 8:
              o.MiscMap === q.emptyObject && (o.MiscMap = {});
              var a2 = e2.uint32() + e2.pos;
              for (r = "", i = []; e2.pos < a2; ) {
                var s = e2.uint32();
                switch (s >>> 3) {
                  case 1:
                    r = e2.string();
                    break;
                  case 2:
                    i = e2.bytes();
                    break;
                  default:
                    e2.skipType(7 & s);
                }
              }
              o.MiscMap[r] = i;
              break;
            case 9:
              o.ms = e2.uint64();
              break;
            default:
              e2.skipType(7 & r);
          }
          return o;
        }, e;
      }(), xr = t.Ack = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.dialogue = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.sequence = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.dialogue && Object.hasOwnProperty.call(e2, "dialogue") && t2.uint32(16).uint64(e2.dialogue), null != e2.sequence && Object.hasOwnProperty.call(e2, "sequence") && t2.uint32(24).uint64(e2.sequence), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(32).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.Ack(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.instance = e2.uint64();
                break;
              case 2:
                r.dialogue = e2.uint64();
                break;
              case 3:
                r.sequence = e2.uint64();
                break;
              case 4:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), hB = t.FileUploadIndexGet = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.hash = q.newBuffer([]), e.prototype.size = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.hash && Object.hasOwnProperty.call(e2, "hash") && t2.uint32(18).bytes(e2.hash), null != e2.size && Object.hasOwnProperty.call(e2, "size") && t2.uint32(24).uint32(e2.size), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileUploadIndexGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.hash = e2.bytes();
                break;
              case 3:
                r.size = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), iB = t.FileUploadIndexRet = function() {
        function e(e2) {
          if (this.servers = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.unit = 0, e.prototype.servers = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.unit && Object.hasOwnProperty.call(e2, "unit") && t2.uint32(16).uint32(e2.unit), null != e2.servers && e2.servers.length) {
            t2.uint32(26).fork();
            for (var n2 = 0; n2 < e2.servers.length; ++n2) t2.uint32(e2.servers[n2]);
            t2.ldelim();
          }
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileUploadIndexRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.unit = e2.uint32();
                break;
              case 3:
                if (r.servers && r.servers.length || (r.servers = []), 2 == (7 & i)) for (i = e2.uint32() + e2.pos; e2.pos < i; ) r.servers.push(e2.uint32());
                else r.servers.push(e2.uint32());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), jB = t.FileUploadIndexSet = function() {
        function e(e2) {
          if (this.servers = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.hash = q.newBuffer([]), e.prototype.unit = 0, e.prototype.servers = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.hash && Object.hasOwnProperty.call(e2, "hash") && t2.uint32(18).bytes(e2.hash), null != e2.unit && Object.hasOwnProperty.call(e2, "unit") && t2.uint32(24).uint32(e2.unit), null != e2.servers && e2.servers.length) {
            t2.uint32(34).fork();
            for (var n2 = 0; n2 < e2.servers.length; ++n2) t2.uint32(e2.servers[n2]);
            t2.ldelim();
          }
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileUploadIndexSet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.hash = e2.bytes();
                break;
              case 3:
                r.unit = e2.uint32();
                break;
              case 4:
                if (r.servers && r.servers.length || (r.servers = []), 2 == (7 & i)) for (i = e2.uint32() + e2.pos; e2.pos < i; ) r.servers.push(e2.uint32());
                else r.servers.push(e2.uint32());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), kB = t.FileUploadIndexFin = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.zone = 0, e.prototype.unit = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.zone && Object.hasOwnProperty.call(e2, "zone") && t2.uint32(16).uint32(e2.zone), null != e2.unit && Object.hasOwnProperty.call(e2, "unit") && t2.uint32(24).uint32(e2.unit), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileUploadIndexFin(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.zone = e2.uint32();
                break;
              case 3:
                r.unit = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), lB = t.FileUploadIndexErr = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(16).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileUploadIndexErr(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), mB = t.FileDownloadIndexGet = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.zone = 0, e.prototype.hash = q.newBuffer([]), e.prototype.size = 0, e.prototype.unit = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.zone && Object.hasOwnProperty.call(e2, "zone") && t2.uint32(16).uint32(e2.zone), null != e2.hash && Object.hasOwnProperty.call(e2, "hash") && t2.uint32(26).bytes(e2.hash), null != e2.size && Object.hasOwnProperty.call(e2, "size") && t2.uint32(32).uint32(e2.size), null != e2.unit && Object.hasOwnProperty.call(e2, "unit") && t2.uint32(40).uint32(e2.unit), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileDownloadIndexGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.zone = e2.uint32();
                break;
              case 3:
                r.hash = e2.bytes();
                break;
              case 4:
                r.size = e2.uint32();
                break;
              case 5:
                r.unit = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), nB = t.FileDownloadIndexRet = function() {
        function e(e2) {
          if (this.servers = [], this.backups = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.unit = 0, e.prototype.zone = 0, e.prototype.servers = q.emptyArray, e.prototype.backups = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.unit && Object.hasOwnProperty.call(e2, "unit") && t2.uint32(16).uint32(e2.unit), null != e2.zone && Object.hasOwnProperty.call(e2, "zone") && t2.uint32(24).uint32(e2.zone), null != e2.servers && e2.servers.length) {
            t2.uint32(34).fork();
            for (var n2 = 0; n2 < e2.servers.length; ++n2) t2.uint32(e2.servers[n2]);
            t2.ldelim();
          }
          if (null != e2.backups && e2.backups.length) {
            for (t2.uint32(42).fork(), n2 = 0; n2 < e2.backups.length; ++n2) t2.uint32(e2.backups[n2]);
            t2.ldelim();
          }
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileDownloadIndexRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.unit = e2.uint32();
                break;
              case 3:
                r.zone = e2.uint32();
                break;
              case 4:
                if (r.servers && r.servers.length || (r.servers = []), 2 == (7 & i)) for (i = e2.uint32() + e2.pos; e2.pos < i; ) r.servers.push(e2.uint32());
                else r.servers.push(e2.uint32());
                break;
              case 5:
                if (r.backups && r.backups.length || (r.backups = []), 2 == (7 & i)) for (i = e2.uint32() + e2.pos; e2.pos < i; ) r.backups.push(e2.uint32());
                else r.backups.push(e2.uint32());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), oB = t.FileDownloadIndexErr = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(16).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.FileDownloadIndexErr(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), pB = t.GroupAllUsersList = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.pageSize = 0, e.prototype.pageNumber = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(18).string(e2.group), null != e2.pageSize && Object.hasOwnProperty.call(e2, "pageSize") && t2.uint32(24).uint32(e2.pageSize), null != e2.pageNumber && Object.hasOwnProperty.call(e2, "pageNumber") && t2.uint32(32).uint32(e2.pageNumber), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAllUsersList(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.pageSize = e2.uint32();
                break;
              case 4:
                r.pageNumber = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), qB = t.GroupAllUsersResult = function() {
        function e(e2) {
          if (this.memberInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.totalSize = 0, e.prototype.pageSize = 0, e.prototype.pageNumber = 0, e.prototype.memberInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && n2.uint32(18).string(e2.group), null != e2.totalSize && Object.hasOwnProperty.call(e2, "totalSize") && n2.uint32(24).uint32(e2.totalSize), null != e2.pageSize && Object.hasOwnProperty.call(e2, "pageSize") && n2.uint32(32).uint32(e2.pageSize), null != e2.pageNumber && Object.hasOwnProperty.call(e2, "pageNumber") && n2.uint32(40).uint32(e2.pageNumber), null != e2.memberInfos && e2.memberInfos.length) for (var r = 0; r < e2.memberInfos.length; ++r) t.GroupAllUsersResult.MemberInfo.encode(e2.memberInfos[r], n2.uint32(50).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAllUsersResult(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.totalSize = e2.uint32();
                break;
              case 4:
                r.pageSize = e2.uint32();
                break;
              case 5:
                r.pageNumber = e2.uint32();
                break;
              case 6:
                r.memberInfos && r.memberInfos.length || (r.memberInfos = []), r.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.MemberInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.account = "", e2.prototype.ts = 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.account && Object.hasOwnProperty.call(e3, "account") && t2.uint32(10).string(e3.account), null != e3.ts && Object.hasOwnProperty.call(e3, "ts") && t2.uint32(16).uint32(e3.ts), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupAllUsersResult.MemberInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.account = e3.string();
                  break;
                case 2:
                  r.ts = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), rB = t.UserStatusList = function() {
        function e(e2) {
          if (this.users = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.users = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.users && e2.users.length) for (var n2 = 0; n2 < e2.users.length; ++n2) t2.uint32(18).string(e2.users[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserStatusList(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.users && r.users.length || (r.users = []), r.users.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), sB = t.UserStatusResult = function() {
        function e(e2) {
          if (this.userInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.userInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.userInfos && e2.userInfos.length) for (var r = 0; r < e2.userInfos.length; ++r) t.UserStatusResult.UserStatusInfo.encode(e2.userInfos[r], n2.uint32(18).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserStatusResult(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.userInfos && r.userInfos.length || (r.userInfos = []), r.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.UserStatusInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.account = "", e2.prototype.ts = 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.account && Object.hasOwnProperty.call(e3, "account") && t2.uint32(10).string(e3.account), null != e3.ts && Object.hasOwnProperty.call(e3, "ts") && t2.uint32(16).uint32(e3.ts), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.UserStatusResult.UserStatusInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.account = e3.string();
                  break;
                case 2:
                  r.ts = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), tB = t.UserAttributeGet = function() {
        function e(e2) {
          if (this.attributes = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.attributes = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), null != e2.attributes && e2.attributes.length) for (var n2 = 0; n2 < e2.attributes.length; ++n2) t2.uint32(26).string(e2.attributes[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.attributes && r.attributes.length || (r.attributes = []), r.attributes.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), uB = t.UserAttributeRet = function() {
        function e(e2) {
          if (this.attributeInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.attributeInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.attributeInfos && e2.attributeInfos.length) for (var r = 0; r < e2.attributeInfos.length; ++r) t.UserAttributeRet.AttributeInfo.encode(e2.attributeInfos[r], n2.uint32(18).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.attributeInfos && r.attributeInfos.length || (r.attributeInfos = []), r.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.UserAttributeRet.AttributeInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), vB = t.UserAttributeSet = function() {
        function e(e2) {
          if (this.attributeInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.attributeInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && n2.uint32(18).string(e2.account), null != e2.attributeInfos && e2.attributeInfos.length) for (var r = 0; r < e2.attributeInfos.length; ++r) t.UserAttributeSet.AttributeInfo.encode(e2.attributeInfos[r], n2.uint32(26).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeSet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.attributeInfos && r.attributeInfos.length || (r.attributeInfos = []), r.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.UserAttributeSet.AttributeInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), wB = t.UserAttributeMod = function() {
        function e(e2) {
          if (this.attributeInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.attributeInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && n2.uint32(18).string(e2.account), null != e2.attributeInfos && e2.attributeInfos.length) for (var r = 0; r < e2.attributeInfos.length; ++r) t.UserAttributeMod.AttributeInfo.encode(e2.attributeInfos[r], n2.uint32(26).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeMod(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.attributeInfos && r.attributeInfos.length || (r.attributeInfos = []), r.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.UserAttributeMod.AttributeInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), xB = t.UserAttributeDel = function() {
        function e(e2) {
          if (this.attributes = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.prototype.attributes = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), null != e2.attributes && e2.attributes.length) for (var n2 = 0; n2 < e2.attributes.length; ++n2) t2.uint32(26).string(e2.attributes[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeDel(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              case 3:
                r.attributes && r.attributes.length || (r.attributes = []), r.attributes.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), yB = t.UserAttributeErr = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(16).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeErr(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), zB = t.UserAttributeKeysGet = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.account = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.account && Object.hasOwnProperty.call(e2, "account") && t2.uint32(18).string(e2.account), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeKeysGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.account = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), AB = t.UserAttributeKeysRet = function() {
        function e(e2) {
          if (this.keys = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.keys = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.keys && e2.keys.length) for (var n2 = 0; n2 < e2.keys.length; ++n2) t2.uint32(18).string(e2.keys[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeKeysRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.keys && r.keys.length || (r.keys = []), r.keys.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), BB = t.UserAttributeRsp = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserAttributeRsp(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), CB = t.GroupStatusList = function() {
        function e(e2) {
          if (this.groups = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.groups = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.groups && e2.groups.length) for (var n2 = 0; n2 < e2.groups.length; ++n2) t2.uint32(18).string(e2.groups[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupStatusList(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.groups && r.groups.length || (r.groups = []), r.groups.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), DB = t.GroupStatusResult = function() {
        function e(e2) {
          if (this.groupInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.groupInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.groupInfos && e2.groupInfos.length) for (var r = 0; r < e2.groupInfos.length; ++r) t.GroupStatusResult.GroupInfo.encode(e2.groupInfos[r], n2.uint32(18).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupStatusResult(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.groupInfos && r.groupInfos.length || (r.groupInfos = []), r.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.GroupInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.group = "", e2.prototype.memberCount = 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.group && Object.hasOwnProperty.call(e3, "group") && t2.uint32(10).string(e3.group), null != e3.memberCount && Object.hasOwnProperty.call(e3, "memberCount") && t2.uint32(16).uint32(e3.memberCount), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupStatusResult.GroupInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.group = e3.string();
                  break;
                case 2:
                  r.memberCount = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), EB = t.GroupCountNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.size = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(16).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(26).string(e2.group), null != e2.size && Object.hasOwnProperty.call(e2, "size") && t2.uint32(32).uint32(e2.size), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupCountNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.instance = e2.uint64();
                break;
              case 2:
                r.seq = e2.uint64();
                break;
              case 3:
                r.group = e2.string();
                break;
              case 4:
                r.size = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), FB = t.GroupAttributeGet = function() {
        function e(e2) {
          if (this.attributes = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.attributes = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(18).string(e2.group), null != e2.attributes && e2.attributes.length) for (var n2 = 0; n2 < e2.attributes.length; ++n2) t2.uint32(26).string(e2.attributes[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.attributes && r.attributes.length || (r.attributes = []), r.attributes.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), GB = t.GroupAttributeRet = function() {
        function e(e2) {
          if (this.attributeMaps = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.attributeMaps = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.attributeMaps && e2.attributeMaps.length) for (var r = 0; r < e2.attributeMaps.length; ++r) t.GroupAttributeRet.AttributeMap.encode(e2.attributeMaps[r], n2.uint32(18).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.attributeMaps && r.attributeMaps.length || (r.attributeMaps = []), r.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeMap = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.prototype.origin = "", e2.prototype.ms = q.Long ? q.Long.fromBits(0, 0, true) : 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), null != e3.origin && Object.hasOwnProperty.call(e3, "origin") && t2.uint32(26).string(e3.origin), null != e3.ms && Object.hasOwnProperty.call(e3, "ms") && t2.uint32(32).uint64(e3.ms), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupAttributeRet.AttributeMap(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                case 3:
                  r.origin = e3.string();
                  break;
                case 4:
                  r.ms = e3.uint64();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), HB = t.GroupAttributeSet = function() {
        function e(e2) {
          if (this.attributeInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.broadcast = false, e.prototype.attributeInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && n2.uint32(18).string(e2.group), null != e2.broadcast && Object.hasOwnProperty.call(e2, "broadcast") && n2.uint32(24).bool(e2.broadcast), null != e2.attributeInfos && e2.attributeInfos.length) for (var r = 0; r < e2.attributeInfos.length; ++r) t.GroupAttributeSet.AttributeInfo.encode(e2.attributeInfos[r], n2.uint32(34).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeSet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.broadcast = e2.bool();
                break;
              case 4:
                r.attributeInfos && r.attributeInfos.length || (r.attributeInfos = []), r.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupAttributeSet.AttributeInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), IB = t.GroupAttributeMod = function() {
        function e(e2) {
          if (this.attributeInfos = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.broadcast = false, e.prototype.attributeInfos = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && n2.uint32(18).string(e2.group), null != e2.broadcast && Object.hasOwnProperty.call(e2, "broadcast") && n2.uint32(24).bool(e2.broadcast), null != e2.attributeInfos && e2.attributeInfos.length) for (var r = 0; r < e2.attributeInfos.length; ++r) t.GroupAttributeMod.AttributeInfo.encode(e2.attributeInfos[r], n2.uint32(34).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeMod(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.broadcast = e2.bool();
                break;
              case 4:
                r.attributeInfos && r.attributeInfos.length || (r.attributeInfos = []), r.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeInfo = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupAttributeMod.AttributeInfo(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), JB = t.GroupAttributeDel = function() {
        function e(e2) {
          if (this.attributes = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.broadcast = false, e.prototype.attributes = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(18).string(e2.group), null != e2.broadcast && Object.hasOwnProperty.call(e2, "broadcast") && t2.uint32(24).bool(e2.broadcast), null != e2.attributes && e2.attributes.length) for (var n2 = 0; n2 < e2.attributes.length; ++n2) t2.uint32(34).string(e2.attributes[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeDel(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.broadcast = e2.bool();
                break;
              case 4:
                r.attributes && r.attributes.length || (r.attributes = []), r.attributes.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), KB = t.GroupAttributeAlt = function() {
        function e(e2) {
          if (this.attributeMaps = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.attributeMaps = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && n2.uint32(18).string(e2.group), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && n2.uint32(24).uint64(e2.instance), null != e2.attributeMaps && e2.attributeMaps.length) for (var r = 0; r < e2.attributeMaps.length; ++r) t.GroupAttributeAlt.AttributeMap.encode(e2.attributeMaps[r], n2.uint32(34).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeAlt(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              case 3:
                r.instance = e2.uint64();
                break;
              case 4:
                r.attributeMaps && r.attributeMaps.length || (r.attributeMaps = []), r.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.AttributeMap = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.key = "", e2.prototype.value = "", e2.prototype.origin = "", e2.prototype.ms = q.Long ? q.Long.fromBits(0, 0, true) : 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.key && Object.hasOwnProperty.call(e3, "key") && t2.uint32(10).string(e3.key), null != e3.value && Object.hasOwnProperty.call(e3, "value") && t2.uint32(18).string(e3.value), null != e3.origin && Object.hasOwnProperty.call(e3, "origin") && t2.uint32(26).string(e3.origin), null != e3.ms && Object.hasOwnProperty.call(e3, "ms") && t2.uint32(32).uint64(e3.ms), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.GroupAttributeAlt.AttributeMap(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.key = e3.string();
                  break;
                case 2:
                  r.value = e3.string();
                  break;
                case 3:
                  r.origin = e3.string();
                  break;
                case 4:
                  r.ms = e3.uint64();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), LB = t.GroupAttributeRsp = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeRsp(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), MB = t.GroupAttributeErr = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.code = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(16).uint32(e2.code), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeErr(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.code = e2.uint32();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), NB = t.GroupAttributeKeysGet = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.group = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.group && Object.hasOwnProperty.call(e2, "group") && t2.uint32(18).string(e2.group), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeKeysGet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.group = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), OB = t.GroupAttributeKeysRet = function() {
        function e(e2) {
          if (this.keys = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.keys = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.keys && e2.keys.length) for (var n2 = 0; n2 < e2.keys.length; ++n2) t2.uint32(18).string(e2.keys[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.GroupAttributeKeysRet(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.keys && r.keys.length || (r.keys = []), r.keys.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), PB = t.SubscribeUserStatus = function() {
        function e(e2) {
          if (this.users = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.users = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.users && e2.users.length) for (var n2 = 0; n2 < e2.users.length; ++n2) t2.uint32(18).string(e2.users[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.SubscribeUserStatus(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.users && r.users.length || (r.users = []), r.users.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), QB = t.UnsubscribeUserStatus = function() {
        function e(e2) {
          if (this.users = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.users = q.emptyArray, e.encode = function(e2, t2) {
          if (t2 || (t2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(8).uint64(e2.seq), null != e2.users && e2.users.length) for (var n2 = 0; n2 < e2.users.length; ++n2) t2.uint32(18).string(e2.users[n2]);
          return t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UnsubscribeUserStatus(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.users && r.users.length || (r.users = []), r.users.push(e2.string());
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), RB = t.UserJoinNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.user = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(16).uint64(e2.seq), null != e2.user && Object.hasOwnProperty.call(e2, "user") && t2.uint32(26).string(e2.user), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserJoinNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.instance = e2.uint64();
                break;
              case 2:
                r.seq = e2.uint64();
                break;
              case 3:
                r.user = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), SB = t.UserQuitNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.user = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(16).uint64(e2.seq), null != e2.user && Object.hasOwnProperty.call(e2, "user") && t2.uint32(26).string(e2.user), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserQuitNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.instance = e2.uint64();
                break;
              case 2:
                r.seq = e2.uint64();
                break;
              case 3:
                r.user = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), TB = t.UserWaitNotice = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.instance = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.user = "", e.encode = function(e2, t2) {
          return t2 || (t2 = L.create()), null != e2.instance && Object.hasOwnProperty.call(e2, "instance") && t2.uint32(8).uint64(e2.instance), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && t2.uint32(16).uint64(e2.seq), null != e2.user && Object.hasOwnProperty.call(e2, "user") && t2.uint32(26).string(e2.user), t2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.UserWaitNotice(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.instance = e2.uint64();
                break;
              case 2:
                r.seq = e2.uint64();
                break;
              case 3:
                r.user = e2.string();
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e;
      }(), UB = t.SubscribeResponse = function() {
        function e(e2) {
          if (this.errors = [], e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.seq = q.Long ? q.Long.fromBits(0, 0, true) : 0, e.prototype.errors = q.emptyArray, e.encode = function(e2, n2) {
          if (n2 || (n2 = L.create()), null != e2.seq && Object.hasOwnProperty.call(e2, "seq") && n2.uint32(8).uint64(e2.seq), null != e2.errors && e2.errors.length) for (var r = 0; r < e2.errors.length; ++r) t.SubscribeResponse.SubscribeErrorsType.encode(e2.errors[r], n2.uint32(18).fork()).ldelim();
          return n2;
        }, e.decode = function(e2, n2) {
          e2 instanceof u || (e2 = u.create(e2)), n2 = void 0 === n2 ? e2.len : e2.pos + n2;
          for (var r = new t.SubscribeResponse(); e2.pos < n2; ) {
            var i = e2.uint32();
            switch (i >>> 3) {
              case 1:
                r.seq = e2.uint64();
                break;
              case 2:
                r.errors && r.errors.length || (r.errors = []), r.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e2, e2.uint32()));
                break;
              default:
                e2.skipType(7 & i);
            }
          }
          return r;
        }, e.SubscribeErrorsType = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.account = "", e2.prototype.code = 0, e2.encode = function(e3, t2) {
            return t2 || (t2 = L.create()), null != e3.account && Object.hasOwnProperty.call(e3, "account") && t2.uint32(10).string(e3.account), null != e3.code && Object.hasOwnProperty.call(e3, "code") && t2.uint32(16).uint32(e3.code), t2;
          }, e2.decode = function(e3, n2) {
            e3 instanceof u || (e3 = u.create(e3)), n2 = void 0 === n2 ? e3.len : e3.pos + n2;
            for (var r = new t.SubscribeResponse.SubscribeErrorsType(); e3.pos < n2; ) {
              var i = e3.uint32();
              switch (i >>> 3) {
                case 1:
                  r.account = e3.string();
                  break;
                case 2:
                  r.code = e3.uint32();
                  break;
                default:
                  e3.skipType(7 & i);
              }
            }
            return r;
          }, e2;
        }(), e;
      }(), VB = Object.freeze({ __proto__: null, URI: YA, Wrapper: Oh, Ping: ZA, Pong: $A, UserJoin: aB, UserResp: bB, UserQuit: cB, UserDrop: dB, GroupEnter: eB, GroupLeave: fB, GroupReply: gB, GroupLeaveNotice: ur, GroupEnterNotice: vr, Message: wr, Ack: xr, FileUploadIndexGet: hB, FileUploadIndexRet: iB, FileUploadIndexSet: jB, FileUploadIndexFin: kB, FileUploadIndexErr: lB, FileDownloadIndexGet: mB, FileDownloadIndexRet: nB, FileDownloadIndexErr: oB, GroupAllUsersList: pB, GroupAllUsersResult: qB, UserStatusList: rB, UserStatusResult: sB, UserAttributeGet: tB, UserAttributeRet: uB, UserAttributeSet: vB, UserAttributeMod: wB, UserAttributeDel: xB, UserAttributeErr: yB, UserAttributeKeysGet: zB, UserAttributeKeysRet: AB, UserAttributeRsp: BB, GroupStatusList: CB, GroupStatusResult: DB, GroupCountNotice: EB, GroupAttributeGet: FB, GroupAttributeRet: GB, GroupAttributeSet: HB, GroupAttributeMod: IB, GroupAttributeDel: JB, GroupAttributeAlt: KB, GroupAttributeRsp: LB, GroupAttributeErr: MB, GroupAttributeKeysGet: NB, GroupAttributeKeysRet: OB, SubscribeUserStatus: PB, UnsubscribeUserStatus: QB, UserJoinNotice: RB, UserQuitNotice: SB, UserWaitNotice: TB, SubscribeResponse: UB, default: t }), WB = Math.ceil, yr = function(e) {
        return function(t2, n2, r) {
          var i = (t2 = String(jb(t2))).length;
          return r = void 0 === r ? " " : String(r), (n2 = ta(n2)) <= i || "" == r ? t2 : (n2 -= i, (i = Pn.call(r, WB(n2 / r.length))).length > n2 && (i = i.slice(0, n2)), e ? t2 + i : i + t2);
        };
      }, XB = yr(false), YB = yr(true), zr = /Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(De);
      N({ target: "String", proto: true, forced: zr }, { padEnd: function(e) {
        return YB(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var ZB = zf, Ar = function(e) {
        return function(t2) {
          t2 = qb(t2);
          for (var n2, r = Dc(t2), i = r.length, o = 0, a2 = []; i > o; ) n2 = r[o++], ka && !ZB.call(t2, n2) || a2.push(e ? [n2, t2[n2]] : t2[n2]);
          return a2;
        };
      }, $B = Ar(true), aC = Ar(false);
      N({ target: "Object", stat: true }, { entries: function(e) {
        return $B(e);
      } });
      var bC = Fb.f, Br = "".endsWith, cC = Math.min, Cr = dk("endsWith"), dC = !Cr && !!function() {
        var e = bC(String.prototype, "endsWith");
        return e && !e.writable;
      }();
      N({ target: "String", proto: true, forced: !dC && !Cr }, { endsWith: function(e) {
        var t2 = String(jb(this));
        ck(e);
        var n2 = 1 < arguments.length ? arguments[1] : void 0, r = ta(t2.length);
        return n2 = void 0 === n2 ? r : cC(ta(n2), r), r = String(e), Br ? Br.call(t2, r, n2) : t2.slice(n2 - r.length, n2) === r;
      } }), dh("match", 1, function(e, t2, n2) {
        return [function(t3) {
          var n3 = jb(this), r = null == t3 ? void 0 : t3[e];
          return void 0 !== r ? r.call(t3, n3) : new RegExp(t3)[e](String(n3));
        }, function(e2) {
          var r = n2(t2, e2, this);
          if (r.done) return r.value;
          if (e2 = va(e2), r = String(this), !e2.global) return Ke(e2, r);
          var i = e2.unicode;
          e2.lastIndex = 0;
          for (var o, a2 = [], s = 0; null !== (o = Ke(e2, r)); ) o = String(o[0]), a2[s] = o, "" === o && (e2.lastIndex = xj(r, ta(e2.lastIndex), i)), s++;
          return 0 === s ? null : a2;
        }];
      });
      var eC = Fb.f, Dr = "".startsWith, fC = Math.min, Er = dk("startsWith"), gC = !Er && !!function() {
        var e = eC(String.prototype, "startsWith");
        return e && !e.writable;
      }();
      N({ target: "String", proto: true, forced: !gC && !Er }, { startsWith: function(e) {
        var t2 = String(jb(this));
        ck(e);
        var n2 = ta(fC(1 < arguments.length ? arguments[1] : void 0, t2.length)), r = String(e);
        return Dr ? Dr.call(t2, r, n2) : t2.slice(n2, n2 + r.length) === r;
      } });
      var Nm = function(e) {
        var t2 = /(%?)(%([jds]))/g, n2 = Array.prototype.slice.call(arguments, 1);
        return n2.length && (e = e.replace(t2, function(e2, t3, r, i) {
          switch (r = n2.shift(), i) {
            case "s":
              r = "" + r;
              break;
            case "d":
              r = Number(r);
              break;
            case "j":
              r = JSON.stringify(r);
          }
          return t3 ? (n2.unshift(r), e2) : r;
        })), n2.length && (e += " " + n2.join(" ")), "" + (e = e.replace(/%{2,2}/g, "%"));
      }, hC = /\s/, iC = function(e) {
        for (var t2 = e.length; t2-- && hC.test(e.charAt(t2)); ) ;
        return t2;
      }, jC = /^\s+/, Fr = NaN, kC = /^[-+]0x[0-9a-f]+$/i, lC = /^0b[01]+$/i, mC = /^0o[0-7]+$/i, nC = parseInt, gl = function(e) {
        if ("number" == typeof e) return e;
        if (ie(e)) return Fr;
        if (lb(e) && (e = "function" == typeof e.valueOf ? e.valueOf() : e, e = lb(e) ? e + "" : e), "string" != typeof e) return 0 === e ? e : +e;
        e = e ? e.slice(0, iC(e) + 1).replace(jC, "") : e;
        var t2 = lC.test(e);
        return t2 || mC.test(e) ? nC(e.slice(2), t2 ? 2 : 8) : kC.test(e) ? Fr : +e;
      }, oC = Math.max, pC = Math.min, qC = function(e, t2, n2) {
        function r(t3) {
          var n3 = u2, r2 = c2;
          return u2 = c2 = void 0, p = t3, l = e.apply(r2, n3);
        }
        function i(e2) {
          var n3 = e2 - h;
          return e2 -= p, void 0 === h || n3 >= t2 || 0 > n3 || v2 && e2 >= g;
        }
        function o() {
          var e2 = Cb.Date.now();
          if (i(e2)) return a2(e2);
          var n3 = setTimeout, r2 = e2 - p;
          e2 = t2 - (e2 - h), r2 = v2 ? pC(e2, g - r2) : e2, f = n3(o, r2);
        }
        function a2(e2) {
          return f = void 0, b && u2 ? r(e2) : (u2 = c2 = void 0, l);
        }
        function s() {
          var e2 = Cb.Date.now(), n3 = i(e2);
          if (u2 = arguments, c2 = this, h = e2, n3) {
            if (void 0 === f) return p = e2 = h, f = setTimeout(o, t2), d ? r(e2) : l;
            if (v2) return clearTimeout(f), f = setTimeout(o, t2), r(h);
          }
          return void 0 === f && (f = setTimeout(o, t2)), l;
        }
        var u2, c2, l, f, h, p = 0, d = false, v2 = false, b = true;
        if ("function" != typeof e) throw new TypeError("Expected a function");
        if (t2 = gl(t2) || 0, lb(n2)) {
          d = !!n2.leading;
          var g = (v2 = "maxWait" in n2) ? oC(gl(n2.maxWait) || 0, t2) : g;
          b = "trailing" in n2 ? !!n2.trailing : b;
        }
        return s.cancel = function() {
          void 0 !== f && clearTimeout(f), p = 0, u2 = h = c2 = f = void 0;
        }, s.flush = function() {
          return void 0 === f ? l : a2(Cb.Date.now());
        }, s;
      }, yc = function(e) {
        function t2(e2, i) {
          return W(this, t2), m(n(e2 = r.call(this, Mm(e2, i))), "originalError", void 0), m(n(e2), "code", void 0), m(n(e2), "serverCode", void 0), "number" == typeof i ? e2.code = i : "string" == typeof i ? e2.name = i : void 0 !== i && (i.originalError && (e2.originalError = i.originalError), void 0 !== i.code && (e2.code = i.code), void 0 !== i.serverCode && (e2.serverCode = i.serverCode)), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(ef(Error)), Ia = function(e) {
        function t2(e2, i) {
          return W(this, t2), m(n(e2 = r.call(this, Mm(e2, i))), "name", "RtmInternalError"), m(n(e2), "code", void 0), e2.code = i, e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(ef(Error)), Ph = function() {
        return function(e) {
          function t2(e2) {
            W(this, t2);
            var r = Object.keys(e2);
            return n2.call(this, e2[r[0]], r[0]);
          }
          la(t2, e);
          var n2 = ma(t2);
          return t2;
        }(Ia);
      }, Fa = Ph(), db = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmTimeoutError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), I = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmInvalidArgumentError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), K = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmInvalidStatusError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), hl = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmInterruptedError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), ib = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmLimitExceededError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), rC = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmInvokeTooOftenError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), da = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmUnavailableError"), m(n(e2), "serverCode", void 0), m(n(e2), "statusCode", void 0), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), Ye = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmUnauthenticatedError"), m(n(e2), "serverCode", void 0), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), Wc = function(e) {
        function t2() {
          W(this, t2);
          for (var e2 = arguments.length, i = Array(e2), o = 0; o < e2; o++) i[o] = arguments[o];
          return m(n(e2 = r.call.apply(r, [this].concat(i))), "name", "RtmUnknownError"), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return t2;
      }(yc), Sa = function(e) {
        return e instanceof db || e instanceof pb;
      }, sa = function(e) {
        return e instanceof yc;
      }, Yd = function(e, t2, n2) {
        return ['Executing "%s.%s" timed out after %ds', e, t2, n2 / 1e3];
      }, Lm = /* @__PURE__ */ new Map(), sC = function() {
        var e = /* @__PURE__ */ new Date();
        return "".concat(e.toISOString().split("T")[1].replace(/\..+/, ""), ".").concat(e.getMilliseconds());
      }, xf = Object.keys, Hg = Object.entries.bind(Object), Cg = function(e) {
        return "string" == typeof e ? e.endsWith(".") ? e : "".concat(e, ".") : e;
      }, Sm = function(e) {
        for (var t2 = "", n2 = (e = new Uint8Array(e)).byteLength, r = -1; ++r < n2; ) t2 += String.fromCharCode(e[r]);
        return t2 = btoa(t2), "data:;base64,".concat(t2);
      }, tC = R(function() {
        return null !== (/* @__PURE__ */ new Date(NaN)).toJSON() || 1 !== Date.prototype.toJSON.call({ toISOString: function() {
          return 1;
        } });
      });
      N({ target: "Date", proto: true, forced: tC }, { toJSON: function(e) {
        e = Qa(this);
        var t2 = lc(e);
        return "number" != typeof t2 || isFinite(t2) ? e.toISOString() : null;
      } }), N({ target: "URL", proto: true, enumerable: true }, { toJSON: function() {
        return URL.prototype.toString.call(this);
      } });
      var $t = Object.prototype.hasOwnProperty, Gr = function(e, t2, n2) {
        return JSON.stringify(Ym(e), t2, n2);
      };
      Gr.ensureProperties = Ym;
      var uC = function(e, t2) {
        t2 = t2 || {};
        var n2 = X(e);
        if ("string" === n2 && 0 < e.length) return au(e);
        if ("number" === n2 && isFinite(e)) return t2.long ? e = 864e5 <= (t2 = Math.abs(e)) ? Jg(e, t2, 864e5, "day") : 36e5 <= t2 ? Jg(e, t2, 36e5, "hour") : 6e4 <= t2 ? Jg(e, t2, 6e4, "minute") : 1e3 <= t2 ? Jg(e, t2, 1e3, "second") : e + " ms" : e = 864e5 <= (t2 = Math.abs(e)) ? Math.round(e / 864e5) + "d" : 36e5 <= t2 ? Math.round(e / 36e5) + "h" : 6e4 <= t2 ? Math.round(e / 6e4) + "m" : 1e3 <= t2 ? Math.round(e / 1e3) + "s" : e + "ms", e;
        throw Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
      }, vC = function(e) {
        function t2(e2) {
          function r2() {
            for (var e3 = arguments.length, n3 = Array(e3), o2 = 0; o2 < e3; o2++) n3[o2] = arguments[o2];
            if (r2.enabled) {
              e3 = Number(/* @__PURE__ */ new Date()), r2.diff = e3 - (i || e3), r2.prev = i, i = r2.curr = e3, n3[0] = t2.coerce(n3[0]), "string" != typeof n3[0] && n3.unshift("%O");
              var a2 = 0;
              n3[0] = n3[0].replace(/%([a-zA-Z%])/g, function(e4, i2) {
                return "%%" === e4 ? "%" : (a2++, "function" == typeof (i2 = t2.formatters[i2]) && (e4 = i2.call(r2, n3[a2]), n3.splice(a2, 1), a2--), e4);
              }), t2.formatArgs.call(r2, n3), (r2.log || t2.log).apply(r2, n3);
            }
          }
          var i, o = null;
          return r2.namespace = e2, r2.useColors = t2.useColors(), r2.color = t2.selectColor(e2), r2.extend = n2, r2.destroy = t2.destroy, Object.defineProperty(r2, "enabled", { enumerable: true, configurable: false, get: function() {
            return null === o ? t2.enabled(e2) : o;
          }, set: function(e3) {
            o = e3;
          } }), "function" == typeof t2.init && t2.init(r2), r2;
        }
        function n2(e2, n3) {
          return (e2 = t2(this.namespace + (void 0 === n3 ? ":" : n3) + e2)).log = this.log, e2;
        }
        function r(e2) {
          return e2.toString().substring(2, e2.toString().length - 2).replace(/\.\*\?$/, "*");
        }
        return t2.debug = t2, t2.default = t2, t2.coerce = function(e2) {
          return e2 instanceof Error ? e2.stack || e2.message : e2;
        }, t2.disable = function() {
          var e2 = [].concat(G(t2.names.map(r)), G(t2.skips.map(r).map(function(e3) {
            return "-" + e3;
          }))).join(",");
          return t2.enable(""), e2;
        }, t2.enable = function(e2) {
          t2.save(e2), t2.names = [], t2.skips = [];
          var n3, r2 = ("string" == typeof e2 ? e2 : "").split(/[\s,]+/), i = r2.length;
          for (n3 = 0; n3 < i; n3++) r2[n3] && ("-" === (e2 = r2[n3].replace(/\*/g, ".*?"))[0] ? t2.skips.push(new RegExp("^" + e2.substr(1) + "$")) : t2.names.push(new RegExp("^" + e2 + "$")));
        }, t2.enabled = function(e2) {
          if ("*" === e2[e2.length - 1]) return true;
          var n3, r2 = 0;
          for (n3 = t2.skips.length; r2 < n3; r2++) if (t2.skips[r2].test(e2)) return false;
          for (r2 = 0, n3 = t2.names.length; r2 < n3; r2++) if (t2.names[r2].test(e2)) return true;
          return false;
        }, t2.humanize = uC, t2.destroy = function() {
          console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
        }, Object.keys(e).forEach(function(n3) {
          t2[n3] = e[n3];
        }), t2.names = [], t2.skips = [], t2.formatters = {}, t2.selectColor = function(e2) {
          for (var n3 = 0, r2 = 0; r2 < e2.length; r2++) n3 = (n3 << 5) - n3 + e2.charCodeAt(r2), n3 |= 0;
          return t2.colors[Math.abs(n3) % t2.colors.length];
        }, t2.enable(t2.load()), t2;
      }, Hr = $a(function(e, t2) {
        t2.formatArgs = function(t3) {
          if (t3[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + t3[0] + (this.useColors ? "%c " : " ") + "+" + e.exports.humanize(this.diff), this.useColors) {
            var n3 = "color: " + this.color;
            t3.splice(1, 0, n3, "color: inherit");
            var r = 0, i = 0;
            t3[0].replace(/%[a-zA-Z%]/g, function(e2) {
              "%%" !== e2 && (r++, "%c" === e2 && (i = r));
            }), t3.splice(i, 0, n3);
          }
        }, t2.save = function(e2) {
          try {
            e2 ? t2.storage.setItem("debug", e2) : t2.storage.removeItem("debug");
          } catch (e3) {
          }
        }, t2.load = function() {
          try {
            var e2 = t2.storage.getItem("debug");
          } catch (e3) {
          }
          return !e2 && "undefined" != typeof process && "env" in process && (e2 = process.env.DEBUG), e2;
        }, t2.useColors = function() {
          return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type && !window.process.__nwjs) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && 31 <= parseInt(RegExp.$1, 10) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
        };
        e: {
          try {
            var n2 = localStorage;
            break e;
          } catch (e2) {
          }
          n2 = void 0;
        }
        t2.storage = n2, t2.destroy = /* @__PURE__ */ function() {
          var e2 = false;
          return function() {
            e2 || (e2 = true, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
          };
        }(), t2.colors = "#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "), t2.log = console.debug || console.log || function() {
        }, e.exports = vC(t2), e.exports.formatters.j = function(e2) {
          try {
            return JSON.stringify(e2);
          } catch (e3) {
            return "[UnexpectedJSONParseError]: " + e3.message;
          }
        };
      }), Ir = Hr("RTM:DEBUG"), Ze;
      Ir.enabled = false, function(e) {
        e[e.Uploading = 0] = "Uploading", e[e.Free = 1] = "Free";
      }(Ze || (Ze = {}));
      var wC = function() {
        function e(t2) {
          W(this, e), m(this, "uploadRequest", void 0), m(this, "uploadState", void 0), m(this, "uploadResendCount", void 0), m(this, "LogCache", void 0), m(this, "LogsToPost", void 0), m(this, "processId", void 0), m(this, "sdkVersion", void 0), m(this, "logId", void 0), m(this, "rtmConfig", void 0), this.processId = t2.processId, this.sdkVersion = t2.sdkVersion, this.rtmConfig = t2.rtmConfig, this.uploadRequest = t2.uploadRequest, this.uploadState = Ze.Free, this.uploadResendCount = 0, this.LogCache = [], this.LogsToPost = [], this.logId = 0;
        }
        return Ha(e, [{ key: "upload", value: function(e2) {
          this.LogCache.push(e2), this.uploadState === Ze.Free && (this.LogsToPost = 40 > this.LogCache.length ? this.LogCache.splice(0, this.LogCache.length) : this.LogCache.splice(0, 40), this.postLog(this.LogsToPost));
        } }, { key: "postLog", value: function(e2) {
          var t2 = this;
          this.uploadState = Ze.Uploading, setTimeout(J(w.mark(function n2() {
            var r, i, o;
            return w.wrap(function(n3) {
              for (; ; ) switch (n3.prev = n3.next) {
                case 0:
                  return r = { sdk_version: t2.sdkVersion, process_id: t2.processId, payload: JSON.stringify(e2) }, n3.prev = 1, n3.next = 4, t2.uploadRequest(r, null !== (i = t2.rtmConfig.enableCloudProxy) && void 0 !== i && i);
                case 4:
                  if (!Uk) {
                    n3.next = 6;
                    break;
                  }
                  throw Error("RTM is busy");
                case 6:
                  n3.next = 13;
                  break;
                case 8:
                  return n3.prev = 8, n3.t0 = n3.catch(1), o = 2 > t2.uploadResendCount++ ? 2e3 : 1e4, setTimeout(function() {
                    return t2.postLog(t2.LogsToPost);
                  }, o), n3.abrupt("return");
                case 13:
                  if (Ir('The logs uploaded for "process-'.concat(gg, '"')), 0 !== t2.LogCache.length) {
                    n3.next = 17;
                    break;
                  }
                  return t2.uploadState = Ze.Free, n3.abrupt("return");
                case 17:
                  t2.uploadResendCount = 0, t2.LogsToPost = 40 > t2.LogCache.length ? t2.LogCache.splice(0, t2.LogCache.length) : t2.LogCache.splice(0, 40), t2.postLog(t2.LogsToPost);
                case 20:
                case "end":
                  return n3.stop();
              }
            }, n2, null, [[1, 8]]);
          })), Zd.getParameter("LOG_UPLOAD_INTERVAL"));
        } }]), e;
      }(), Jr = function(e, t2, n2, r, i, o, a2, s) {
        var u2 = 0;
        for (a2 = !!a2 && Id(a2, s, 3); u2 < r; ) {
          if (u2 in n2) {
            if (s = a2 ? a2(n2[u2], u2, t2) : n2[u2], 0 < o && gd(s)) i = Jr(e, t2, s, ta(s.length), i, o - 1) - 1;
            else {
              if (9007199254740991 <= i) throw TypeError("Exceed the acceptable array length");
              e[i] = s;
            }
            i++;
          }
          u2++;
        }
        return i;
      }, xC = Jr;
      N({ target: "Array", proto: true }, { flat: function() {
        var e = arguments.length ? arguments[0] : void 0, t2 = Qa(this), n2 = ta(t2.length), r = Sg(t2, 0);
        return r.length = xC(r, t2, t2, n2, 0, void 0 === e ? 1 : $b(e)), r;
      } }), N({ target: "Object", stat: true }, { values: function(e) {
        return aC(e);
      } });
      var yC = ["CODE"], Db, ud, F;
      !function(e) {
        e.CHINA = "CN", e.ASIA = "AS", e.NORTH_AMERICA = "NA", e.EUROPE = "EU", e.JAPAN = "JP", e.INDIA = "IN", e.OCEANIA = "OC", e.SOUTH_AMERICA = "SA", e.AFRICA = "AF", e.OVERSEA = "OVERSEA", e.GLOBAL = "GLOBAL";
      }(F || (F = {}));
      var zC = { CN: F.CHINA, NA: F.NORTH_AMERICA, EU: F.EUROPE, AS: F.ASIA, JP: F.JAPAN, IN: F.INDIA, GLOB: F.GLOBAL, AF: F.AFRICA, OC: F.OVERSEA, OVS: F.OVERSEA, SA: F.SOUTH_AMERICA }, Kg = Wm((Db = {}, m(Db, F.ASIA, { CODE: F.ASIA, AP_DOMAINS: ["ap-web-1-asia.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-asia.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-asia.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-asia.agora.io"], LOG_UPLOAD_SERVER: ["logservice-asia.agora.io"], PROXY_AP: ["proxy-ap-web-asia.agora.io"], PROXY_NGINX: ["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.NORTH_AMERICA, { CODE: F.NORTH_AMERICA, AP_DOMAINS: ["ap-web-1-north-america.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-north-america.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-north-america.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-north-america.agora.io"], LOG_UPLOAD_SERVER: ["logservice-north-america.agora.io"], PROXY_AP: ["proxy-ap-web-america.agora.io"], PROXY_NGINX: ["east-usa.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.EUROPE, { CODE: F.EUROPE, AP_DOMAINS: ["ap-web-1-europe.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-europe.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-europe.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-europe.agora.io"], LOG_UPLOAD_SERVER: ["logservice-europe.agora.io"], PROXY_AP: ["proxy-ap-web-europe.agora.io"], PROXY_NGINX: ["europe.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.JAPAN, { CODE: F.JAPAN, AP_DOMAINS: ["ap-web-1-japan.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-japan.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-japan.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-japan.agora.io"], LOG_UPLOAD_SERVER: ["logservice-japan.agora.io"], PROXY_AP: ["proxy-ap-web-japan.agora.io"], PROXY_NGINX: ["japan.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.INDIA, { CODE: F.INDIA, AP_DOMAINS: ["ap-web-1-india.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-india.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-india.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-india.agora.io"], LOG_UPLOAD_SERVER: ["logservice-india.agora.io"], PROXY_AP: ["proxy-ap-web-india.agora.io"], PROXY_NGINX: ["india.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.OVERSEA, { CODE: F.OVERSEA, AP_DOMAINS: ["ap-web-1-oversea.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-oversea.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-oversea.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-oversea.agora.io"], LOG_UPLOAD_SERVER: ["logservice-oversea.agora.io"], PROXY_AP: ["proxy-ap-web-oversea.agora.io"], PROXY_NGINX: ["webrtc-cloud-proxy.agora.io"] }), m(Db, F.GLOBAL, { CODE: F.GLOBAL, AP_DOMAINS: ["ap-web-1.agora.io", "ap-web-2.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-3.agora.io", "ap-web-4.agora.io"], EVENT_REPORT_DOMAIN: ["webcollector-rtm.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["webcollector-1.agora.io"], LOG_UPLOAD_SERVER: ["logservice-rtm.agora.io"], PROXY_AP: ["ap-proxy-1.agora.io", "ap-proxy-2.agora.io"], PROXY_NGINX: ["webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.OCEANIA, { CODE: F.OCEANIA, AP_DOMAINS: ["ap-web-1-oceania.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-oceania.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-oceania.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-oceania.agora.io"], LOG_UPLOAD_SERVER: ["logservice-oceania.agora.io"], PROXY_AP: ["proxy-ap-web-oceania.agora.io"], PROXY_NGINX: ["oceania.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.SOUTH_AMERICA, { CODE: F.SOUTH_AMERICA, AP_DOMAINS: ["ap-web-1-south-america.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-south-america.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-south-america.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-south-america.agora.io"], LOG_UPLOAD_SERVER: ["logservice-south-america.agora.io"], PROXY_AP: ["proxy-ap-web-south-america.agora.io"], PROXY_NGINX: ["south-america.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.AFRICA, { CODE: F.AFRICA, AP_DOMAINS: ["ap-web-1-africa.agora.io"], AP_BACKUP_DOMAINS: ["ap-web-2-africa.agora.io"], EVENT_REPORT_DOMAIN: ["statscollector-1-africa.agora.io"], EVENT_REPORT_BACKUP_DOMAIN: ["statscollector-2-africa.agora.io"], LOG_UPLOAD_SERVER: ["logservice-south-africa.agora.io"], PROXY_AP: ["proxy-ap-web-africa.agora.io"], PROXY_NGINX: ["africa.webrtc-cloud-proxy.sd-rtn.com"] }), m(Db, F.CHINA, { CODE: F.CHINA, AP_DOMAINS: ["webrtc2-2.ap.sd-rtn.com"], AP_BACKUP_DOMAINS: ["webrtc2-4.ap.sd-rtn.com"], EVENT_REPORT_DOMAIN: ["web-3.statscollector.sd-rtn.com"], EVENT_REPORT_BACKUP_DOMAIN: ["web-4.statscollector.sd-rtn.com"], LOG_UPLOAD_SERVER: ["logservice-china.agora.io"], PROXY_AP: ["proxy-ap-web.agoraio.cn"], PROXY_NGINX: ["east-cn.webrtc-cloud-proxy.sd-rtn.com"] }), Db)), yf = (ud = {}, m(ud, F.ASIA, [F.CHINA, F.JAPAN, F.INDIA]), m(ud, F.EUROPE, []), m(ud, F.NORTH_AMERICA, []), m(ud, F.SOUTH_AMERICA, []), m(ud, F.OCEANIA, []), m(ud, F.AFRICA, []), ud), Kr = [F.OVERSEA, F.GLOBAL, F.CHINA, F.NORTH_AMERICA, F.EUROPE, F.ASIA, F.JAPAN, F.INDIA, F.OCEANIA, F.SOUTH_AMERICA, F.AFRICA], Zm = function(e) {
        return Object.values(yf).flat().includes(e);
      }, cu = function(e) {
        var t2;
        return null === (t2 = Hg(yf).find(function(t3) {
          return (t3 = ra(t3, 2))[0], t3[1].includes(e);
        })) || void 0 === t2 ? void 0 : t2[0];
      }, AC = function(e) {
        return e.sort(function(e2, t2) {
          return Kr.indexOf(e2) - Kr.indexOf(t2);
        });
      }, xe = function(e) {
        var t2 = /* @__PURE__ */ new Set();
        if (0 === (e = AC(e).slice(0, 3).map(function(e2) {
          var n2 = Kg[e2];
          if (void 0 === n2) throw new Ia("invalid area key");
          return e2 = n2.CODE, n2 = ff(n2, yC), t2.add(e2), n2;
        })).length) throw new Ia("areas cannot be empty");
        return ua({ CODES: t2 }, e.reduce(function(e2, t3) {
          for (var n2 = 0, r = Hg(e2); n2 < r.length; n2++) {
            var i = ra(r[n2], 2), o = i[0];
            i = i[1], e2[o] = Array.from(new Set([].concat(G(t3[o]), G(i))));
          }
          return e2;
        }));
      }, M, Lr = function() {
        var e = J(w.mark(function e2(t2, n2) {
          var r, i, o, a2, s, u2 = arguments;
          return w.wrap(function(e3) {
            for (; ; ) switch (e3.prev = e3.next) {
              case 0:
                if (!(2 < (i = 2 < u2.length && void 0 !== u2[2] ? u2[2] : 0))) {
                  e3.next = 3;
                  break;
                }
                return e3.abrupt("return");
              case 3:
                return o = { withCredentials: true, body: t2, timeout: 2e4 }, a2 = 0 < i ? (null == M ? void 0 : M.LOG_UPLOAD_SERVER[0]) || "rtm.logservice.sd-rtn.com" : (null == M ? void 0 : M.LOG_UPLOAD_SERVER[0]) || "logservice-rtm.agora.io", s = n2 ? "https://".concat(null !== (r = null == M ? void 0 : M.PROXY_NGINX[0]) && void 0 !== r ? r : "webrtc-cloud-proxy.sd-rtn.com", "/ls/?h=").concat(a2, "&p=443&d=upload/v1") : "https://".concat(a2, "/upload/v1"), e3.next = 8, te(s, o).catch(function(e4) {
                  return Lr(t2, n2, i + 1);
                });
              case 8:
              case "end":
                return e3.stop();
            }
          }, e2);
        }));
        return function(t2, n2) {
          return e.apply(this, arguments);
        };
      }(), Mr = new wC({ processId: "process-".concat(gg), sdkVersion: "Agora_RTM_SDK_for_Web_".concat("v1.4.3-17-g1e27aa38"), uploadRequest: Lr, rtmConfig: {} }), il = "text payload rawMessage thumbnail attributeInfos keys value extra".split(" "), Nr = "account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "), Or = "serverReceivedTs isOfflineMessage enableHistoricalMessaging enableOfflineMessaging hasPeerReceived messageType enableNotificationToChannelMembers lastUpdateTs".split(" "), BC = "ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "), ye = function(e) {
        if ("string" == typeof e) return oa(e);
        if (Array.isArray(e) && e.every(function(e2) {
          return "string" == typeof e2;
        })) return e.map(function(e2) {
          return oa(e2);
        });
        if (!Il(e)) {
          for (var t2 = {}, n2 = 0; n2 < Or.length; n2++) {
            var r = Or[n2];
            r in e && (t2[r] = e[r]);
          }
          if (0 < Object.keys(t2).length) return t2;
          if (5 > Object.keys(e).length) {
            for (n2 = 0, e = Object.entries(e); n2 < e.length; n2++) {
              var i = ra(e[n2], 2);
              r = i[0], i = i[1], il.includes(r) ? t2[r] = "[Hidden Info]" : t2[oa(r)] = "string" == typeof i ? oa(i) : "[Sensitive Info]";
            }
            return t2;
          }
          return "[Sensitive Info]";
        }
        return e;
      }, Pr = function(e) {
        return "object" === X(e) ? yd(e) ? Vm(fe(e, 5), il, Nr) : e.constructor && e.constructor.name : e;
      }, Qr = function(e, t2) {
        return e instanceof Error ? e.message : "string" != typeof e ? JSON.stringify(Vm(fe(e, 5), il, Nr)) : (t2 = t2.map(function(e2) {
          return e2 instanceof Error ? e2.message : "object" === X(e2) ? Gr(Array.isArray(e2) ? e2.map(Pr) : Pr(e2)) : e2;
        }), Nm.apply(void 0, [e.replace(/%[%Oo]/g, function(e2) {
          return "%%" === e2 ? "%" : "%o" === e2 || "%O" === e2 ? "%s" : e2;
        })].concat(G(t2))));
      }, CC = 1, Rr = function(e, t2, n2) {
        var r = Hr(e);
        return r.enabled = true, r.log = n2, r.useColors = false, function(n3) {
          for (var i = arguments.length, o = Array(1 < i ? i - 1 : 0), a2 = 1; a2 < i; a2++) o[a2 - 1] = arguments[a2];
          if (t2.enableLogUpload) {
            i = Cg(n3);
            var s = Qr(i, o);
            Mr.upload({ log_item_id: "".concat(CC++), log_level: e, payload_str: "[".concat(sC(), "] ").concat(e, " - ").concat(256 < s.length ? s.slice(0, 256) : s) });
          }
          switch (i = function(e2) {
            var t3 = s || Qr(Cg(n3), o), i2 = Nc.LOG_HANDLER;
            "function" == typeof i2 && i2({ level: e2, message: t3 }), r(t3);
          }, e) {
            case "RTM:INFO":
              t2.logFilter.info && i("log");
              break;
            case "RTM:WARN":
              t2.logFilter.warn && i("warning");
              break;
            case "RTM:ERROR":
              t2.logFilter.error && i("error");
              break;
            case "RTM:TRACK":
              t2.logFilter.track && i("log");
              break;
            case "RTM:MSG:RECV":
            case "RTM:MSG:SEND":
              t2.logFilter.debug && i("debug");
              break;
            case "RTM:DEBUG":
              t2.logFilter.debug && i("debug");
          }
        };
      }, jl, Sr = function(e) {
        return function(t2) {
          var n2 = 1 === jl || void 0 === e ? "" : "Ins#".concat(e, " ");
          return "".concat(n2).concat(t2);
        };
      }, kl = function(e, t2, n2) {
        var r = Sr(jl);
        return Rr("RTM:".concat(t2), n2, function(t3) {
          return e(r(t3));
        });
      }, tb = function() {
        return function(e) {
          function t2(e2, i) {
            var o = 2 < arguments.length && void 0 !== arguments[2] && arguments[2];
            W(this, t2);
            var a2 = r.call(this);
            if (m(n(a2), "logError", void 0), m(n(a2), "invokeTracker", void 0), m(n(a2), "resultTracker", void 0), m(n(a2), "errorTracker", void 0), m(n(a2), "eventTracker", void 0), m(n(a2), "info", void 0), m(n(a2), "warn", void 0), m(n(a2), "log", void 0), m(n(a2), "genLogger", void 0), m(n(a2), "loggerId", void 0), m(n(a2), "logger", void 0), m(n(a2), "name", void 0), a2.logger = e2, a2.name = i, a2.loggerId = e2.loggerId, a2.info = e2.info, a2.warn = e2.warn, a2.logError = e2.logError, a2.genLogger = e2.genLogger, a2.log = e2.genLogger("RTM:DEBUG", "<".concat(i, "> ")), a2.invokeTracker = e2.genTracker("Invoke"), a2.eventTracker = e2.genTracker("Event"), a2.resultTracker = e2.genTracker("Result"), a2.errorTracker = e2.genTracker("Error"), o) {
              var s = a2.emit.bind(n(a2));
              a2.emit = function() {
                for (var e3 = arguments.length, t3 = Array(e3), n2 = 0; n2 < e3; n2++) t3[n2] = arguments[n2];
                e3 = t3[0], n2 = t3.slice(1);
                var r2 = BC.includes(e3);
                a2.eventTracker.apply(a2, ["%s: ".concat(0 < n2.length ? "%s emitted with args: ".concat(n2.map(function() {
                  return "%o";
                })) : "%s emitted"), i, e3].concat(G(r2 ? n2.map(ye) : n2)));
                try {
                  s.apply(void 0, t3);
                } catch (t4) {
                  a2.logError("Caught in the callback function of the event %s", e3, t4);
                }
              };
            }
            return a2;
          }
          la(t2, e);
          var r = ma(t2);
          return t2;
        }(ea);
      }, DC = function(e) {
        return kl(console.log.bind(console), "INFO", e);
      }, EC = function(e) {
        return kl(console.warn.bind(console), "WARN", e);
      }, FC = function(e) {
        return kl(console.error.bind(console), "ERROR", e);
      }, Tr = function(e, t2) {
        return function(n2) {
          var r = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : "", i = Sr(e), o = console.debug.bind(console), a2 = Rr(n2, t2, function(e2) {
            return o(i(e2));
          });
          return function(e2) {
            for (var t3 = arguments.length, n3 = Array(1 < t3 ? t3 - 1 : 0), i2 = 1; i2 < t3; i2++) n3[i2 - 1] = arguments[i2];
            return a2.apply(void 0, [r + e2].concat(n3));
          };
        };
      }, GC = function(e, t2) {
        return function(n2) {
          return Tr(e, t2)("RTM:TRACK", "[".concat(n2, "] "));
        };
      }, Li = t.URI, eu = Oh, HC = ff(VB, ["Wrapper"]), $m = Gk(HC, "URI"), Ur = function(e, t2) {
        var n2 = -1, r = e.length, i = r - 1;
        for (t2 = void 0 === t2 ? r : t2; ++n2 < t2; ) {
          var o = e[r = nr(n2, i)];
          e[r] = e[n2], e[n2] = o;
        }
        return e.length = t2, e;
      }, IC = function(e) {
        return Ur(Xh(e));
      }, JC = function(e) {
        return Ur(Ni(e));
      }, $e = function(e) {
        return (Va(e) ? IC : JC)(e);
      }, af = { 0: 9591, 1: 9593 }, $d = function(e) {
        return "https://".concat(e, "/api/v1");
      }, KC = bb.apply(void 0, G($e(["web-1.ap.sd-rtn.com", "web-2.ap.sd-rtn.com"].map($d)))), LC = bb.apply(void 0, G($e(["ap-web-1.agora.io", "ap-web-2.agora.io"].map($d)))), MC = bb.apply(void 0, G($e(["web-3.ap.sd-rtn.com", "web-4.ap.sd-rtn.com"].map($d)))), NC = bb.apply(void 0, G($e(["ap-web-3.agora.io", "ap-web-4.agora.io"].map($d)))), ll = Ph(), ml = function(e) {
        function t2(e2, i, o, a2, s, u2) {
          W(this, t2);
          var c2 = r.call(this, s, Ai("Socket-", s.loggerId));
          if (m(n(c2), "isActiveClose", false), m(n(c2), "loggedIn", false), m(n(c2), "useNewDomain", void 0), m(n(c2), "receivedPacket", new Pa()), m(n(c2), "open$", void 0), m(n(c2), "input$", new Pa()), m(n(c2), "userJoin$", new Pa()), m(n(c2), "attemptsSinceLastError", 0), m(n(c2), "message$", new Pa()), m(n(c2), "socket$", void 0), m(n(c2), "toClose", new Pa()), m(n(c2), "toReconnect", new Pa()), m(n(c2), "sendLogger", void 0), m(n(c2), "receiveLogger", void 0), m(n(c2), "ip", void 0), m(n(c2), "env", void 0), m(n(c2), "ticket", void 0), m(n(c2), "context", void 0), m(n(c2), "getDomain", function() {
            return an(c2.ip, c2.useNewDomain);
          }), m(n(c2), "socketReconnector", function(e3) {
            var t3 = function(e4) {
              return c2.attemptsSinceLastError += 1, c2.warn("The %s of Env %d reconnecting %s", c2.name, c2.env, e4.message), Bc(3e3);
            };
            return e3.pipe(Ga(function(e4) {
              return c2.log("socket connection closed"), c2.loggedIn = false, 2 <= c2.attemptsSinceLastError ? (c2.warn("socket connection failure"), c2.emit("connectionFailure"), c2.close(), Z(e4)) : c2.isActiveClose ? vb : (c2.emit("reconnect"), c2.useNewDomain = !c2.useNewDomain, Z(e4));
            }), oe(function(e4) {
              return e4.pipe(Cc(t3));
            }));
          }), c2.ip = e2, c2.env = i, c2.ticket = o, c2.context = a2, c2.useNewDomain = null != u2 ? u2 : 0.5 <= Math.random(), c2.sendLogger = c2.genLogger("RTM:MSG:SEND"), c2.receiveLogger = c2.genLogger("RTM:MSG:RECV"), 0 !== i && 1 !== i) throw new ll({ ILLEGAL_RTM_ENV: "The env number is out of rtm env count" });
          if (!Gm(e2)) throw new ll({ IP_NOT_VALID: "The ip from ap is not valid" });
          var l = af[i];
          c2.log("Opening websocket address %s for the Env %d", c2.ip, c2.env);
          var f = Xb(c2.input$, c2.userJoin$.pipe(Rt(2)), c2.message$).pipe(ba(function(e3) {
            return Oh.encode(e3).finish();
          }));
          return e2 = Xb(St("", { protocols: [], makeWebSocket: function() {
            if (c2.context.config.enableCloudProxy) {
              if (0 === c2.context.cloudProxyServers.length) throw c2.logError("No cloud proxy server to connect"), new da();
              var e3 = "wss://".concat(an(bn(c2.context.cloudProxyServers), false), "/");
              e3 = we(e3, "sid", c2.context.sid), e3 = we(e3, "remote_port", l.toString()), e3 = we(e3, "remote_ip", c2.ip), e3 = we(e3, "token", c2.context.key), e3 = new WebSocket(e3);
            } else e3 = new WebSocket("wss://".concat(c2.getDomain(), ":").concat(l));
            return e3.binaryType = "arraybuffer", e3;
          } }), c2.toReconnect), c2.socket$ = Ca(e2, Tk.pipe(hb(15e3), Ga(function(e3) {
            return Sa(e3) && c2.warn("socket open timed out"), Z(e3);
          }))).pipe(ba(function(e3) {
            if (e3 instanceof Error) throw c2.warn("Env_%d: Force reconnect the socket", c2.env), e3;
            return e3(f).pipe(ba(function(e4) {
              return Oh.decode(new Uint8Array(e4));
            }));
          }), c2.socketReconnector), c2.open$ = c2.socket$.pipe(ca(function(e3) {
            c2.log("Websocket opened", c2.name), e3.subscribe(function(e4) {
              var t3 = e4.data;
              e4 = Li[e4.uri].slice(0, -3), t3 = $m[e4].decode(t3);
              var n2 = HA({}, Gk(t3, "toJSON"), function(e5, t4) {
                return t4 instanceof U ? Km(t4) : t4;
              }), r2 = false;
              if ((t3 instanceof vr || t3 instanceof ur) && t3.instance.lessThanOrEqual(4294967295) && (r2 = true), t3 instanceof wr || t3 instanceof xr) {
                var i2 = t3.instance, o2 = t3.sequence;
                (t3.dialogue.lessThanOrEqual(4294967295) || i2.lessThanOrEqual(4294967295) || o2.lessThan(1)) && (r2 = true);
              }
              r2 ? c2.warn("Env_%d: Illegal %s, abandoned %o", c2.env, e4, n2) : ("Pong" !== e4 && c2.receiveLogger("Env_%d: %s %o", c2.env, e4, n2), c2.receivedPacket.next([e4, t3]));
            }, function() {
            });
          }), qf(void 0), ob(c2.toClose), pe()), c2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "address", get: function() {
          return "".concat(this.ip, ":").concat(af[this.env]);
        } }, { key: "sendPacket", value: function(e2, t3) {
          if ("Ping" !== e2) {
            var n2 = uc(t3, function(e3) {
              return e3 instanceof U ? Km(e3) : e3;
            });
            this.sendLogger("Env_%d: %s %o", this.env, e2, n2);
          }
          t3 = du(e2, t3), "UserJoin" === e2 ? this.userJoin$.next(t3) : "Message" === e2 ? this.message$.next(t3) : this.input$.next(t3);
        } }, { key: "close", value: function() {
          this.isActiveClose = true, this.loggedIn = false, this.toClose.next();
        } }, { key: "fromReceived", value: function(e2) {
          var t3 = this;
          return this.receivedPacket.pipe(ca(function(e3) {
            var n2 = ra(e3, 2);
            e3 = n2[0], n2 = n2[1], "UserResp" === e3 && (t3.attemptsSinceLastError = 0, t3.loggedIn = true), "UserDrop" === e3 && t3.emit("socketUserDrop", n2);
          }), wb(function(t4) {
            return ra(t4, 1)[0] === e2;
          }), ba(function(e3) {
            return ra(e3, 2)[1];
          }));
        } }, { key: "forceReconnect", value: function() {
          this.toReconnect.next(new ll({ FORCE_RECONNECTING: "Connection seems broken, try force reconnecting" }));
        } }]), t2;
      }(tb());
      N({ target: "String", proto: true, forced: zr }, { padStart: function(e) {
        return XB(this, e, 1 < arguments.length ? arguments[1] : void 0);
      } });
      var OC = function(e) {
        var t2 = xf(Kg);
        e = Yt(e);
        for (var n2 = 0; n2 < t2.length; n2++) {
          var r = Kg[t2[n2]];
          if (null != r && r.AP_DOMAINS.includes(e) || null != r && r.AP_BACKUP_DOMAINS.includes(e) || null != r && r.PROXY_AP.includes(e)) return [r.CODE];
        }
        return [F.CHINA, F.GLOBAL];
      }, PC = { INVALID_APP_ID: "Illegal App ID", NO_AUTHORIZED: "Signature verification failed", TOKEN_TIMEOUT: "Dynamic key expired", INVALID_TOKEN_UID: "UID in the security key(token) is not valid", APP_ID_NO_ACTIVATED: "The vendor is not activated", DYNAMIC_KEY_NOT_ENABLED: "The vendor did not enable the dynamic key, but uses the dynamic key", DYNAMIC_ENABLED_BUT_STATIC_KEY: "The vendor enabled the dynamic key, but uses the static key", TOKEN_EXPIRED: "The token has expired", INVALID_USER_ID: "The user ID to login does not match the token", FORBIDDEN_REGION: "Forbidden to access the request in this area", CANNOT_MEET_AREA_DEMAND: "Cannot allocate to meet the requirements of the given area limit" }, Vr = { 5: "INVALID_APP_ID", 7: "INVALID_USER_ID", 9: "NO_AUTHORIZED", 10: "TOKEN_TIMEOUT", 11: "APP_ID_NO_ACTIVATED", 12: "INVALID_TOKEN_UID", 13: "TOKEN_EXPIRED", 14: "DYNAMIC_KEY_NOT_ENABLED", 15: "DYNAMIC_ENABLED_BUT_STATIC_KEY", 18: "FORBIDDEN_REGION", 19: "CANNOT_MEET_AREA_DEMAND" }, QC = [100, 101, 102], Qh = /web-(\d)/, Wr = function(e) {
        function t2(e2, i) {
          var o = 2 < arguments.length && void 0 !== arguments[2] && arguments[2];
          W(this, t2);
          var a2 = r.call(this, i, "AccessPoint");
          return m(n(a2), "handleUniLbsError", function(e3, t3) {
            var n2 = e3;
            if (4 < e3.toString().length) {
              var r2 = e3.toString().padStart(8, "0"), i2 = parseInt(r2.slice(0, 4), 10);
              if (r2 = parseInt(r2.slice(4, 8), 10), 201 === i2) n2 = r2;
              else if (101 === i2 && !QC.includes(r2)) return Z(Error("service is currently unavailable"));
            }
            if (i2 = n2.toString(), !Object.keys(Vr).includes(i2)) return (e3 = new da(["Login is rejected by the server. The response code is %d", e3], jg)).serverCode = n2, Z(e3);
            switch (i2 = Vr[i2], n2 = PC[i2], i2) {
              case "INVALID_APP_ID":
              case "APP_ID_NO_ACTIVATED":
                return (t3 = new Ye(n2, $q)).serverCode = e3, Z(t3);
              case "INVALID_USER_ID":
                return (t3 = new Ye(n2, Jh)).serverCode = e3, Z(t3);
              case "TOKEN_EXPIRED":
              case "TOKEN_TIMEOUT":
                return (t3 = new Ye(n2, Kh)).serverCode = e3, Z(t3);
              case "NO_AUTHORIZED":
              case "INVALID_TOKEN_UID":
              case "DYNAMIC_KEY_NOT_ENABLED":
              case "DYNAMIC_ENABLED_BUT_STATIC_KEY":
                return (t3 = new Ye(n2, ar)).serverCode = e3, Z(t3);
              case "CANNOT_MEET_AREA_DEMAND":
                return (t3 = OC(t3)).forEach(function(e4) {
                  return a2.failedAreas.add(e4);
                }), a2.failedAreas.size === (void 0 === M ? 2 : M.CODES.size) ? ((t3 = new I(n2, jg)).serverCode = e3, Z(t3)) : Z(Error("ap ".concat(t3.join(", "), " cannot meet requirement")));
              case "FORBIDDEN_REGION":
                return (t3 = new da(n2, jg)).serverCode = e3, Z(t3);
              default:
                return Z(Im("ApResErrType", i2));
            }
          }), m(n(a2), "getApEdgeInfo$", void 0), m(n(a2), "getApEdgeInfoEndFirst$", void 0), m(n(a2), "apFinish$", new Pa()), m(n(a2), "retryCount", 0), m(n(a2), "failedAreas", /* @__PURE__ */ new Set()), m(n(a2), "usedUrl", []), m(n(a2), "newDomainUsed", false), m(n(a2), "backupNewDomainUsed", false), m(n(a2), "genUrl", function() {
            return void 0 === M ? mi.apply(void 0, G($e([KC, LC]))).pipe(ni(function(e3) {
              return bb.apply(void 0, G(e3));
            })) : bb.apply(void 0, G(M.AP_DOMAINS.slice(0, 3).map($d)));
          }), m(n(a2), "genBackupUrl", function() {
            return void 0 === M ? mi.apply(void 0, G($e([MC, NC]))).pipe(ni(function(e3) {
              return bb.apply(void 0, G(e3));
            })) : bb.apply(void 0, G(M.AP_BACKUP_DOMAINS.slice(0, 3).map($d)));
          }), m(n(a2), "getApUrl$", function(e3) {
            var n2, r2;
            return a2.genUrl().pipe(wb(function(e4) {
              return (!a2.newDomainUsed || !e4.includes("sd-rtn.com")) && (e4.includes("sd-rtn.com") && (a2.newDomainUsed = true), !dl(a2.usedUrl, function(t3) {
                var n3;
                return t3 === (null === (n3 = e4.match(Qh)) || void 0 === n3 ? void 0 : n3[1]);
              }));
            }), ca(function(e4) {
              var t3;
              void 0 === M && ("string" == typeof (e4 = null === (t3 = e4.match(Qh)) || void 0 === t3 ? void 0 : t3[1]) && a2.usedUrl.push(e4));
            }), Ka(e3 ? Math.max(Nc.RECONNECTING_AP_NUM, null !== (n2 = null == M ? void 0 : M.CODES.size) && void 0 !== n2 ? n2 : 0) : null !== (r2 = null == M ? void 0 : M.CODES.size) && void 0 !== r2 ? r2 : 2), Dd(function() {
              return t2.runOutOfUrlSymbol;
            }), Ga(function(e4, n3) {
              return a2.newDomainUsed = false, e4 === t2.runOutOfUrlSymbol ? (a2.usedUrl = [], n3) : Z(e4);
            }));
          }), m(n(a2), "getBackupApUrl$", function(e3) {
            var n2, r2;
            return a2.genBackupUrl().pipe(wb(function(e4) {
              return (!a2.backupNewDomainUsed || !e4.includes("sd-rtn.com")) && (e4.includes("sd-rtn.com") && (a2.backupNewDomainUsed = true), !dl(a2.usedUrl, function(t3) {
                var n3;
                return t3 === (null === (n3 = e4.match(Qh)) || void 0 === n3 ? void 0 : n3[1]);
              }));
            }), ca(function(e4) {
              var t3;
              void 0 === M && ("string" == typeof (e4 = null === (t3 = e4.match(Qh)) || void 0 === t3 ? void 0 : t3[1]) && a2.usedUrl.push(e4));
            }), Ka(e3 ? Math.max(Nc.RECONNECTING_AP_NUM, null !== (n2 = null == M ? void 0 : M.CODES.size) && void 0 !== n2 ? n2 : 0) : null !== (r2 = null == M ? void 0 : M.CODES.size) && void 0 !== r2 ? r2 : 2), Dd(function() {
              return t2.runOutOfUrlSymbol;
            }), Ga(function(e4, n3) {
              return a2.backupNewDomainUsed = false, e4 === t2.runOutOfUrlSymbol ? (a2.usedUrl = [], n3) : Z(e4);
            }));
          }), m(n(a2), "getProxyApUrl$", function(e3) {
            var t3, n2;
            return bb.apply(void 0, G(((null == M ? void 0 : M.PROXY_AP.slice(0, 3)) || ["ap-proxy-1.agora.io", "ap-proxy-2.agora.io"]).map($d))).pipe(Ka(e3 ? Math.max(Nc.RECONNECTING_AP_NUM, null !== (t3 = null == M ? void 0 : M.CODES.size) && void 0 !== t3 ? t3 : 0) : null !== (n2 = null == M ? void 0 : M.CODES.size) && void 0 !== n2 ? n2 : 2));
          }), m(n(a2), "context", void 0), m(n(a2), "fetchCloudProxy", function(e3, t3) {
            var n2 = Ai("AP-", a2.loggerId);
            a2.log("The AccessPoint requests %s(%s)", e3, n2);
            var r2 = new AbortController();
            return a2.apFinish$.pipe(Ka(1)).subscribe(function() {
              return r2.abort();
            }), ad(J(w.mark(function i2() {
              var o2;
              return w.wrap(function(i3) {
                for (; ; ) switch (i3.prev = i3.next) {
                  case 0:
                    return o2 = Ag(0, Number.MAX_SAFE_INTEGER), a2.log("%s request opid: %d", n2, o2), i3.abrupt("return", te(e3, { headers: { "X-Packet-Service-Type": "0", "X-Packet-URI": "90", "Content-Type": "application/json" }, body: { sid: a2.context.sid, opid: o2, appid: a2.context.appId, client_ts: Math.ceil(Date.now() / 1e3), request_bodies: [{ uri: 22, buffer: { service_ids: [7, 16], key: null != t3 ? t3 : a2.context.key, cname: a2.context.uid, uid: 0, detail: ua({}, void 0 === M ? { 11: [F.CHINA, F.GLOBAL].join() } : { 11: Array.from(M.CODES).map(function(e4) {
                      return e4 === F.OVERSEA ? "".concat(F.ASIA, ",").concat(F.EUROPE, ",").concat(F.AFRICA, ",").concat(F.NORTH_AMERICA, ",").concat(F.SOUTH_AMERICA, ",").concat(F.OCEANIA) : e4;
                    }).join(",") }) } }] }, signal: r2.signal }));
                  case 3:
                  case "end":
                    return i3.stop();
                }
              }, i2);
            }))).pipe(Ga(function(t4) {
              return "AbortError" !== t4.name && (a2.logError(t4), a2.warn("The AP server %s request failure", e3, t4)), vb;
            }), cb(function() {
              var t4 = J(w.mark(function t5(r3) {
                var i2, o2, s, u2, c2, l, f, h, p, d, v2, b, g, y2, m2, E2, _, O2, I2;
                return w.wrap(function(t6) {
                  for (; ; ) switch (t6.prev = t6.next) {
                    case 0:
                      if (i2 = r3.responseText, o2 = JSON.parse(i2), a2.log("The %s response is %o", n2, o2), (void 0 === (s = o2.response_body) || 0 === s.length || s.some(function(e4) {
                        var t7;
                        return void 0 === (null === (t7 = e4.buffer) || void 0 === t7 ? void 0 : t7.code) || 23 !== e4.uri;
                      })) && Z(new da("cloud proxy response_body not valid", jg)), 0 === (u2 = s.filter(function(e4) {
                        return 0 !== e4.buffer.code;
                      })).length) {
                        t6.next = 14;
                        break;
                      }
                      if (void 0 === (c2 = u2.find(function(e4) {
                        return 128 === e4.buffer.flag;
                      }))) {
                        t6.next = 12;
                        break;
                      }
                      return t6.abrupt("return", a2.handleUniLbsError(c2.buffer.code, e3));
                    case 12:
                      return a2.logError("cloud proxy error response"), t6.abrupt("return", a2.handleUniLbsError(u2[0].buffer.code, e3));
                    case 14:
                      for (l = [], f = 0; f < s.length; f++) if (262144 === (null == (d = s[f]) || null === (h = d.buffer) || void 0 === h ? void 0 : h.flag)) null === (v2 = d.buffer) || void 0 === v2 || null === (b = v2.edges_services) || void 0 === b || null === (g = b.forEach) || void 0 === g || g.call(b, function(e4) {
                        Gm(e4 = e4.ip) && -1 === a2.context.cloudProxyServers.indexOf(e4) && (a2.log("got cloud proxy server: %s", e4), a2.context.cloudProxyServers.push(e4));
                      });
                      else if (128 === (null == d || null === (p = d.buffer) || void 0 === p ? void 0 : p.flag)) {
                        for (_ = function(e4, t7) {
                          var n3 = t7[e4];
                          l.some(function(e5) {
                            return e5.ip === n3.ip;
                          }) || l.push({ ip: n3.ip, ticket: d.buffer.cert });
                        }, O2 = 0, I2 = d.buffer.edges_services; O2 < I2.length; O2++) _(O2, I2);
                        a2.context.rtmArea = null !== (y2 = null === (m2 = d.buffer) || void 0 === m2 || null === (E2 = m2.detail) || void 0 === E2 ? void 0 : E2[9]) && void 0 !== y2 ? y2 : "";
                      }
                      return t6.abrupt("return", bb.apply(void 0, G(l).concat([fg])));
                    case 19:
                    case "end":
                      return t6.stop();
                  }
                }, t5);
              }));
              return function(e4) {
                return t4.apply(this, arguments);
              };
            }()), Ga(function(e4) {
              return sa(e4) ? Z(e4) : vb;
            }), tg(), wb(function(e4) {
              return void 0 !== e4 && "string" == typeof e4.ip && "string" == typeof e4.ticket;
            }));
          }), m(n(a2), "fetchAp", function(e3, t3) {
            var n2 = Ai("AP-", a2.loggerId);
            a2.log("The AccessPoint requests %s(%s)", e3, n2);
            var r2 = new AbortController();
            return a2.apFinish$.pipe(Ka(1)).subscribe(function() {
              return r2.abort();
            }), ad(J(w.mark(function i2() {
              var o2;
              return w.wrap(function(i3) {
                for (; ; ) switch (i3.prev = i3.next) {
                  case 0:
                    return o2 = Ag(0, Number.MAX_SAFE_INTEGER), a2.log("%s request opid: %d", n2, o2), i3.abrupt("return", te(e3, { headers: { "X-Packet-Service-Type": "0", "X-Packet-URI": "69", "Content-Type": "application/json" }, body: { flag: 128, opid: o2, key: t3 || a2.context.key, cname: a2.context.uid, detail: ua({}, void 0 === M ? { 11: [F.CHINA, F.GLOBAL].join() } : { 11: Array.from(M.CODES).map(function(e4) {
                      return e4 === F.OVERSEA ? "".concat(F.ASIA, ",").concat(F.EUROPE, ",").concat(F.AFRICA, ",").concat(F.NORTH_AMERICA, ",").concat(F.SOUTH_AMERICA, ",").concat(F.OCEANIA) : e4;
                    }).join(",") }), uid: 0, sid: a2.context.sid }, signal: r2.signal }));
                  case 3:
                  case "end":
                    return i3.stop();
                }
              }, i2);
            }))).pipe(Ga(function(t4) {
              return "AbortError" !== t4.name && (a2.logError(t4), a2.warn("The AP server %s request failure", e3, t4)), vb;
            }), cb(function() {
              var t4 = J(w.mark(function t5(r3) {
                var i2, o2, s, u2, c2, l, f;
                return w.wrap(function(t6) {
                  for (; ; ) switch (t6.prev = t6.next) {
                    case 0:
                      if (i2 = r3.responseText, o2 = JSON.parse(i2), a2.log("The %s response is %o", n2, o2), u2 = (s = o2).code, c2 = s.addresses, l = s.detail, 0 === u2) {
                        t6.next = 6;
                        break;
                      }
                      return t6.abrupt("return", a2.handleUniLbsError(u2, e3));
                    case 6:
                      if (0 !== (f = c2).length) {
                        t6.next = 11;
                        break;
                      }
                      return t6.abrupt("return", Z(Error("No available edge address to connect")));
                    case 11:
                      return a2.context.rtmArea = null == l ? void 0 : l[9], t6.abrupt("return", bb.apply(void 0, G(f).concat([fg])));
                    case 13:
                    case "end":
                      return t6.stop();
                  }
                }, t5);
              }));
              return function(e4) {
                return t4.apply(this, arguments);
              };
            }()), tg(), Ga(function(e4) {
              return sa(e4) ? Z(e4) : vb;
            }), wb(function(e4) {
              return void 0 !== e4 && "string" == typeof e4.ip && "string" == typeof e4.ticket;
            }));
          }), a2.context = e2, a2.getApEdgeInfoEndFirst$ = function() {
            var e3 = 0 < arguments.length && void 0 !== arguments[0] && arguments[0];
            return Bc(0, e3 || o ? Nc.RECONNECTING_AP_INTERVAL : 2e3).pipe(Ka(1), ca(function() {
              a2.retryCount += 1;
            }), cb(function() {
              return a2.context.config.enableCloudProxy ? a2.getProxyApUrl$(e3 || o) : (4 <= a2.retryCount && (a2.retryCount = 0), 3 >= a2.retryCount ? a2.getApUrl$(e3 || o) : a2.getBackupApUrl$(e3 || o));
            }), cb(function(e4) {
              return a2.context.config.enableCloudProxy ? a2.fetchCloudProxy(e4) : a2.fetchAp(e4);
            }), Ga(function(e4) {
              return e4 instanceof pb && a2.warn("AP request timeout"), Z(e4);
            }), om(function(e4) {
              return e4.ip;
            }), ob(a2.apFinish$));
          }, a2.getApEdgeInfo$ = function(e3) {
            return Bc(0, e3 || o ? Nc.RECONNECTING_AP_INTERVAL : 2e3).pipe(Ka(8), ca(function() {
              a2.retryCount += 1;
            }), cb(function() {
              return a2.context.config.enableCloudProxy ? a2.getProxyApUrl$(e3 || o) : 3 >= a2.retryCount ? a2.getApUrl$(e3 || o) : a2.getBackupApUrl$(e3 || o);
            }), cb(function(e4) {
              return (a2.context.config.enableCloudProxy ? a2.fetchCloudProxy(e4) : a2.fetchAp(e4)).pipe();
            }), Ga(function(e4) {
              return e4 instanceof pb && a2.warn("AP request timeout"), Z(e4);
            }), om(function(e4) {
              return e4.ip;
            }), ob(a2.apFinish$));
          }, a2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "clearUp", value: function() {
          this.failedAreas.clear(), this.retryCount = 0;
        } }]), t2;
      }(tb());
      m(Wr, "runOutOfUrlSymbol", Symbol("AP urls are used up"));
      var Xr = Ph(), Yr = function(e) {
        function t2(e2, i, o) {
          W(this, t2);
          var a2 = r.call(this, i, "Connection");
          m(n(a2), "apClient", void 0), m(n(a2), "lastOpenSockets", [new qe(1), new qe(1)]), m(n(a2), "curOpenSockets", [void 0, void 0]), m(n(a2), "ipIterator", 0), m(n(a2), "firstEnv", 0.5 <= Math.random() ? 1 : 0), m(n(a2), "firstSocketOpener", void 0), m(n(a2), "secondSocketOpener", void 0), m(n(a2), "firstOpenKeeperSubject", new Pa()), m(n(a2), "secondOpenKeeperSubject", new Pa()), m(n(a2), "edgeInfoReplayed", void 0), m(n(a2), "firstEnvOpenSocket", void 0), m(n(a2), "firstOpenKeeperSub", void 0), m(n(a2), "secondOpenKeeperSub", void 0), m(n(a2), "context", void 0), m(n(a2), "logger", void 0), a2.context = e2, a2.logger = i, a2.apClient = new Wr(a2.context, i), a2.apClient.apFinish$.subscribe(function() {
            a2.log("Ap client fetch finished");
          });
          var s, u2 = [];
          return a2.edgeInfoReplayed = a2.apClient.getApEdgeInfo$(o).pipe(oe(function(e3) {
            return e3.pipe(ca(function(e4) {
              if (sa(e4)) throw e4;
            }), cd(o ? Zd.getParameter("RECONNECTING_AP_INTERVAL") : 900), ob(Bc(2e4)));
          }), wb(function(e3) {
            return !dl(u2, e3);
          }), Dd(function() {
            return new Xr({ AP_NO_AVAILABLE_EDGE: "No available edge address to connect" });
          }), ca(function(e3) {
            u2.push(e3), a2.log("An edge info got %o", e3);
          }), ca({ error: function(e3) {
            a2.emit("connectionInitFailure", e3);
          } }), wg(function() {
            a2.apClient.clearUp();
          }), sm()), a2.firstEnvOpenSocket = a2.edgeInfoReplayed.pipe(cb(function(e3) {
            if (void 0 === e3) return Z(Error("Invalid edge info"));
            var t3 = new ml(e3.ip, a2.firstEnv, e3.ticket, a2.context, i, s);
            return a2.firstEnv = 1 === a2.firstEnv ? 0 : 1, t3.on("connectionFailure", function() {
              return a2.onSocketConnectionFailure(t3);
            }), s = !t3.useNewDomain, t3.open$.pipe(qf(t3));
          }), ca(function(e3) {
            a2.log("The websocket of ENV_%d opened to %s:%d", e3.env, e3.ip, af[e3.env]), a2.curOpenSockets[e3.env] = e3, a2.lastOpenSockets[e3.env].next(e3), a2.firstEnv = e3.env, a2.openSecondSocket(e3.env, e3.ip, e3.useNewDomain);
          }), Ka(1), pe()), a2.firstSocketOpener = a2.firstEnvOpenSocket.pipe(cb(function(e3) {
            return e3.open$.pipe(ca(function() {
              a2.log("The websocket of first ENV_%d re-opened to %s:%d", e3.env, e3.ip, af[e3.env]), a2.curOpenSockets[e3.env] = e3, a2.lastOpenSockets[e3.env].next(e3);
            }));
          })), e2 = a2.firstOpenKeeperSubject.pipe(Cc(Yc)), a2.firstOpenKeeperSub = e2.subscribe({ error: a2.logError }), a2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "initConnection", value: function() {
          this.firstOpenKeeperSubject.next(this.firstSocketOpener);
        } }, { key: "closeSocket", value: function(e2, t3) {
          if (![0, 1].includes(e2)) throw new Fa({ INVALID_ENV: "The env argument is not 0 or 1" });
          var n2 = e2 === this.firstEnv ? this.firstOpenKeeperSub : this.secondOpenKeeperSub;
          this.firstOpenKeeperSub = void 0;
          var r2 = this.curOpenSockets[e2];
          this.curOpenSockets[e2] = void 0, r2 && (r2.isActiveClose = true, setTimeout(function() {
            r2.close();
          }, t3)), void 0 !== n2 && setTimeout(function() {
            null == n2 || n2.unsubscribe();
          }, t3);
        } }, { key: "waitClosing", value: function(e2) {
          var t3 = this;
          return e2.isActiveClose = true, e2.open$.pipe(tt(), Ga(function(e3) {
            return e3.message === mr.normalClosureMessage ? vb : Z(e3);
          }), hb(5e3), Ga(function(n2) {
            return n2 instanceof pb ? (t3.warn("Force closing the ENV_%d connection", e2.env), vb) : Z(n2);
          }));
        } }, { key: "onSocketConnectionFailure", value: function(e2) {
          var t3 = [0, 1].filter(function(t4) {
            return t4 !== e2.env;
          })[0];
          (t3 = this.curOpenSockets[t3]) && t3.loggedIn ? this.reopenSocketWithApRequest(e2.env) : this.emit("socketsFailure");
        } }, { key: "openSecondSocket", value: function(e2, t3, n2) {
          var r2 = this, i = 1 === e2 ? 0 : 1;
          this.secondSocketOpener = this.edgeInfoReplayed.pipe(rm(function(e3, t4) {
            return [].concat(G(e3), [t4]);
          }, []), ba(function(e3) {
            return kr(e3, function(e4) {
              return Jm(t3, e4.ip);
            }).slice(-1)[0];
          }), Ka(1), cb(function(e3) {
            if (void 0 === e3) return Z(Error("Invalid edge info"));
            var t4 = new ml(e3.ip, i, e3.ticket, r2.context, r2.logger, n2);
            return t4.on("connectionFailure", function() {
              return r2.onSocketConnectionFailure(t4);
            }), t4.open$.pipe(ca(function() {
              r2.lastOpenSockets[i].next(t4), r2.curOpenSockets[i] = t4;
            }));
          }), pe()), this.secondOpenKeeperSub = this.secondOpenKeeperSubject.pipe(Cc(Yc)).subscribe({ error: this.logError }), this.secondOpenKeeperSubject.next(this.secondSocketOpener);
        } }, { key: "reopenSocketWithApRequest", value: function(e2) {
          var t3 = this, n2 = [0, 1].filter(function(t4) {
            return t4 !== e2;
          })[0];
          if (void 0 !== (n2 = this.curOpenSockets[n2])) {
            var r2, i = n2.ip;
            n2 = this.apClient.getApEdgeInfoEndFirst$(true).pipe(Dd(function() {
              return new Xr({ AP_NO_AVAILABLE_EDGE: "No available edge address to connect" });
            }), oe(function(e3) {
              return e3.pipe(ca(function(e4) {
                if (e4.code === Kh) t3.emit("tokenExpired"), t3.apClient.apFinish$.next(void 0);
                else if (sa(e4)) throw e4;
              }), cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")), ob(Bc(15e3)));
            }), ca(function(e3) {
              t3.log("An edge info got %o", e3);
            }), wg(function() {
              t3.apClient.clearUp();
            })).pipe(rm(function(e3, t4) {
              return [].concat(G(e3), [t4]);
            }, []), ba(function(e3) {
              return (e3 = kr(e3, function(e4) {
                return Jm(i, e4.ip);
              })).length - 1 >= t3.ipIterator ? e3.slice(-t3.ipIterator++ - 1)[0] : (t3.ipIterator = 0, e3.slice(-1)[0]);
            }), Dd(), cb(function(n3) {
              if (void 0 === n3) return Z(Error("Invalid edge info"));
              var i2 = new ml(n3.ip, e2, n3.ticket, t3.context, t3.logger, r2);
              return i2.on("connectionFailure", function() {
                return t3.onSocketConnectionFailure(i2);
              }), r2 = !i2.useNewDomain, i2.open$.pipe(qf(i2));
            }), ca(function(n3) {
              t3.log("The websocket of ENV_%d re-opened to %s:%d using ap", n3.env, n3.ip, af[n3.env]), t3.curOpenSockets[e2] = n3, t3.lastOpenSockets[e2].next(n3);
            }), cb(function(n3) {
              return n3.open$.pipe(ca(function() {
                t3.log("The websocket of ENV_%d re-opened to %s:%d", n3.env, n3.ip, af[n3.env]), t3.curOpenSockets[e2] = n3, t3.lastOpenSockets[e2].next(n3);
              }));
            }), pe()), e2 === this.firstEnv ? this.firstOpenKeeperSubject.next(n2) : this.secondOpenKeeperSubject.next(n2);
          }
        } }]), t2;
      }(tb()), Xc = fc.Writer, na = fc.util, zc = fc.roots.default || (fc.roots.default = {}), RC = zc.Session = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.appId = "", e.prototype.ver = "", e.prototype.buildno = 0, e.prototype.installId = "", e.prototype.os = 0, e.prototype.did = "", e.prototype.index = null, e.prototype.token = "", e.prototype.version = 0, e.prototype.subVersion = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.appId && Object.hasOwnProperty.call(e2, "appId") && t2.uint32(42).string(e2.appId), null != e2.ver && Object.hasOwnProperty.call(e2, "ver") && t2.uint32(50).string(e2.ver), null != e2.buildno && Object.hasOwnProperty.call(e2, "buildno") && t2.uint32(56).int32(e2.buildno), null != e2.installId && Object.hasOwnProperty.call(e2, "installId") && t2.uint32(66).string(e2.installId), null != e2.os && Object.hasOwnProperty.call(e2, "os") && t2.uint32(128).int32(e2.os), null != e2.did && Object.hasOwnProperty.call(e2, "did") && t2.uint32(138).string(e2.did), null != e2.index && Object.hasOwnProperty.call(e2, "index") && zc.Session.CommonIndex.encode(e2.index, t2.uint32(162).fork()).ldelim(), null != e2.token && Object.hasOwnProperty.call(e2, "token") && t2.uint32(170).string(e2.token), null != e2.version && Object.hasOwnProperty.call(e2, "version") && t2.uint32(176).int32(e2.version), null != e2.subVersion && Object.hasOwnProperty.call(e2, "subVersion") && t2.uint32(184).int32(e2.subVersion), t2;
        }, e.CommonIndex = function() {
          function e2(e3) {
            if (e3) for (var t2 = Object.keys(e3), n2 = 0; n2 < t2.length; ++n2) null != e3[t2[n2]] && (this[t2[n2]] = e3[t2[n2]]);
          }
          return e2.prototype.index1 = "", e2.prototype.index2 = "", e2.prototype.index3 = "", e2.encode = function(e3, t2) {
            return t2 || (t2 = Xc.create()), null != e3.index1 && Object.hasOwnProperty.call(e3, "index1") && t2.uint32(10).string(e3.index1), null != e3.index2 && Object.hasOwnProperty.call(e3, "index2") && t2.uint32(18).string(e3.index2), null != e3.index3 && Object.hasOwnProperty.call(e3, "index3") && t2.uint32(26).string(e3.index3), t2;
          }, e2;
        }(), e;
      }(), SC = zc.Link = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.ec = 0, e.prototype.sc = 0, e.prototype.destServerIp = "", e.prototype.ackedServerIp = "", e.prototype.responseTime = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.ec && Object.hasOwnProperty.call(e2, "ec") && t2.uint32(40).int32(e2.ec), null != e2.sc && Object.hasOwnProperty.call(e2, "sc") && t2.uint32(48).int32(e2.sc), null != e2.destServerIp && Object.hasOwnProperty.call(e2, "destServerIp") && t2.uint32(58).string(e2.destServerIp), null != e2.ackedServerIp && Object.hasOwnProperty.call(e2, "ackedServerIp") && t2.uint32(66).string(e2.ackedServerIp), null != e2.responseTime && Object.hasOwnProperty.call(e2, "responseTime") && t2.uint32(72).int32(e2.responseTime), t2;
        }, e;
      }(), TC = zc.Logout = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), t2;
        }, e;
      }(), UC = zc.KickedOff = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.linkId = 0, e.prototype.code = 0, e.prototype.server = "", e.prototype.serverCode = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.linkId && Object.hasOwnProperty.call(e2, "linkId") && t2.uint32(48).int32(e2.linkId), null != e2.code && Object.hasOwnProperty.call(e2, "code") && t2.uint32(56).int32(e2.code), null != e2.server && Object.hasOwnProperty.call(e2, "server") && t2.uint32(66).string(e2.server), null != e2.serverCode && Object.hasOwnProperty.call(e2, "serverCode") && t2.uint32(72).int32(e2.serverCode), t2;
        }, e;
      }(), VC = zc.ChnJoin = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.cname = "", e.prototype.errCode = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.cname && Object.hasOwnProperty.call(e2, "cname") && t2.uint32(50).string(e2.cname), null != e2.errCode && Object.hasOwnProperty.call(e2, "errCode") && t2.uint32(56).int32(e2.errCode), t2;
        }, e;
      }(), WC = zc.ChnJoinRes = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.cname = "", e.prototype.errCode = 0, e.prototype.serverErrCode = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.cname && Object.hasOwnProperty.call(e2, "cname") && t2.uint32(50).string(e2.cname), null != e2.errCode && Object.hasOwnProperty.call(e2, "errCode") && t2.uint32(56).int32(e2.errCode), null != e2.serverErrCode && Object.hasOwnProperty.call(e2, "serverErrCode") && t2.uint32(64).int32(e2.serverErrCode), t2;
        }, e;
      }(), XC = zc.ChnLeave = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.cname = "", e.prototype.errCode = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.cname && Object.hasOwnProperty.call(e2, "cname") && t2.uint32(50).string(e2.cname), null != e2.errCode && Object.hasOwnProperty.call(e2, "errCode") && t2.uint32(56).int32(e2.errCode), t2;
        }, e;
      }(), YC = zc.ConnectionStateChange = function() {
        function e(e2) {
          if (e2) for (var t2 = Object.keys(e2), n2 = 0; n2 < t2.length; ++n2) null != e2[t2[n2]] && (this[t2[n2]] = e2[t2[n2]]);
        }
        return e.prototype.sid = "", e.prototype.userId = "", e.prototype.lts = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.elapse = na.Long ? na.Long.fromBits(0, 0, false) : 0, e.prototype.oldState = 0, e.prototype.newState = 0, e.prototype.reason = 0, e.prototype.reconnId = 0, e.encode = function(e2, t2) {
          return t2 || (t2 = Xc.create()), null != e2.sid && Object.hasOwnProperty.call(e2, "sid") && t2.uint32(10).string(e2.sid), null != e2.userId && Object.hasOwnProperty.call(e2, "userId") && t2.uint32(18).string(e2.userId), null != e2.lts && Object.hasOwnProperty.call(e2, "lts") && t2.uint32(24).int64(e2.lts), null != e2.elapse && Object.hasOwnProperty.call(e2, "elapse") && t2.uint32(32).int64(e2.elapse), null != e2.oldState && Object.hasOwnProperty.call(e2, "oldState") && t2.uint32(40).int32(e2.oldState), null != e2.newState && Object.hasOwnProperty.call(e2, "newState") && t2.uint32(48).int32(e2.newState), null != e2.reason && Object.hasOwnProperty.call(e2, "reason") && t2.uint32(56).int32(e2.reason), null != e2.reconnId && Object.hasOwnProperty.call(e2, "reconnId") && t2.uint32(64).int32(e2.reconnId), t2;
        }, e;
      }(), fu = Object.freeze({ __proto__: null, Session: RC, Link: SC, Logout: TC, KickedOff: UC, ChnJoin: VC, ChnJoinRes: WC, ChnLeave: XC, ConnectionStateChange: YC, default: zc }), gu = Object.freeze({ __proto__: null, Counter: 1, ApiExec: 154, Session: 164, ApEvent: 165, Link: 166, Logout: 167, TxMessage: 168, RxMessage: 169, KickedOff: 170, TxMessageRes: 171, ChnJoin: 172, ChnJoinRes: 173, ChnLeave: 174, ChnGetMembers: 175, ChnGetMembersRes: 176, ChnMemberJoined: 177, ChnMemberLeft: 178, QueryPeersOnlineStatus: 179, QueryPeersOnlineStatusRes: 180, RenewToken: 181, OperateAttribute: 186, OperateAttributeRes: 187, ApRequest: 188, LinkTcpEvent: 189, LinkLoginRequest: 190, ConnectionStateChange: 191, default: { Counter: 1, ApiExec: 154, Session: 164, ApEvent: 165, Link: 166, Logout: 167, TxMessage: 168, RxMessage: 169, KickedOff: 170, TxMessageRes: 171, ChnJoin: 172, ChnJoinRes: 173, ChnLeave: 174, ChnGetMembers: 175, ChnGetMembersRes: 176, ChnMemberJoined: 177, ChnMemberLeft: 178, QueryPeersOnlineStatus: 179, QueryPeersOnlineStatusRes: 180, RenewToken: 181, OperateAttribute: 186, OperateAttributeRes: 187, ApRequest: 188, LinkTcpEvent: 189, LinkLoginRequest: 190, ConnectionStateChange: 191 } }), ZC = function(e) {
        function t2(e2, i, o) {
          return W(this, t2), m(n(o = r.call(this, o, "Context")), "_token", void 0), m(n(o), "config", void 0), m(n(o), "_uid", void 0), m(n(o), "_sid", void 0), m(n(o), "_area", "CN"), m(n(o), "appId", void 0), m(n(o), "enableCloudProxy", false), m(n(o), "cloudProxyServers", []), o.appId = e2, o.config = i, o;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "token", set: function(e2) {
          this._token = "string" == typeof e2 && e2 ? e2 : void 0;
        } }, { key: "uid", get: function() {
          if ("string" == typeof this._uid && this._uid) return this._uid;
          throw new Ia("Cannot get illegal uid");
        }, set: function(e2) {
          if (this.log("The user ID is set to %s", oa(e2)), !za(e2)) throw new Ia();
          this._uid = e2;
        } }, { key: "key", get: function() {
          if ("string" == typeof this._token && this._token) return this._token;
          if ("string" == typeof this.appId && this.appId) return this.appId;
          throw new Ia("Cannot get illegal key");
        } }, { key: "sid", get: function() {
          if ("string" == typeof this._sid && this._sid) return this._sid;
          throw new Ia("Cannot get illegal sid");
        }, set: function(e2) {
          if (this.log("sid is set to %s", e2), "string" != typeof e2 || !e2) throw new Ia();
          this._sid = e2;
        } }, { key: "rtmArea", get: function() {
          if ("string" == typeof this._area && this._area) return this._area;
          throw new Ia("Cannot get illegal area");
        }, set: function(e2) {
          this.log("area is set to %s", e2), "string" == typeof e2 && e2 ? this._area = e2 : this.warn("set area failed");
        } }]), t2;
      }(tb()), $C = !!Fc && R(function() {
        Fc.prototype.finally.call({ then: function() {
        } }, function() {
        });
      });
      if (N({ target: "Promise", proto: true, real: true, forced: $C }, { finally: function(e) {
        var t2 = kd(this, mc("Promise")), n2 = "function" == typeof e;
        return this.then(n2 ? function(n3) {
          return mj(t2, e()).then(function() {
            return n3;
          });
        } : e, n2 ? function(n3) {
          return mj(t2, e()).then(function() {
            throw n3;
          });
        } : e);
      } }), "function" == typeof Fc) {
        var Zr = mc("Promise").prototype.finally;
        Fc.prototype.finally !== Zr && Ta(Fc.prototype, "finally", Zr, { unsafe: true });
      }
      var aD = function() {
        var e = J(w.mark(function e2(t2) {
          return w.wrap(function(e3) {
            for (; ; ) switch (e3.prev = e3.next) {
              case 0:
                return e3.t0 = Uint8Array, e3.next = 3, crypto.subtle.digest("SHA-256", t2);
              case 3:
                return e3.t1 = e3.sent, e3.abrupt("return", new e3.t0(e3.t1));
              case 5:
              case "end":
                return e3.stop();
            }
          }, e2);
        }));
        return function(t2) {
          return e.apply(this, arguments);
        };
      }(), $r = function(e) {
        return Array.from(e).map(function(e2) {
          return e2.toString(16).padStart(2, "0");
        }).join("");
      }, bD = function(e) {
        if ("string" != typeof e) throw new TypeError("Expected input to be a string");
        if (0 != e.length % 2) throw new RangeError("Expected string to be an even number of characters");
        for (var t2 = new Uint8Array(e.length / 2), n2 = 0; n2 < e.length; n2 += 2) t2[n2 / 2] = parseInt(e.substring(n2, n2 + 2), 16);
        return t2;
      }, as = function(e) {
        return btoa(String.fromCharCode.apply(String, G(e))).replace(/={1,2}$/, "");
      }, bs = function() {
        var e = J(w.mark(function e2(t2) {
          var n2;
          return w.wrap(function(e3) {
            for (; ; ) switch (e3.prev = e3.next) {
              case 0:
                return e3.prev = 0, e3.next = 3, crypto.subtle.digest("SHA-1", t2);
              case 3:
                n2 = e3.sent, e3.next = 9;
                break;
              case 6:
                e3.prev = 6, e3.t0 = e3.catch(0), n2 = sha1.arrayBuffer(t2);
              case 9:
                return e3.abrupt("return", as(new Uint8Array(n2)));
              case 10:
              case "end":
                return e3.stop();
            }
          }, e2, null, [[0, 6]]);
        }));
        return function(t2) {
          return e.apply(this, arguments);
        };
      }(), cs = function(e, t2, n2, r) {
        r[t2] = true, n2.has(e) ? n2.get(e).add(t2) : n2.set(e, /* @__PURE__ */ new Set([t2]));
      }, cD = function(e) {
        switch (e) {
          case "89504E47":
            return "image/png";
          case "47494638":
            return "image/gif";
          case "25504446":
            return "application/pdf";
          case "FFD8FFDB":
          case "FFD8FFE0":
          case "FFD8FFE1":
            return "image/jpeg";
          case "504B0304":
            return "application/zip";
          default:
            return "application/octet-stream";
        }
      }, ds = function(e) {
        function t2(e2, i, o, a2) {
          W(this, t2);
          var s = r.call(this, o, "ChunkDownloadManager");
          if (m(n(s), "abortController", new AbortController()), m(n(s), "downloadedSize", 0), m(n(s), "successCount", 0), m(n(s), "timer", void 0), m(n(s), "chunks", []), m(n(s), "retUnit", void 0), m(n(s), "singleThread", false), m(n(s), "initialized", false), m(n(s), "ee", void 0), m(n(s), "chunkCount", void 0), m(n(s), "aborted", false), m(n(s), "serverToIndices", /* @__PURE__ */ new Map()), m(n(s), "backupToIndices", /* @__PURE__ */ new Map()), m(n(s), "indexToBackupServers", []), m(n(s), "busyBackupServers", /* @__PURE__ */ new Map()), m(n(s), "downloadingChunks", /* @__PURE__ */ new Set()), m(n(s), "metaInfo", void 0), m(n(s), "transHandler", void 0), s.metaInfo = e2, s.transHandler = i, s.ee = void 0 === a2 ? new ea() : a2, o = e2.size, e2 = e2.unit, 0 === o) throw new Ia("size cannot be 0");
          return void 0 !== i.cancelSignal && i.cancelSignal.addEventListener("abort", function() {
            s.abortController.abort();
          }, { once: true }), s.abortController.signal.addEventListener("abort", function() {
            s.aborted = true;
          }, { once: true }), s.chunkCount = Math.ceil(o / (32768 * e2)), s;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "setInfoByResponse", value: function(e2) {
          var t3 = this, n2 = e2.serverList, r2 = e2.backupList;
          if (e2 = e2.unit, n2.length < this.chunkCount && r2.length < this.chunkCount) throw new Ia("servers is not enough");
          this.updateProgress(0), this.initialized = true;
          var i = Array(this.chunkCount).fill(false);
          if (n2.forEach(function(e3, n3) {
            return e3.forEach(function(e4) {
              return cs(e4, n3, t3.serverToIndices, i);
            });
          }), r2.forEach(function(e3, n3) {
            return e3.forEach(function(e4) {
              return cs(e4, n3, t3.backupToIndices, i);
            });
          }), i.some(function() {
            return false;
          })) throw new da("Not enough servers to download", mg);
          this.indexToBackupServers = r2.map(function(e3) {
            return new Set(e3);
          }), this.retUnit = e2;
        } }, { key: "downloadChunks", value: function() {
          this.aborted ? this.warn("downloadChunks after abort, ignored") : 1 === this.serverToIndices.size && 0 === Array.from(this.serverToIndices.keys())[0] ? this.serversDownload(this.backupToIndices) : 1 <= this.serverToIndices.size ? this.serversDownload(this.serverToIndices, true) : this.ee.emit("error", new da("not enough servers to download", mg));
        } }, { key: "updateProgress", value: function(e2) {
          var t3 = this, n2 = this.downloadedSize + e2;
          this.downloadedSize > this.metaInfo.size ? (this.warn("Invalid download size, overflowed"), this.ee.emit("error", new Wc("Invalid download size", mg))) : (this.downloadedSize = n2, void 0 !== this.timer && 0 !== e2 && (clearTimeout(this.timer), this.timer = void 0), void 0 === this.timer && this.successCount !== this.chunkCount && (this.timer = setTimeout(function() {
            t3.ee.emit("timedOut"), t3.abortController.abort();
          }, 12e4)), this.initialized && 0 === e2 || void 0 === this.transHandler.onOperationProgress || this.transHandler.onOperationProgress({ totalSize: this.metaInfo.size, currentSize: this.downloadedSize }));
        } }, { key: "getPayload", value: function() {
          for (var e2 = 0, t3 = 0, n2 = this.chunks; t3 < n2.length; t3++) e2 += n2[t3].byteLength;
          if (e2 !== this.metaInfo.size) throw new Ia("invalid chunks total size");
          e2 = new Uint8Array(e2), n2 = t3 = 0;
          for (var r2 = this.chunks; n2 < r2.length; n2++) {
            var i = r2[n2];
            e2.set(new Uint8Array(i), t3), t3 += i.byteLength;
          }
          return t3 = Array.from(e2.subarray(0, 4)).map(function(e3) {
            return e3.toString(16);
          }).join("").toUpperCase(), Zt(e2.buffer, cD(t3));
        } }, { key: "getDownloadUrl", value: function(e2) {
          var t3 = this.metaInfo.useNewDomain ? "sd-rtn.com" : "agora.io";
          return "https://".concat(Dg(e2).split(".").join("-"), ".edge.").concat(t3, ":9601/api/v1/chuck/download");
        } }, { key: "serversDownload", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2 = this, i = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  return n2 = 1 < i.length && void 0 !== i[1] && i[1], e4.next = 3, Promise.all(Array.from(t3.entries()).map(function(e5) {
                    return e5 = ra(e5, 2), r2.postDownloadRequest(e5[0], Array.from(e5[1]), n2).catch(function(e6) {
                      404 === e6.statusCode ? (r2.ee.emit("notExist"), r2.abortController.abort()) : "AbortError" !== e6.name && (Sa(e6) ? r2.singleThread ? (r2.abortController.abort(), r2.ee.emit("timedOut")) : (r2.warn("%d download timed out after %d, retrying use single thread", e6.index, r2.singleThread ? 6e4 : 3e4), r2.abortController.abort(), r2.singleThread = true, r2.ee.emit("multiTimeOut")) : (r2.ee.emit("error", e6), r2.abortController.abort()));
                    });
                  }));
                case 3:
                case "end":
                  return e4.stop();
              }
            }, e3);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "postDownloadRequest", value: function() {
          var e2 = J(w.mark(function e3(t3, n2, r2) {
            var i, o, a2, s, u2, c2, l, f, h, p = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (h = function() {
                    return (h = J(w.mark(function e5(o2) {
                      var a3, h2, p2, d, v2, b, g, y2, m2;
                      return w.wrap(function(e6) {
                        for (; ; ) switch (e6.prev = e6.next) {
                          case 0:
                            if (e6.prev = 0, void 0 !== o2 || 0 !== t3) {
                              e6.next = 5;
                              break;
                            }
                            throw new Ia("Invalid serverIp");
                          case 5:
                            a3 = void 0 === o2 ? l.getDownloadUrl(t3) : o2;
                          case 6:
                            return l.downloadingChunks.add(i), e6.next = 9, c2(a3);
                          case 9:
                            return h2 = e6.sent, p2 = h2.responseData, l.downloadingChunks.delete(i), e6.abrupt("return", p2);
                          case 15:
                            if (e6.prev = 15, e6.t0 = e6.catch(0), l.downloadingChunks.delete(i), n2.unshift(i), l.metaInfo.useNewDomain = false, "AbortError" !== e6.t0.name) {
                              e6.next = 22;
                              break;
                            }
                            throw e6.t0;
                          case 22:
                            if (!Sa(e6.t0)) {
                              e6.next = 25;
                              break;
                            }
                            throw e6.t0.index = i, e6.t0;
                          case 25:
                            if (d = s, s += 1, !(2 > d)) {
                              e6.next = 30;
                              break;
                            }
                            return e6.t0 instanceof Ia || l.warn("%o, %d download failed, retrying", e6.t0, i), e6.abrupt("return", f());
                          case 30:
                            if (504 !== e6.t0.statusCode) {
                              e6.next = 34;
                              break;
                            }
                            throw (v2 = new db("download server timed out", { originalError: e6.t0, serverCode: 504 })).index = i, v2;
                          case 34:
                            if (!r2 || 2 !== d || 0 === u2[0]) {
                              e6.next = 45;
                              break;
                            }
                            return e6.t0 instanceof Ia || l.warn("%d download failed, using backup: %d, %o", i, u2[0], e6.t0), e6.next = 38, l.busyBackupServers.get(u2[0]);
                          case 38:
                            return b = f(l.getDownloadUrl(u2[0])), l.busyBackupServers.set(u2[0], b), e6.next = 42, b;
                          case 42:
                            return g = e6.sent, l.busyBackupServers.delete(u2[0]), e6.abrupt("return", g);
                          case 45:
                            if (!(r2 && 2 < d && void 0 !== u2[1] && 0 !== u2[1])) {
                              e6.next = 56;
                              break;
                            }
                            return l.warn("%d download failed, using backup 1: %d", i, u2[1]), e6.next = 49, l.busyBackupServers.get(u2[1]);
                          case 49:
                            return y2 = f(l.getDownloadUrl(u2[1])), l.busyBackupServers.set(u2[1], y2), e6.next = 53, y2;
                          case 53:
                            return m2 = e6.sent, l.busyBackupServers.delete(u2[1]), e6.abrupt("return", m2);
                          case 56:
                            throw e6.t0.index = i, e6.t0;
                          case 58:
                          case "end":
                            return e6.stop();
                        }
                      }, e5, null, [[0, 15]]);
                    }))).apply(this, arguments);
                  }, f = function(e5) {
                    return h.apply(this, arguments);
                  }, !this.aborted) {
                    e4.next = 4;
                    break;
                  }
                  throw new Ia("download already aborted");
                case 4:
                  if (void 0 !== (i = n2.shift())) {
                    e4.next = 8;
                    break;
                  }
                  return this.log("%s download finished", t3), e4.abrupt("return");
                case 8:
                  if (!(this.singleThread && 0 < this.downloadingChunks.size)) {
                    e4.next = 10;
                    break;
                  }
                  return e4.abrupt("return");
                case 10:
                  if (!this.downloadingChunks.has(i)) {
                    e4.next = 13;
                    break;
                  }
                  return this.log("%s already downloading, return", i), e4.abrupt("return");
                case 13:
                  if (void 0 === this.chunks[i]) {
                    e4.next = 19;
                    break;
                  }
                  return this.successCount === this.chunkCount && (this.log("chunks all download"), this.ee.emit("finished")), this.log("%s already downloaded, do next", i), e4.next = 18, this.postDownloadRequest(t3, n2, r2);
                case 18:
                  return e4.abrupt("return");
                case 19:
                  return o = new FormData(), a2 = { hash: hu(this.metaInfo.hashHexStr), unit: void 0 === this.retUnit ? this.metaInfo.unit : this.retUnit, instance: this.metaInfo.instance, loginOpt: this.metaInfo.loginOpt, ticket: this.metaInfo.ticket, index: i }, o.append("parameter", JSON.stringify(a2)), s = 0, u2 = Array.from(this.indexToBackupServers[i]), c2 = function(e5) {
                    return te(e5, { body: o, signal: p.abortController.signal, timeout: p.singleThread ? 12e4 : 3e4 }, { useBinaryResponse: true });
                  }, l = this, e4.next = 28, f().then(function(e5) {
                    return void 0 !== p.chunks[i] ? p.log("chunk %d download duplicated", i) : (p.chunks[i] = e5, p.log("chunk %d downloaded", i), p.successCount += 1, p.updateProgress(p.chunks[i].byteLength)), p.successCount === p.chunkCount && (p.log("chunks all download"), p.ee.emit("finished")), p.singleThread ? (p.downloadChunks(), Promise.resolve()) : p.postDownloadRequest(t3, n2, r2);
                  });
                case 28:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2, r2) {
            return e2.apply(this, arguments);
          };
        }() }]), t2;
      }(tb()), es = function(e) {
        function t2(e2, i, o, a2) {
          W(this, t2);
          var s = r.call(this, o, "ChunkUploadManager");
          if (m(n(s), "chunkCount", 0), m(n(s), "chunks", []), m(n(s), "uploadedChunks", []), m(n(s), "totalFailures", 0), m(n(s), "timer", void 0), m(n(s), "initState", "uninitialized"), m(n(s), "ee", void 0), m(n(s), "unit", 0), m(n(s), "uploadedSize", 0), m(n(s), "singleThread", false), m(n(s), "abortController", new AbortController()), m(n(s), "servers", []), m(n(s), "aborted", false), m(n(s), "metaInfo", void 0), m(n(s), "transHandler", void 0), s.metaInfo = e2, s.transHandler = i, s.ee = void 0 === a2 ? new ea() : a2, 0 === e2.file.length) throw new I("file not found or is empty", wf);
          return void 0 !== i.cancelSignal && i.cancelSignal.addEventListener("abort", function() {
            s.abortController.abort();
          }, { once: true }), s.abortController.signal.addEventListener("abort", function() {
            s.aborted = true;
          }, { once: true }), s;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "initChunks", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if ("initialized" !== this.initState && "initializing" !== this.initState) {
                    e4.next = 2;
                    break;
                  }
                  throw new Ia("cannot re-initialize");
                case 2:
                  for (this.initState = "initializing", this.unit = t3, n2 = this.sliceFile(t3, this.metaInfo.file), this.chunkCount = n2.length, r2 = [], i = function(e5, t4) {
                    var n3 = (e5 = ra(t4[e5], 2))[0], i2 = e5[1];
                    e5 = bs(i2).then(function(e6) {
                      s.chunks[n3] = { payload: i2, sha1: e6, uploadedTo: void 0, index: n3, processed: false };
                    }), r2.push(e5);
                  }, o = 0, a2 = Array.from(n2.entries()); o < a2.length; o++) i(o, a2);
                  return e4.next = 11, Promise.all(r2);
                case 11:
                  this.updateProgress(0), this.initState = "initialized", this.log("upload chunks initialized");
                case 14:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "uploadToServers", value: function() {
          var e2 = this;
          if (!this.aborted) {
            for (var t3 = this.chunks.filter(function(e3) {
              return !e3.processed;
            }), n2 = function(n3) {
              var r3 = t3[n3], i = e2.servers.filter(function(e3) {
                return !e3.isUploading;
              }).sort(function(e3, t4) {
                return e3.successCount - t4.successCount;
              }).sort(function(e3, t4) {
                return e3.failureCount - t4.failureCount;
              })[0];
              if (void 0 === i || 1 < i.failureCount) return e2.log("Upload server not available, waiting"), e2.ee.emit("serverUsedUp"), Om(1e3).then(function() {
                e2.totalFailures > 2 * e2.chunkCount && e2.ee.emit("error"), e2.totalFailures += 1, void 0 !== i && (i.failureCount = 0), e2.uploadToServers();
              }).catch(function() {
              }), "break";
              r3.processed = true, i.isUploading = true, e2.log("uploading chunk %d to server %s", r3.index, Dg(i.ip));
              var o = e2.getUploadUrl(i.ip);
              return J(w.mark(function t4() {
                var n4;
                return w.wrap(function(t5) {
                  for (; ; ) switch (t5.prev = t5.next) {
                    case 0:
                      return t5.prev = 0, t5.next = 3, e2.postChunk(r3.payload, o, r3.index);
                    case 3:
                      n4 = e2.chunks.findIndex(function(e3) {
                        return e3 === r3;
                      }), r3.uploadedTo = i.ip, e2.chunks.splice(n4, 1), e2.uploadedChunks.push(r3), i.successCount += 1, i.isUploading = false, e2.updateProgress(r3.payload.byteLength), e2.log("upload chunk %d successfully", r3.index), t5.next = 31;
                      break;
                    case 13:
                      if (t5.prev = 13, t5.t0 = t5.catch(0), i.isUploading = false, r3.processed = false, 504 !== t5.t0.statusCode && !Sa(t5.t0)) {
                        t5.next = 27;
                        break;
                      }
                      if (e2.singleThread) {
                        t5.next = 24;
                        break;
                      }
                      return e2.warn("%d upload timed out after %d, retrying use single thread", r3.index, e2.singleThread ? 12e4 : 3e4), e2.abortController.abort(), e2.singleThread = true, e2.ee.emit("multiTimeOut"), t5.abrupt("return");
                    case 24:
                      return e2.ee.emit("timedOut"), e2.abortController.abort(), t5.abrupt("return");
                    case 27:
                      return e2.metaInfo.useNewDomain = false, i.failureCount += 1, t5.next = 31, Om(1e3);
                    case 31:
                      e2.uploadedChunks.length === e2.chunkCount ? (e2.log("chunks uploaded"), e2.ee.emit("finished")) : (e2.singleThread || 1 === e2.chunks.filter(function(e3) {
                        return !e3.processed;
                      }).length) && e2.uploadToServers();
                    case 32:
                    case "end":
                      return t5.stop();
                  }
                }, t4, null, [[0, 13]]);
              }))(), e2.singleThread ? "break" : void 0;
            }, r2 = 0; r2 < t3.length && "break" !== n2(r2); r2++) ;
            0 === t3.length && this.uploadedChunks.length !== this.chunkCount && this.log("%d chunks left uploading", this.chunkCount - this.uploadedChunks.length);
          }
        } }, { key: "getUploadServerIPs", value: function() {
          var e2 = true, t3 = [], n2 = G(this.uploadedChunks).sort(function(e3, t4) {
            return e3.index - t4.index;
          }), r2 = 0;
          for (n2 = Array.from(n2.values()); r2 < n2.length; r2++) {
            var i = n2[r2].uploadedTo;
            if (void 0 === i) {
              e2 = false;
              break;
            }
            t3.push(i);
          }
          if (!e2) throw new Ia("some chunks not uploaded, cannot get upload server ips");
          return t3;
        } }, { key: "addServers", value: function(e2) {
          var t3 = this;
          e2.forEach(function(e3) {
            var n2 = t3.servers.findIndex(function(t4) {
              return t4.ip === e3;
            });
            -1 !== n2 ? t3.servers[n2].failureCount = 0 : (t3.log("server %s added", Dg(e3)), t3.servers.push({ successCount: 0, isUploading: false, ip: e3, failureCount: 0 }));
          });
        } }, { key: "updateProgress", value: function(e2) {
          var t3 = this, n2 = void 0 !== e2 ? this.uploadedSize + e2 : this.metaInfo.file.length;
          n2 > this.metaInfo.file.length ? (this.warn("Invalid upload size, overflowed"), this.ee.emit("error", new Wc("Invalid upload size", lg))) : (this.uploadedSize = n2, void 0 !== this.timer && 0 !== e2 && (clearTimeout(this.timer), this.timer = void 0), void 0 === this.timer && void 0 !== e2 && this.uploadedChunks.length !== this.chunkCount && (this.timer = setTimeout(function() {
            t3.ee.emit("timedOut"), t3.abortController.abort();
          }, 12e4)), "initialized" === this.initState && 0 === e2 || void 0 === this.transHandler.onOperationProgress || this.transHandler.onOperationProgress({ totalSize: this.metaInfo.file.length, currentSize: this.uploadedSize }));
        } }, { key: "sliceFile", value: function(e2, t3) {
          var n2 = 0, r2 = [], i = t3.length;
          for (e2 *= 32768; n2 < i; ) r2.push(t3.slice(n2, n2 + e2)), n2 += e2;
          return this.log("chunks split into %d", r2.length), r2;
        } }, { key: "postChunk", value: function() {
          var e2 = J(w.mark(function e3(t3, n2, r2) {
            var i, o, a2, s, u2, c2, l, f;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (!this.aborted) {
                    e4.next = 2;
                    break;
                  }
                  throw new Ia("upload already aborted");
                case 2:
                  if (void 0 !== this.unit) {
                    e4.next = 4;
                    break;
                  }
                  throw new Ia("unit is undefined");
                case 4:
                  return i = this.metaInfo, o = i.ticket, a2 = i.instance, s = i.loginOpt, u2 = i.hashStr, e4.t0 = r2, e4.t1 = u2, e4.next = 9, bs(t3);
                case 9:
                  return e4.t2 = e4.sent, e4.t3 = this.unit, e4.t4 = o, e4.t5 = a2, e4.t6 = s, c2 = { index: e4.t0, hash: e4.t1, sha1: e4.t2, unit: e4.t3, ticket: e4.t4, instance: e4.t5, loginOpt: e4.t6 }, (l = new FormData()).append("parameter", JSON.stringify(c2)), l.append("payload", new Blob([t3])), e4.next = 20, te(n2, { headers: { Accept: "application/json" }, body: l, timeout: this.singleThread ? 12e4 : 3e4, signal: this.abortController.signal });
                case 20:
                  if (f = e4.sent, 201 === f.status) {
                    e4.next = 24;
                    break;
                  }
                  throw new da("uploading chunk ".concat(r2, " failed"));
                case 24:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2, r2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getUploadUrl", value: function(e2) {
          var t3 = this.metaInfo.useNewDomain ? "sd-rtn.com" : "agora.io";
          return "https://".concat(Dg(e2).split(".").join("-"), ".edge.").concat(t3, ":9601/api/v1/chuck/upload");
        } }]), t2;
      }(tb()), fs = function(e) {
        function t2(e2) {
          W(this, t2);
          var i = r.call(this, e2, "MediaTaskManager");
          return m(n(i), "isProcessing", false), m(n(i), "authInfo", void 0), m(n(i), "taskFinishers", {}), m(n(i), "mediaTasks", /* @__PURE__ */ new Map()), m(n(i), "ongoingTask", void 0), i.on("connectionStateChanged", function(e3) {
            if (e3 === S.ConnectionState.ABORTED || e3 === S.ConnectionState.DISCONNECTED) {
              void 0 !== i.ongoingTask && i.cancelTask(i.ongoingTask), e3 = 0;
              for (var t3 = Array.from(i.mediaTasks.entries()); e3 < t3.length; e3++) {
                var n2 = ra(t3[e3], 2)[1];
                i.cancelTask(n2);
              }
              i.mediaTasks.clear(), i.taskFinishers = {};
            } else e3 === S.ConnectionState.RECONNECTING ? void 0 !== i.ongoingTask && i.ongoingTask.manager.abortController.abort() : e3 === S.ConnectionState.CONNECTED && void 0 !== i.ongoingTask && i.ongoingTask.manager.ee.emit("reconnected");
          }), i;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "setAuthInfo", value: function(e2) {
          this.authInfo = e2;
        } }, { key: "waitMediaTask", value: function(e2) {
          var t3 = this;
          return new Promise(function(n2, r2) {
            t3.taskFinishers[e2] = { resolve: n2, reject: r2 }, t3.isProcessing || t3.processMediaTask();
          }).finally(function() {
            void 0 !== t3.ongoingTask && void 0 !== t3.ongoingTask.manager.timer && clearTimeout(t3.ongoingTask.manager.timer), delete t3.taskFinishers[e2], 0 !== t3.mediaTasks.size ? t3.processMediaTask() : t3.isProcessing = false;
          });
        } }, { key: "addUploadTask", value: function(e2, n2, r2, i) {
          var o = e2.file;
          if (e2 = e2.hash, void 0 === this.authInfo) throw new Ia("session not found");
          if (this.mediaTasks.size >= t2.MAX_PENDING_TASK_COUNT - 1) throw new ib("Upload media failed, exceed max pending jobs", xA);
          return i = new es({ hashStr: as(e2), file: o, ticket: this.authInfo.ticket, instance: this.authInfo.instance.toString(), loginOpt: this.authInfo.loginOpt.toString(), useNewDomain: this.authInfo.useNewDomain }, i, this.logger), o = Ud(), this.mediaTasks.set(o, { type: "UPLOAD", manager: i, hash: e2, setter: r2, fetcher: n2, taskId: o }), o;
        } }, { key: "addDownloadTask", value: function(e2, n2, r2) {
          var i = e2.hashHexStr, o = e2.size, a2 = e2.unit;
          if (e2 = e2.zone, void 0 === this.authInfo) throw new Ia("session not found");
          if (this.mediaTasks.size >= t2.MAX_PENDING_TASK_COUNT - 1) throw new ib("Download media failed, exceed max pending jobs", BA);
          return r2 = new ds({ hashHexStr: i, ticket: this.authInfo.ticket, useNewDomain: this.authInfo.useNewDomain, instance: this.authInfo.instance.toString(), loginOpt: this.authInfo.loginOpt.toString(), size: o, zone: e2, unit: a2 }, r2, this.logger), i = Ud(), this.mediaTasks.set(i, { type: "DOWNLOAD", manager: r2, fetcher: n2, taskId: i }), i;
        } }, { key: "doDownloadTaskImpl", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l, f = this, h = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  return r2 = 2 < h.length && void 0 !== h[2] && h[2], o = i = t3.manager, r2 && (i = new ds(o.metaInfo, o.transHandler, this.logger, o.ee)), a2 = t3.fetcher, e4.next = 7, a2();
                case 7:
                  if (s = e4.sent, u2 = s.serverList, c2 = s.backupList, l = s.unit, !r2 || l === o.retUnit) {
                    e4.next = 13;
                    break;
                  }
                  throw new da("download unit is different, reject to continue", mg);
                case 13:
                  r2 && (t3.manager = i, i.downloadedSize = o.downloadedSize, i.successCount = o.successCount, i.timer = o.timer, i.chunks = o.chunks, i.initialized = o.initialized, i.singleThread = o.singleThread, i.updateProgress(0)), i.ee.once("reconnected", function() {
                    i.ee.removeAllListeners(), f.doDownloadTaskImpl(t3, n2, true).catch(function(e5) {
                      n2.reject(e5);
                    });
                  }), i.ee.once("multiTimeOut", function() {
                    i.ee.removeAllListeners(), f.doDownloadTaskImpl(t3, n2, true).catch(function(e5) {
                      n2.reject(e5);
                    });
                  }), i.ee.once("error", function(e5) {
                    i.ee.removeAllListeners(), n2.reject(new da(["download file file, index %d", e5.index], { code: mg, originalError: e5 }));
                  }), i.ee.once("notExist", function() {
                    i.abortController.abort(), i.ee.removeAllListeners(), n2.reject(new da("download file not found", AA));
                  }), i.ee.once("timedOut", function() {
                    i.ee.removeAllListeners(), i.abortController.abort(), n2.reject(new db("download timed out", zA));
                  }), void 0 !== i.transHandler.cancelSignal && i.transHandler.cancelSignal.addEventListener("abort", function() {
                    n2.reject(new hl("Downloading canceled", ir));
                  }, { once: true }), i.ee.once("finished", function() {
                    n2.resolve({ type: "DOWNLOAD", payload: i.getPayload() });
                  }), i.setInfoByResponse({ serverList: u2, backupList: c2, unit: l }), i.downloadChunks();
                case 23:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "doDownloadTask", value: function(e2, t3) {
          var n2 = this, r2 = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], i = e2.taskId;
          return r2 || (this.mediaTasks.delete(i), this.ongoingTask = e2), new Promise(function(i2, o) {
            n2.doDownloadTaskImpl(e2, t3, r2).then(i2).catch(o);
          });
        } }, { key: "doUploadTaskImpl", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l, f, h = this, p = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  return r2 = 2 < p.length && void 0 !== p[2] && p[2], o = i = t3.manager, r2 && (i = new es(o.metaInfo, o.transHandler, this.logger, o.ee)), a2 = t3.fetcher, s = new Pa(), c2 = new Promise(function(e5, c3) {
                    var l2 = a2(), f2 = l2.ret, h2 = l2.err, p2 = l2.timeout;
                    l2.fin.pipe(ob(s)).subscribe({ next: function(e6) {
                      n2.resolve({ type: "UPLOAD", retUnit: e6.unit, zone: e6.zone });
                    }, complete: function() {
                      e5({ hasExist: true }), s.next(), s.complete();
                    } }), f2.pipe(ob(s), cb(function() {
                      var e6 = J(w.mark(function e7(a3) {
                        var s2, c4;
                        return w.wrap(function(e8) {
                          for (; ; ) switch (e8.prev = e8.next) {
                            case 0:
                              if (s2 = a3.servers, c4 = a3.unit, r2 && o.unit !== c4 ? n2.reject(new da("upload unit is different, reject to continue", lg)) : r2 && (t3.manager = i, i.chunkCount = o.chunkCount, i.chunks = o.chunks, i.totalFailures = o.totalFailures, i.uploadedChunks = o.uploadedChunks, i.timer = o.timer, i.initState = o.initState, i.unit = o.unit, i.uploadedSize = o.uploadedSize, i.singleThread = o.singleThread, i.updateProgress(0)), i.addServers(s2), "uninitialized" !== i.initState) {
                                e8.next = 7;
                                break;
                              }
                              return u2 = i.initChunks(c4), e8.next = 7, u2;
                            case 7:
                            case "end":
                              return e8.stop();
                          }
                        }, e7);
                      }));
                      return function(t4) {
                        return e6.apply(this, arguments);
                      };
                    }())).subscribe({ complete: function() {
                      return e5({ hasExist: false });
                    }, error: c3 }), l2 = function(t4) {
                      "uninitialized" !== i.initState && u2 ? e5(u2.then(function() {
                        return { hasExist: false };
                      })) : c3(t4);
                    }, h2.pipe(ob(s)).subscribe({ error: l2 }), p2.pipe(ob(s)).subscribe({ error: l2 });
                  }), e4.next = 9, c2;
                case 9:
                  if (l = e4.sent, !l.hasExist) {
                    e4.next = 15;
                    break;
                  }
                  return i.updateProgress(), this.log("file already exists, skipping upload"), e4.abrupt("return");
                case 15:
                  s.next(), s.complete(), this.log("chunks initialization promise resolved"), f = gb(i.ee, "serverUsedUp").pipe(Gt(function() {
                    return i.chunkCount !== i.uploadedChunks.length;
                  }), Jt(5e3, void 0, { leading: false }), pm(function() {
                    return a2().ret;
                  })).subscribe(function(e5) {
                    i.addServers(e5.servers);
                  }), i.ee.once("reconnected", function() {
                    i.ee.removeAllListeners(), h.doUploadTask(t3, n2, true).catch(function(e5) {
                      n2.reject(e5);
                    });
                  }), i.ee.once("multiTimeOut", function() {
                    i.ee.removeAllListeners(), h.doUploadTask(t3, n2, true).catch(function(e5) {
                      n2.reject(e5);
                    });
                  }), i.ee.once("timedOut", function() {
                    f.unsubscribe(), i.ee.removeAllListeners(), i.abortController.abort(), n2.reject(new db("upload timed out", Lh));
                  }), i.ee.once("error", function(e5) {
                    f.unsubscribe(), i.ee.removeAllListeners(), i.abortController.abort(), n2.reject(e5 || new da("upload error", lg));
                  }), void 0 !== i.transHandler.cancelSignal && i.transHandler.cancelSignal.addEventListener("abort", function() {
                    n2.reject(new hl("Uploading canceled", hr));
                  }, { once: true }), i.ee.once("finished", J(w.mark(function e5() {
                    var r3, o2, a3;
                    return w.wrap(function(e6) {
                      for (; ; ) switch (e6.prev = e6.next) {
                        case 0:
                          return f.unsubscribe(), e6.next = 3, t3.setter(i.unit, i.getUploadServerIPs());
                        case 3:
                          r3 = e6.sent, o2 = r3.zone, a3 = r3.unit, i.ee.removeAllListeners(), n2.resolve({ type: "UPLOAD", retUnit: a3, zone: o2 });
                        case 8:
                        case "end":
                          return e6.stop();
                      }
                    }, e5);
                  }))), i.uploadToServers();
                case 26:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "doUploadTask", value: function(e2, t3) {
          var n2 = this, r2 = 2 < arguments.length && void 0 !== arguments[2] && arguments[2], i = e2.taskId;
          return r2 || (this.mediaTasks.delete(i), this.ongoingTask = e2), new Promise(function(i2, o) {
            n2.doUploadTaskImpl(e2, t3, r2).then(i2).catch(o);
          });
        } }, { key: "processMediaTask", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2, r2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (0 !== this.mediaTasks.size) {
                    e4.next = 2;
                    break;
                  }
                  throw Error("no upload tasks");
                case 2:
                  if (this.isProcessing = true, t3 = this.mediaTasks.keys().next().value, void 0 !== (n2 = this.taskFinishers[t3])) {
                    e4.next = 7;
                    break;
                  }
                  throw Error("top task not found");
                case 7:
                  if (void 0 !== (r2 = this.mediaTasks.get(t3))) {
                    e4.next = 10;
                    break;
                  }
                  throw new Ia("task invalid");
                case 10:
                  if ("UPLOAD" !== r2.type) {
                    e4.next = 15;
                    break;
                  }
                  return e4.next = 13, this.doUploadTask(r2, n2).catch(function(e5) {
                    r2.manager.ee.removeAllListeners(), n2.reject(e5);
                  });
                case 13:
                  e4.next = 18;
                  break;
                case 15:
                  if ("DOWNLOAD" !== r2.type) {
                    e4.next = 18;
                    break;
                  }
                  return e4.next = 18, this.doDownloadTask(r2, n2).catch(function(e5) {
                    r2.manager.ee.removeAllListeners(), n2.reject(e5);
                  });
                case 18:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "cancelTask", value: function(e2) {
          var t3 = "DOWNLOAD" === e2.type ? ir : hr;
          e2.manager.ee.removeAllListeners(), e2.manager.abortController.abort(), void 0 !== this.taskFinishers[e2.taskId] && this.taskFinishers[e2.taskId].reject(new hl("User logged out or kicked off, media task canceled", t3));
        } }]), t2;
      }(tb());
      m(fs, "MAX_PENDING_TASK_COUNT", 9), Oo("of", function() {
        for (var e = 0, t2 = arguments.length, n2 = new (Ne(this))(t2); t2 > e; ) n2[e] = arguments[e++];
        return n2;
      }, Dj);
      var gs = 1 / 0, dD = Math.max, ju = function(e, t2, n2) {
        var r = Object(e);
        if (!Ed(e)) {
          var i = Te(t2);
          e = Ad(e), t2 = function(e2) {
            return i(r[e2], e2, r);
          };
        }
        return -1 < (t2 = function(e2, t3, n3) {
          var r2 = null == e2 ? 0 : e2.length;
          if (!r2) return -1;
          if (null == n3) n3 = 0;
          else {
            var i2 = (n3 = n3 ? (n3 = gl(n3)) === gs || n3 === -gs ? 17976931348623157e292 * (0 > n3 ? -1 : 1) : n3 == n3 ? n3 : 0 : 0 === n3 ? n3 : 0) % 1;
            n3 = n3 == n3 ? i2 ? n3 - i2 : n3 : 0;
          }
          return 0 > n3 && (n3 = dD(r2 + n3, 0)), Xp(e2, Te(t3), n3);
        }(e, t2, n2)) ? r[i ? e[t2] : t2] : void 0;
      }, iu = function(e, t2) {
        return e && e.length ? vk(e, void 0, "function" == typeof t2 ? t2 : void 0) : [];
      }, hs = function() {
        function e() {
          W(this, e), m(this, "size", 0), m(this, "fields", /* @__PURE__ */ new Map());
        }
        return Ha(e, [{ key: "define", value: function(e2, t2, n2) {
          if (this.size += n2, 64 < this.size) throw new RangeError("the struct over 64 bits is not supported");
          Mg(t2 = { val: 0, isNumber: "number" === t2, isBoolean: "boolean" === t2, oneof: "number" === t2 || "boolean" === t2 ? void 0 : t2, len: n2 }), this.fields.set(e2, t2);
        } }, { key: "set", value: function(e2, t2) {
          if (!(e2 = this.fields.get(e2))) throw Error("field not found");
          var n2 = e2.oneof;
          if (!U.isLong(t2) && "number" != typeof t2) if ("boolean" == typeof t2) t2 = t2 ? 1 : 0;
          else {
            if (void 0 === n2) throw Error("invalid field type");
            if (void 0 === (t2 = n2[t2])) throw Error("field type not found");
          }
          Mg(e2, t2), e2.val = t2;
        } }, { key: "toNumber", value: function() {
          for (var e2 = 0, t2 = 0, n2 = 0, r = Array.from(this.fields); n2 < r.length; n2++) {
            var i = ra(r[n2], 2)[1], o = i.len;
            void 0 !== (i = i.val) && (e2 += U.fromValue(i).shiftLeft(t2).toNumber(), t2 += o);
          }
          return e2;
        } }, { key: "toLong", value: function() {
          for (var e2 = U.fromNumber(0, true), t2 = 0, n2 = 0, r = Array.from(this.fields); n2 < r.length; n2++) {
            var i = ra(r[n2], 2)[1], o = i.len;
            void 0 !== (i = i.val) && (e2 = U.fromValue(i).shiftLeft(t2).add(e2), t2 += o);
          }
          return e2;
        } }, { key: "assert", value: function(e2, t2) {
          function n2(e3) {
            if (!U.isLong(e3) && "number" != typeof e3) if ("boolean" == typeof e3) e3 = e3 ? 1 : 0;
            else {
              if (void 0 === i) throw Error("invalid field type");
              if (void 0 === (e3 = i[e3])) throw Error("field type not found");
            }
            return Mg(r, e3), Lg(e3, r.val);
          }
          var r = this.fields.get(e2);
          if (!r) throw Error("field not found");
          var i = r.oneof;
          if (!Array.isArray(t2)) return n2(t2);
          if (1 === t2.length) return n2(t2[0]);
          if (t2.every(function(e3) {
            return "string" == typeof e3;
          }) && void 0 !== i) return t2.some(function(e3) {
            return n2(e3);
          });
          throw Error("invalid valueTypes");
        } }, { key: "from", value: function(e2) {
          e2 = U.fromValue(e2);
          for (var t2 = 0, n2 = 0, r = Array.from(this.fields); n2 < r.length; n2++) {
            var i = ra(r[n2], 2)[1], o = i.len, a2 = U.fromNumber(Math.pow(2, o) - 1, true).shiftLeft(t2);
            Mg(i, a2 = e2.and(a2).shiftRightUnsigned(t2)), i.val = a2, t2 += o;
          }
        } }, { key: "typeOf", value: function(e2) {
          if (void 0 !== (e2 = this.fields.get(e2))) {
            var t2 = e2.oneof;
            if (e2 = e2.val, void 0 !== t2) {
              var n2 = 0;
              for (t2 = Object.entries(t2); n2 < t2.length; n2++) {
                var r = ra(t2[n2], 2), i = r[0];
                if (Lg(e2, r[1])) return i;
              }
            }
          }
          throw new TypeError("can only get type of oneof type");
        } }]), e;
      }(), is = function(e) {
        function t2(e2) {
          W(this, t2);
          var r = n2.call(this);
          return r.define("Rejoin", "boolean", 1), r.define("Unused", "number", 31), r.define("Platform", "number", 8), r.define("Version", "number", 12), r.define("Subversion", "number", 12), r.set("Platform", 7), r.set("Version", 4), r.set("Subversion", 203), r.set("Rejoin", e2), r;
        }
        la(t2, e);
        var n2 = ma(t2);
        return t2;
      }(hs), eD = ua(ua(ua(ua({}, { PeerTextMessage: 0, ChannelTextMessage: 1, VendorTextMessage: 2 }), { PeerRawMessage: 3, ChannelRawMessage: 4, VendorRawMessage: 5 }), { PeerImageMessage: 6, ChannelImageMessage: 7, VendorImageMessage: 8 }), { PeerFileMessage: 15, ChannelFileMessage: 16, VendorFileMessage: 17 }), js = { CallInvite: 101, CallAccept: 102, CallReject: 103, CallCancel: 104 }, fD = ua(ua({}, eD), js), gD = { Uncompressed: 0, Zlib: 1 }, ae = function(e) {
        function t2(e2) {
          W(this, t2);
          var r = n2.call(this);
          if (r.define("MessageType", fD, 8), r.define("BroadcastJumps", "number", 2), r.define("ToCache", "boolean", 1), r.define("FromCache", "boolean", 1), r.define("CompressionMethod", gD, 2), r.define("IterationNumber", "number", 4), r.define("BufferedMessage", "boolean", 1), r.define("ToArchive", "boolean", 1), r.define("FromArchive", "boolean", 1), "number" == typeof e2 || U.isLong(e2)) r.from(e2);
          else if (void 0 !== e2) {
            var i = 0;
            for (e2 = Hg(e2); i < e2.length; i++) {
              var o = ra(e2[i], 2);
              r.set(o[0], o[1]);
            }
          }
          return r;
        }
        la(t2, e);
        var n2 = ma(t2);
        return Ha(t2, [{ key: "isTextMessage", value: function() {
          return this.assert("MessageType", ["PeerTextMessage", "ChannelTextMessage", "VendorTextMessage"]);
        } }, { key: "isRawMessage", value: function() {
          return this.assert("MessageType", ["ChannelRawMessage", "PeerRawMessage", "VendorRawMessage"]);
        } }, { key: "isRawPeerMessage", value: function() {
          return this.assert("MessageType", "PeerRawMessage");
        } }, { key: "isRawChannelMessage", value: function() {
          return this.assert("MessageType", "ChannelRawMessage");
        } }, { key: "isPeerTextMessage", value: function() {
          return this.assert("MessageType", "PeerTextMessage");
        } }, { key: "isChannelTextMessage", value: function() {
          return this.assert("MessageType", "ChannelTextMessage");
        } }, { key: "isInvitation", value: function(e2) {
          var t3 = this;
          return void 0 !== e2 ? this.assert("MessageType", e2) : xf(js).some(function(e3) {
            return t3.assert("MessageType", e3);
          });
        } }, { key: "isFileMessage", value: function() {
          return this.assert("MessageType", ["PeerFileMessage", "ChannelFileMessage", "VendorFileMessage"]);
        } }, { key: "isImageMessage", value: function() {
          return this.assert("MessageType", ["PeerImageMessage", "ChannelImageMessage", "VendorImageMessage"]);
        } }, { key: "isPeerMessage", value: function() {
          return this.assert("MessageType", ["PeerFileMessage", "PeerTextMessage", "PeerImageMessage", "PeerRawMessage"]);
        } }, { key: "isZlibCompressed", value: function() {
          return this.assert("CompressionMethod", "Zlib");
        } }, { key: "isFromCache", value: function() {
          return this.assert("FromCache", true);
        } }, { key: "isBufferedMessage", value: function() {
          return this.assert("BufferedMessage", true);
        } }, { key: "getInvitationType", value: function() {
          if (!this.isInvitation()) throw new TypeError("cannot get InvitationType of a normal message type");
          return this.typeOf("MessageType");
        } }]), t2;
      }(hs), hD = function(e) {
        function t2(e2) {
          return W(this, t2), m(n(e2 = r.call(this, e2, "ChatManager")), "dialogueLru", new Sx(void 0, { maxlen: 1e4, ttl: 1e4 })), e2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "getChatInfo", value: function(e2) {
          var t3 = this.dialogueLru.get(e2);
          if (this.dialogueLru.prune(), t3) {
            var n2 = t3.dialogue, r2 = { dialogue: n2, sequence: t3 = t3.sequence.add(1) };
            return this.dialogueLru.set(e2, { dialogue: n2, sequence: t3 }), r2;
          }
          return n2 = { dialogue: Bg(), sequence: U.fromNumber(1, true) }, this.dialogueLru.set(e2, n2), n2;
        } }]), t2;
      }(tb()), v = {};
      "object" == ("undefined" == typeof module ? "undefined" : X(module)) && (module.exports = v), v.parse = function(e, t2) {
        var n2, r = v.bin.readUshort, i = v.bin.readUint, o = {};
        for (n2 = (e = new Uint8Array(e)).length - 4; 101010256 != i(e, n2); ) n2--;
        var a2 = r(e, n2 = n2 + 4 + 4);
        r(e, n2 += 2), i(e, n2 += 2), n2 = i(e, n2 += 4);
        for (var s = 0; s < a2; s++) {
          i(e, n2), n2 += 4, n2 += 4, n2 += 4, i(e, n2 += 4);
          var u2 = i(e, n2 += 4), c2 = i(e, n2 += 4), l = r(e, n2 += 4), f = r(e, n2 + 2), h = r(e, n2 + 4);
          n2 += 6;
          var p = i(e, n2 += 8);
          n2 += 4, n2 += l + f + h, v._readLocal(e, p, o, u2, c2, t2);
        }
        return o;
      }, v._readLocal = function(e, t2, n2, r, i, o) {
        var a2 = v.bin.readUshort, s = v.bin.readUint;
        s(e, t2), a2(e, t2 += 4), a2(e, t2 += 2);
        var u2 = a2(e, t2 += 2);
        s(e, t2 += 2), s(e, t2 += 4), s = a2(e, t2 = t2 + 4 + 8);
        var c2 = a2(e, t2 += 2);
        if (t2 += 2, a2 = v.bin.readUTF8(e, t2, s), t2 = t2 + s + c2, o) n2[a2] = { size: i, csize: r };
        else if (e = new Uint8Array(e.buffer, t2), 0 == u2) n2[a2] = new Uint8Array(e.buffer.slice(t2, t2 + r));
        else {
          if (8 != u2) throw "unknown compression method: " + u2;
          t2 = new Uint8Array(i), v.inflateRaw(e, t2), n2[a2] = t2;
        }
      }, v.inflateRaw = function(e, t2) {
        return v.F.inflate(e, t2);
      }, v.inflate = function(e, t2) {
        return e[0], e[1], v.inflateRaw(new Uint8Array(e.buffer, e.byteOffset + 2, e.length - 2), t2);
      }, v.deflate = function(e, t2) {
        null == t2 && (t2 = { level: 6 });
        var n2 = 0, r = new Uint8Array(50 + Math.floor(1.1 * e.length));
        return r[n2] = 120, r[n2 + 1] = 156, n2 = v.F.deflateRaw(e, r, n2 + 2, t2.level), e = v.adler(e, 0, e.length), r[n2 + 0] = e >>> 24 & 255, r[n2 + 1] = e >>> 16 & 255, r[n2 + 2] = e >>> 8 & 255, r[n2 + 3] = e >>> 0 & 255, new Uint8Array(r.buffer, 0, n2 + 4);
      }, v.deflateRaw = function(e, t2) {
        null == t2 && (t2 = { level: 6 });
        var n2 = new Uint8Array(50 + Math.floor(1.1 * e.length)), r = v.F.deflateRaw(e, n2, r, t2.level);
        return new Uint8Array(n2.buffer, 0, r);
      }, v.encode = function(e, t2) {
        null == t2 && (t2 = false);
        var n2, r = 0, i = v.bin.writeUint, o = v.bin.writeUshort, a2 = {};
        for (n2 in e) {
          var s = !v._noNeed(n2) && !t2, u2 = e[n2], c2 = v.crc.crc(u2, 0, u2.length);
          a2[n2] = { cpr: s, usize: u2.length, crc: c2, file: s ? v.deflateRaw(u2) : u2 };
        }
        for (n2 in a2) r += a2[n2].file.length + 30 + 46 + 2 * v.bin.sizeUTF8(n2);
        for (n2 in e = new Uint8Array(r + 22), t2 = 0, u2 = [], a2) c2 = a2[n2], u2.push(t2), t2 = v._writeHeader(e, t2, n2, c2, 0);
        for (n2 in r = 0, s = t2, a2) c2 = a2[n2], u2.push(t2), t2 = v._writeHeader(e, t2, n2, c2, 1, u2[r++]);
        return a2 = t2 - s, i(e, t2, 101010256), o(e, t2 = t2 + 4 + 4, r), o(e, t2 += 2, r), i(e, t2 += 2, a2), i(e, t2 + 4, s), e.buffer;
      }, v._noNeed = function(e) {
        return e = e.split(".").pop().toLowerCase(), -1 != "png,jpg,jpeg,zip".indexOf(e);
      }, v._writeHeader = function(e, t2, n2, r, i, o) {
        var a2 = v.bin.writeUint, s = v.bin.writeUshort, u2 = r.file;
        return a2(e, t2, 0 == i ? 67324752 : 33639248), t2 += 4, 1 == i && (t2 += 2), s(e, t2, 20), s(e, t2 += 2, 0), s(e, t2 += 2, r.cpr ? 8 : 0), a2(e, t2 += 2, 0), a2(e, t2 += 4, r.crc), a2(e, t2 += 4, u2.length), a2(e, t2 += 4, r.usize), s(e, t2 += 4, v.bin.sizeUTF8(n2)), s(e, t2 += 2, 0), t2 += 2, 1 == i && (a2(e, t2 = t2 + 2 + 2 + 6, o), t2 += 4), t2 += n2 = v.bin.writeUTF8(e, t2, n2), 0 == i && (e.set(u2, t2), t2 += u2.length), t2;
      }, v.crc = { table: function() {
        for (var e = new Uint32Array(256), t2 = 0; 256 > t2; t2++) {
          for (var n2 = t2, r = 0; 8 > r; r++) n2 = 1 & n2 ? 3988292384 ^ n2 >>> 1 : n2 >>> 1;
          e[t2] = n2;
        }
        return e;
      }(), update: function(e, t2, n2, r) {
        for (var i = 0; i < r; i++) e = v.crc.table[255 & (e ^ t2[n2 + i])] ^ e >>> 8;
        return e;
      }, crc: function(e, t2, n2) {
        return 4294967295 ^ v.crc.update(4294967295, e, t2, n2);
      } }, v.adler = function(e, t2, n2) {
        var r = 1, i = 0, o = t2;
        for (t2 += n2; o < t2; ) {
          for (n2 = Math.min(o + 5552, t2); o < n2; ) i += r += e[o++];
          r %= 65521, i %= 65521;
        }
        return i << 16 | r;
      }, v.bin = { readUshort: function(e, t2) {
        return e[t2] | e[t2 + 1] << 8;
      }, writeUshort: function(e, t2, n2) {
        e[t2] = 255 & n2, e[t2 + 1] = n2 >> 8 & 255;
      }, readUint: function(e, t2) {
        return 16777216 * e[t2 + 3] + (e[t2 + 2] << 16 | e[t2 + 1] << 8 | e[t2]);
      }, writeUint: function(e, t2, n2) {
        e[t2] = 255 & n2, e[t2 + 1] = n2 >> 8 & 255, e[t2 + 2] = n2 >> 16 & 255, e[t2 + 3] = n2 >> 24 & 255;
      }, readASCII: function(e, t2, n2) {
        for (var r = "", i = 0; i < n2; i++) r += String.fromCharCode(e[t2 + i]);
        return r;
      }, writeASCII: function(e, t2, n2) {
        for (var r = 0; r < n2.length; r++) e[t2 + r] = n2.charCodeAt(r);
      }, pad: function(e) {
        return 2 > e.length ? "0" + e : e;
      }, readUTF8: function(e, t2, n2) {
        for (var r, i = "", o = 0; o < n2; o++) i += "%" + v.bin.pad(e[t2 + o].toString(16));
        try {
          r = decodeURIComponent(i);
        } catch (r2) {
          return v.bin.readASCII(e, t2, n2);
        }
        return r;
      }, writeUTF8: function(e, t2, n2) {
        for (var r = n2.length, i = 0, o = 0; o < r; o++) {
          var a2 = n2.charCodeAt(o);
          if (0 == (4294967168 & a2)) e[t2 + i] = a2, i++;
          else if (0 == (4294965248 & a2)) e[t2 + i] = 192 | a2 >> 6, e[t2 + i + 1] = 128 | a2 >> 0 & 63, i += 2;
          else if (0 == (4294901760 & a2)) e[t2 + i] = 224 | a2 >> 12, e[t2 + i + 1] = 128 | a2 >> 6 & 63, e[t2 + i + 2] = 128 | a2 >> 0 & 63, i += 3;
          else {
            if (0 != (4292870144 & a2)) throw "e";
            e[t2 + i] = 240 | a2 >> 18, e[t2 + i + 1] = 128 | a2 >> 12 & 63, e[t2 + i + 2] = 128 | a2 >> 6 & 63, e[t2 + i + 3] = 128 | a2 >> 0 & 63, i += 4;
          }
        }
        return i;
      }, sizeUTF8: function(e) {
        for (var t2 = e.length, n2 = 0, r = 0; r < t2; r++) {
          var i = e.charCodeAt(r);
          if (0 == (4294967168 & i)) n2++;
          else if (0 == (4294965248 & i)) n2 += 2;
          else if (0 == (4294901760 & i)) n2 += 3;
          else {
            if (0 != (4292870144 & i)) throw "e";
            n2 += 4;
          }
        }
        return n2;
      } }, v.F = {}, v.F.deflateRaw = function(e, t2, n2, r) {
        var i = [[0, 0, 0, 0, 0], [4, 4, 8, 4, 0], [4, 5, 16, 8, 0], [4, 6, 16, 16, 0], [4, 10, 16, 32, 0], [8, 16, 32, 32, 0], [8, 16, 128, 128, 0], [8, 32, 128, 256, 0], [32, 128, 258, 1024, 1], [32, 258, 258, 4096, 1]][r], o = v.F.U, a2 = v.F._goodIndex;
        v.F._hash;
        var s = v.F._putsE, u2 = 0;
        n2 <<= 3;
        var c2 = 0, l = e.length;
        if (0 == r) {
          for (; u2 < l; ) {
            var f = Math.min(65535, l - u2);
            s(t2, n2, u2 + f == l ? 1 : 0), n2 = v.F._copyExact(e, u2, f, t2, n2 + 8), u2 += f;
          }
          return n2 >>> 3;
        }
        s = o.lits, r = o.strt;
        var h = o.prev, p = 0, d = 0, b = 0, g = 0, y2 = 0;
        for (2 < l && (r[y2 = v.F._hash(e, 0)] = 0), u2 = 0; u2 < l; u2++) {
          if (f = y2, u2 + 1 < l - 2) {
            y2 = v.F._hash(e, u2 + 1);
            var m2 = u2 + 1 & 32767;
            h[m2] = r[y2], r[y2] = m2;
          }
          if (c2 <= u2) {
            if ((14e3 < p || 26697 < d) && 100 < l - u2 && (c2 < u2 && (s[p] = u2 - c2, p += 2, c2 = u2), n2 = v.F._writeBlock(u2 == l - 1 || c2 == l ? 1 : 0, s, p, g, e, b, u2 - b, t2, n2), p = d = g = 0, b = u2), m2 = 0, u2 < l - 2 && (m2 = v.F._bestMatch(e, u2, h, f, Math.min(i[2], l - u2), i[3])), 0 != m2) {
              f = m2 >>> 16, m2 &= 65535;
              var E2 = a2(f, o.of0);
              o.lhst[257 + E2]++;
              var w2 = a2(m2, o.df0);
              o.dhst[w2]++, g += o.exb[E2] + o.dxb[w2], s[p] = f << 23 | u2 - c2, s[p + 1] = m2 << 16 | E2 << 8 | w2, p += 2, c2 = u2 + f;
            } else o.lhst[e[u2]]++;
            d++;
          }
        }
        for (b == u2 && 0 != e.length || (c2 < u2 && (s[p] = u2 - c2, p += 2), n2 = v.F._writeBlock(1, s, p, g, e, b, u2 - b, t2, n2)); 0 != (7 & n2); ) n2++;
        return n2 >>> 3;
      }, v.F._bestMatch = function(e, t2, n2, r, i, o) {
        var a2 = 32767 & t2, s = n2[a2], u2 = a2 - s + 32768 & 32767;
        if (s == a2 || r != v.F._hash(e, t2 - u2)) return 0;
        for (var c2 = r = 0, l = Math.min(32767, t2); u2 <= l && 0 != --o && s != a2; ) {
          if ((0 == r || e[t2 + r] == e[t2 + r - u2]) && (a2 = v.F._howLong(e, t2, u2)) > r) {
            if (c2 = u2, (r = a2) >= i) break;
            u2 + 2 < a2 && (a2 = u2 + 2);
            for (var f = 0, h = 0; h < a2 - 2; h++) {
              var p = t2 - u2 + h + 32768 & 32767, d = p - n2[p] + 32768 & 32767;
              d > f && (f = d, s = p);
            }
          }
          u2 += (a2 = s) - (s = n2[a2]) + 32768 & 32767;
        }
        return r << 16 | c2;
      }, v.F._howLong = function(e, t2, n2) {
        if (e[t2] != e[t2 - n2] || e[t2 + 1] != e[t2 + 1 - n2] || e[t2 + 2] != e[t2 + 2 - n2]) return 0;
        var r = t2, i = Math.min(e.length, t2 + 258);
        for (t2 += 3; t2 < i && e[t2] == e[t2 - n2]; ) t2++;
        return t2 - r;
      }, v.F._hash = function(e, t2) {
        return (e[t2] << 8 | e[t2 + 1]) + (e[t2 + 2] << 4) & 65535;
      }, v.saved = 0, v.F._writeBlock = function(e, t2, n2, r, i, o, a2, s, u2) {
        var c2 = v.F.U, l = v.F._putsF, f = v.F._putsE;
        c2.lhst[256]++;
        var h = v.F.getTrees(), p = h[0], d = h[1], b = h[2], g = h[3], y2 = h[4], m2 = h[5], E2 = h[6];
        h = h[7];
        var w2 = 32 + (0 == (u2 + 3 & 7) ? 0 : 8 - (u2 + 3 & 7)) + (a2 << 3), _ = r + v.F.contSize(c2.fltree, c2.lhst) + v.F.contSize(c2.fdtree, c2.dhst);
        r = r + v.F.contSize(c2.ltree, c2.lhst) + v.F.contSize(c2.dtree, c2.dhst), r += 14 + 3 * m2 + v.F.contSize(c2.itree, c2.ihst) + (2 * c2.ihst[16] + 3 * c2.ihst[17] + 7 * c2.ihst[18]);
        for (var O2 = 0; 286 > O2; O2++) c2.lhst[O2] = 0;
        for (O2 = 0; 30 > O2; O2++) c2.dhst[O2] = 0;
        for (O2 = 0; 19 > O2; O2++) c2.ihst[O2] = 0;
        if (w2 = w2 < _ && w2 < r ? 0 : _ < r ? 1 : 2, l(s, u2, e), l(s, u2 + 1, w2), u2 += 3, 0 == w2) {
          for (; 0 != (7 & u2); ) u2++;
          u2 = v.F._copyExact(i, o, a2, s, u2);
        } else {
          if (1 == w2) var I2 = c2.fltree, A = c2.fdtree;
          if (2 == w2) {
            for (v.F.makeCodes(c2.ltree, p), v.F.revCodes(c2.ltree, p), v.F.makeCodes(c2.dtree, d), v.F.revCodes(c2.dtree, d), v.F.makeCodes(c2.itree, b), v.F.revCodes(c2.itree, b), I2 = c2.ltree, A = c2.dtree, f(s, u2, g - 257), f(s, u2 += 5, y2 - 1), f(s, u2 += 5, m2 - 4), u2 += 4, e = 0; e < m2; e++) f(s, u2 + 3 * e, c2.itree[1 + (c2.ordr[e] << 1)]);
            u2 = v.F._codeTiny(E2, c2.itree, s, u2 + 3 * m2), u2 = v.F._codeTiny(h, c2.itree, s, u2);
          }
          for (m2 = 0; m2 < n2; m2 += 2) {
            for (E2 = (e = t2[m2]) >>> 23, e = o + (8388607 & e); o < e; ) u2 = v.F._writeLit(i[o++], I2, s, u2);
            0 != E2 && (e = (p = t2[m2 + 1]) >> 16, a2 = p >> 8 & 255, p &= 255, f(s, u2 = v.F._writeLit(257 + a2, I2, s, u2), E2 - c2.of0[a2]), u2 += c2.exb[a2], l(s, u2 = v.F._writeLit(p, A, s, u2), e - c2.df0[p]), u2 += c2.dxb[p], o += E2);
          }
          u2 = v.F._writeLit(256, I2, s, u2);
        }
        return u2;
      }, v.F._copyExact = function(e, t2, n2, r, i) {
        var o = i >>> 3;
        return r[o] = n2, r[o + 1] = n2 >>> 8, r[o + 2] = 255 - r[o], r[o + 3] = 255 - r[o + 1], o += 4, r.set(new Uint8Array(e.buffer, t2, n2), o), i + (n2 + 4 << 3);
      }, v.F.getTrees = function() {
        for (var e = v.F.U, t2 = v.F._hufTree(e.lhst, e.ltree, 15), n2 = v.F._hufTree(e.dhst, e.dtree, 15), r = [], i = v.F._lenCodes(e.ltree, r), o = [], a2 = v.F._lenCodes(e.dtree, o), s = 0; s < r.length; s += 2) e.ihst[r[s]]++;
        for (s = 0; s < o.length; s += 2) e.ihst[o[s]]++;
        s = v.F._hufTree(e.ihst, e.itree, 7);
        for (var u2 = 19; 4 < u2 && 0 == e.itree[1 + (e.ordr[u2 - 1] << 1)]; ) u2--;
        return [t2, n2, s, i, a2, u2, r, o];
      }, v.F.getSecond = function(e) {
        for (var t2 = [], n2 = 0; n2 < e.length; n2 += 2) t2.push(e[n2 + 1]);
        return t2;
      }, v.F.nonZero = function(e) {
        for (var t2 = "", n2 = 0; n2 < e.length; n2 += 2) 0 != e[n2 + 1] && (t2 += (n2 >> 1) + ",");
        return t2;
      }, v.F.contSize = function(e, t2) {
        for (var n2 = 0, r = 0; r < t2.length; r++) n2 += t2[r] * e[1 + (r << 1)];
        return n2;
      }, v.F._codeTiny = function(e, t2, n2, r) {
        for (var i = 0; i < e.length; i += 2) {
          var o = e[i], a2 = e[i + 1];
          r = v.F._writeLit(o, t2, n2, r);
          var s = 16 == o ? 2 : 17 == o ? 3 : 7;
          15 < o && (v.F._putsE(n2, r, a2, s), r += s);
        }
        return r;
      }, v.F._lenCodes = function(e, t2) {
        for (var n2 = e.length; 2 != n2 && 0 == e[n2 - 1]; ) n2 -= 2;
        for (var r = 0; r < n2; r += 2) {
          var i = e[r + 1], o = r + 3 < n2 ? e[r + 3] : -1, a2 = r + 5 < n2 ? e[r + 5] : -1, s = 0 == r ? -1 : e[r - 1];
          if (0 == i && o == i && a2 == i) {
            for (o = r + 5; o + 2 < n2 && e[o + 2] == i; ) o += 2;
            11 > (i = Math.min(o + 1 - r >>> 1, 138)) ? t2.push(17, i - 3) : t2.push(18, i - 11), r += 2 * i - 2;
          } else if (i == s && o == i && a2 == i) {
            for (o = r + 5; o + 2 < n2 && e[o + 2] == i; ) o += 2;
            i = Math.min(o + 1 - r >>> 1, 6), t2.push(16, i - 3), r += 2 * i - 2;
          } else t2.push(i, 0);
        }
        return n2 >>> 1;
      }, v.F._hufTree = function(e, t2, n2) {
        var r = [], i = e.length, o = t2.length, a2 = 0;
        for (a2 = 0; a2 < o; a2 += 2) t2[a2] = 0, t2[a2 + 1] = 0;
        for (a2 = 0; a2 < i; a2++) 0 != e[a2] && r.push({ lit: a2, f: e[a2] });
        if (e = r.length, i = r.slice(0), 0 == e) return 0;
        if (1 == e) return t2[1 + ((n2 = r[0].lit) << 1)] = 1, t2[1 + ((0 == n2 ? 1 : 0) << 1)] = 1;
        r.sort(function(e2, t3) {
          return e2.f - t3.f;
        }), a2 = r[0], o = r[1];
        var s = 0, u2 = 1, c2 = 2;
        for (r[0] = { lit: -1, f: a2.f + o.f, l: a2, r: o, d: 0 }; u2 != e - 1; ) a2 = s != u2 && (c2 == e || r[s].f < r[c2].f) ? r[s++] : r[c2++], o = s != u2 && (c2 == e || r[s].f < r[c2].f) ? r[s++] : r[c2++], r[u2++] = { lit: -1, f: a2.f + o.f, l: a2, r: o };
        for ((r = v.F.setDepth(r[u2 - 1], 0)) > n2 && (v.F.restrictDepth(i, n2, r), r = n2), a2 = 0; a2 < e; a2++) t2[1 + (i[a2].lit << 1)] = i[a2].d;
        return r;
      }, v.F.setDepth = function(e, t2) {
        return -1 != e.lit ? e.d = t2 : Math.max(v.F.setDepth(e.l, t2 + 1), v.F.setDepth(e.r, t2 + 1));
      }, v.F.restrictDepth = function(e, t2, n2) {
        var r = 0, i = 1 << n2 - t2, o = 0;
        for (e.sort(function(e2, t3) {
          return t3.d == e2.d ? e2.f - t3.f : t3.d - e2.d;
        }), r = 0; r < e.length && e[r].d > t2; r++) {
          var a2 = e[r].d;
          e[r].d = t2, o += i - (1 << n2 - a2);
        }
        for (o >>>= n2 - t2; 0 < o; ) (a2 = e[r].d) < t2 ? (e[r].d++, o -= 1 << t2 - a2 - 1) : r++;
        for (; 0 <= r; r--) e[r].d == t2 && 0 > o && (e[r].d--, o++);
        0 != o && console.log("debt left");
      }, v.F._goodIndex = function(e, t2) {
        var n2 = 0;
        return t2[16 | n2] <= e && (n2 |= 16), t2[8 | n2] <= e && (n2 |= 8), t2[4 | n2] <= e && (n2 |= 4), t2[2 | n2] <= e && (n2 |= 2), t2[1 | n2] <= e && (n2 |= 1), n2;
      }, v.F._writeLit = function(e, t2, n2, r) {
        return v.F._putsF(n2, r, t2[e << 1]), r + t2[1 + (e << 1)];
      }, v.F.inflate = function(e, t2) {
        var n2 = Uint8Array;
        if (3 == e[0] && 0 == e[1]) return t2 || new n2(0);
        var r = v.F, i = r._bitsF, o = r._bitsE, a2 = r._decodeTiny, s = r.makeCodes, u2 = r.codes2map, c2 = r._get17, l = r.U, f = null == t2;
        f && (t2 = new n2(e.length >>> 2 << 3));
        for (var h, p, d, b, g = 0, y2 = 0, m2 = p = 0, E2 = 0; 0 == g; ) if (g = i(e, E2, 1), h = i(e, E2 + 1, 2), E2 += 3, 0 == h) 0 != (7 & E2) && (E2 += 8 - (7 & E2)), h = e[(E2 = 4 + (E2 >>> 3)) - 4] | e[E2 - 3] << 8, f && (t2 = v.F._check(t2, m2 + h)), t2.set(new n2(e.buffer, e.byteOffset + E2, h), m2), E2 = E2 + h << 3, m2 += h;
        else {
          if (f && (t2 = v.F._check(t2, m2 + 131072)), 1 == h && (d = l.flmap, b = l.fdmap, y2 = 511, p = 31), 2 == h) {
            for (p = o(e, E2, 5) + 257, h = o(e, E2 + 5, 5) + 1, d = o(e, E2 + 10, 4) + 4, E2 += 14, b = 0; 38 > b; b += 2) l.itree[b] = 0, l.itree[b + 1] = 0;
            for (y2 = 1, b = 0; b < d; b++) {
              var w2 = o(e, E2 + 3 * b, 3);
              l.itree[1 + (l.ordr[b] << 1)] = w2, w2 > y2 && (y2 = w2);
            }
            E2 += 3 * d, s(l.itree, y2), u2(l.itree, y2, l.imap), d = l.lmap, b = l.dmap, E2 = a2(l.imap, (1 << y2) - 1, p + h, e, E2, l.ttree), y2 = (1 << (w2 = r._copyOut(l.ttree, 0, p, l.ltree))) - 1, p = (1 << (h = r._copyOut(l.ttree, p, h, l.dtree))) - 1, s(l.ltree, w2), u2(l.ltree, w2, d), s(l.dtree, h), u2(l.dtree, h, b);
          }
          for (; ; ) if (E2 += 15 & (h = d[c2(e, E2) & y2]), 0 == (w2 = h >>> 4) >>> 8) t2[m2++] = w2;
          else {
            if (256 == w2) break;
            h = m2 + w2 - 254, 264 < w2 && (h = m2 + ((w2 = l.ldef[w2 - 257]) >>> 3) + o(e, E2, 7 & w2), E2 += 7 & w2), E2 += 15 & (w2 = b[c2(e, E2) & p]);
            var _ = ((w2 = l.ddef[w2 >>> 4]) >>> 4) + i(e, E2, 15 & w2);
            for (E2 += 15 & w2, f && (t2 = v.F._check(t2, m2 + 131072)); m2 < h; ) t2[m2] = t2[m2++ - _], t2[m2] = t2[m2++ - _], t2[m2] = t2[m2++ - _], t2[m2] = t2[m2++ - _];
            m2 = h;
          }
        }
        return t2.length == m2 ? t2 : t2.slice(0, m2);
      }, v.F._check = function(e, t2) {
        var n2 = e.length;
        return t2 <= n2 ? e : ((t2 = new Uint8Array(Math.max(n2 << 1, t2))).set(e, 0), t2);
      }, v.F._decodeTiny = function(e, t2, n2, r, i, o) {
        for (var a2 = v.F._bitsE, s = v.F._get17, u2 = 0; u2 < n2; ) {
          var c2 = e[s(r, i) & t2];
          i += 15 & c2;
          var l = c2 >>> 4;
          if (15 >= l) o[u2] = l, u2++;
          else {
            var f = c2 = 0;
            for (16 == l ? (f = 3 + a2(r, i, 2), i += 2, c2 = o[u2 - 1]) : 17 == l ? (f = 3 + a2(r, i, 3), i += 3) : 18 == l && (f = 11 + a2(r, i, 7), i += 7), l = u2 + f; u2 < l; ) o[u2] = c2, u2++;
          }
        }
        return i;
      }, v.F._copyOut = function(e, t2, n2, r) {
        for (var i = 0, o = 0, a2 = r.length >>> 1; o < n2; ) {
          var s = e[o + t2];
          r[o << 1] = 0, r[1 + (o << 1)] = s, s > i && (i = s), o++;
        }
        for (; o < a2; ) r[o << 1] = 0, r[1 + (o << 1)] = 0, o++;
        return i;
      }, v.F.makeCodes = function(e, t2) {
        var n2, r, i = v.F.U, o = e.length, a2 = i.bl_count;
        for (n2 = 0; n2 <= t2; n2++) a2[n2] = 0;
        for (n2 = 1; n2 < o; n2 += 2) a2[e[n2]]++;
        for (i = i.next_code, n2 = 0, a2[0] = 0, r = 1; r <= t2; r++) n2 = n2 + a2[r - 1] << 1, i[r] = n2;
        for (t2 = 0; t2 < o; t2 += 2) 0 != (a2 = e[t2 + 1]) && (e[t2] = i[a2], i[a2]++);
      }, v.F.codes2map = function(e, t2, n2) {
        for (var r = e.length, i = v.F.U.rev15, o = 0; o < r; o += 2) if (0 != e[o + 1]) {
          var a2 = e[o + 1], s = o >> 1 << 4 | a2, u2 = t2 - a2;
          for (u2 = (a2 = e[o] << u2) + (1 << u2); a2 != u2; ) n2[i[a2] >>> 15 - t2] = s, a2++;
        }
      }, v.F.revCodes = function(e, t2) {
        for (var n2 = v.F.U.rev15, r = 15 - t2, i = 0; i < e.length; i += 2) e[i] = n2[e[i] << t2 - e[i + 1]] >>> r;
      }, v.F._putsE = function(e, t2, n2) {
        n2 <<= 7 & t2, e[t2 >>>= 3] |= n2, e[t2 + 1] |= n2 >>> 8;
      }, v.F._putsF = function(e, t2, n2) {
        n2 <<= 7 & t2, e[t2 >>>= 3] |= n2, e[t2 + 1] |= n2 >>> 8, e[t2 + 2] |= n2 >>> 16;
      }, v.F._bitsE = function(e, t2, n2) {
        return (e[t2 >>> 3] | e[1 + (t2 >>> 3)] << 8) >>> (7 & t2) & (1 << n2) - 1;
      }, v.F._bitsF = function(e, t2, n2) {
        return (e[t2 >>> 3] | e[1 + (t2 >>> 3)] << 8 | e[2 + (t2 >>> 3)] << 16) >>> (7 & t2) & (1 << n2) - 1;
      }, v.F._get17 = function(e, t2) {
        return (e[t2 >>> 3] | e[1 + (t2 >>> 3)] << 8 | e[2 + (t2 >>> 3)] << 16) >>> (7 & t2);
      }, v.F._get25 = function(e, t2) {
        return (e[t2 >>> 3] | e[1 + (t2 >>> 3)] << 8 | e[2 + (t2 >>> 3)] << 16 | e[3 + (t2 >>> 3)] << 24) >>> (7 & t2);
      }, v.F.U = function() {
        var e = Uint16Array, t2 = Uint32Array;
        return { next_code: new e(16), bl_count: new e(16), ordr: [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], of0: [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999], exb: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0], ldef: new e(32), df0: [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535], dxb: [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0], ddef: new t2(32), flmap: new e(512), fltree: [], fdmap: new e(32), fdtree: [], lmap: new e(32768), ltree: [], ttree: [], dmap: new e(32768), dtree: [], imap: new e(512), itree: [], rev15: new e(32768), lhst: new t2(286), dhst: new t2(30), ihst: new t2(19), lits: new t2(15e3), strt: new e(65536), prev: new e(32768) };
      }(), function() {
        function e(e2, t3, n3) {
          for (; 0 != t3--; ) e2.push(0, n3);
        }
        for (var t2 = v.F.U, n2 = 0; 32768 > n2; n2++) {
          var r = n2;
          r = (4278255360 & (r = (4042322160 & (r = (3435973836 & (r = (2863311530 & r) >>> 1 | (1431655765 & r) << 1)) >>> 2 | (858993459 & r) << 2)) >>> 4 | (252645135 & r) << 4)) >>> 8 | (16711935 & r) << 8, t2.rev15[n2] = (r >>> 16 | r << 16) >>> 17;
        }
        for (n2 = 0; 32 > n2; n2++) t2.ldef[n2] = t2.of0[n2] << 3 | t2.exb[n2], t2.ddef[n2] = t2.df0[n2] << 4 | t2.dxb[n2];
        e(t2.fltree, 144, 8), e(t2.fltree, 112, 9), e(t2.fltree, 24, 7), e(t2.fltree, 8, 8), v.F.makeCodes(t2.fltree, 9), v.F.codes2map(t2.fltree, 9, t2.flmap), v.F.revCodes(t2.fltree, 9), e(t2.fdtree, 32, 5), v.F.makeCodes(t2.fdtree, 5), v.F.codes2map(t2.fdtree, 5, t2.fdmap), v.F.revCodes(t2.fdtree, 5), e(t2.itree, 19, 0), e(t2.ltree, 286, 0), e(t2.dtree, 30, 0), e(t2.ttree, 320, 0);
      }();
      var iD = ["backups", "servers"], jD = ["backups", "servers"], kD = ["group"], nl = v.inflate, ks = v.deflate, ls = function(e) {
        function t2(e2, i, o, a2) {
          W(this, t2);
          var s = r.call(this, a2, "Session");
          return m(n(s), "chatManager", void 0), m(n(s), "joinedChannels", /* @__PURE__ */ new Set()), m(n(s), "msgDedupLru", new tc(void 0, { maxlen: 200 })), m(n(s), "startTime", Date.now()), m(n(s), "seq", U.fromNumber(1, true)), m(n(s), "userJoinOptions", new is(false)), m(n(s), "seqSentStatuses", [false, false]), m(n(s), "dialogueSequenceLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "loggedOut", false), m(n(s), "messageSentTimes", []), m(n(s), "curLoginSockets", [void 0, void 0]), m(n(s), "loginSocketSubs", [{ channels: /* @__PURE__ */ new Map(), receivers: [] }, { channels: /* @__PURE__ */ new Map(), receivers: [] }]), m(n(s), "lastLoginSockets", [new qe(1), new qe(1)]), m(n(s), "dialPendingMsgSubjectMap", /* @__PURE__ */ new Map()), m(n(s), "context", void 0), m(n(s), "connection", void 0), m(n(s), "instanceId", void 0), m(n(s), "registerSocketsFailureListener", function() {
            s.connection.once("socketsFailure", function() {
              s.log("socketsFailure, creating a new connection"), ad(function() {
                return s.connection.removeAllListeners(), s.connection = new Yr(s.context, s.logger, true), s.loginHandler(15e3, true);
              }).pipe(oe(function(e3) {
                return e3.pipe(cd(Zd.getParameter("RECONNECTING_AP_INTERVAL")));
              }), ob(s.connection.apClient.apFinish$)).subscribe(function() {
                s.log("new connection connected");
              });
            }), 0 === s.connection.listenerCount("tokenExpired") && s.connection.on("tokenExpired", function() {
              s.emit("tokenExpired");
            });
          }), s.context = e2, s.connection = i, s.instanceId = o, s.chatManager = new hD(a2), s.log("The instanceId is %s", s.instanceId.toString()), s;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "fetchFileUploadIndexGet", value: function(e2) {
          var n2 = e2.hash, r2 = e2.size;
          if (0 === (e2 = this.getLoginSockets()).length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return e2.forEach(function(e3) {
            e3.sendPacket("FileUploadIndexGet", { seq: i, hash: n2, size: r2 });
          }), { ret: Ca.apply(void 0, G(e2.map(function(e3) {
            return e3.fromReceived("FileUploadIndexRet").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))), fin: Ca.apply(void 0, G(e2.map(function(e3) {
            return e3.fromReceived("FileUploadIndexFin").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))), err: Xb.apply(void 0, G(e2.map(function(e3) {
            return e3.fromReceived("FileUploadIndexErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The media message upload failure, code %d", e4.code], lg);
            }));
          }))), timeout: t2.genTimeoutError(Lh) };
        } }, { key: "requestFileUploadIndexSet", value: function(e2) {
          var n2 = e2.hash, r2 = e2.unit, i = e2.servers;
          if (0 === (e2 = this.getLoginSockets()).length) throw new K("Client is not logged in");
          var o = this.incGetSeq();
          return e2.forEach(function(e3) {
            e3.sendPacket("FileUploadIndexSet", { seq: o, servers: i, hash: n2, unit: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Lh)].concat(G(e2.map(function(e3) {
            return e3.fromReceived("FileUploadIndexErr").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["FileUploadIndexSet failure, code %d", e4.code], lg);
            }));
          })), G(e2.map(function(e3) {
            return e3.fromReceived("FileUploadIndexFin").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestFileDownloadIndexGet", value: function(e2) {
          var n2 = e2.size, r2 = e2.zone, i = e2.unit, o = e2.hash, a2 = this.getLoginSockets();
          if (0 === a2.length) throw new K("Client is not logged in");
          var s = this.incGetSeq();
          return a2.forEach(function(e3) {
            e3.sendPacket("FileDownloadIndexGet", { seq: s, size: n2, zone: r2, unit: i, hash: o });
          }), e2 = Ca.apply(void 0, G(a2.map(function(e3) {
            return e3.fromReceived("FileDownloadIndexRet").pipe(aa(function(e4) {
              return s.eq(e4.seq);
            }));
          }))).pipe(ba(function(e3) {
            var t3 = e3.backups, n3 = e3.servers;
            return e3 = ff(e3, iD), ua({ backupList: t3.map(function(e4) {
              return [e4];
            }), serverList: n3.map(function(e4) {
              return [e4];
            }) }, e3);
          }), cd(500)), a2 = jm(a2.map(function(e3) {
            return e3.fromReceived("FileDownloadIndexRet").pipe(aa(function(e4) {
              return s.eq(e4.seq);
            }));
          })), Ca(e2, a2.pipe(ba(function(e3) {
            return e3.reduce(function(e4, t3) {
              var n3 = e4.backupList, r3 = e4.serverList;
              e4 = t3.backups;
              var i2 = t3.servers;
              return t3 = ff(t3, jD), ua({ backupList: e4.map(function(e5, t4) {
                return [e5].concat(G(void 0 !== n3 && Array.isArray(n3[t4]) ? n3[t4] : []));
              }), serverList: i2.map(function(e5, t4) {
                return [e5].concat(G(void 0 !== n3 && Array.isArray(r3[t4]) ? r3[t4] : []));
              }) }, t3);
            }, {});
          })), t2.genTimeoutError(Lh));
        } }, { key: "loginHandler", value: function() {
          var e2 = this, t3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 2e4, n2 = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
          if (this.loggedOut && n2) throw new K("Already logged out, request ignored");
          n2 && this.registerSocketsFailureListener(), this.connection.initConnection();
          var r2 = this.getSocketLoginObservables(this.connection.lastOpenSockets, this.seq), i = Date.now();
          return r2.forEach(function(t4, r3) {
            var o = e2.loginSocketSubs[r3].login;
            void 0 !== o && o.unsubscribe(), e2.loginSocketSubs[r3].login = t4.pipe(ca(function(t5) {
              var o2;
              e2.curLoginSockets[r3] = t5;
              var a2 = Date.now();
              eb("Link", { ackedServerIp: t5.address, destServerIp: t5.ip, ec: 0, sc: 0, elapse: fb(e2.startTime), lts: U.fromNumber(a2), responseTime: i - a2, sid: Xa(e2.instanceId), userId: e2.context.uid }, null !== (o2 = e2.context.config.enableCloudProxy) && void 0 !== o2 && o2), e2.emit("userJoined", t5.env), n2 && e2.connection.apClient.apFinish$.next(void 0);
            })).subscribe(e2.lastLoginSockets[r3]);
          }), this.initKeepAliveSender(), this.initKeepAliveReconnector(), this.initLoginReceiver(), Xb.apply(void 0, G(r2).concat([gb(this.connection, "connectionInitFailure").pipe(ca(function(e3) {
            if (sa(e3) || Sa(e3)) throw e3;
            throw new da("Login failure", { code: Zq, originalError: e3 });
          }))])).pipe(Ka(1), hb(t3), Ga(function(t4) {
            return t4 instanceof pb && e2.warn("Client login timeout"), t4 && t4.code === Kh && (e2.connection.emit("tokenExpired"), e2.connection.apClient.apFinish$.next(void 0)), e2.clearSockets(0, n2), Z(t4);
          }), ca(function() {
            n2 || e2.registerSocketsFailureListener();
          }), wg(function() {
            n2 || e2.connection.apClient.apFinish$.next(void 0);
          }));
        } }, { key: "logoutHandler", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2, r2, i = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  return this.loggedOut = true, this.connection.apClient.apFinish$.next(void 0), t3 = this.getLoginSockets(), n2 = t3.map(function(e5) {
                    return e5.sendPacket("UserQuit", {}), i.connection.waitClosing(e5);
                  }), this.clearSockets(5e3), r2 = t3.map(function(e5) {
                    return e5.env;
                  }), [0, 1].filter(function(e5) {
                    return !r2.includes(e5);
                  }).forEach(function(e5) {
                    i.connection.closeSocket(e5, 0);
                  }), e4.abrupt("return", Xb.apply(void 0, G(n2)).toPromise());
                case 9:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "requestChannelJoin", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (0 !== this.getLoginSockets().length) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("Client is not logged in. Cannot join the channel", Vq);
                case 2:
                  return r2 = gb(this, "channelLeft").pipe(wb(function(e5) {
                    return e5 === t3;
                  }), Ka(1)), i = this.incGetSeq(), (o = this.lastLoginSockets.map(function(e5) {
                    return e5.pipe(Cc(function(e6, t4) {
                      0 !== t4 && a2.incSeqIfNeeded(e6.env);
                      var r3 = 0 === t4 ? i : a2.seq;
                      return e6.sendPacket("GroupEnter", { account: n2, seq: r3 }), e6.fromReceived("GroupReply").pipe(aa(function(e7) {
                        return r3.eq(e7.seq);
                      }), ca(function(e7) {
                        if (0 !== (e7 = e7.code)) throw new da(["Channel join failure. The response code is %d", e7], Rq);
                      }));
                    }), ob(r2), pe());
                  })).forEach(function(e5, n3) {
                    var r3 = function() {
                      return a2.loginSocketSubs[n3].channels.delete(t3.channelId);
                    };
                    a2.loginSocketSubs[n3].channels.set(t3.channelId, e5.subscribe({ error: r3, complete: r3 }));
                  }), e4.next = 8, Xb.apply(void 0, G(o)).pipe(Ka(1), hb(1e4), Ga(function(e5) {
                    return e5 instanceof pb && a2.warn("Channel join timeout"), Z(e5);
                  })).toPromise();
                case 8:
                  this.joinedChannels.add(t3);
                case 9:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "requestChannelLeave", value: function(e2, t3) {
          this.emit("channelLeft", e2), this.joinedChannels.delete(e2), this.getLoginSockets().forEach(function(e3) {
            e3.sendPacket("GroupLeave", { account: t3 });
          });
        } }, { key: "requestChannelMemberList", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in. Cannot get the channel members", cA);
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("GroupAllUsersList", { group: e2, pageNumber: 0, pageSize: 200, seq: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Pq)].concat(G(n2.map(function(t3) {
            return t3.fromReceived("GroupAllUsersResult").pipe(aa(function(t4) {
              var n3 = t4.seq;
              return t4.group === e2 && r2.eq(n3);
            }));
          }))));
        } }, { key: "requestPeersOnlineStatus", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("UserStatusList", { users: e2, seq: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(oA)].concat(G(n2.map(function(e3) {
            return e3.fromReceived("UserStatusResult").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestSetLocalUserAttributes", value: function(e2, n2) {
          var r2 = this, i = this.getLoginSockets();
          if (0 === i.length) throw new K("Client is not logged in");
          var o = this.incGetSeq();
          return i.forEach(function(t3, i2) {
            void 0 !== n2 && i2 !== n2 || t3.sendPacket("UserAttributeSet", { account: r2.context.uid, attributeInfos: Object.entries(e2).map(function(e3) {
              return { key: (e3 = ra(e3, 2))[0], value: e3[1] };
            }), seq: o });
          }), Ca.apply(void 0, G(i.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The user attributes set failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(i.map(function(e3) {
            return e3.fromReceived("UserAttributeRsp").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestSetChannelAttributes", value: function(e2, n2, r2) {
          var i = this.getLoginSockets();
          if (0 === i.length) throw new K("Client is not logged in");
          var o = this.incGetSeq();
          return i.forEach(function(t3) {
            t3.sendPacket("GroupAttributeSet", { broadcast: r2, group: e2, attributeInfos: Object.entries(n2).map(function(e3) {
              return { key: (e3 = ra(e3, 2))[0], value: e3[1] };
            }), seq: o });
          }), Ca.apply(void 0, G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The group attributes set failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeRsp").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestAddOrUpdateLocalUserAttributes", value: function(e2) {
          var n2 = this, r2 = this.getLoginSockets();
          if (0 === r2.length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return r2.forEach(function(t3) {
            t3.sendPacket("UserAttributeMod", { account: n2.context.uid, attributeInfos: Object.entries(e2).map(function(e3) {
              return { key: (e3 = ra(e3, 2))[0], value: e3[1] };
            }), seq: i });
          }), Ca.apply(void 0, G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The user attributes add or update failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeRsp").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestAddOrUpdateChannelAttributes", value: function(e2, n2, r2) {
          var i = this.getLoginSockets();
          if (0 === i.length) throw new K("Client is not logged in");
          var o = this.incGetSeq();
          return i.forEach(function(t3) {
            t3.sendPacket("GroupAttributeMod", { broadcast: r2, group: e2, attributeInfos: Object.entries(n2).map(function(e3) {
              return { key: (e3 = ra(e3, 2))[0], value: e3[1] };
            }), seq: o });
          }), Ca.apply(void 0, G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The group attributes add or update failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeRsp").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestDeleteLocalUserAttributesByKeys", value: function(e2) {
          var n2 = this, r2 = this.getLoginSockets();
          if (0 === r2.length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return r2.forEach(function(t3) {
            t3.sendPacket("UserAttributeDel", { account: n2.context.uid, attributes: e2, seq: i });
          }), Ca.apply(void 0, G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The user attributes delete failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeRsp").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestDeleteChannelAttributesByKeys", value: function(e2, n2, r2) {
          var i = this.getLoginSockets();
          if (0 === i.length) throw new K("Client is not logged in");
          var o = this.incGetSeq();
          return i.forEach(function(t3) {
            t3.sendPacket("GroupAttributeDel", { group: e2, broadcast: r2, attributes: n2, seq: o });
          }), Ca.apply(void 0, G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The channel attributes delete failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(i.map(function(e3) {
            return e3.fromReceived("GroupAttributeRsp").pipe(aa(function(e4) {
              return o.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestClearLocalUserAttributes", value: function() {
          var e2 = this, n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("UserAttributeSet", { account: e2.context.uid, seq: r2, attributeInfos: [] });
          }), Ca.apply(void 0, G(n2.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The user attributes clear failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(n2.map(function(e3) {
            return e3.fromReceived("UserAttributeRsp").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestClearChannelAttributes", value: function(e2, n2) {
          var r2 = this.getLoginSockets();
          if (0 === r2.length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return r2.forEach(function(t3) {
            t3.sendPacket("GroupAttributeSet", { group: e2, seq: i, attributeInfos: [], broadcast: n2 });
          }), Ca.apply(void 0, G(r2.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The channel attributes clear failure, code %d", e4.code], Sb);
            }));
          })).concat([t2.genTimeoutError(Tb)], G(r2.map(function(e3) {
            return e3.fromReceived("GroupAttributeRsp").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestGetUserAttributesByKeys", value: function(e2, n2) {
          var r2 = this.getLoginSockets();
          if (0 === r2.length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return r2.forEach(function(t3) {
            t3.sendPacket("UserAttributeGet", { account: e2, seq: i, attributes: n2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Tb)].concat(G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              if (10008 === (e4 = e4.code)) throw new da("The user requested is not online", Lq);
              throw new Wc(["User attribute operation unknown error code: %d", e4], Sb);
            }));
          })), G(r2.map(function(e3) {
            return e3.fromReceived("UserAttributeRet").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestGetChannelAttributesByKeys", value: function(e2, n2) {
          var r2 = this.getLoginSockets();
          if (0 === r2.length) throw new K("Client is not logged in");
          var i = this.incGetSeq();
          return r2.forEach(function(t3) {
            t3.sendPacket("GroupAttributeGet", { group: e2, seq: i, attributes: n2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Tb)].concat(G(r2.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }), ba(function(e4) {
              throw new da(["The channel attributes get failure, code %d", e4.code], Sb);
            }));
          })), G(r2.map(function(e3) {
            return e3.fromReceived("GroupAttributeRet").pipe(aa(function(e4) {
              return i.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestGetUserAttributeKeys", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("UserAttributeKeysGet", { account: e2, seq: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Tb)].concat(G(n2.map(function(e3) {
            return e3.fromReceived("UserAttributeErr").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }), ba(function(e4) {
              if (10008 === (e4 = e4.code)) throw new da("The user requested is not online", Lq);
              throw new Wc(["User attribute operation unknown error code: %d", e4], Sb);
            }));
          })), G(n2.map(function(e3) {
            return e3.fromReceived("UserAttributeKeysRet").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestGetChannelAttributesKeys", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("GroupAttributeKeysGet", { group: e2, seq: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Tb)].concat(G(n2.map(function(e3) {
            return e3.fromReceived("GroupAttributeErr").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }), ba(function(e4) {
              throw new Wc(["Channel attribute operation unknown error code: %d", e4.code], Sb);
            }));
          })), G(n2.map(function(e3) {
            return e3.fromReceived("GroupAttributeKeysRet").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestGetChannelMemberCount", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("GroupStatusList", { groups: e2, seq: r2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(Pq)].concat(G(n2.map(function(e3) {
            return e3.fromReceived("GroupStatusResult").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestSubscribePeersOnlineStatus", value: function(e2) {
          var n2 = this.getLoginSockets();
          if (0 === n2.length) throw new K("Client is not logged in");
          var r2 = this.incGetSeq();
          return n2.forEach(function(t3) {
            t3.sendPacket("SubscribeUserStatus", { seq: r2, users: e2 });
          }), Ca.apply(void 0, [t2.genTimeoutError(vA)].concat(G(n2.map(function(e3) {
            return e3.fromReceived("SubscribeResponse").pipe(aa(function(e4) {
              return r2.eq(e4.seq);
            }));
          }))));
        } }, { key: "requestUnsubscribePeersOnlineStatus", value: function(e2) {
          var t3 = this.getLoginSockets();
          if (0 === t3.length) throw new K("Client is not logged in");
          var n2 = this.incGetSeq();
          t3.forEach(function(t4) {
            t4.sendPacket("UnsubscribeUserStatus", { seq: n2, users: e2 });
          });
        } }, { key: "sendInvitationMessage", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2, l, f, h, p, d = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = t3.peerId, r2 = t3.callId, i = t3.extra, o = t3.isAcceptAck, a2 = t3.channelId, s = t3.type, u2 = { callId: r2 }, void 0 === o) {
                    e4.next = 6;
                    break;
                  }
                  if ("CallAccept" === s) {
                    e4.next = 5;
                    break;
                  }
                  throw Error("invalid invitation type");
                case 5:
                  u2.type = o ? "ack" : "request";
                case 6:
                  return u2.channel = a2, ("CallInvite" === s || "CallCancel" === s || "CallReject" === s || "CallAccept" === s && false === o) && void 0 !== i && (u2.extra = i), c2 = Bg(), this.log("The sent invitation body is %o", u2), l = function(e5) {
                    return { MiscMap: {}, sequence: U.fromNumber(1), dialogue: c2, instance: d.instanceId, dst: n2, ms: U.fromNumber(Date.now(), true), options: new ae({ IterationNumber: e5, MessageType: s }).toLong(), payload: new TextEncoder().encode(JSON.stringify(u2)), src: d.context.uid };
                  }, e4.next = 14, Kb(this.sendMessageToRetry(l, true)).pipe(hb(1e4), Ga(function(e5) {
                    return e5 instanceof pb && d.warn("Send invitation timeout"), Z(e5);
                  })).toPromise();
                case 14:
                  return f = e4.sent, h = f.code, p = f.retryTimes, e4.abrupt("return", { hasPeerReceived: 0 === h, hasReSent: 0 !== p });
                case 18:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "sendMediaMessage", value: function() {
          var e2 = J(w.mark(function e3(t3, n2, r2, i, o, a2) {
            var s, u2, c2, l, f, h, p, d, v2, b, g, y2, E2, _, O2, A, k, R2, T2, N2, S2, C, x, L2, P, j, M2, D2, q2, F2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (u2 = n2.width, c2 = void 0 === u2 ? 0 : u2, l = n2.height, f = void 0 === l ? 0 : l, h = n2.fileName, p = void 0 === h ? "" : h, d = n2.description, v2 = void 0 === d ? "" : d, b = n2.thumbnail, g = void 0 === b ? new Blob() : b, y2 = n2.thumbnailHeight, E2 = void 0 === y2 ? 0 : y2, _ = n2.thumbnailWidth, O2 = void 0 === _ ? 0 : _, A = n2.size, k = void 0 === A ? 0 : A, R2 = n2.mediaId, T2 = o.enableOfflineMessaging, N2 = o.enableHistoricalMessaging, za(r2)) {
                    e4.next = 4;
                    break;
                  }
                  throw new I("The send message arguments are not valid", i ? $k : hg);
                case 4:
                  if (!(32768 < new Blob([p, g, v2]).size)) {
                    e4.next = 6;
                    break;
                  }
                  throw new I("The size of message overflowed ", i ? ve : Hh);
                case 6:
                  return S2 = this.chatManager.getChatInfo(r2), C = S2.dialogue, x = S2.sequence, L2 = this.instanceId, this.log('A%s media message is sending to %s: "'.concat(L2, "-").concat(C, "#").concat(x, '"'), i ? " peer" : " channel", oa(r2)), m(s = {}, "media_description", v2), m(s, "media_width", c2), m(s, "media_height", f), m(s, "media_thumbnailwidth", O2), m(s, "media_thumbnailheight", E2), m(s, "media_size", k), m(s, "media_id", R2), m(s, "media_filename", p), P = uc(s, function(e5) {
                    return new TextEncoder().encode(e5.toString());
                  }), e4.t0 = Uint8Array, e4.next = 14, Ji(g);
                case 14:
                  return e4.t1 = e4.sent, P.media_thumbnail = new e4.t0(e4.t1), j = i && "IMAGE" === t3 ? "PeerImageMessage" : i && "FILE" === t3 ? "PeerFileMessage" : i || "IMAGE" !== t3 ? "ChannelFileMessage" : "ChannelImageMessage", M2 = function(e5) {
                    return { MiscMap: P, sequence: x, dialogue: C, instance: L2, dst: r2, ms: U.fromNumber(Date.now(), true), options: new ae({ IterationNumber: e5, CompressionMethod: "Uncompressed", MessageType: j, ToCache: T2, ToArchive: N2 }).toLong(), payload: new Uint8Array(), src: F2.context.uid };
                  }, e4.next = 20, Kb(this.sendMessageToRetry(M2, true)).pipe(hb(void 0 === a2 ? 1e4 : a2), Ga(function(e5) {
                    return e5 instanceof pb && F2.warn("Send message timeout"), Z(e5);
                  })).toPromise();
                case 20:
                  if (D2 = e4.sent, 2 !== (q2 = D2.code)) {
                    e4.next = 24;
                    break;
                  }
                  throw new da("The peer does not support this type of message", nA);
                case 24:
                  return e4.abrupt("return", { hasPeerReceived: 0 === q2 });
                case 25:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2, r2, i, o, a2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "sendRawMessage", value: function() {
          var e2 = J(w.mark(function e3(t3, n2, r2, i, o, a2) {
            var s, u2, c2, l, f, h, p, d, v2, b, g = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (s = o.enableOfflineMessaging, u2 = o.enableHistoricalMessaging, za(r2) && t3 instanceof Uint8Array && "string" == typeof n2) {
                    e4.next = 3;
                    break;
                  }
                  throw new I("The send message arguments are not valid", i ? $k : hg);
                case 3:
                  if (!(32768 < t3.byteLength + new Blob([n2]).size)) {
                    e4.next = 5;
                    break;
                  }
                  throw new ib("The message size is over the 32KB limit", i ? ve : Hh);
                case 5:
                  return c2 = !Zd.getParameter("DISABLE_MESSAGE_COMPRESSION") && 128 <= t3.byteLength, l = this.chatManager.getChatInfo(r2), f = l.dialogue, h = l.sequence, p = this.instanceId, this.log('A%s %s raw message is sending to %s: "'.concat(p, "-").concat(f, "#").concat(h, '"'), c2 ? " compressed" : "", i ? "peer" : "channel", oa(r2)), d = function(e5) {
                    return { MiscMap: { description: new TextEncoder().encode(n2) }, sequence: h, dialogue: f, instance: p, dst: r2, ms: U.fromNumber(Date.now(), true), options: new ae({ IterationNumber: e5, CompressionMethod: c2 ? "Zlib" : "Uncompressed", MessageType: i ? "PeerRawMessage" : "ChannelRawMessage", ToCache: s, ToArchive: u2 }).toLong(), payload: c2 ? ks(t3) : t3, src: g.context.uid };
                  }, e4.next = 12, Kb(this.sendMessageToRetry(d, true)).pipe(hb(void 0 === a2 ? 1e4 : a2), Ga(function(e5) {
                    return e5 instanceof pb && g.warn("Send message timeout"), Z(e5);
                  })).toPromise();
                case 12:
                  return v2 = e4.sent, b = v2.code, e4.abrupt("return", { hasPeerReceived: 0 === b });
                case 15:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2, r2, i, o, a2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "sendTextMessage", value: function() {
          var e2 = J(w.mark(function e3(t3, n2, r2, i, o) {
            var a2, s, u2, c2, l, f, h, p, d, v2, b, g = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (a2 = i.enableOfflineMessaging, s = i.enableHistoricalMessaging, za(n2)) {
                    e4.next = 3;
                    break;
                  }
                  throw new I("The send message arguments are not valid", r2 ? $k : hg);
                case 3:
                  if (!(32768 < new Blob([t3]).size)) {
                    e4.next = 5;
                    break;
                  }
                  throw new ib("The message size is over the 32KB limit", r2 ? ve : Hh);
                case 5:
                  return u2 = !Zd.getParameter("DISABLE_MESSAGE_COMPRESSION") && 128 <= new Blob([t3]).size, c2 = this.chatManager.getChatInfo(n2), l = c2.dialogue, f = c2.sequence, h = this.instanceId, this.log('A%s %s message is sending to %s: "'.concat(h, "-").concat(l, "#").concat(f, '"'), u2 ? " compressed" : "", r2 ? "peer" : "channel", oa(n2)), p = new TextEncoder().encode(t3), d = function(e5) {
                    return { MiscMap: {}, sequence: f, dialogue: l, instance: h, dst: n2, ms: U.fromNumber(Date.now(), true), options: new ae({ IterationNumber: e5, CompressionMethod: u2 ? "Zlib" : "Uncompressed", MessageType: r2 ? "PeerTextMessage" : "ChannelTextMessage", ToCache: a2, ToArchive: s }).toLong(), payload: u2 ? ks(p) : p, src: g.context.uid };
                  }, e4.next = 13, Kb(this.sendMessageToRetry(d, true)).pipe(hb(void 0 === o ? 1e4 : o), Ga(function(e5) {
                    return e5 instanceof pb && g.warn("Send message timeout"), Z(e5);
                  })).toPromise();
                case 13:
                  return v2 = e4.sent, b = v2.code, e4.abrupt("return", { hasPeerReceived: 0 === b });
                case 16:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3, n2, r2, i, o) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "cleanLoginSubs", value: function(e2, t3) {
          Object.entries(this.loginSocketSubs[e2]).forEach(function(e3) {
            var n2 = (e3 = ra(e3, 2))[1];
            "channels" === e3[0] && t3 || (Array.isArray(n2) || n2 instanceof Map ? n2.forEach(function(e4) {
              return e4.unsubscribe();
            }) : n2 && n2.unsubscribe());
          }), this.loginSocketSubs[e2] = { channels: t3 ? this.loginSocketSubs[e2].channels : /* @__PURE__ */ new Map(), receivers: [] };
        } }, { key: "sendMessageToRetry", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l, f, h = this, p = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (r2 = 2 < p.length && void 0 !== p[2] ? p[2] : 0, this.log("Attempt to send the message ".concat(n2 ? " with retrying, %o" : "without retrying"), { retryTimes: r2 }), 0 !== (i = this.getLoginSockets()).length) {
                    e4.next = 5;
                    break;
                  }
                  throw Error("no logged-in sockets");
                case 5:
                  return o = t3(r2), i.forEach(function(e5) {
                    e5.sendPacket("Message", o);
                  }), a2 = o.dialogue, s = o.sequence, u2 = o.instance, c2 = i.map(function(e5) {
                    return e5.fromReceived("Ack").pipe(wb(function(e6) {
                      return a2.eq(e6.dialogue) && s.eq(e6.sequence) && u2.eq(e6.instance);
                    }));
                  }), e4.prev = 9, e4.next = 12, Xb.apply(void 0, G(c2)).pipe(hb(6e3), Ga(function(e5) {
                    return Sa(e5) && h.warn("Message send timeout, retry times %d", r2), Z(e5);
                  }), Ka(1)).toPromise();
                case 12:
                  return l = e4.sent, f = l.code, this.log("The message has been acked, %o", { code: f }), e4.abrupt("return", { code: f, retryTimes: r2 });
                case 18:
                  if (e4.prev = 18, e4.t0 = e4.catch(9), !(e4.t0 instanceof pb && n2)) {
                    e4.next = 22;
                    break;
                  }
                  return e4.abrupt("return", this.sendMessageToRetry(t3, false, r2 + 1));
                case 22:
                  throw e4.t0;
                case 23:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[9, 18]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "initKeepAliveSender", value: function() {
          var e2 = this;
          this.lastLoginSockets.map(function(t3) {
            return t3.pipe(Cc(function(t4) {
              return Bc(0, 2750).pipe(ca(function() {
                e2.incSeqIfNeeded(t4.env), t4.sendPacket("Ping", { ms: U.fromNumber(Date.now(), true), seq: e2.seq });
              }));
            }));
          }).forEach(function(t3, n2) {
            var r2 = e2.loginSocketSubs[n2].keepAlive;
            void 0 !== r2 && r2.unsubscribe(), e2.loginSocketSubs[n2].keepAlive = t3.subscribe({ error: function() {
            } });
          });
        } }, { key: "initKeepAliveReconnector", value: function() {
          var e2 = this;
          this.lastLoginSockets.map(function(e3) {
            return e3.pipe(Cc(function(e4) {
              var t3, n2 = false, r2 = e4.userJoin$.pipe(ca(function() {
                n2 = true;
              })), i = e4.input$.pipe(ca(function(e5) {
                "Ping" !== Li[e5.uri].slice(0, -3) && (n2 = false);
              }));
              return Xb(Bc(15e3, 1e4).pipe(Pt(e4.receivedPacket), ca(function(r3) {
                r3 = ra(r3, 2), r3 = ra(r3[1], 2)[1], t3 !== r3 || n2 || e4.forceReconnect(), t3 = r3;
              })), r2, i);
            }));
          }).forEach(function(t3, n2) {
            var r2 = e2.loginSocketSubs[n2].keepAliveReconnector;
            void 0 !== r2 && r2.unsubscribe(), e2.loginSocketSubs[n2].keepAliveReconnector = t3.subscribe({ error: function() {
            } });
          });
        } }, { key: "initLoginReceiver", value: function() {
          var e2 = this;
          this.lastLoginSockets.map(function(t3) {
            return t3.pipe(Cc(function(t4) {
              return Xb(gb(t4, "reconnect").pipe(ca(e2.onSocketReconnect(t4))), t4.fromReceived("Message").pipe(ca(e2.onMessage(t4))), t4.fromReceived("GroupEnterNotice").pipe(ca(e2.onGroupEnterNotice())), t4.fromReceived("GroupLeaveNotice").pipe(ca(e2.onGroupLeaveNotice())), t4.fromReceived("GroupCountNotice").pipe(ca(e2.onGroupCountNotice())), t4.fromReceived("GroupAttributeAlt").pipe(ca(e2.onGroupAttributeAlt())), t4.fromReceived("UserJoinNotice").pipe(ca(e2.onUserNotice(S.PeerOnlineState.ONLINE))), t4.fromReceived("UserQuitNotice").pipe(ca(e2.onUserNotice(S.PeerOnlineState.OFFLINE))), t4.fromReceived("UserWaitNotice").pipe(ca(e2.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(qf(void 0));
            }));
          }).forEach(function(t3, n2) {
            e2.loginSocketSubs[n2].receivers.push(t3.subscribe({ error: function() {
            } }));
          });
        } }, { key: "requestSocketLogin", value: function(e2, t3, n2) {
          var r2 = this;
          return im(ad(function() {
            r2.userJoinOptions = new is(t3), e2.sendPacket("UserJoin", { account: r2.context.uid, instance: r2.instanceId, opt: r2.userJoinOptions.toLong(), seq: n2, ticket: e2.ticket });
          }), e2.fromReceived("UserResp").pipe(aa(function(e3) {
            return n2.eq(e3.seq);
          }), ca(function(t4) {
            if (0 !== (t4 = t4.code)) throw r2.clearSockets(), r2.logError("Connected to gateway success but the Rtm server rejected login"), new da(["Login failure. The response code from the RTM service is %d", t4], jg);
            r2.log("ENV_%d logged in", e2.env);
          }), qf(e2), hb(15e3))).pipe(wb(function(e3) {
            return void 0 !== e3;
          }), Ga(function(e3) {
            return e3 instanceof pb && r2.warn("Login response timeout, rejoin: %s", t3), Z(e3);
          }));
        } }, { key: "getSocketLoginObservables", value: function(e2, t3) {
          var n2 = this;
          return e2.map(function(e3) {
            return e3.pipe(ca(function(e4) {
              0 === e4.listenerCount("socketUserDrop") && e4.on("socketUserDrop", function(t4) {
                return n2.onUserDrop(t4, e4);
              });
            }), Cc(function(e4, r2) {
              return n2.incSeqIfNeeded(e4.env), n2.requestSocketLogin(e4, 0 !== r2, 0 === r2 ? t3 : n2.seq);
            }), pe());
          });
        } }, { key: "incSeqIfNeeded", value: function(e2) {
          if (![0, 1].includes(e2)) throw new Fa({ INVALID_ENV: "The env argument is not 0 or 1" });
          this.seqSentStatuses[e2] && (this.seq = this.seq.add(1), this.seqSentStatuses = [false, false]), this.seqSentStatuses[e2] = true;
        } }, { key: "incGetSeq", value: function() {
          return this.seq = this.seq.add(1), this.seqSentStatuses = [true, true], this.seq;
        } }, { key: "getLoginSockets", value: function() {
          for (var e2 = this.curLoginSockets, t3 = -1, n2 = null == e2 ? 0 : e2.length, r2 = 0, i = []; ++t3 < n2; ) {
            var o = e2[t3];
            o && (i[r2++] = o);
          }
          return i;
        } }, { key: "emitMessage", value: function(e2, n2) {
          var r2 = e2.options, i = e2.payload, o = e2.src, a2 = e2.dst, s = e2.instance, u2 = e2.dialogue, c2 = e2.sequence, l = e2.ms, f = e2.MiscMap;
          this.dialogueSequenceLru.set(u2.toString(), c2), s = "".concat(s, "-").concat(u2, "#").concat(c2), this.msgDedupLru.has(s) ? this.warn("Env_%d: Messages out-of-order or not start with 1: %s", n2, s) : (this.msgDedupLru.set(s, void 0), n2 = new ae(r2), this.lastLoginSockets.forEach(function() {
            var n3 = J(w.mark(function n4(r3) {
              var i2;
              return w.wrap(function(n5) {
                for (; ; ) switch (n5.prev = n5.next) {
                  case 0:
                    return n5.next = 2, r3.pipe(Ka(1)).toPromise();
                  case 2:
                    i2 = n5.sent, t2.sendMessageAck(e2, i2);
                  case 4:
                  case "end":
                    return n5.stop();
                }
              }, n4);
            }));
            return function(e3) {
              return n3.apply(this, arguments);
            };
          }()), r2 = n2.isZlibCompressed(), n2.isInvitation() ? (a2 = pa(r2 ? nl(Xm(i, Uint8Array.of(0, 0, 0, 0))) : i), a2 = JSON.parse(a2), this.log("The received invitation body is %o", a2), this.emit("invitationMessage", { body: a2, type: n2.getInvitationType(), peerId: o, serverReceivedTs: l.toNumber() })) : n2.isTextMessage() ? (f = n2.isPeerTextMessage(), i = pa(r2 ? nl(Xm(i, Uint8Array.of(0, 0, 0, 0))) : i), this.info("Received a %s %s text message from %s to %s, %s", r2 ? " compressed" : "", f ? "peer" : "channel", oa(o), oa(a2), s), f ? (o = { text: i, peerId: o, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: n2.isFromCache() } }, this.emit("peerTextMessage", o)) : this.emit("channelTextMessage", { channelId: a2, memberId: o, text: i, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: false } })) : n2.isRawMessage() ? (u2 = n2.isRawPeerMessage(), f = void 0 === (f = f.description) ? "" : pa(f), i = r2 ? nl(i) : i, this.info("Received a %s %s raw message from %s to %s, %s", r2 ? " compressed" : "", u2 ? "peer" : "channel", oa(o), oa(a2), s), u2 ? (o = { desc: f, raw: i, peerId: o, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: n2.isFromCache() } }, this.emit("peerRawMessage", o)) : this.emit("channelRawMessage", { desc: f, raw: i, channelId: a2, memberId: o, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: false } })) : (n2.isImageMessage() || n2.isFileMessage()) && (i = n2.isPeerMessage(), this.info("Received a %s media message from %s to %s, %s", i ? "peer" : "channel", oa(o), oa(a2), s), i ? this.emit("peerMediaMessage", { messageType: n2.isImageMessage() ? "IMAGE" : "FILE", details: f, peerId: o, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: n2.isFromCache() } }) : this.emit("channelMediaMessage", { messageType: n2.isImageMessage() ? "IMAGE" : "FILE", details: f, memberId: o, channelId: a2, properties: { serverReceivedTs: l.toNumber(), isOfflineMessage: n2.isFromCache() } })));
        } }, { key: "onSocketReconnect", value: function(e2) {
          var t3 = this;
          return function() {
            var n2 = [0, 1].filter(function(t4) {
              return t4 !== e2.env;
            })[0];
            (n2 = t3.connection.curOpenSockets[n2]) && !n2.loggedIn && t3.emit("connectionLost");
          };
        } }, { key: "onUserDrop", value: function(e2, t3) {
          var n2;
          e2 = e2.code, eb("KickedOff", { code: 0, elapse: fb(this.startTime), linkId: parseInt(t3.name.split("-")[1], 10), lts: U.fromNumber(Date.now()), server: t3.address, serverCode: e2, sid: Xa(this.instanceId), userId: this.context.uid }, null !== (n2 = this.context.config.enableCloudProxy) && void 0 !== n2 && n2), 10006 === e2 || 10001 === e2 ? this.warn("Login too often and kicked off, reconnect and login") : 10009 === e2 ? (this.warn("The instance ID conflicts, reconnecting"), this.instanceId = Bg(), this.context.sid = Xa(this.instanceId), this.emit("instanceChanged", this.instanceId)) : [11, 14, 15, 16].includes(e2) && (this.emit("userDrop", e2), this.clearSockets());
        } }, { key: "clearSockets", value: function() {
          var e2 = this, t3 = 0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : 0, n2 = 1 < arguments.length && void 0 !== arguments[1] && arguments[1];
          [0, 1].forEach(function(r2) {
            e2.cleanLoginSubs(r2, n2), e2.connection.closeSocket(r2, t3);
          });
        } }, { key: "onMessage", value: function(e2) {
          var t3 = this;
          return function(n2) {
            var r2 = n2.dialogue, i = n2.instance, o = n2.sequence, a2 = n2.options;
            if (n2.src === t3.context.uid) t3.log("The message is from the local account, ignored");
            else {
              var s = r2.toString(), u2 = t3.dialPendingMsgSubjectMap.get(s);
              if (r2 = "".concat(i, "-").concat(r2, "#").concat(o), u2) u2.next(n2), t3.log("Env_%d: The dialogue has pending messages, next: %s", e2.env, r2);
              else {
                var c2 = t3.dialogueSequenceLru.get(s);
                if (u2 = !c2 && o.eq(1), i = void 0 !== c2 && o.sub(c2).eq(1), u2 || i) t3.emitMessage(n2, e2.env);
                else {
                  if (c2) {
                    if (o.lte(c2)) return;
                    t3.log("Env_%d: The message pended, the sequence is not continuous with the last: %s", e2.env, r2);
                  } else t3.log("Env_%d: The message pended, the first sequence is not equal to 1: %s", e2.env, r2);
                  o = new Pa(), t3.dialPendingMsgSubjectMap.set(s, o);
                  var l = o.pipe(Qs(Pk), xg(function(e3, t4) {
                    return [].concat(G(e3), [t4]);
                  }, []), ba(function(e3) {
                    return G(e3).sort(function(e4, t4) {
                      return e4 = e4.sequence, t4 = t4.sequence, e4.eq(t4) ? 0 : e4.gt(t4) ? 1 : -1;
                    });
                  }), sm(1));
                  a2 = !(a2 = new ae(a2)).isFromCache() && !a2.isBufferedMessage(), l.pipe(ob(Bc(a2 ? 750 : 1500)), aa(function(e3) {
                    if (2 > e3.length) return false;
                    for (var t4 = void 0 === c2 ? U.fromNumber(1, true) : c2.add(1), n3 = 0; n3 < e3.length; t4 = t4.add(1), n3++) if (!e3[n3].sequence.eq(t4)) return false;
                    return true;
                  }), wg(function() {
                    t3.dialPendingMsgSubjectMap.delete(s);
                  })).subscribe(function(n3) {
                    n3.forEach(function(n4) {
                      t3.emitMessage(n4, e2.env), t3.log("Env_%d: The message queue has fully ordered, emitting: %s", e2.env, "".concat(n4.instance, "-").concat(n4.dialogue, "#").concat(n4.sequence));
                    });
                  }, function(n3) {
                    n3 instanceof vg && l.pipe(Ka(1)).subscribe(function(n4) {
                      return n4.forEach(function(n5) {
                        t3.log("Env_%d: The message pending queue expired, emitting: %s", e2.env, "".concat(n5.instance, "-").concat(n5.dialogue, "#").concat(n5.sequence)), t3.emitMessage(n5, e2.env);
                      });
                    });
                  }), o.next(n2);
                }
              }
            }
          };
        } }, { key: "onGroupEnterNotice", value: function() {
          var e2 = this;
          return function(t3) {
            e2.emit("memberNotice", { channelId: t3.group, seq: t3.seq, instance: t3.instance, memberId: t3.user, type: "MemberJoined", size: t3.size });
          };
        } }, { key: "onGroupLeaveNotice", value: function() {
          var e2 = this;
          return function(t3) {
            e2.emit("memberNotice", { channelId: t3.group, seq: t3.seq, instance: t3.instance, memberId: t3.user, type: "MemberLeft", size: t3.size });
          };
        } }, { key: "onGroupCountNotice", value: function() {
          var e2 = this;
          return function(t3) {
            e2.emit("memberNotice", { channelId: t3.group, seq: t3.seq, instance: t3.instance, type: "MemberCountUpdated", size: t3.size });
          };
        } }, { key: "onGroupAttributeAlt", value: function() {
          var e2 = this;
          return function(t3) {
            var n2 = t3.group;
            t3 = ff(t3, kD), e2.emit("channelAttributesUpdated", ua({ channelId: n2 }, t3));
          };
        } }, { key: "onUserNotice", value: function(e2) {
          var t3 = this;
          return function(n2) {
            t3.emit("peerOnlineStatusChanged", { peerId: n2.user, instance: n2.instance, seq: n2.seq, state: e2 });
          };
        } }], [{ key: "sendMessageAck", value: function(e2, t3) {
          var n2 = new ae(e2.options);
          (n2.isInvitation() || n2.isPeerMessage()) && t3.sendPacket("Ack", { code: 0, dialogue: e2.dialogue, instance: e2.instance, sequence: e2.sequence });
        } }]), t2;
      }(tb());
      m(ls, "genTimeoutError", function(e, t2) {
        return bb(void 0).pipe(cd(void 0 === t2 ? 1e4 : t2), ba(function() {
          throw new db(["Request timed out after %ds", void 0 === t2 ? 1e4 : t2], e);
        }));
      });
      var ms, ol, pl = 0, ql = 0;
      Ud.v1 = function(e, t2, n2) {
        n2 = t2 && n2 || 0;
        var r = t2 || [], i = (e = e || {}).node || ms, o = void 0 !== e.clockseq ? e.clockseq : ol;
        if (null == i || null == o) {
          var a2 = Jq();
          null == i && (i = ms = [1 | a2[0], a2[1], a2[2], a2[3], a2[4], a2[5]]), null == o && (o = ol = 16383 & (a2[6] << 8 | a2[7]));
        }
        a2 = void 0 !== e.msecs ? e.msecs : (/* @__PURE__ */ new Date()).getTime();
        var s = void 0 !== e.nsecs ? e.nsecs : ql + 1, u2 = a2 - pl + (s - ql) / 1e4;
        if (0 > u2 && void 0 === e.clockseq && (o = o + 1 & 16383), (0 > u2 || a2 > pl) && void 0 === e.nsecs && (s = 0), 1e4 <= s) throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
        for (pl = a2, ql = s, ol = o, e = (1e4 * (268435455 & (a2 += 122192928e5)) + s) % 4294967296, r[n2++] = e >>> 24 & 255, r[n2++] = e >>> 16 & 255, r[n2++] = e >>> 8 & 255, r[n2++] = 255 & e, e = a2 / 4294967296 * 1e4 & 268435455, r[n2++] = e >>> 8 & 255, r[n2++] = 255 & e, r[n2++] = e >>> 24 & 15 | 16, r[n2++] = e >>> 16 & 255, r[n2++] = o >>> 8 | 128, r[n2++] = 255 & o, o = 0; 6 > o; ++o) r[n2 + o] = i[o];
        return t2 || Kq(r);
      }, Ud.v4 = Ud;
      var rl = Ph(), vd, bf = S.LocalInvitationFailureReason, Ba = S.LocalInvitationState, lD = (vd = function(e) {
        function t2(e2, i, o) {
          W(this, t2);
          var a2 = r.call(this, o, "RtmLocalInvitation", true);
          return m(n(a2), "state", Ba.IDLE), m(n(a2), "localInvitationEnd$", Ca(gb(n(a2), "LocalInvitationAccepted"), gb(n(a2), "LocalInvitationRefused"), gb(n(a2), "LocalInvitationFailure"), gb(n(a2), "LocalInvitationCanceled")).pipe(Ka(1))), m(n(a2), "callId", Ud.v4()), m(n(a2), "_content", ""), m(n(a2), "_channelId", ""), m(n(a2), "_response", ""), m(n(a2), "calleeId", void 0), m(n(a2), "logger", void 0), m(n(a2), "getSession", void 0), a2.calleeId = e2, a2.getSession = i, a2.logger = o, a2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "channelId", get: function() {
          return this._channelId;
        }, set: function(e2) {
          this.state !== Ba.IDLE ? this.info("set channelId only allow before invitation sent to remote") : (this.log("set channelId for %s", this.callId), this._channelId = e2);
        } }, { key: "content", get: function() {
          return this._content;
        }, set: function(e2) {
          this.log("set content for %s", this.callId), this._content = e2;
        } }, { key: "response", get: function() {
          return this._response;
        }, set: function(e2) {
          throw new I('Cannot set the "response" of the LocalInvitation instance.', xc);
        } }, { key: "send", value: function() {
          var e2, t3 = this;
          if (this.state === Ba.SENT_TO_REMOTE || this.state === Ba.RECEIVED_BY_REMOTE) throw new K("The local invitation send failure. The call invitation has already been sent.", gA);
          if (this.isLocalInvitationEnd()) throw new K("The local invitation send failure. The call invitation has ended.", Ih);
          if (0 < this._channelId.length && !za(this._channelId)) throw new I("Illegal invitation channel ID", xc);
          if (!za(this.calleeId)) throw new I("Illegal invitation callee user ID", xc);
          if (8192 < Ig(this._content)) throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.', xc);
          this.state = Ba.SENT_TO_REMOTE, ad(J(w.mark(function n2() {
            var r2, i, o;
            return w.wrap(function(n3) {
              for (; ; ) switch (n3.prev = n3.next) {
                case 0:
                  return n3.next = 2, t3.getSession().sendInvitationMessage({ peerId: t3.calleeId, callId: t3.callId, extra: t3._content, type: "CallInvite", channelId: t3._channelId });
                case 2:
                  if (r2 = n3.sent, i = r2.hasPeerReceived, o = r2.hasReSent, !t3.isLocalInvitationEnd()) {
                    n3.next = 7;
                    break;
                  }
                  throw new db("send invitation timeout");
                case 7:
                  if (t3.log("The local invitation has sent to the callee"), i || o) {
                    n3.next = 11;
                    break;
                  }
                  throw e2 = new rl({ PEER_NOT_ONLINE: "The peer of the invitation is not online" });
                case 11:
                  if (i) {
                    n3.next = 14;
                    break;
                  }
                  throw e2 = new rl({ RESENT_AND_OFFLINE: "Resent and the peer of the invitation is not online" });
                case 14:
                case "end":
                  return n3.stop();
              }
            }, n2);
          }))).pipe(oe(function(e3) {
            return e3.pipe(ca(function(e4) {
              if (!(e4 instanceof rl)) throw e4;
            }), cd(2e3));
          }), hb(3e4), Ga(function(e3) {
            return Sa(e3) && t3.warn("local invitation ack timed out"), Z(e3);
          }), ob(this.localInvitationEnd$)).subscribe({ next: function() {
            t3.state === Ba.RECEIVED_BY_REMOTE ? t3.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"') : t3.state !== Ba.SENT_TO_REMOTE ? t3.log("The invitation has ended, skipped emitting the %s event", "LocalInvitationReceivedByPeer") : (t3.info("The peer received the local invitation %s.", t3.callId), t3.state = Ba.RECEIVED_BY_REMOTE, t3.emit("LocalInvitationReceivedByPeer"), t3.localInvitationEnd$.pipe(hb(6e4), Ga(function(e3) {
              return Sa(e3) && t3.warn("local invitation expired"), Z(e3);
            })).subscribe({ error: function() {
              t3.state = Ba.FAILURE, t3.emit("LocalInvitationFailure", bf.INVITATION_EXPIRE);
            } }));
          }, error: function(n2) {
            t3.isLocalInvitationEnd() ? t3.log("The invitation has ended, skipped emitting the %s event", "LocalInvitationFailure") : (t3.state = Ba.FAILURE, Sa(n2) && e2 ? "PEER_NOT_ONLINE" === e2.code ? t3.emit("LocalInvitationFailure", bf.PEER_OFFLINE) : "RESENT_AND_OFFLINE" === e2.code && t3.emit("LocalInvitationFailure", bf.PEER_NO_RESPONSE) : Sa(n2) ? t3.emit("LocalInvitationFailure", bf.PEER_NO_RESPONSE) : "RtmInvalidStatusError" === n2.name ? t3.emit("LocalInvitationFailure", bf.NOT_LOGGEDIN) : t3.emit("LocalInvitationFailure", bf.UNKNOWN));
          } });
        } }, { key: "cancel", value: function() {
          if (this.isLocalInvitationEnd()) throw new K("The local invitation cancel failure", Ih);
          if (this.state === Ba.IDLE) throw new K("The local invitation has not been sent", fA);
          if (8192 < Ig(this._content)) throw new I('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.', xc);
          this.getSession().sendInvitationMessage({ callId: this.callId, peerId: this.calleeId, type: "CallCancel", channelId: this._channelId, extra: this._content }), this.state = Ba.CANCELED, this.emit("LocalInvitationCanceled");
        } }, { key: "onAcceptReceived", value: function(e2) {
          if (this.isLocalInvitationEnd() && this.state !== Ba.ACCEPTED_BY_REMOTE) this.log("The invitation has ended, skipped emitting the %s event", "LocalInvitationAccepted");
          else {
            if (this.state === Ba.IDLE) throw new K("the local have not sent the invitation, how can remote accept it?");
            this.getSession().sendInvitationMessage({ callId: this.callId, isAcceptAck: true, type: "CallAccept", peerId: this.calleeId, channelId: this.channelId }), this.state === Ba.ACCEPTED_BY_REMOTE ? this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE") : (this.state === Ba.SENT_TO_REMOTE && (this.log("receive LocalInvitationAccepted before remote response to the invitation"), this.state = Ba.RECEIVED_BY_REMOTE, this.emit("LocalInvitationReceivedByPeer")), this.state = Ba.ACCEPTED_BY_REMOTE, this._response = e2, this.emit("LocalInvitationAccepted", e2));
          }
        } }, { key: "onRefuseReceived", value: function(e2) {
          if (this.isLocalInvitationEnd()) this.log("The invitation has ended, skipped emitting the %s event", "LocalInvitationRefused");
          else {
            if (this.state === Ba.IDLE) throw new K("the local have not sent the invitation, how can remote refuse it?");
            this.state === Ba.SENT_TO_REMOTE && (this.log("receive LocalInvitationRefused before remote response to the invitation"), this.state = Ba.RECEIVED_BY_REMOTE, this.emit("LocalInvitationReceivedByPeer")), this._response = e2, this.state = Ba.REFUSED_BY_REMOTE, this.emit("LocalInvitationRefused", e2);
          }
        } }, { key: "isLocalInvitationEnd", value: function() {
          return [Ba.CANCELED, Ba.FAILURE, Ba.ACCEPTED_BY_REMOTE, Ba.REFUSED_BY_REMOTE].includes(this.state);
        } }]), t2;
      }(tb()), fa(vd.prototype, "send", [Nb], Object.getOwnPropertyDescriptor(vd.prototype, "send"), vd.prototype), fa(vd.prototype, "cancel", [Nb], Object.getOwnPropertyDescriptor(vd.prototype, "cancel"), vd.prototype), vd), Rh = S.RemoteInvitationFailureReason, kb = S.RemoteInvitationState, mD = function(e) {
        function t2(e2) {
          var i = e2.invitationChannel, o = e2.extraContent, a2 = e2.callId, s = e2.callerId, u2 = e2.logger;
          e2 = e2.getSession, W(this, t2);
          var c2 = r.call(this, u2, "RtmRemoteInvitation", true);
          return m(n(c2), "state", kb.INVITATION_RECEIVED), m(n(c2), "remoteInvitationEnd$", Ca(gb(n(c2), "RemoteInvitationCanceled"), gb(n(c2), "RemoteInvitationRefused"), gb(n(c2), "RemoteInvitationAccepted"), gb(n(c2), "RemoteInvitationFailure")).pipe(Ka(1))), m(n(c2), "callerId", void 0), m(n(c2), "callId", void 0), m(n(c2), "_getSession", void 0), m(n(c2), "logger", void 0), m(n(c2), "_content", void 0), m(n(c2), "_channelId", void 0), m(n(c2), "_response", ""), c2._channelId = i, c2._content = o, c2.callId = a2, c2.callerId = s, c2._getSession = e2, c2.logger = u2, c2.remoteInvitationEnd$.pipe(hb(6e4), Ga(function(e3) {
            return Sa(e3) && c2.warn("Remote invitation expired"), Z(e3);
          })).subscribe({ error: function() {
            c2.state = kb.FAILURE, c2.emit("RemoteInvitationFailure", Rh.INVITATION_EXPIRE);
          } }), c2;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "channelId", get: function() {
          return this._channelId;
        }, set: function(e2) {
          throw new I('Cannot set the "response" of the RemoteInvitation instance.', xc);
        } }, { key: "content", get: function() {
          return this._content;
        }, set: function(e2) {
          throw new I('Cannot set the "content" of the RemoteInvitation instance.', xc);
        } }, { key: "response", get: function() {
          return this._response;
        }, set: function(e2) {
          this._response = e2;
        } }, { key: "accept", value: function() {
          var e2, t3 = this;
          if (this.isRemoteInvitationEnd()) throw new K("The local invitation has ended. Cannot accept.", Ih);
          if (this.state === kb.ACCEPT_SENT_TO_LOCAL) throw new K("The remote invitation is accepting. Cannot do the operation.", Qq);
          if (8192 < Ig(this._response)) throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.', xc);
          this.state = kb.ACCEPT_SENT_TO_LOCAL, Xb(mm(1e3).pipe(cb(function() {
            return ad(J(w.mark(function e3() {
              return w.wrap(function(e4) {
                for (; ; ) switch (e4.prev = e4.next) {
                  case 0:
                    return e4.abrupt("return", t3._getSession().sendInvitationMessage({ peerId: t3.callerId, callId: t3.callId, extra: t3.response, type: "CallAccept", isAcceptAck: false, channelId: t3.channelId }));
                  case 1:
                  case "end":
                    return e4.stop();
                }
              }, e3);
            })));
          }), wb(function(t4) {
            return e2 = t4.hasPeerReceived;
          }), Ka(1)), gb(this, "RemoteInvitationAccepted")).pipe(hb(5e3), ob(this.remoteInvitationEnd$)).subscribe({ error: function(n2) {
            if (t3.logError(n2), t3.state = kb.FAILURE, Sa(n2)) switch (e2) {
              case void 0:
              case true:
                return void t3.emit("RemoteInvitationFailure", Rh.ACCEPT_FAILURE);
              case false:
                return void t3.emit("RemoteInvitationFailure", Rh.PEER_OFFLINE);
            }
            t3.emit("RemoteInvitationFailure", Rh.UNKNOWN);
          } });
        } }, { key: "refuse", value: function() {
          if (this.state === kb.ACCEPT_SENT_TO_LOCAL) throw new K("The remote invitation is accepting. Cannot do the operation.", Qq);
          if (this.isRemoteInvitationEnd()) throw new K("The invitation is end. Cannot refuse", Ih);
          if (8192 < Ig(this._response)) throw new I('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.', xc);
          this._getSession().sendInvitationMessage({ peerId: this.callerId, callId: this.callId, extra: this.response, type: "CallReject", channelId: this.channelId }), this.state = kb.REFUSED, this.emit("RemoteInvitationRefused");
        } }, { key: "onCancelReceived", value: function(e2) {
          this.isRemoteInvitationEnd() ? this.log("The invitation has ended, skipped emitting the %s event", "RemoteInvitationCanceled") : (this.state === kb.ACCEPT_SENT_TO_LOCAL && this.log("caller canceled before receive accept"), this._content = e2, this.state = kb.CANCELED, this.emit("RemoteInvitationCanceled", e2));
        } }, { key: "onAcceptAckReceived", value: function() {
          this.state !== kb.ACCEPT_SENT_TO_LOCAL ? this.log("The invitation has ended, skipped emitting the %s event", "ori:".concat(this.state, ", to: RemoteInvitationAccepted")) : (this.state = kb.ACCEPTED, this.emit("RemoteInvitationAccepted"));
        } }, { key: "isRemoteInvitationEnd", value: function() {
          return [kb.ACCEPTED, kb.REFUSED, kb.CANCELED, kb.FAILURE].includes(this.state);
        } }]), t2;
      }(tb()), nD = function(e) {
        function t2(e2, i) {
          W(this, t2);
          var o = r.call(this, i, "InvitationManager");
          return m(n(o), "getSession", void 0), m(n(o), "invitationDispatcher", new ea.EventEmitter()), m(n(o), "outgoingLocalInvitations", /* @__PURE__ */ new Map()), m(n(o), "receivedRemoteInvitations", new tc(void 0, { maxlen: 1e4 })), m(n(o), "logger", void 0), o.getSession = cn(e2), o.logger = i, o.invitationDispatcher.on("remoteInvitationToManager", function(e3) {
            var t3 = e3.callId, n2 = e3.extra, r2 = e3.callerId;
            e3 = e3.channelId, o.receivedRemoteInvitations.has(t3) || ((n2 = new mD({ callerId: r2, callId: t3, getSession: o.getSession, logger: i, extraContent: n2, invitationChannel: e3 })).remoteInvitationEnd$.subscribe(function() {
              o.receivedRemoteInvitations.delete(t3);
            }), o.receivedRemoteInvitations.set(t3, n2), o.emit("remoteInvitationInstance", n2));
          }), o.invitationDispatcher.on("acceptAckToRemoteInvitation", function(e3) {
            (e3 = o.receivedRemoteInvitations.get(e3.callId)) && e3.onAcceptAckReceived();
          }), o.invitationDispatcher.on("cancelToRemoteInvitation", function(e3) {
            var t3 = e3.extra;
            (e3 = o.receivedRemoteInvitations.get(e3.callId)) && e3.onCancelReceived(t3);
          }), o.invitationDispatcher.on("acceptToLocalInvitation", function(e3) {
            var t3 = e3.extra;
            (e3 = o.outgoingLocalInvitations.get(e3.callId)) && e3.onAcceptReceived(t3);
          }), o.invitationDispatcher.on("refuseToLocalInvitation", function(e3) {
            var t3 = e3.extra;
            (e3 = o.outgoingLocalInvitations.get(e3.callId)) && e3.onRefuseReceived(t3);
          }), o;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "invitationMessageHandler", value: function(e2) {
          var t3 = e2.body, n2 = t3.callId, r2 = t3.extra;
          r2 = void 0 === r2 ? "" : r2;
          var i = t3.type, o = void 0 === (t3 = t3.channel) ? "" : t3, a2 = e2.type;
          switch (t3 = e2.peerId, e2 = e2.serverReceivedTs, a2) {
            case "CallAccept":
              "ack" === i ? this.invitationDispatcher.emit("acceptAckToRemoteInvitation", { callId: n2 }) : "request" === i && this.invitationDispatcher.emit("acceptToLocalInvitation", { callId: n2, extra: r2 });
              break;
            case "CallInvite":
              this.invitationDispatcher.emit("remoteInvitationToManager", { callId: n2, callerId: t3, extra: r2, channelId: o });
              break;
            case "CallCancel":
              if ("0" === n2) {
                n2 = "".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix", "_").concat(o, "_").concat(r2), this.getSession().emit("peerTextMessage", { peerId: t3, properties: { serverReceivedTs: e2, isOfflineMessage: false }, text: n2 });
                break;
              }
              this.invitationDispatcher.emit("cancelToRemoteInvitation", { callId: n2, extra: r2 });
              break;
            case "CallReject":
              this.invitationDispatcher.emit("refuseToLocalInvitation", { callId: n2, extra: r2 });
              break;
            default:
              throw Im("invitationType", a2);
          }
        } }, { key: "genLocalInvitation", value: function(e2) {
          var t3 = this, n2 = new lD(e2, this.getSession, this.logger);
          return n2.localInvitationEnd$.subscribe(function() {
            t3.outgoingLocalInvitations.delete(n2.callId);
          }), this.outgoingLocalInvitations.set(n2.callId, n2), n2;
        } }]), t2;
      }(tb()), oD = function(e, t2, n2) {
        var r = true, i = true;
        if ("function" != typeof e) throw new TypeError("Expected a function");
        return lb(n2) && (r = "leading" in n2 ? !!n2.leading : r, i = "trailing" in n2 ? !!n2.trailing : i), qC(e, t2, { leading: r, maxWait: t2, trailing: i });
      }, ub, cf;
      !function(e) {
        e[e.JOINED = 0] = "JOINED", e[e.LEFT = 1] = "LEFT";
      }(cf || (cf = {}));
      var ns = S.ConnectionState, pD = (ub = function(e) {
        function t2(e2, i, o, a2) {
          W(this, t2);
          var s = r.call(this, a2, "RtmChannel", true);
          return m(n(s), "onMemberCountUpdated", oD(function(e3) {
            e3 !== s.memberCount && (s.memberCount = e3, s.emit("MemberCountUpdated", e3));
          }, 1e3)), m(n(s), "getSession", void 0), m(n(s), "memberCount", 0), m(n(s), "memberJoinedLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "memberLeftLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "memberJoinStateLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "attributesSeqLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "channelId", void 0), m(n(s), "client", void 0), m(n(s), "onAttributesUpdated", function(e3) {
            var t3 = e3.channelId, n2 = e3.attributeMaps, r2 = e3.seq;
            e3 = e3.instance.toString();
            var i2 = s.attributesSeqLru.get(e3);
            if ((!i2 || r2.greaterThan(i2)) && (s.attributesSeqLru.set(e3, r2), t3 === s.channelId)) {
              for (t3 = {}, r2 = 0; r2 < n2.length; r2++) {
                var o2 = n2[r2];
                e3 = o2.key, i2 = o2.ms;
                var a3 = o2.value;
                if (o2 = o2.origin, "string" != typeof e3 || !U.isLong(i2) || "string" != typeof a3 || !za(o2)) break;
                t3[e3] = { value: a3, lastUpdateUserId: o2, lastUpdateTs: i2.toNumber() };
              }
              s.emit("AttributesUpdated", t3);
            }
          }), m(n(s), "onChannelTextMessage", function(e3) {
            var t3 = e3.memberId, n2 = e3.text, r2 = e3.properties;
            e3.channelId === s.channelId && s.emit("ChannelMessage", { text: n2, messageType: S.MessageType.TEXT }, t3, r2);
          }), m(n(s), "onChannelMediaMessage", function(e3) {
            var t3 = e3.memberId, n2 = e3.properties, r2 = e3.details, i2 = e3.messageType;
            e3.channelId === s.channelId && ("FILE" === i2 ? s.emit("ChannelMessage", { messageType: S.MessageType.FILE, size: parseInt(pa(r2.media_size), 10), description: pa(r2.media_description), fileName: pa(r2.media_filename), mediaId: pa(r2.media_id), thumbnail: new Blob([r2.media_thumbnail]) }, t3, n2) : "IMAGE" === i2 && s.emit("ChannelMessage", { messageType: S.MessageType.IMAGE, size: parseInt(pa(r2.media_size), 10), description: pa(r2.media_description), fileName: pa(r2.media_filename), mediaId: pa(r2.media_id), thumbnail: new Blob([r2.media_thumbnail]), height: parseInt(pa(r2.media_height), 10), width: parseInt(pa(r2.media_width), 10), thumbnailHeight: parseInt(pa(r2.media_thumbnailheight), 10), thumbnailWidth: parseInt(pa(r2.media_thumbnailwidth), 10) }, t3, n2));
          }), m(n(s), "onChannelRawMessage", function(e3) {
            var t3 = e3.desc, n2 = e3.raw, r2 = e3.memberId, i2 = e3.properties;
            e3.channelId === s.channelId && s.emit("ChannelMessage", { messageType: S.MessageType.RAW, rawMessage: n2, description: t3 }, r2, i2);
          }), m(n(s), "onMemberNotice", function(e3) {
            var t3 = e3.memberId, n2 = e3.type, r2 = e3.size;
            if (e3.channelId === s.channelId) {
              var i2 = e3.instance.toString();
              e3 = e3.seq.toString();
              var o2 = { MemberLeft: s.memberLeftLru, MemberJoined: s.memberJoinedLru, MemberCountUpdated: void 0 }[n2];
              if (o2) {
                if (o2.has(i2 + e3)) return void s.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'", n2, e3, oa(s.channelId), oa(t3 || ""));
                if (o2.set(i2 + e3, void 0), "string" != typeof t3) return;
                if (t3 !== s.getSession().context.uid) {
                  if ((i2 = s.memberJoinStateLru.get(t3)) === cf.JOINED && "MemberJoined" === n2) return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'", n2, e3, oa(s.channelId), oa(t3 || ""));
                  if (i2 === cf.LEFT && "MemberLeft" === n2) return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'", n2, e3, oa(s.channelId), oa(t3 || ""));
                }
                s.memberJoinStateLru.set(t3, "MemberJoined" === n2 ? cf.JOINED : cf.LEFT);
              }
              s.info("Channel %s - %s, memberId: %s", n2, oa(s.channelId), "MemberCountUpdated" === n2 ? "[unknown]" : oa(t3 || "")), i2 = t3 === s.getSession().context.uid, "MemberLeft" === n2 && za(t3) || "MemberJoined" === n2 && za(t3) ? (i2 || s.emit(n2, t3), s.onMemberCountUpdated(r2)) : "MemberCountUpdated" === n2 && "number" == typeof r2 && s.onMemberCountUpdated(r2);
            }
          }), s.getSession = cn(i), s.channelId = e2, s.client = o, s.info("A channel created, id %s", oa(e2)), s;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "join", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2, r2, i, o, a2, s;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (za(this.channelId)) {
                    e4.next = 2;
                    break;
                  }
                  throw new I(["The %s in the arguments is invalid", "channelId"], hA);
                case 2:
                  e4.prev = 2, t3 = this.getSession(), e4.next = 9;
                  break;
                case 6:
                  throw e4.prev = 6, e4.t0 = e4.catch(2), new K("The client is not logged in. Cannot do the operation", Vq);
                case 9:
                  if (!t3.joinedChannels.has(this)) {
                    e4.next = 12;
                    break;
                  }
                  throw eb("ChnJoin", { cname: this.channelId, lts: U.fromNumber(Date.now()), userId: t3.context.uid, elapse: fb(t3.startTime), errCode: Uq, sid: Xa(t3.instanceId) }, null !== (n2 = this.client.context.config.enableCloudProxy) && void 0 !== n2 && n2), new K("The channel has joined. Cannot rejoin", Uq);
                case 12:
                  if (e4.prev = 12, this.log("Joining the channel %s", oa(this.channelId)), !this.hasOtherChannelJoined()) {
                    e4.next = 17;
                    break;
                  }
                  throw eb("ChnJoin", { cname: this.channelId, lts: U.fromNumber(Date.now()), userId: t3.context.uid, elapse: fb(t3.startTime), errCode: Wq, sid: Xa(t3.instanceId) }, null !== (o = this.client.context.config.enableCloudProxy) && void 0 !== o && o), new K("A channel of the same channel ID has already joined. Cannot rejoin", Wq);
                case 17:
                  if (20 !== t3.joinedChannels.size) {
                    e4.next = 20;
                    break;
                  }
                  throw eb("ChnJoin", { cname: this.channelId, lts: U.fromNumber(Date.now()), userId: t3.context.uid, elapse: fb(t3.startTime), errCode: Tq, sid: Xa(t3.instanceId) }, null !== (a2 = this.client.context.config.enableCloudProxy) && void 0 !== a2 && a2), new ib("The joined channels has exceeded the limit of 20", Tq);
                case 20:
                  return eb("ChnJoin", { cname: this.channelId, lts: U.fromNumber(Date.now()), userId: t3.context.uid, elapse: fb(t3.startTime), errCode: 0, sid: Xa(t3.instanceId) }, null !== (r2 = this.client.context.config.enableCloudProxy) && void 0 !== r2 && r2), e4.next = 23, t3.requestChannelJoin(this, this.channelId);
                case 23:
                  eb("ChnJoinRes", { cname: this.channelId, lts: U.fromNumber(Date.now()), elapse: fb(t3.startTime), errCode: 0, sid: Xa(t3.instanceId), serverErrCode: 0, userId: t3.context.uid }, null !== (i = this.client.context.config.enableCloudProxy) && void 0 !== i && i), this.info("The channel %s joined successfully", oa(this.channelId)), t3.on("channelTextMessage", this.onChannelTextMessage), t3.on("channelRawMessage", this.onChannelRawMessage), t3.on("channelMediaMessage", this.onChannelMediaMessage), t3.on("memberNotice", this.onMemberNotice), t3.on("channelAttributesUpdated", this.onAttributesUpdated), e4.next = 41;
                  break;
                case 32:
                  if (e4.prev = 32, e4.t1 = e4.catch(12), this.logError(e4.t1), !sa(e4.t1)) {
                    e4.next = 37;
                    break;
                  }
                  throw e4.t1;
                case 37:
                  if (!Sa(e4.t1)) {
                    e4.next = 40;
                    break;
                  }
                  throw eb("ChnJoinRes", { cname: this.channelId, lts: U.fromNumber(Date.now()), elapse: fb(t3.startTime), errCode: Sq, sid: Xa(t3.instanceId), serverErrCode: 0, userId: t3.context.uid }, null !== (s = this.client.context.config.enableCloudProxy) && void 0 !== s && s), new db(["Join channel %s timed out", oa(this.channelId)], Sq);
                case 40:
                  throw new Wc(["The channel %s join failure", oa(this.channelId)], { code: Rq, originalError: e4.t1 });
                case 41:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[2, 6], [12, 32]]);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "leave", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2, r2, i;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  e4.prev = 0, n2 = this.getSession(), e4.next = 7;
                  break;
                case 4:
                  throw e4.prev = 4, e4.t0 = e4.catch(0), new K("The client is not logged in. Cannot do the operation", jA);
                case 7:
                  if (n2.joinedChannels.has(this)) {
                    e4.next = 9;
                    break;
                  }
                  throw new K("The channel does not join. Cannot do the operation", iA);
                case 9:
                  e4.prev = 9, n2.requestChannelLeave(this, this.channelId), this.memberLeftLru.empty(), this.memberJoinedLru.empty(), this.attributesSeqLru.empty(), this.memberJoinStateLru.empty(), this.memberCount = 0, n2.removeListener("channelTextMessage", this.onChannelTextMessage), n2.removeListener("channelRawMessage", this.onChannelRawMessage), n2.removeListener("channelMediaMessage", this.onChannelMediaMessage), n2.removeListener("memberNotice", this.onMemberNotice), n2.removeListener("channelAttributesUpdated", this.onAttributesUpdated), e4.next = 32;
                  break;
                case 23:
                  if (e4.prev = 23, e4.t1 = e4.catch(9), this.logError(e4.t1), !sa(e4.t1)) {
                    e4.next = 30;
                    break;
                  }
                  throw void 0 === e4.t1.code && (e4.t1.code = Yq), eb("ChnLeave", { cname: this.channelId, lts: U.fromNumber(Date.now()), elapse: fb(n2.startTime), errCode: Yq, sid: Xa(n2.instanceId), userId: n2.context.uid }, null !== (i = this.client.context.config.enableCloudProxy) && void 0 !== i && i), e4.t1;
                case 30:
                  throw eb("ChnLeave", { cname: this.channelId, lts: U.fromNumber(Date.now()), elapse: fb(n2.startTime), errCode: Xq, sid: Xa(n2.instanceId), userId: n2.context.uid }, null !== (r2 = this.client.context.config.enableCloudProxy) && void 0 !== r2 && r2), new Wc("The channel leave failure", { code: Xq, originalError: e4.t1 });
                case 32:
                  eb("ChnLeave", { cname: this.channelId, lts: U.fromNumber(Date.now()), elapse: fb(n2.startTime), errCode: 0, sid: Xa(n2.instanceId), userId: n2.context.uid }, null !== (t3 = this.client.context.config.enableCloudProxy) && void 0 !== t3 && t3);
                case 33:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[0, 4], [9, 23]]);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "sendMessage", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s = this, u2 = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  n2 = 1 < u2.length && void 0 !== u2[1] ? u2[1] : {}, r2 = n2.enableHistoricalMessaging, i = void 0 !== r2 && r2, Tm(t3, Hh), e4.prev = 2, o = this.getSession(), e4.next = 9;
                  break;
                case 6:
                  throw e4.prev = 6, e4.t0 = e4.catch(2), new K("The client is not logged in. Cannot do the operation", ig);
                case 9:
                  if (o.joinedChannels.has(this)) {
                    e4.next = 11;
                    break;
                  }
                  throw new K("The channel does not join. Cannot do the operation", ig);
                case 11:
                  if (this.client.connectionState !== ns.RECONNECTING) {
                    e4.next = 16;
                    break;
                  }
                  return a2 = Date.now(), e4.next = 15, new Promise(function(e5, n3) {
                    var r3 = function() {
                      var r4 = J(w.mark(function r5() {
                        var u3;
                        return w.wrap(function(r6) {
                          for (; ; ) switch (r6.prev = r6.next) {
                            case 0:
                              return u3 = Date.now() - a2, r6.prev = 1, r6.next = 4, Gg({ message: t3, peerId: s.channelId, toPeer: false, session: s.getSession(), errorCodes: { NOT_LOGGED_IN: ig, TOO_OFTEN: Mq }, diff: u3, logger: s.logger, options: { enableHistoricalMessaging: i, enableOfflineMessaging: false } });
                            case 4:
                              e5(), r6.next = 12;
                              break;
                            case 7:
                              r6.prev = 7, r6.t0 = r6.catch(1), Sa(r6.t0) && n3(new db(Yd(s.name, "sendMessageToPeer", 1e4), Yk)), sa(r6.t0) && n3(r6.t0), n3(new da("Channel message send failure", { code: hg, originalError: r6.t0 }));
                            case 12:
                              return r6.prev = 12, clearTimeout(o2), r6.finish(12);
                            case 15:
                            case "end":
                              return r6.stop();
                          }
                        }, r5, null, [[1, 7, 12, 15]]);
                      }));
                      return function() {
                        return r4.apply(this, arguments);
                      };
                    }();
                    s.client.internalEmitter.once("RECONNECTED", r3);
                    var o2 = setTimeout(function() {
                      s.client.internalEmitter.off("RECONNECTED", r3), n3(new db(Yd(s.name, "sendMessageToPeer", 1e4), Yk));
                    }, 9e3);
                  });
                case 15:
                  return e4.abrupt("return");
                case 16:
                  if (this.client.connectionState === ns.CONNECTED) {
                    e4.next = 18;
                    break;
                  }
                  throw new K("The client is not logged in. Cannot do the operation", ig);
                case 18:
                  return e4.prev = 18, e4.next = 21, Gg({ message: t3, peerId: this.channelId, toPeer: false, session: this.getSession(), errorCodes: { NOT_LOGGED_IN: ig, TOO_OFTEN: Mq }, diff: 0, logger: this.logger, options: { enableHistoricalMessaging: i, enableOfflineMessaging: false } });
                case 21:
                  e4.next = 31;
                  break;
                case 23:
                  if (e4.prev = 23, e4.t1 = e4.catch(18), !Sa(e4.t1)) {
                    e4.next = 27;
                    break;
                  }
                  throw new db(Yd(this.name, "sendMessage", 1e4), Yk);
                case 27:
                  if (!sa(e4.t1)) {
                    e4.next = 30;
                    break;
                  }
                  throw this.logError(e4.t1), e4.t1;
                case 30:
                  throw new Wc("The channel message send failure", hg);
                case 31:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[2, 6], [18, 23]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getMembers", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2, r2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  e4.prev = 0, e4.prev = 1, t3 = this.getSession(), e4.next = 8;
                  break;
                case 5:
                  throw e4.prev = 5, e4.t0 = e4.catch(1), new K("The client is not logged in. Cannot do the operation", eA);
                case 8:
                  if (t3.joinedChannels.has(this)) {
                    e4.next = 10;
                    break;
                  }
                  throw new K("The channel does not join. Cannot do the operation", dA);
                case 10:
                  return n2 = this.getSession().requestChannelMemberList(this.channelId), e4.next = 13, n2.pipe(ba(function(e5) {
                    return e5.memberInfos.map(function(e6) {
                      return e6.account;
                    });
                  })).toPromise();
                case 13:
                  return r2 = e4.sent, this.info("Channel %s - get members success, %o", oa(this.channelId), r2.map(oa)), e4.abrupt("return", r2);
                case 18:
                  if (e4.prev = 18, e4.t1 = e4.catch(0), !sa(e4.t1)) {
                    e4.next = 23;
                    break;
                  }
                  throw this.logError(e4.t1), e4.t1;
                case 23:
                  throw new Wc("The channel members get failure", bA);
                case 24:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[0, 18], [1, 5]]);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "hasOtherChannelJoined", value: function() {
          var e2 = this;
          return !this.getSession().joinedChannels.has(this) && Array.from(this.getSession().joinedChannels).some(function(t3) {
            return t3.channelId === e2.channelId;
          });
        } }]), t2;
      }(tb()), fa(ub.prototype, "join", [Nb], Object.getOwnPropertyDescriptor(ub.prototype, "join"), ub.prototype), fa(ub.prototype, "leave", [Nb], Object.getOwnPropertyDescriptor(ub.prototype, "leave"), ub.prototype), fa(ub.prototype, "sendMessage", [Nb], Object.getOwnPropertyDescriptor(ub.prototype, "sendMessage"), ub.prototype), fa(ub.prototype, "getMembers", [Ma], Object.getOwnPropertyDescriptor(ub.prototype, "getMembers"), ub.prototype), ub), E, Eb = S.ConnectionChangeReason, T = S.ConnectionState, os = { DISCONNECTED: 1, CONNECTING: 2, CONNECTED: 3, RECONNECTING: 4, ABORTED: 5 }, qD = { LOGIN: 1, LOGIN_SUCCESS: 2, LOGIN_FAILURE: 3, LOGIN_TIMEOUT: 4, INTERRUPTED: 5, LOGOUT: 6, BANNED_BY_SERVER: 7, REMOTE_LOGIN: 8 }, rD = (E = function(e) {
        function t2(e2, i, o, a2) {
          W(this, t2);
          var s = r.call(this, i, "RtmClient", true);
          return m(n(s), "connectionState", T.DISCONNECTED), m(n(s), "internalEmitter", new ea()), m(n(s), "context", void 0), m(n(s), "attributes", {}), m(n(s), "loginPromise", void 0), m(n(s), "attributeDrafts", /* @__PURE__ */ new Set()), m(n(s), "session", void 0), m(n(s), "lastLoginTime", void 0), m(n(s), "reconnId", 0), m(n(s), "channelAttributesCacheLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "invitationManager", void 0), m(n(s), "subscribedPeerStatusCache", {}), m(n(s), "peerStatusSeqLru", new tc(void 0, { maxlen: 1e4 })), m(n(s), "peerUnreachableTimers", {}), m(n(s), "mediaTaskManager", void 0), m(n(s), "setParameters", void 0), m(n(s), "updateConfig", void 0), m(n(s), "userDropHandler", function(e3) {
            if (s.connectionState !== T.ABORTED) switch (e3) {
              case 11:
                s.logError("Kicked off by remote session"), s.onConnectionStateChanged(T.ABORTED, Eb.REMOTE_LOGIN);
                break;
              case 14:
              case 15:
              case 16:
                s.logError("Server banned because of illegal ".concat({ 14: "User ID", 15: "IP", 16: "Channel Name" }[e3])), s.onConnectionStateChanged(T.ABORTED, Eb.BANNED_BY_SERVER);
                break;
              default:
                s.logError("User kicked off for unknown code: ".concat(e3)), s.onConnectionStateChanged(T.ABORTED, Eb.INTERRUPTED);
            }
          }), s.context = new ZC(e2, o, i), s.mediaTaskManager = new fs(i), s.context.config = o, s.internalEmitter.setMaxListeners(512), s.setParameters = a2.bind(n(s)), s.updateConfig = a2.bind(n(s)), s.invitationManager = new nD(function() {
            return s.session;
          }, i), s.invitationManager.on("remoteInvitationInstance", function(e3) {
            s.emit("RemoteInvitationReceived", e3);
          }), s;
        }
        la(t2, e);
        var r = ma(t2);
        return Ha(t2, [{ key: "renewToken", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if ("string" == typeof t3 && 0 !== t3.length) {
                    e4.next = 2;
                    break;
                  }
                  throw new I("Invalid argument", rA);
                case 2:
                  if (this.connectionState !== T.ABORTED) {
                    e4.next = 5;
                    break;
                  }
                  return e4.next = 5, new Promise(function() {
                  });
                case 5:
                  if (this.connectionState === T.CONNECTED || this.connectionState === T.RECONNECTING) {
                    e4.next = 7;
                    break;
                  }
                  throw new K("The client is not logged in", uA);
                case 7:
                  if (void 0 !== this.session) {
                    e4.next = 9;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 9:
                  return e4.prev = 9, n2 = this.context.token, this.context.token = t3, e4.next = 14, this.session.connection.apClient.getApEdgeInfo$(false).pipe(Dd(function() {
                    return Error("No available edge address to connect");
                  }), oe(function(e5) {
                    return e5.pipe(ca(function(e6) {
                      if (sa(e6)) throw e6;
                    }), cd(2500), Ka(4));
                  }), Ka(1), hb(2e4), Ga(function(e5) {
                    return Sa(e5) && o.warn("renewToken timed out"), Z(e5);
                  })).toPromise();
                case 14:
                  r2 = e4.sent, i = r2.ticket, e4.next = 27;
                  break;
                case 18:
                  if (e4.prev = 18, e4.t0 = e4.catch(9), this.context.token = n2, e4.t0.code !== $q && e4.t0.code !== ar) {
                    e4.next = 23;
                    break;
                  }
                  throw new Ye("Invalid token", tA);
                case 23:
                  if (e4.t0.code !== Kh) {
                    e4.next = 25;
                    break;
                  }
                  throw new Ye("The token expired", sA);
                case 25:
                  if (!Sa(e4.t0)) {
                    e4.next = 27;
                    break;
                  }
                  throw new db("Renew token timed out", qA);
                case 27:
                  this.session.curLoginSockets.filter(function(e5) {
                    return void 0 !== e5;
                  }).forEach(function(e5) {
                    return e5.ticket = i;
                  });
                case 28:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[9, 18]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "queryPeersOnlineStatus", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", pA);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  if (!(!Array.isArray(t3) || 0 === t3.length || t3.some(function(e5) {
                    return !za(e5);
                  }) || 256 < t3.length)) {
                    e4.next = 6;
                    break;
                  }
                  throw new I("invalid arguments", er);
                case 6:
                  return e4.next = 8, this.session.requestPeersOnlineStatus(t3).toPromise();
                case 8:
                  return n2 = e4.sent, r2 = uc(Jk(n2.userInfos, "account"), function(e5) {
                    return !!e5.ts;
                  }), Object.keys(r2).forEach(function(e5) {
                    if (e5 in i.subscribedPeerStatusCache && i.subscribedPeerStatusCache[e5] !== S.PeerOnlineState.UNREACHABLE) {
                      var t4 = r2[e5] ? S.PeerOnlineState.ONLINE : S.PeerOnlineState.OFFLINE;
                      i.emit("PeersOnlineStatusChanged", m({}, e5, t4)), i.subscribedPeerStatusCache[e5] = t4;
                    }
                  }), e4.abrupt("return", r2);
                case 12:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getChannelMemberCount", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", aA);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  if (Array.isArray(t3) && t3.every(function(e5) {
                    return "string" == typeof e5;
                  }) && 0 !== t3.length) {
                    e4.next = 6;
                    break;
                  }
                  throw new I("Invalid arguments: channelIds", Oq);
                case 6:
                  if (!(32 < t3.length)) {
                    e4.next = 8;
                    break;
                  }
                  throw new I("getChannelMemberCount exceed limit of 32 channelIds", $z);
                case 8:
                  n2 = 0;
                case 9:
                  if (!(n2 < t3.length)) {
                    e4.next = 16;
                    break;
                  }
                  if (za(r2 = t3[n2])) {
                    e4.next = 13;
                    break;
                  }
                  throw new I(["getChannelMemberCount channel id %s is invalid", r2], Oq);
                case 13:
                  n2++, e4.next = 9;
                  break;
                case 16:
                  return e4.next = 18, this.session.requestGetChannelMemberCount(t3).toPromise();
                case 18:
                  for (i = e4.sent, o = i.groupInfos, a2 = {}, s = function(e5) {
                    var t4 = (e5 = o[e5]).group, n3 = e5.memberCount;
                    za(t4) && "number" == typeof n3 && (c2.session.joinedChannels.forEach(function(e6) {
                      e6.channelId === t4 && e6.onMemberCountUpdated(n3);
                    }), a2[t4] = n3);
                  }, u2 = 0; u2 < o.length; u2++) s(u2);
                  return e4.abrupt("return", a2);
                case 24:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "setLocalUserAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (uf({ attributes: t3, maxAttrValueSize: 8192, maxAttrsCount: 32, maxTotalSize: 16384 }), this.connectionState === T.CONNECTED) {
                    e4.next = 3;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 3:
                  if (void 0 !== this.session) {
                    e4.next = 5;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 5:
                  return n2 = this.session.requestSetLocalUserAttributes(t3).toPromise(), r2 = { attribute: t3, promise: n2 }, this.attributeDrafts.add(r2), e4.prev = 8, e4.next = 11, n2;
                case 11:
                  this.attributes = t3, e4.next = 19;
                  break;
                case 14:
                  if (e4.prev = 14, e4.t0 = e4.catch(8), !sa(e4.t0)) {
                    e4.next = 18;
                    break;
                  }
                  throw e4.t0;
                case 18:
                  throw new I("arguments is not valid", Ja);
                case 19:
                  return e4.prev = 19, this.attributeDrafts.delete(r2), e4.finish(19);
                case 22:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[8, 14, 19, 22]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "setChannelAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2 = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (r2 = 2 < u2.length && void 0 !== u2[2] ? u2[2] : {}, i = r2.enableNotificationToChannelMembers, o = void 0 !== i && i, uf({ attributes: n2, maxAttrValueSize: 8192, maxAttrsCount: 32, maxTotalSize: 32768 }), this.connectionState === T.CONNECTED) {
                    e4.next = 4;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 4:
                  if (void 0 !== this.session) {
                    e4.next = 6;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 6:
                  return a2 = this.session.requestSetChannelAttributes(t3, n2, o).toPromise(), e4.prev = 7, e4.next = 10, a2;
                case 10:
                  s = uc(n2, function(e5) {
                    return new Blob([e5]).size;
                  }), this.channelAttributesCacheLru.set(t3, s), e4.next = 19;
                  break;
                case 14:
                  if (e4.prev = 14, e4.t0 = e4.catch(7), !sa(e4.t0)) {
                    e4.next = 18;
                    break;
                  }
                  throw e4.t0;
                case 18:
                  throw new I("arguments is not valid", Ja);
                case 19:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[7, 14]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "addOrUpdateLocalUserAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = ua(ua({}, this.attributes), t3), uf({ attributes: t3, maxAttrValueSize: 8192, maxAttrsCount: 32, maxTotalSize: 16384 }), uf({ attributes: n2, maxAttrValueSize: 8192, maxAttrsCount: 32, maxTotalSize: 16384 }), this.connectionState === T.CONNECTED) {
                    e4.next = 5;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 5:
                  if (void 0 !== this.session) {
                    e4.next = 7;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 7:
                  return r2 = this.session.requestAddOrUpdateLocalUserAttributes(t3).toPromise(), i = { attribute: n2, promise: r2 }, this.attributeDrafts.add(i), e4.prev = 10, e4.next = 13, r2;
                case 13:
                  this.attributes = n2, e4.next = 21;
                  break;
                case 16:
                  if (e4.prev = 16, e4.t0 = e4.catch(10), !sa(e4.t0)) {
                    e4.next = 20;
                    break;
                  }
                  throw e4.t0;
                case 20:
                  throw new I("arguments is not valid", er);
                case 21:
                  return e4.prev = 21, this.attributeDrafts.delete(i), e4.finish(21);
                case 24:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[10, 16, 21, 24]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "addOrUpdateChannelAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (r2 = 2 < l.length && void 0 !== l[2] ? l[2] : {}, i = r2.enableNotificationToChannelMembers, o = void 0 !== i && i, a2 = this.channelAttributesCacheLru.get(t3, {}), s = uc(n2, function(e5) {
                    return new Blob([e5]).size;
                  }), u2 = ua(ua({}, a2), s), uf({ attributes: n2, attrSizeMap: u2, maxAttrValueSize: 8192, maxAttrsCount: 32, maxTotalSize: 32768 }), this.connectionState === T.CONNECTED) {
                    e4.next = 7;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 7:
                  if (void 0 !== this.session) {
                    e4.next = 9;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 9:
                  return c2 = this.session.requestAddOrUpdateChannelAttributes(t3, n2, o).toPromise(), e4.prev = 10, e4.next = 13, c2;
                case 13:
                  this.channelAttributesCacheLru.set(t3, u2), e4.next = 21;
                  break;
                case 16:
                  if (e4.prev = 16, e4.t0 = e4.catch(10), !sa(e4.t0)) {
                    e4.next = 20;
                    break;
                  }
                  throw e4.t0;
                case 20:
                  throw new I("arguments is not valid", Ja);
                case 21:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[10, 16]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "deleteLocalUserAttributesByKeys", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (Array.isArray(t3) && 0 !== t3.length && !t3.some(function(e5) {
                    return 0 === e5.length;
                  })) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("arguments is not valid", Ja);
                case 2:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 4;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 4:
                  if (void 0 !== this.session) {
                    e4.next = 6;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 6:
                  return n2 = this.session.requestDeleteLocalUserAttributesByKeys(t3).toPromise(), r2 = { attribute: Gk(this.attributes, t3), promise: n2 }, this.attributeDrafts.add(r2), e4.prev = 9, e4.next = 12, n2;
                case 12:
                  for (i = 0; i < t3.length; i++) o = t3[i], delete this.attributes[o];
                  e4.next = 20;
                  break;
                case 15:
                  if (e4.prev = 15, e4.t0 = e4.catch(9), !sa(e4.t0)) {
                    e4.next = 19;
                    break;
                  }
                  throw e4.t0;
                case 19:
                  throw new I("arguments is not valid", Ja);
                case 20:
                  return e4.prev = 20, this.attributeDrafts.delete(r2), e4.finish(20);
                case 23:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[9, 15, 20, 23]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "deleteChannelAttributesByKeys", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (r2 = 2 < l.length && void 0 !== l[2] ? l[2] : {}, i = r2.enableNotificationToChannelMembers, o = void 0 !== i && i, Array.isArray(n2) && 0 !== n2.length && za(t3) && !n2.some(function(e5) {
                    return 0 === e5.length || 512 < e5.length;
                  })) {
                    e4.next = 3;
                    break;
                  }
                  throw new K("arguments is not valid", Ja);
                case 3:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 5;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 5:
                  if (void 0 !== this.session) {
                    e4.next = 7;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 7:
                  return a2 = this.session.requestDeleteChannelAttributesByKeys(t3, n2, o).toPromise(), e4.prev = 8, e4.next = 11, a2;
                case 11:
                  if (s = this.channelAttributesCacheLru.get(t3)) for (u2 = 0; u2 < n2.length; u2++) c2 = n2[u2], delete s[c2];
                  e4.next = 20;
                  break;
                case 15:
                  if (e4.prev = 15, e4.t0 = e4.catch(8), !sa(e4.t0)) {
                    e4.next = 19;
                    break;
                  }
                  throw e4.t0;
                case 19:
                  throw new I("arguments is not valid", Ja);
                case 20:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[8, 15]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "clearLocalUserAttributes", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3, n2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  return t3 = this.session.requestClearLocalUserAttributes().toPromise(), n2 = { attribute: {}, promise: t3 }, this.attributeDrafts.add(n2), e4.prev = 7, e4.next = 10, t3;
                case 10:
                  this.attributes = {}, e4.next = 18;
                  break;
                case 13:
                  if (e4.prev = 13, e4.t0 = e4.catch(7), !sa(e4.t0)) {
                    e4.next = 17;
                    break;
                  }
                  throw e4.t0;
                case 17:
                  throw new I("arguments is not valid", Ja);
                case 18:
                  return e4.prev = 18, this.attributeDrafts.delete(n2), e4.finish(18);
                case 21:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[7, 13, 18, 21]]);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "clearChannelAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2 = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = 1 < a2.length && void 0 !== a2[1] ? a2[1] : {}, r2 = n2.enableNotificationToChannelMembers, i = void 0 !== r2 && r2, this.connectionState === T.CONNECTED) {
                    e4.next = 3;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 3:
                  if (void 0 !== this.session) {
                    e4.next = 5;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 5:
                  return o = this.session.requestClearChannelAttributes(t3, i).toPromise(), e4.prev = 6, e4.next = 9, o;
                case 9:
                  this.channelAttributesCacheLru.delete(t3), e4.next = 17;
                  break;
                case 12:
                  if (e4.prev = 12, e4.t0 = e4.catch(6), !sa(e4.t0)) {
                    e4.next = 16;
                    break;
                  }
                  throw e4.t0;
                case 16:
                  throw new I("arguments is not valid", Ja);
                case 17:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[6, 12]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getUserAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (za(t3)) {
                    e4.next = 2;
                    break;
                  }
                  throw new I("Not a valid user ID", Ja);
                case 2:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 4;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 4:
                  if (void 0 !== this.session) {
                    e4.next = 6;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 6:
                  return e4.prev = 6, e4.next = 9, this.session.requestGetUserAttributeKeys(t3).toPromise();
                case 9:
                  return n2 = e4.sent, r2 = n2.keys, e4.next = 13, this.session.requestGetUserAttributesByKeys(t3, r2.slice(0, 512)).toPromise();
                case 13:
                  i = e4.sent, e4.next = 21;
                  break;
                case 16:
                  if (e4.prev = 16, e4.t0 = e4.catch(6), !sa(e4.t0)) {
                    e4.next = 20;
                    break;
                  }
                  throw e4.t0;
                case 20:
                  throw new I("arguments is not valid", Ja);
                case 21:
                  return e4.abrupt("return", Yp(i.attributeInfos.map(function(e5) {
                    return [e5.key, e5.value];
                  })));
                case 22:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[6, 16]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getChannelAttributes", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2, l, f, h;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (za(t3)) {
                    e4.next = 2;
                    break;
                  }
                  throw new I("Not a valid channel ID", Ja);
                case 2:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 4;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 4:
                  if (void 0 !== this.session) {
                    e4.next = 6;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 6:
                  return e4.prev = 6, e4.next = 9, this.session.requestGetChannelAttributesKeys(t3).toPromise();
                case 9:
                  return n2 = e4.sent, r2 = n2.keys, e4.next = 13, this.session.requestGetChannelAttributesByKeys(t3, r2).toPromise();
                case 13:
                  i = e4.sent, o = i.attributeMaps, e4.next = 22;
                  break;
                case 17:
                  if (e4.prev = 17, e4.t0 = e4.catch(6), !sa(e4.t0)) {
                    e4.next = 21;
                    break;
                  }
                  throw e4.t0;
                case 21:
                  throw new I("arguments is not valid", Ja);
                case 22:
                  a2 = {}, s = 0;
                case 24:
                  if (!(s < o.length)) {
                    e4.next = 32;
                    break;
                  }
                  if (u2 = o[s], c2 = u2.key, l = u2.ms, f = u2.value, h = u2.origin, "string" == typeof c2 && U.isLong(l) && "string" == typeof f && za(h)) {
                    e4.next = 28;
                    break;
                  }
                  return e4.abrupt("break", 32);
                case 28:
                  a2[c2] = { value: f, lastUpdateUserId: h, lastUpdateTs: l.toNumber() };
                case 29:
                  s++, e4.next = 24;
                  break;
                case 32:
                  return this.channelAttributesCacheLru.set(t3, uc(a2, function(e5) {
                    return new Blob([e5.value]).size;
                  })), e4.abrupt("return", a2);
                case 34:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[6, 17]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getChannelAttributesByKeys", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2, l, f, h;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  return Hm(t3, n2), e4.prev = 5, e4.next = 8, this.session.requestGetChannelAttributesByKeys(t3, n2).toPromise();
                case 8:
                  r2 = e4.sent, i = r2.attributeMaps, e4.next = 17;
                  break;
                case 12:
                  if (e4.prev = 12, e4.t0 = e4.catch(5), !sa(e4.t0)) {
                    e4.next = 16;
                    break;
                  }
                  throw e4.t0;
                case 16:
                  throw new I("arguments is not valid", Ja);
                case 17:
                  o = {}, a2 = this.channelAttributesCacheLru.get(t3, {}), s = 0;
                case 20:
                  if (!(s < i.length)) {
                    e4.next = 29;
                    break;
                  }
                  if (u2 = i[s], c2 = u2.key, l = u2.ms, f = u2.value, h = u2.origin, "string" == typeof c2 && U.isLong(l) && "string" == typeof f && za(h)) {
                    e4.next = 24;
                    break;
                  }
                  return e4.abrupt("break", 29);
                case 24:
                  a2[c2] = new Blob([f]).size, o[c2] = { value: f, lastUpdateUserId: h, lastUpdateTs: l.toNumber() };
                case 26:
                  s++, e4.next = 20;
                  break;
                case 29:
                  return this.channelAttributesCacheLru.set(t3, a2), e4.abrupt("return", o);
                case 31:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[5, 12]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "getUserAttributesByKeys", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", Ub);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  return Hm(t3, n2), e4.prev = 5, e4.next = 8, this.session.requestGetUserAttributesByKeys(t3, n2).toPromise();
                case 8:
                  r2 = e4.sent, e4.next = 16;
                  break;
                case 11:
                  if (e4.prev = 11, e4.t0 = e4.catch(5), !sa(e4.t0)) {
                    e4.next = 15;
                    break;
                  }
                  throw e4.t0;
                case 15:
                  throw new I("arguments is not valid", Ja);
                case 16:
                  return e4.abrupt("return", Yp(r2.attributeInfos.map(function(e5) {
                    return [e5.key, e5.value];
                  })));
                case 17:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[5, 11]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "login", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (Uk = true, n2 = Bg(), r2 = t3.token, t3.token === this.context.appId && (r2 = void 0), setTimeout(function() {
                    var e5;
                    eb("Session", { appId: a2.context.appId, did: navigator.userAgent, elapse: fb(a2.session && a2.session.startTime), index: { index1: t3.uid, index2: a2.context.appId, index3: "enableLogUpload=".concat(a2.context.config.enableLogUpload) }, installId: gg, lts: U.fromNumber(Date.now()), os: 7, sid: Xa(n2), token: r2 || "", userId: t3.uid, ver: "1.4.3-203", buildno: 603, subVersion: 203, version: 4 }, null !== (e5 = a2.context.config.enableCloudProxy) && void 0 !== e5 && e5);
                  }, 1e4), yd(t3) && za(t3.uid)) {
                    e4.next = 7;
                    break;
                  }
                  throw new I("not a valid user id", Jh);
                case 7:
                  if ("string" != typeof r2 || !r2) {
                    e4.next = 11;
                    break;
                  }
                  this.context.token = r2, e4.next = 13;
                  break;
                case 11:
                  if ("string" == typeof r2 || null == r2) {
                    e4.next = 13;
                    break;
                  }
                  throw new I('The "token" is not a valid string.', Jh);
                case 13:
                  return i = Date.now(), this.context.sid = Xa(n2), this.loginPromise = this.loginImpl({ uid: t3.uid, instanceId: n2 }), this.info("RTM Client logging in as ".concat(oa(t3.uid))), e4.prev = 17, e4.next = 20, this.loginPromise;
                case 20:
                  e4.next = 27;
                  break;
                case 22:
                  throw e4.prev = 22, e4.t0 = e4.catch(17), sa(e4.t0) && eb("Link", { ackedServerIp: "", destServerIp: "", ec: e4.t0.code || 1, sc: e4.t0.serverCode, elapse: fb(this.session && this.session.startTime), lts: U.fromNumber(Date.now()), responseTime: Date.now() - i, sid: Xa(n2), userId: t3.uid }, null !== (o = this.context.config.enableCloudProxy) && void 0 !== o && o), this.context.token = void 0, e4.t0;
                case 27:
                  return e4.prev = 27, this.loginPromise = void 0, e4.finish(27);
                case 30:
                  Uk = false;
                case 31:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[17, 22, 27, 30]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "logout", value: function() {
          var e2 = J(w.mark(function e3() {
            var t3;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (!this.loginPromise) {
                    e4.next = 3;
                    break;
                  }
                  return e4.next = 3, this.loginPromise;
                case 3:
                  if (this.connectionState !== T.DISCONNECTED) {
                    e4.next = 6;
                    break;
                  }
                  throw this.logError("Already in logout state"), new K("Logout failure. The client has already been logged out", br);
                case 6:
                  if (this.connectionState !== T.ABORTED) {
                    e4.next = 10;
                    break;
                  }
                  return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'), this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGOUT), e4.abrupt("return");
                case 10:
                  if (void 0 !== this.session) {
                    e4.next = 13;
                    break;
                  }
                  return this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGOUT), e4.abrupt("return");
                case 13:
                  return eb("Logout", { elapse: fb(this.session.startTime), lts: U.fromNumber(Date.now()), sid: Xa(this.session.instanceId), userId: this.context.uid }, null !== (t3 = this.context.config.enableCloudProxy) && void 0 !== t3 && t3), e4.next = 16, this.session.logoutHandler();
                case 16:
                  this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGOUT), this.log("Log out success");
                case 18:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function() {
            return e2.apply(this, arguments);
          };
        }() }, { key: "logoutSync", value: function() {
          var e2, t3 = this;
          if (this.connectionState === T.DISCONNECTED) throw this.logError("Already in logout state"), new K("Logout failure. The client has already been logged out", br);
          this.connectionState === T.ABORTED ? this.info('Reset connection state from "ABORTED" to "DISCONNECTED"') : void 0 !== this.session && (eb("Logout", { elapse: fb(this.session.startTime), lts: U.fromNumber(Date.now()), sid: Xa(this.session.instanceId), userId: this.context.uid }, null !== (e2 = this.context.config.enableCloudProxy) && void 0 !== e2 && e2), this.session.logoutHandler().then(function() {
            t3.log("Log out success");
          })), this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGOUT);
        } }, { key: "sendMessageToPeer", value: function() {
          var e2 = J(w.mark(function e3(t3, n2) {
            var r2, i, o, a2, s, u2, c2 = this, l = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (r2 = 2 < l.length && void 0 !== l[2] ? l[2] : {}, i = r2.enableOfflineMessaging, o = void 0 !== i && i, a2 = r2.enableHistoricalMessaging, s = void 0 !== a2 && a2, Tm(t3, ve), this.connectionState !== T.RECONNECTING) {
                    e4.next = 5;
                    break;
                  }
                  return u2 = Date.now(), e4.abrupt("return", new Promise(function(e5, r3) {
                    var i2 = function() {
                      var i3 = J(w.mark(function i4() {
                        var l2;
                        return w.wrap(function(i5) {
                          for (; ; ) switch (i5.prev = i5.next) {
                            case 0:
                              if (void 0 !== c2.session) {
                                i5.next = 2;
                                break;
                              }
                              throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                            case 2:
                              return l2 = Date.now() - u2, i5.prev = 3, i5.t0 = e5, i5.next = 7, Gg({ message: t3, peerId: n2, toPeer: true, session: c2.session, errorCodes: { NOT_LOGGED_IN: al, TOO_OFTEN: dr }, diff: l2, logger: c2.logger, options: { enableHistoricalMessaging: s, enableOfflineMessaging: o } });
                            case 7:
                              i5.t1 = i5.sent, (0, i5.t0)(i5.t1), i5.next = 16;
                              break;
                            case 11:
                              i5.prev = 11, i5.t2 = i5.catch(3), Sa(i5.t2) && r3(new db(Yd(c2.name, "sendMessageToPeer", 1e4), Zk)), sa(i5.t2) && r3(i5.t2), r3(new da("Peer-to-peer message send failure", { code: cr, originalError: i5.t2 }));
                            case 16:
                              return i5.prev = 16, clearTimeout(a3), i5.finish(16);
                            case 19:
                            case "end":
                              return i5.stop();
                          }
                        }, i4, null, [[3, 11, 16, 19]]);
                      }));
                      return function() {
                        return i3.apply(this, arguments);
                      };
                    }();
                    c2.internalEmitter.once("RECONNECTED", i2);
                    var a3 = setTimeout(function() {
                      c2.internalEmitter.off("RECONNECTED", i2), r3(new db(Yd(c2.name, "sendMessageToPeer", 1e4), Zk));
                    }, 9e3);
                  }));
                case 5:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 7;
                    break;
                  }
                  throw new K("Failed to send the peer-to-peer message. The client is not logged in", al);
                case 7:
                  if (void 0 !== this.session) {
                    e4.next = 9;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 9:
                  return e4.prev = 9, e4.next = 12, Gg({ message: t3, peerId: n2, toPeer: true, session: this.session, errorCodes: { NOT_LOGGED_IN: al, TOO_OFTEN: dr }, diff: 0, logger: this.logger, options: { enableHistoricalMessaging: s, enableOfflineMessaging: o } });
                case 12:
                  return e4.abrupt("return", e4.sent);
                case 15:
                  if (e4.prev = 15, e4.t0 = e4.catch(9), !Sa(e4.t0)) {
                    e4.next = 19;
                    break;
                  }
                  throw new db(Yd(this.name, "sendMessageToPeer", 1e4), Zk);
                case 19:
                  if (!sa(e4.t0)) {
                    e4.next = 21;
                    break;
                  }
                  throw e4.t0;
                case 21:
                  throw new da("Peer-to-peer message send failure", { code: cr, originalError: e4.t0 });
                case 22:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[9, 15]]);
          }));
          return function(t3, n2) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "createChannel", value: function(e2) {
          var t3 = this;
          if (!za(e2)) throw new I(["The %s in the arguments is invalid", Object.keys({ channelId: e2 })[0]], Zz);
          return new pD(e2, function() {
            return t3.session;
          }, this, this.logger);
        } }, { key: "createLocalInvitation", value: function(e2) {
          if (!za(e2)) throw new I(["The %s in the arguments is invalid", Object.keys({ calleeId: e2 })[0]], xc);
          return this.invitationManager.genLocalInvitation(e2);
        } }, { key: "subscribePeersOnlineStatus", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2, l, f, h, p, d, v2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", bl);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  if (Array.isArray(t3) && 0 !== t3.length) {
                    e4.next = 6;
                    break;
                  }
                  throw new I("Invalid arguments: peerIds", kg);
                case 6:
                  n2 = 0;
                case 7:
                  if (!(n2 < t3.length)) {
                    e4.next = 14;
                    break;
                  }
                  if (za(r2 = t3[n2])) {
                    e4.next = 11;
                    break;
                  }
                  throw new I(["subscribePeersOnlineStatus peer id %s is invalid", r2], kg);
                case 11:
                  n2++, e4.next = 7;
                  break;
                case 14:
                  if (!(512 < (i = t3 && t3.length ? vk(t3) : []).length + Object.keys(this.subscribedPeerStatusCache).length)) {
                    e4.next = 17;
                    break;
                  }
                  throw new ib("Subscribed peers overflows", gr);
                case 17:
                  return e4.next = 19, this.session.requestSubscribePeersOnlineStatus(i).toPromise();
                case 19:
                  o = e4.sent, a2 = o.errors, s = [], u2 = [], c2 = 0;
                case 24:
                  if (!(c2 < a2.length)) {
                    e4.next = 32;
                    break;
                  }
                  if (l = a2[c2], f = l.code, "string" == typeof (h = l.account)) {
                    e4.next = 28;
                    break;
                  }
                  throw new da("Returned account is invalid", fr);
                case 28:
                  0 !== f && s.push(h);
                case 29:
                  c2++, e4.next = 24;
                  break;
                case 32:
                  for (p = 0; p < i.length; p++) d = i[p], s.includes(d) || (u2.push(d), this.subscribedPeerStatusCache[d] = void 0);
                  if (this.session.requestPeersOnlineStatus(u2).pipe(ba(function(e5) {
                    return uc(Jk(e5.userInfos, "account"), function(e6) {
                      return !!e6.ts;
                    });
                  })).subscribe(function(e5) {
                    e5 = uc(e5, function(e6, t4) {
                      return e6 = e6 ? S.PeerOnlineState.ONLINE : S.PeerOnlineState.OFFLINE, v2.subscribedPeerStatusCache[t4] = e6;
                    }), v2.emit("PeersOnlineStatusChanged", e5);
                  }), 0 === s.length) {
                    e4.next = 36;
                    break;
                  }
                  throw new da("Subscription failed", fr);
                case 36:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "unsubscribePeersOnlineStatus", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", bl);
                case 2:
                  if (void 0 !== this.session) {
                    e4.next = 4;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 4:
                  if (Array.isArray(t3) && 0 !== t3.length) {
                    e4.next = 6;
                    break;
                  }
                  throw new I("Invalid arguments: peerIds", kg);
                case 6:
                  n2 = 0;
                case 7:
                  if (!(n2 < t3.length)) {
                    e4.next = 14;
                    break;
                  }
                  if (za(r2 = t3[n2])) {
                    e4.next = 11;
                    break;
                  }
                  throw new I(["subscribePeersOnlineStatus peer id %s is invalid", r2], kg);
                case 11:
                  n2++, e4.next = 7;
                  break;
                case 14:
                  if (!(512 < t3.length)) {
                    e4.next = 16;
                    break;
                  }
                  throw new ib("Unsubscribed peers overflows", gr);
                case 16:
                  for (i = t3 && t3.length ? vk(t3) : [], this.session.requestUnsubscribePeersOnlineStatus(i), o = 0; o < i.length; o++) a2 = i[o], delete this.subscribedPeerStatusCache[a2];
                case 19:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "queryPeersBySubscriptionOption", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 2;
                    break;
                  }
                  throw new K("The client is not logged in", bl);
                case 2:
                  if (t3 !== S.PeerSubscriptionOption.ONLINE_STATUS) {
                    e4.next = 4;
                    break;
                  }
                  return e4.abrupt("return", Object.keys(this.subscribedPeerStatusCache));
                case 4:
                  throw new I("Subscription option not supported", kg);
                case 5:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "createMessage", value: function(e2) {
          return "IMAGE" === e2.messageType ? ua({ width: 0, height: 0, fileName: "", description: "", thumbnail: new Blob(), thumbnailWidth: 0, thumbnailHeight: 0, size: 0 }, e2) : "FILE" === e2.messageType ? ua({ fileName: "", description: "", thumbnail: new Blob(), size: 0 }, e2) : e2;
        } }, { key: "downloadMedia", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2, l, f, h, p, d, v2, b = this, g = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = 1 < g.length && void 0 !== g[1] ? g[1] : {}, "string" == typeof t3) {
                    e4.next = 3;
                    break;
                  }
                  throw new I("invalid mediaId format", cl);
                case 3:
                  if (e4.prev = 3, r2 = t3.split("z"), i = ra(r2, 3), o = i[0], a2 = i[1], s = i[2], u2 = o.slice(1, 65), c2 = bD(u2), l = parseInt(o.slice(65), 10), f = parseInt(a2, 10), h = parseInt(s, 10), !(Number.isNaN(l) || Number.isNaN(f) || Number.isNaN(h))) {
                    e4.next = 12;
                    break;
                  }
                  throw new I("Invalid mediaId content", cl);
                case 12:
                  e4.next = 19;
                  break;
                case 14:
                  if (e4.prev = 14, e4.t0 = e4.catch(3), !sa(e4.t0)) {
                    e4.next = 18;
                    break;
                  }
                  throw e4.t0;
                case 18:
                  throw new I("parse mediaId failure", { code: cl, originalError: e4.t0 });
                case 19:
                  if (this.connectionState === T.CONNECTED) {
                    e4.next = 21;
                    break;
                  }
                  throw new K("The client is not logged in, cannot download", CA);
                case 21:
                  if (void 0 !== this.session) {
                    e4.next = 23;
                    break;
                  }
                  throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                case 23:
                  return p = this.mediaTaskManager.addDownloadTask({ unit: f, zone: l, hashHexStr: u2, size: h }, function() {
                    if (void 0 === b.session) throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                    return b.session.requestFileDownloadIndexGet({ hash: c2, zone: l, unit: f, size: h }).toPromise();
                  }, n2), e4.next = 26, this.mediaTaskManager.waitMediaTask(p);
                case 26:
                  return d = e4.sent, v2 = d.payload, e4.abrupt("return", v2);
                case 29:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[3, 14]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "createMediaMessageByUploading", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2, s, u2, c2, l, f, h, p, d, v2, b, g, y2, m2, E2, _, O2, A, k, R2, N2 = this, S2 = arguments;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = 1 < S2.length && void 0 !== S2[1] ? S2[1] : {}, r2 = 2 < S2.length && void 0 !== S2[2] ? S2[2] : {}, yd(n2)) {
                    e4.next = 4;
                    break;
                  }
                  throw new I("Invalid params", wf);
                case 4:
                  if (i = "thumbnailWidth" in n2 || "thumbnailHeight" in n2 || "width" in n2 || "height" in n2, o = n2.messageType, a2 = void 0 === o ? i ? "IMAGE" : "FILE" : o, s = n2.description, u2 = void 0 === s ? "" : s, c2 = n2.fileName, l = void 0 === c2 ? "" : c2, f = n2.thumbnail, "string" == typeof n2.messageType && "string" == typeof u2 && "string" == typeof l && (Pm(f) || void 0 === f) && Pm(t3)) {
                    e4.next = 8;
                    break;
                  }
                  throw new I("Invalid message params type", wf);
                case 8:
                  if (!i || "FILE" !== a2) {
                    e4.next = 10;
                    break;
                  }
                  throw new I("Invalid message params, unexpected field in RtmFileMessage", wf);
                case 10:
                  if (!(33554432 < (h = t3.size))) {
                    e4.next = 13;
                    break;
                  }
                  throw new ib("The payload size overflow 32 MB", wA);
                case 13:
                  return e4.next = 15, Ji(t3);
                case 15:
                  return p = e4.sent, e4.next = 18, aD(p);
                case 18:
                  if (d = e4.sent, this.connectionState === T.CONNECTED) {
                    e4.next = 21;
                    break;
                  }
                  throw new K("The client is not logged in", yA);
                case 21:
                  if ("IMAGE" !== a2) {
                    e4.next = 29;
                    break;
                  }
                  return e4.next = 24, Xt(n2, p);
                case 24:
                  v2 = e4.sent, b = v2.height, g = v2.width, y2 = v2.thumbnailWidth, m2 = v2.thumbnailHeight;
                case 29:
                  return E2 = this.mediaTaskManager.addUploadTask({ file: new Uint8Array(p), hash: d }, function() {
                    if (void 0 === N2.session) throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                    return N2.session.fetchFileUploadIndexGet({ hash: d, size: h });
                  }, function(e5, t4) {
                    if (void 0 === N2.session) throw new Fa({ SESSION_NOT_FOUND: "Failed to get session of the client" });
                    return N2.session.requestFileUploadIndexSet({ hash: d, unit: e5, servers: t4 }).toPromise();
                  }, r2), e4.next = 32, this.mediaTaskManager.waitMediaTask(E2);
                case 32:
                  if (_ = e4.sent, O2 = _.zone, A = _.retUnit, "IMAGE" !== a2) {
                    e4.next = 38;
                    break;
                  }
                  return k = { height: b, width: g, fileName: l, size: h, description: u2, thumbnail: f, messageType: a2, thumbnailWidth: y2, thumbnailHeight: m2, mediaId: "0".concat($r(d)).concat(O2, "z").concat(A, "z").concat(h, "z").concat(b, "z").concat(g) }, e4.abrupt("return", k);
                case 38:
                  return R2 = { fileName: l, size: h, description: u2, mediaId: "0".concat($r(d)).concat(O2, "z").concat(A, "z").concat(h), thumbnail: f, messageType: a2 }, e4.abrupt("return", R2);
                case 40:
                case "end":
                  return e4.stop();
              }
            }, e3, this);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "loginImpl", value: function() {
          var e2 = J(w.mark(function e3(t3) {
            var n2, r2, i, o, a2 = this;
            return w.wrap(function(e4) {
              for (; ; ) switch (e4.prev = e4.next) {
                case 0:
                  if (n2 = t3.uid, r2 = t3.instanceId, !(void 0 !== this.lastLoginTime && 500 > Date.now() - this.lastLoginTime)) {
                    e4.next = 4;
                    break;
                  }
                  throw new rC(["The frequency of login exceeded the limit of %d queries per second", 2], mA);
                case 4:
                  if (this.connectionState === T.DISCONNECTED) {
                    e4.next = 6;
                    break;
                  }
                  throw new K("The SDK is either logging in or has logged in the Agora RTM system", kA);
                case 6:
                  e4.prev = 6, this.context.uid = n2, e4.next = 13;
                  break;
                case 10:
                  throw e4.prev = 10, e4.t0 = e4.catch(6), new I(["The %s in the arguments is invalid", Object.keys({ uid: n2 })[0]], Jh);
                case 13:
                  return this.onConnectionStateChanged(T.CONNECTING, Eb.LOGIN), this.session = i = new ls(this.context, new Yr(this.context, this.logger, false), r2, this.logger), o = function() {
                    a2.connectionState === T.CONNECTED && (a2.onConnectionStateChanged(T.RECONNECTING, Eb.INTERRUPTED), a2.session) && a2.session.once("userJoined", function() {
                      a2.onConnectionStateChanged(T.CONNECTED, Eb.LOGIN_SUCCESS);
                    });
                  }, i.on("connectionLost", o), i.on("tokenExpired", function() {
                    a2.emit("TokenExpired");
                  }), i.once("userDrop", this.userDropHandler), this.session.on("peerTextMessage", function(e5) {
                    a2.emit("MessageFromPeer", { text: e5.text, messageType: S.MessageType.TEXT }, e5.peerId, e5.properties);
                  }), this.session.on("peerMediaMessage", function(e5) {
                    var t4 = e5.peerId, n3 = e5.properties, r3 = e5.messageType;
                    e5 = e5.details, "FILE" === r3 ? a2.emit("MessageFromPeer", { messageType: S.MessageType.FILE, size: parseInt(pa(e5.media_size), 10), description: pa(e5.media_description), fileName: pa(e5.media_filename), mediaId: pa(e5.media_id), thumbnail: new Blob([e5.media_thumbnail]) }, t4, n3) : "IMAGE" === r3 && a2.emit("MessageFromPeer", { messageType: S.MessageType.IMAGE, size: parseInt(pa(e5.media_size), 10), description: pa(e5.media_description), fileName: pa(e5.media_filename), mediaId: pa(e5.media_id), thumbnail: new Blob([e5.media_thumbnail]), height: parseInt(pa(e5.media_height), 10), width: parseInt(pa(e5.media_width), 10), thumbnailHeight: parseInt(pa(e5.media_thumbnailheight), 10), thumbnailWidth: parseInt(pa(e5.media_thumbnailwidth), 10) }, t4, n3);
                  }), this.session.on("peerRawMessage", function(e5) {
                    a2.emit("MessageFromPeer", { rawMessage: e5.raw, description: e5.desc, messageType: S.MessageType.RAW }, e5.peerId, e5.properties);
                  }), i.on("instanceChanged", function(e5) {
                    return r2 = e5;
                  }), i.on("peerOnlineStatusChanged", function(e5) {
                    var t4 = e5.instance.toString() + e5.state, n3 = a2.peerStatusSeqLru.get(t4);
                    !n3 || e5.seq.greaterThan(n3) ? (a2.peerStatusSeqLru.set(t4, e5.seq), e5.state !== a2.subscribedPeerStatusCache[e5.peerId] && a2.emit("PeersOnlineStatusChanged", m({}, e5.peerId, e5.state)), a2.subscribedPeerStatusCache[e5.peerId] = e5.state, clearTimeout(a2.peerUnreachableTimers[t4]), e5.state === S.PeerOnlineState.UNREACHABLE && (a2.peerUnreachableTimers[t4] = setTimeout(function() {
                      a2.subscribedPeerStatusCache[e5.peerId] === S.PeerOnlineState.UNREACHABLE && (a2.subscribedPeerStatusCache[e5.peerId] = S.PeerOnlineState.ONLINE, a2.emit("PeersOnlineStatusChanged", m({}, e5.peerId, S.PeerOnlineState.ONLINE)));
                    }, 3e4))) : a2.log("peerOnlineStatusChanged dedup for %s, %d", t4, e5.seq.toNumber());
                  }), i.on("invitationMessage", this.invitationManager.invitationMessageHandler.bind(this.invitationManager)), i.on("channelAttributesUpdated", function(e5) {
                    var t4 = e5.channelId;
                    e5 = e5.attributeMaps;
                    for (var n3 = {}, r3 = 0; r3 < e5.length; r3++) {
                      var i2 = e5[r3], o2 = i2.key, s = i2.ms, u2 = i2.value;
                      if (i2 = i2.origin, "string" != typeof o2 || !U.isLong(s) || "string" != typeof u2 || !za(i2)) break;
                      n3[o2] = new Blob([u2]).size;
                    }
                    a2.channelAttributesCacheLru.set(t4, n3);
                  }), i.on("userJoined", function(e5) {
                    if (0 !== Object.keys(a2.attributes).length) {
                      if (void 0 === a2.session) return;
                      a2.session.requestSetLocalUserAttributes(a2.attributes, e5).toPromise();
                    }
                    if (0 !== a2.attributeDrafts.size) for (var t4 = function(t5, n4) {
                      var r4 = (t5 = n4[t5]).attribute;
                      t5.promise.then(function() {
                        void 0 !== a2.session && a2.session.requestSetLocalUserAttributes(r4, e5).toPromise();
                      });
                    }, n3 = 0, r3 = Array.from(a2.attributeDrafts); n3 < r3.length; n3++) t4(n3, r3);
                    0 !== Object.keys(a2.subscribedPeerStatusCache).length && i.requestSubscribePeersOnlineStatus(Object.keys(a2.subscribedPeerStatusCache));
                  }), this.lastLoginTime = Date.now(), e4.prev = 29, e4.next = 32, i.loginHandler().toPromise();
                case 32:
                  this.mediaTaskManager.setAuthInfo({ ticket: i.connection.curOpenSockets.filter(function(e5) {
                    return void 0 !== e5;
                  })[0].ticket, instance: i.instanceId, useNewDomain: 0.5 <= Math.random(), loginOpt: i.userJoinOptions.toLong() }), e4.next = 44;
                  break;
                case 35:
                  if (e4.prev = 35, e4.t1 = e4.catch(29), !Sa(e4.t1)) {
                    e4.next = 40;
                    break;
                  }
                  throw this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGIN_TIMEOUT), new db(Yd(this.name, "login", 2e4), lA);
                case 40:
                  if (this.onConnectionStateChanged(T.DISCONNECTED, Eb.LOGIN_FAILURE), !sa(e4.t1)) {
                    e4.next = 43;
                    break;
                  }
                  throw e4.t1;
                case 43:
                  throw new da("Login failure", { code: Zq, originalError: e4.t1 });
                case 44:
                  this.onConnectionStateChanged(T.CONNECTED, Eb.LOGIN_SUCCESS);
                case 45:
                case "end":
                  return e4.stop();
              }
            }, e3, this, [[6, 10], [29, 35]]);
          }));
          return function(t3) {
            return e2.apply(this, arguments);
          };
        }() }, { key: "onConnectionStateChanged", value: function(e2, t3) {
          var n2, r2 = this;
          e2 === T.RECONNECTING && (this.reconnId += 1), eb("ConnectionStateChange", { elapse: fb(this.session && this.session.startTime), lts: U.fromNumber(Date.now()), newState: os[e2], oldState: os[this.connectionState], reason: qD[t3], sid: Xa(this.session && this.session.instanceId || U.fromNumber(0)), userId: this.context.uid, reconnId: this.reconnId }, null !== (n2 = this.context.config.enableCloudProxy) && void 0 !== n2 && n2), this.connectionState === T.RECONNECTING && e2 === T.CONNECTED && (0 !== Object.keys(this.subscribedPeerStatusCache).length && void 0 !== this.session && this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(ba(function(e3) {
            return uc(Jk(e3.userInfos, "account"), function(e4) {
              return !!e4.ts;
            });
          })).subscribe(function(e3) {
            e3 = uc(e3, function(e4, t4) {
              return e4 = e4 ? S.PeerOnlineState.ONLINE : S.PeerOnlineState.OFFLINE, r2.subscribedPeerStatusCache[t4] = e4;
            }), r2.emit("PeersOnlineStatusChanged", e3);
          }), this.internalEmitter.emit("RECONNECTED")), this.connectionState = e2, e2 !== T.ABORTED && e2 !== T.DISCONNECTED || (this.reconnId = 0, this.attributes = {}, this.session && (this.session.removeAllListeners(), this.session.joinedChannels.clear(), this.session.msgDedupLru.empty(), this.session.dialogueSequenceLru.empty(), this.session.dialPendingMsgSubjectMap.clear()), this.session = void 0, this.channelAttributesCacheLru.empty(), this.peerStatusSeqLru.empty(), this.peerUnreachableTimers = {}, this.subscribedPeerStatusCache = {}, this.attributeDrafts.clear(), this.context.token = void 0), this.mediaTaskManager.emit("connectionStateChanged", e2), this.emit("ConnectionStateChanged", e2, t3);
        } }]), t2;
      }(tb()), fa(E.prototype, "renewToken", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "renewToken"), E.prototype), fa(E.prototype, "queryPeersOnlineStatus", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "queryPeersOnlineStatus"), E.prototype), fa(E.prototype, "getChannelMemberCount", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "getChannelMemberCount"), E.prototype), fa(E.prototype, "setLocalUserAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "setLocalUserAttributes"), E.prototype), fa(E.prototype, "setChannelAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "setChannelAttributes"), E.prototype), fa(E.prototype, "addOrUpdateLocalUserAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "addOrUpdateLocalUserAttributes"), E.prototype), fa(E.prototype, "addOrUpdateChannelAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "addOrUpdateChannelAttributes"), E.prototype), fa(E.prototype, "deleteLocalUserAttributesByKeys", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "deleteLocalUserAttributesByKeys"), E.prototype), fa(E.prototype, "deleteChannelAttributesByKeys", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "deleteChannelAttributesByKeys"), E.prototype), fa(E.prototype, "clearLocalUserAttributes", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "clearLocalUserAttributes"), E.prototype), fa(E.prototype, "clearChannelAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "clearChannelAttributes"), E.prototype), fa(E.prototype, "getUserAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "getUserAttributes"), E.prototype), fa(E.prototype, "getChannelAttributes", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "getChannelAttributes"), E.prototype), fa(E.prototype, "getChannelAttributesByKeys", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "getChannelAttributesByKeys"), E.prototype), fa(E.prototype, "getUserAttributesByKeys", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "getUserAttributesByKeys"), E.prototype), fa(E.prototype, "login", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "login"), E.prototype), fa(E.prototype, "logout", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "logout"), E.prototype), fa(E.prototype, "logoutSync", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "logoutSync"), E.prototype), fa(E.prototype, "sendMessageToPeer", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "sendMessageToPeer"), E.prototype), fa(E.prototype, "createChannel", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "createChannel"), E.prototype), fa(E.prototype, "createLocalInvitation", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "createLocalInvitation"), E.prototype), fa(E.prototype, "subscribePeersOnlineStatus", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "subscribePeersOnlineStatus"), E.prototype), fa(E.prototype, "unsubscribePeersOnlineStatus", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "unsubscribePeersOnlineStatus"), E.prototype), fa(E.prototype, "queryPeersBySubscriptionOption", [Ma], Object.getOwnPropertyDescriptor(E.prototype, "queryPeersBySubscriptionOption"), E.prototype), fa(E.prototype, "createMessage", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "createMessage"), E.prototype), fa(E.prototype, "downloadMedia", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "downloadMedia"), E.prototype), fa(E.prototype, "createMediaMessageByUploading", [Nb], Object.getOwnPropertyDescriptor(E.prototype, "createMediaMessageByUploading"), E.prototype), E), ps = { LOG_FILTER_OFF: { error: false, warn: false, info: false, track: false, debug: false }, LOG_FILTER_ERROR: { error: true, warn: false, info: false, track: false, debug: false }, LOG_FILTER_WARNING: { error: true, warn: true, info: false, track: false, debug: false }, LOG_FILTER_INFO: { error: true, warn: true, info: true, track: false, debug: false }, LOG_FILTER_DEBUG: { error: true, warn: true, info: true, track: true, debug: true } }, qs = { enableLogUpload: false, logFilter: ps.LOG_FILTER_INFO, enableCloudProxy: false }, Zd = ua(ua({ createInstance: function(e) {
        var t2 = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}, n2 = 2 < arguments.length ? arguments[2] : void 0;
        if (!/^[\dA-Za-z]{32}$/.test(e)) throw new I(["The %s in the arguments is invalid", Object.keys({ appId: e })[0]], Nq);
        var r = Object.keys(t2).filter(function(e2) {
          return !(e2 in qs);
        });
        if (0 !== r.length) throw new I("Invalid RTM config: ".concat(r.join(", ")), Nq);
        var i = ua(ua({}, qs), t2);
        if (void 0 !== n2 && (!Array.isArray(n2) || 0 === n2.length)) throw new I("Invalid area config");
        if (null != n2) {
          if (!n2.every(function(e2) {
            return e2 in S.LegacyAreaCode;
          })) throw new I("Invalid area codes: ".concat(n2.filter(function(e2) {
            return !(e2 in S);
          }).join(", ")));
          M = xe(n2.map(function(e2) {
            return zC[e2];
          }));
        }
        n2 = jl = Ya.__global_unique_id__ = (Ya.__global_unique_id__ || 0) + 1;
        var o = DC(i);
        r = EC(i);
        var a2 = FC(i), s = GC(n2, i), u2 = Tr(n2, i), c2 = u2("RTM:DEBUG", "<Entry> ");
        return Mr.rtmConfig = i, o("The Agora RTM Web SDK version is %s", "1.4.3-203"), t2.enableCloudProxy && o("RTM cloud proxy enabled"), t2.enableLogUpload && o("Log upload enabled"), M && c2("Area is set to %s", Array.from(M.CODES).map(function(e2) {
          return xf(F).find(function(t3) {
            return F[t3] === e2;
          });
        }).join(", ")), c2("Creating an RtmClient instance"), c2('The Git commit ID is "'.concat("v1.4.3-17-g1e27aa38", '"')), c2("The App ID is %s", Um(e, 4, 10, "*".repeat(6))), o("The process ID is %s", gg), c2("The build is %s", "v1.4.3-17-g1e27aa38"), c2("NODE_ENV is %s", "production"), new rD(e, { genLogger: u2, genTracker: s, info: o, warn: r, logError: a2, loggerId: n2 }, i, function(e2) {
          for (var t3 = 0, n3 = xf(e2); t3 < n3.length; t3++) {
            var r2 = n3[t3];
            try {
              var a3 = e2[r2];
              null != a3 && (e2.enableCloudProxy && o("RTM cloud proxy enabled"), e2.enableLogUpload && o("Log upload enabled"), i[r2] = a3);
            } catch (e3) {
              throw new I(["The %s in the arguments is invalid", r2], void 0);
            }
          }
        });
      }, BUILD: "v1.4.3-17-g1e27aa38", VERSION: "1.4.3-203", END_CALL_PREFIX: "AgoraRTMLegacyEndcallCompatibleMessagePrefix", processId: gg, ConnectionChangeReason: S.ConnectionChangeReason, ConnectionState: S.ConnectionState, LocalInvitationFailureReason: S.LocalInvitationFailureReason, LocalInvitationState: S.LocalInvitationState, RemoteInvitationFailureReason: S.RemoteInvitationFailureReason, RemoteInvitationState: S.RemoteInvitationState, MessageType: S.MessageType, PeerOnlineState: S.PeerOnlineState, PeerSubscriptionOption: S.PeerSubscriptionOption }, ps), {}, { setParameter: function(e, t2) {
        Object.keys(Nc).includes(e) && (Nc[e] = t2);
      }, getParameter: function(e) {
        return Nc[e];
      }, setArea: function(e) {
        var t2 = e.areaCodes;
        if (e = e.excludedArea, !Array.isArray(t2) || 0 === t2.length || !t2.every(function(e2) {
          return e2 in S.AreaCode;
        })) throw new I("Invalid area config");
        if (void 0 !== e && e === S.AreaCode.GLOBAL) throw new I("Excluded area cannot be global");
        if (void 0 === e) M = xe(t2.map(function(e2) {
          return F[e2];
        }));
        else {
          if (t2.includes(e)) throw new I("Excluded area cannot be in areaCodes");
          if (!(e in F)) throw new I("Invalid excludedArea:", e);
          M = bu({ areas: t2.map(function(e2) {
            return F[e2];
          }), excludedArea: F[e] });
        }
      } });
      return Zd;
    });
  }
});

// node_modules/agora-react-uikit/dist/index.modern.js
var import_react2 = __toESM(require_react());

// node_modules/agora-rtc-react/dist/index.modern.js
var index_modern_exports = {};
__export(index_modern_exports, {
  AgoraRTCErrorCode: () => AgoraRTCErrorCode,
  AgoraVideoPlayer: () => AgoraVideoPlayer,
  createBufferSourceAudioTrack: () => createBufferSourceAudioTrack,
  createCameraVideoTrack: () => createCameraVideoTrack,
  createClient: () => createClient,
  createCustomAudioTrack: () => createCustomAudioTrack,
  createCustomVideoTrack: () => createCustomVideoTrack,
  createMicrophoneAndCameraTracks: () => createMicrophoneAndCameraTracks,
  createMicrophoneAudioTrack: () => createMicrophoneAudioTrack,
  createScreenVideoTrack: () => createScreenVideoTrack,
  default: () => index_modern_default
});
var import_react = __toESM(require_react());
var import_agora_rtc_sdk_ng = __toESM(require_AgoraRTC_N_production());
__reExport(index_modern_exports, __toESM(require_AgoraRTC_N_production()));
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}
var AgoraRTCErrorCode;
(function(AgoraRTCErrorCode2) {
  AgoraRTCErrorCode2["UNEXPECTED_ERROR"] = "UNEXPECTED_ERROR";
  AgoraRTCErrorCode2["UNEXPECTED_RESPONSE"] = "UNEXPECTED_RESPONSE";
  AgoraRTCErrorCode2["TIMEOUT"] = "TIMEOUT";
  AgoraRTCErrorCode2["INVALID_PARAMS"] = "INVALID_PARAMS";
  AgoraRTCErrorCode2["NOT_SUPPORTED"] = "NOT_SUPPORTED";
  AgoraRTCErrorCode2["INVALID_OPERATION"] = "INVALID_OPERATION";
  AgoraRTCErrorCode2["OPERATION_ABORTED"] = "OPERATION_ABORTED";
  AgoraRTCErrorCode2["WEB_SECURITY_RESTRICT"] = "WEB_SECURITY_RESTRICT";
  AgoraRTCErrorCode2["NETWORK_ERROR"] = "NETWORK_ERROR";
  AgoraRTCErrorCode2["NETWORK_TIMEOUT"] = "NETWORK_TIMEOUT";
  AgoraRTCErrorCode2["NETWORK_RESPONSE_ERROR"] = "NETWORK_RESPONSE_ERROR";
  AgoraRTCErrorCode2["API_INVOKE_TIMEOUT"] = "API_INVOKE_TIMEOUT";
  AgoraRTCErrorCode2["ENUMERATE_DEVICES_FAILED"] = "ENUMERATE_DEVICES_FAILED";
  AgoraRTCErrorCode2["DEVICE_NOT_FOUND"] = "DEVICE_NOT_FOUND";
  AgoraRTCErrorCode2["ELECTRON_IS_NULL"] = "ELECTRON_IS_NULL";
  AgoraRTCErrorCode2["ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR"] = "ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR";
  AgoraRTCErrorCode2["CHROME_PLUGIN_NO_RESPONSE"] = "CHROME_PLUGIN_NO_RESPONSE";
  AgoraRTCErrorCode2["CHROME_PLUGIN_NOT_INSTALL"] = "CHROME_PLUGIN_NOT_INSTALL";
  AgoraRTCErrorCode2["MEDIA_OPTION_INVALID"] = "MEDIA_OPTION_INVALID";
  AgoraRTCErrorCode2["PERMISSION_DENIED"] = "PERMISSION_DENIED";
  AgoraRTCErrorCode2["CONSTRAINT_NOT_SATISFIED"] = "CONSTRAINT_NOT_SATISFIED";
  AgoraRTCErrorCode2["TRACK_IS_DISABLED"] = "TRACK_IS_DISABLED";
  AgoraRTCErrorCode2["SHARE_AUDIO_NOT_ALLOWED"] = "SHARE_AUDIO_NOT_ALLOWED";
  AgoraRTCErrorCode2["LOW_STREAM_ENCODING_ERROR"] = "LOW_STREAM_ENCODING_ERROR";
  AgoraRTCErrorCode2["INVALID_UINT_UID_FROM_STRING_UID"] = "INVALID_UINT_UID_FROM_STRING_UID";
  AgoraRTCErrorCode2["CAN_NOT_GET_PROXY_SERVER"] = "CAN_NOT_GET_PROXY_SERVER";
  AgoraRTCErrorCode2["CAN_NOT_GET_GATEWAY_SERVER"] = "CAN_NOT_GET_GATEWAY_SERVER";
  AgoraRTCErrorCode2["VOID_GATEWAY_ADDRESS"] = "VOID_GATEWAY_ADDRESS";
  AgoraRTCErrorCode2["UID_CONFLICT"] = "UID_CONFLICT";
  AgoraRTCErrorCode2["INVALID_LOCAL_TRACK"] = "INVALID_LOCAL_TRACK";
  AgoraRTCErrorCode2["INVALID_TRACK"] = "INVALID_TRACK";
  AgoraRTCErrorCode2["SENDER_NOT_FOUND"] = "SENDER_NOT_FOUND";
  AgoraRTCErrorCode2["CREATE_OFFER_FAILED"] = "CREATE_OFFER_FAILED";
  AgoraRTCErrorCode2["SET_ANSWER_FAILED"] = "SET_ANSWER_FAILED";
  AgoraRTCErrorCode2["ICE_FAILED"] = "ICE_FAILED";
  AgoraRTCErrorCode2["PC_CLOSED"] = "PC_CLOSED";
  AgoraRTCErrorCode2["SENDER_REPLACE_FAILED"] = "SENDER_REPLACE_FAILED";
  AgoraRTCErrorCode2["GATEWAY_P2P_LOST"] = "GATEWAY_P2P_LOST";
  AgoraRTCErrorCode2["NO_ICE_CANDIDATE"] = "NO_ICE_CANDIDATE";
  AgoraRTCErrorCode2["CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS"] = "CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS";
  AgoraRTCErrorCode2["EXIST_DISABLED_VIDEO_TRACK"] = "EXIST_DISABLED_VIDEO_TRACK";
  AgoraRTCErrorCode2["INVALID_REMOTE_USER"] = "INVALID_REMOTE_USER";
  AgoraRTCErrorCode2["REMOTE_USER_IS_NOT_PUBLISHED"] = "REMOTE_USER_IS_NOT_PUBLISHED";
  AgoraRTCErrorCode2["CUSTOM_REPORT_SEND_FAILED"] = "CUSTOM_REPORT_SEND_FAILED";
  AgoraRTCErrorCode2["CUSTOM_REPORT_FREQUENCY_TOO_HIGH"] = "CUSTOM_REPORT_FREQUENCY_TOO_HIGH";
  AgoraRTCErrorCode2["FETCH_AUDIO_FILE_FAILED"] = "FETCH_AUDIO_FILE_FAILED";
  AgoraRTCErrorCode2["READ_LOCAL_AUDIO_FILE_ERROR"] = "READ_LOCAL_AUDIO_FILE_ERROR";
  AgoraRTCErrorCode2["DECODE_AUDIO_FILE_FAILED"] = "DECODE_AUDIO_FILE_FAILED";
  AgoraRTCErrorCode2["WS_ABORT"] = "WS_ABORT";
  AgoraRTCErrorCode2["WS_DISCONNECT"] = "WS_DISCONNECT";
  AgoraRTCErrorCode2["WS_ERR"] = "WS_ERR";
  AgoraRTCErrorCode2["LIVE_STREAMING_TASK_CONFLICT"] = "LIVE_STREAMING_TASK_CONFLICT";
  AgoraRTCErrorCode2["LIVE_STREAMING_INVALID_ARGUMENT"] = "LIVE_STREAMING_INVALID_ARGUMENT";
  AgoraRTCErrorCode2["LIVE_STREAMING_INTERNAL_SERVER_ERROR"] = "LIVE_STREAMING_INTERNAL_SERVER_ERROR";
  AgoraRTCErrorCode2["LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED"] = "LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED";
  AgoraRTCErrorCode2["LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED"] = "LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED";
  AgoraRTCErrorCode2["LIVE_STREAMING_CDN_ERROR"] = "LIVE_STREAMING_CDN_ERROR";
  AgoraRTCErrorCode2["LIVE_STREAMING_INVALID_RAW_STREAM"] = "LIVE_STREAMING_INVALID_RAW_STREAM";
  AgoraRTCErrorCode2["LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT"] = "LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT";
  AgoraRTCErrorCode2["LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE"] = "LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE";
  AgoraRTCErrorCode2["LIVE_STREAMING_WARN_FREQUENT_REQUEST"] = "LIVE_STREAMING_WARN_FREQUENT_REQUEST";
  AgoraRTCErrorCode2["WEBGL_INTERNAL_ERROR"] = "WEBGL_INTERNAL_ERROR";
  AgoraRTCErrorCode2["BEAUTY_PROCESSOR_INTERNAL_ERROR"] = "BEAUTY_PROCESSOR_INTERNAL_ERROR";
  AgoraRTCErrorCode2["CROSS_CHANNEL_WAIT_STATUS_ERROR"] = "CROSS_CHANNEL_WAIT_STATUS_ERROR";
  AgoraRTCErrorCode2["CROSS_CHANNEL_FAILED_JOIN_SRC"] = "CROSS_CHANNEL_FAILED_JOIN_SEC";
  AgoraRTCErrorCode2["CROSS_CHANNEL_FAILED_JOIN_DEST"] = "CROSS_CHANNEL_FAILED_JOIN_DEST";
  AgoraRTCErrorCode2["CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST"] = "CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST";
  AgoraRTCErrorCode2["CROSS_CHANNEL_SERVER_ERROR_RESPONSE"] = "CROSS_CHANNEL_SERVER_ERROR_RESPONSE";
  AgoraRTCErrorCode2["METADATA_OUT_OF_RANGE"] = "METADATA_OUT_OF_RANGE";
})(AgoraRTCErrorCode || (AgoraRTCErrorCode = {}));
var createClient = function createClient2(config) {
  var client;
  function createClosure() {
    if (!client) {
      client = import_agora_rtc_sdk_ng.default.createClient(config);
    }
    return client;
  }
  return function() {
    return createClosure();
  };
};
function createMicrophoneAndCameraTracks(audioConfig, videoConfig) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createMicrophoneAndCameraTracks(audioConfig, videoConfig)).then(function(_AgoraRTC$createMicro) {
        tracks = _AgoraRTC$createMicro;
        return tracks;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var tracks = null;
  return function useMicrophoneAndCameraTracks() {
    var _useState = (0, import_react.useState)(false), ready = _useState[0], setReady = _useState[1];
    var _useState2 = (0, import_react.useState)(null), agoraRTCError = _useState2[0], setAgoraRTCError = _useState2[1];
    var ref = (0, import_react.useRef)(tracks);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(tracks2) {
          ref.current = tracks2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        tracks = null;
      };
    }, []);
    return {
      ready,
      tracks: ref.current,
      error: agoraRTCError
    };
  };
}
function createBufferSourceAudioTrack(config) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createBufferSourceAudioTrack(config)).then(function(_AgoraRTC$createBuffe) {
        track = _AgoraRTC$createBuffe;
        return track;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var track = null;
  return function useBufferSourceAudioTrack() {
    var _useState3 = (0, import_react.useState)(false), ready = _useState3[0], setReady = _useState3[1];
    var _useState4 = (0, import_react.useState)(null), agoraRTCError = _useState4[0], setAgoraRTCError = _useState4[1];
    var ref = (0, import_react.useRef)(track);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(track2) {
          ref.current = track2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        track = null;
      };
    }, []);
    return {
      ready,
      track: ref.current,
      error: agoraRTCError
    };
  };
}
function createCameraVideoTrack(config) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createCameraVideoTrack(config)).then(function(_AgoraRTC$createCamer) {
        track = _AgoraRTC$createCamer;
        return track;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var track = null;
  return function useCameraVideoTrack() {
    var _useState5 = (0, import_react.useState)(false), ready = _useState5[0], setReady = _useState5[1];
    var _useState6 = (0, import_react.useState)(null), agoraRTCError = _useState6[0], setAgoraRTCError = _useState6[1];
    var ref = (0, import_react.useRef)(track);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(track2) {
          ref.current = track2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        track = null;
      };
    }, []);
    return {
      ready,
      track: ref.current,
      error: agoraRTCError
    };
  };
}
function createCustomAudioTrack(config) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createCustomAudioTrack(config)).then(function(_AgoraRTC$createCusto) {
        track = _AgoraRTC$createCusto;
        return track;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var track = null;
  return function useCustomAudioTrack() {
    var _useState7 = (0, import_react.useState)(false), ready = _useState7[0], setReady = _useState7[1];
    var _useState8 = (0, import_react.useState)(null), agoraRTCError = _useState8[0], setAgoraRTCError = _useState8[1];
    var ref = (0, import_react.useRef)(track);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(track2) {
          ref.current = track2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        track = null;
      };
    }, []);
    return {
      ready,
      track: ref.current,
      error: agoraRTCError
    };
  };
}
function createCustomVideoTrack(config) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createCustomVideoTrack(config)).then(function(_AgoraRTC$createCusto2) {
        track = _AgoraRTC$createCusto2;
        return track;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var track = null;
  return function useCustomVideoTrack() {
    var _useState9 = (0, import_react.useState)(false), ready = _useState9[0], setReady = _useState9[1];
    var _useState10 = (0, import_react.useState)(null), agoraRTCError = _useState10[0], setAgoraRTCError = _useState10[1];
    var ref = (0, import_react.useRef)(track);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(track2) {
          ref.current = track2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        track = null;
      };
    }, []);
    return {
      ready,
      track: ref.current,
      error: agoraRTCError
    };
  };
}
function createMicrophoneAudioTrack(config) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createMicrophoneAudioTrack(config)).then(function(_AgoraRTC$createMicro2) {
        track = _AgoraRTC$createMicro2;
        return track;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var track = null;
  return function useMicrophoneAudioTrack() {
    var _useState11 = (0, import_react.useState)(false), ready = _useState11[0], setReady = _useState11[1];
    var _useState12 = (0, import_react.useState)(null), agoraRTCError = _useState12[0], setAgoraRTCError = _useState12[1];
    var ref = (0, import_react.useRef)(track);
    (0, import_react.useEffect)(function() {
      if (ref.current === null) {
        createClosure().then(function(track2) {
          ref.current = track2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
      return function() {
        track = null;
      };
    }, []);
    return {
      ready,
      track: ref.current,
      error: agoraRTCError
    };
  };
}
function createScreenVideoTrack(config, withAudio) {
  var createClosure = function createClosure2() {
    try {
      return Promise.resolve(import_agora_rtc_sdk_ng.default.createScreenVideoTrack(config, withAudio)).then(function(_AgoraRTC$createScree) {
        tracks = _AgoraRTC$createScree;
        return tracks;
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var tracks;
  return function useScreenVideoTrack() {
    var _useState13 = (0, import_react.useState)(false), ready = _useState13[0], setReady = _useState13[1];
    var _useState14 = (0, import_react.useState)(null), agoraRTCError = _useState14[0], setAgoraRTCError = _useState14[1];
    var ref = (0, import_react.useRef)(tracks);
    (0, import_react.useEffect)(function() {
      if (ref.current === void 0) {
        createClosure().then(function(tracks2) {
          ref.current = tracks2;
          setReady(true);
        }, function(e) {
          setAgoraRTCError(e);
        });
      } else {
        setReady(true);
      }
    }, []);
    return {
      ready,
      tracks: ref.current,
      error: agoraRTCError
    };
  };
}
var AgoraVideoPlayer = function AgoraVideoPlayer2(props) {
  var vidDiv = (0, import_react.useRef)(null);
  var videoTrack = props.videoTrack, config = props.config, other = _objectWithoutPropertiesLoose(props, ["videoTrack", "config"]);
  (0, import_react.useLayoutEffect)(function() {
    if (vidDiv.current !== null) videoTrack.play(vidDiv.current, config);
    return function() {
      videoTrack.stop();
    };
  }, [videoTrack]);
  return import_react.default.createElement("div", Object.assign({}, other, {
    ref: vidDiv
  }));
};
var index_modern_default = import_agora_rtc_sdk_ng.default;

// node_modules/agora-rtm-react/dist/index.modern.js
var index_modern_exports2 = {};
__export(index_modern_exports2, {
  createChannel: () => createChannel,
  createClient: () => createClient3,
  createLazyChannel: () => createLazyChannel,
  createLazyClient: () => createLazyClient,
  default: () => index_modern_default2
});
var import_agora_rtm_sdk = __toESM(require_agora_rtm_sdk());
__reExport(index_modern_exports2, __toESM(require_agora_rtm_sdk()));
var createClient3 = function createClient4(appId, config, areaCodes) {
  var client;
  function createClosure() {
    if (!client) {
      client = import_agora_rtm_sdk.default.createInstance(appId, config, areaCodes);
    }
    return client;
  }
  return function() {
    return createClosure();
  };
};
var createChannel = function createChannel2(channelId) {
  var channel;
  function createClosure(client) {
    if (!channel) {
      channel = client.createChannel(channelId);
    }
    return channel;
  }
  return function(client) {
    return createClosure(client);
  };
};
var createLazyClient = function createLazyClient2() {
  var client;
  function createClosure(appId, config, areaCodes) {
    if (!client) {
      client = import_agora_rtm_sdk.default.createInstance(appId, config, areaCodes);
    }
    return client;
  }
  return function(appId, config, areaCodes) {
    return createClosure(appId, config, areaCodes);
  };
};
var createLazyChannel = function createLazyChannel2() {
  var channel;
  function createClosure(client, channelId) {
    if (!channel) {
      channel = client.createChannel(channelId);
    }
    return channel;
  }
  return function(client, channelId) {
    return createClosure(client, channelId);
  };
};
var AreaCode;
(function(AreaCode2) {
  AreaCode2["GLOBAL"] = "GLOBAL";
  AreaCode2["INDIA"] = "INDIA";
  AreaCode2["JAPAN"] = "JAPAN";
  AreaCode2["ASIA"] = "ASIA";
  AreaCode2["EUROPE"] = "EUROPE";
  AreaCode2["CHINA"] = "CHINA";
  AreaCode2["NORTH_AMERICA"] = "NORTH_AMERICA";
})(AreaCode || (AreaCode = {}));
var index_modern_default2 = import_agora_rtm_sdk.default;

// node_modules/agora-react-uikit/dist/index.modern.js
function _extends() {
  _extends = Object.assign || function(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
var _iteratorSymbol = typeof Symbol !== "undefined" ? Symbol.iterator || (Symbol.iterator = Symbol("Symbol.iterator")) : "@@iterator";
var _asyncIteratorSymbol = typeof Symbol !== "undefined" ? Symbol.asyncIterator || (Symbol.asyncIterator = Symbol("Symbol.asyncIterator")) : "@@asyncIterator";
function _catch(body, recover) {
  try {
    var result = body();
  } catch (e) {
    return recover(e);
  }
  if (result && result.then) {
    return result.then(void 0, recover);
  }
  return result;
}
var RtcContext = import_react2.default.createContext({});
var RtcProvider = RtcContext.Provider;
var RtcConsumer = RtcContext.Consumer;
var remoteTrackState;
(function(remoteTrackState2) {
  remoteTrackState2[remoteTrackState2["yes"] = 0] = "yes";
  remoteTrackState2[remoteTrackState2["subbed"] = 1] = "subbed";
  remoteTrackState2[remoteTrackState2["no"] = 2] = "no";
})(remoteTrackState || (remoteTrackState = {}));
var layout;
(function(layout2) {
  layout2[layout2["grid"] = 0] = "grid";
  layout2[layout2["pin"] = 1] = "pin";
})(layout || (layout = {}));
var ToggleState;
(function(ToggleState2) {
  ToggleState2[ToggleState2["disabled"] = 0] = "disabled";
  ToggleState2[ToggleState2["enabled"] = 1] = "enabled";
  ToggleState2[ToggleState2["disabling"] = 2] = "disabling";
  ToggleState2[ToggleState2["enabling"] = 3] = "enabling";
})(ToggleState || (ToggleState = {}));
var initialValue = {
  rtcProps: {
    appId: "",
    channel: "",
    role: "host"
  },
  rtmProps: {}
};
var PropsContext = import_react2.default.createContext(initialValue);
var PropsProvider = PropsContext.Provider;
var MaxUidContext = import_react2.default.createContext([]);
var MaxUidProvider = MaxUidContext.Provider;
var MaxUidConsumer = MaxUidContext.Consumer;
var MinUidContext = import_react2.default.createContext([]);
var MinUidProvider = MinUidContext.Provider;
var MinUidConsumer = MinUidContext.Consumer;
var TracksContext = import_react2.default.createContext({});
var TracksProvider = TracksContext.Provider;
var initState = {
  max: [{
    uid: 0,
    hasAudio: remoteTrackState.no,
    hasVideo: remoteTrackState.no
  }],
  min: [],
  isScreensharing: false
};
var reducer = function reducer2(state, action) {
  var stateUpdate = initState;
  var uids = [].concat(state.max, state.min).map(function(u2) {
    return u2.uid;
  });
  switch (action.type) {
    case "Screensharing":
      {
        stateUpdate = _extends({}, state, {
          isScreensharing: action.value[0]
        });
        console.log("!Screensharingstate", state, stateUpdate);
      }
      break;
    case "update-user-video":
      {
        stateUpdate = {
          min: state.min.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: remoteTrackState.subbed,
                hasVideo: remoteTrackState.subbed
              };
            } else {
              return user;
            }
          }),
          max: state.max.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: remoteTrackState.subbed,
                hasVideo: remoteTrackState.subbed
              };
            } else {
              return user;
            }
          }),
          isScreensharing: state.isScreensharing
        };
      }
      break;
    case "user-joined":
      {
        if (uids.indexOf(action.value[0].uid) === -1) {
          var minUpdate = [].concat(state.min, [{
            uid: action.value[0].uid,
            hasAudio: remoteTrackState.no,
            hasVideo: remoteTrackState.no
          }]);
          if (minUpdate.length === 1 && state.max[0].uid === 0) {
            stateUpdate = {
              max: minUpdate,
              min: state.max,
              isScreensharing: state.isScreensharing
            };
          } else {
            stateUpdate = {
              min: minUpdate,
              max: state.max,
              isScreensharing: state.isScreensharing
            };
          }
        }
      }
      break;
    case "user-unpublished":
      {
        if (state.max[0].uid === action.value[0].uid) {
          stateUpdate = {
            max: [{
              uid: action.value[0].uid,
              hasAudio: action.value[1] === "audio" ? remoteTrackState.no : state.max[0].hasAudio,
              hasVideo: action.value[1] === "video" ? remoteTrackState.no : state.max[0].hasVideo
            }],
            min: state.min,
            isScreensharing: state.isScreensharing
          };
        } else {
          var UIKitUser = state.min.find(function(user) {
            return user.uid === action.value[0].uid;
          });
          if (UIKitUser) {
            var _minUpdate = [].concat(state.min.filter(function(user) {
              return user.uid !== action.value[0].uid;
            }), [{
              uid: action.value[0].uid,
              hasAudio: action.value[1] === "audio" ? remoteTrackState.no : UIKitUser.hasAudio,
              hasVideo: action.value[1] === "video" ? remoteTrackState.no : UIKitUser.hasVideo
            }]);
            stateUpdate = {
              min: _minUpdate,
              max: state.max,
              isScreensharing: state.isScreensharing
            };
          }
        }
      }
      break;
    case "user-published":
      {
        if (state.max[0].uid === action.value[0].uid) {
          stateUpdate = {
            max: [{
              uid: action.value[0].uid,
              hasAudio: action.value[1] === "audio" ? remoteTrackState.subbed : state.max[0].hasAudio,
              hasVideo: action.value[1] === "video" ? remoteTrackState.subbed : state.max[0].hasVideo
            }],
            min: state.min,
            isScreensharing: state.isScreensharing
          };
        } else {
          stateUpdate = {
            min: state.min.map(function(user) {
              if (user.uid !== action.value[0].uid) {
                return user;
              } else {
                return {
                  uid: user.uid,
                  hasAudio: action.value[1] === "audio" ? remoteTrackState.subbed : user.hasAudio,
                  hasVideo: action.value[1] === "video" ? remoteTrackState.subbed : user.hasVideo
                };
              }
            }),
            max: state.max,
            isScreensharing: state.isScreensharing
          };
        }
      }
      break;
    case "user-left":
      {
        if (state.max[0].uid === action.value[0].uid) {
          var _minUpdate2 = [].concat(state.min);
          stateUpdate = {
            max: [_minUpdate2.pop()],
            min: _minUpdate2,
            isScreensharing: state.isScreensharing
          };
        } else {
          stateUpdate = {
            min: state.min.filter(function(user) {
              return user.uid !== action.value[0].uid;
            }),
            max: state.max,
            isScreensharing: state.isScreensharing
          };
        }
      }
      break;
    case "user-swap":
      {
        if (state.max[0].uid === action.value[0].uid) ;
        else {
          stateUpdate = {
            max: [action.value[0]],
            min: [].concat(state.min.filter(function(user) {
              return user.uid !== action.value[0].uid;
            }), [state.max[0]]),
            isScreensharing: state.isScreensharing
          };
        }
      }
      break;
    case "local-user-mute-video":
      {
        stateUpdate = {
          min: state.min.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: user.hasAudio,
                hasVideo: action.value[0]
              };
            } else {
              return user;
            }
          }),
          max: state.max.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: user.hasAudio,
                hasVideo: action.value[0]
              };
            } else {
              return user;
            }
          }),
          isScreensharing: state.isScreensharing
        };
      }
      break;
    case "local-user-mute-audio":
      {
        stateUpdate = {
          min: state.min.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: action.value[0],
                hasVideo: user.hasVideo
              };
            } else {
              return user;
            }
          }),
          max: state.max.map(function(user) {
            if (user.uid === 0) {
              return {
                uid: 0,
                hasAudio: action.value[0],
                hasVideo: user.hasVideo
              };
            } else {
              return user;
            }
          }),
          isScreensharing: state.isScreensharing
        };
      }
      break;
    case "remote-user-mute-video":
      {
        stateUpdate = {
          min: state.min.map(function(user) {
            if (user.uid === action.value[0].uid) {
              return {
                uid: user.uid,
                hasVideo: action.value[1],
                hasAudio: user.hasAudio
              };
            } else return user;
          }),
          max: state.max.map(function(user) {
            if (user.uid === action.value[0].uid) return {
              uid: user.uid,
              hasVideo: action.value[1],
              hasAudio: user.hasAudio
            };
            else return user;
          }),
          isScreensharing: state.isScreensharing
        };
      }
      break;
    case "remote-user-mute-audio":
      {
        stateUpdate = {
          min: state.min.map(function(user) {
            if (user.uid === action.value[0].uid) return {
              uid: user.uid,
              hasAudio: action.value[1],
              hasVideo: user.hasVideo
            };
            else return user;
          }),
          max: state.max.map(function(user) {
            if (user.uid === action.value[0].uid) return {
              uid: user.uid,
              hasAudio: action.value[1],
              hasVideo: user.hasVideo
            };
            else return user;
          }),
          isScreensharing: state.isScreensharing
        };
      }
      break;
    case "leave-channel":
      stateUpdate = initState;
      break;
    case "ActiveSpeaker":
      {
        if (state.max[0].uid === action.value[0]) {
          stateUpdate = _extends({}, state);
        } else {
          stateUpdate = {
            max: [state.min.find(function(user) {
              return user.uid === action.value[0];
            })],
            min: [].concat(state.min.filter(function(user) {
              return user.uid !== action.value[0];
            }), [state.max[0]]),
            isScreensharing: state.isScreensharing
          };
        }
      }
      break;
  }
  console.log("!state-update", _extends({}, state, stateUpdate), stateUpdate);
  return _extends({}, state, stateUpdate);
};
var startScreenshare = function startScreenshare2(appId, channel, track, screenshareToken, screenshareUid, tokenUrl, enableDualStream) {
  try {
    var init = function init2() {
      try {
        try {
          console.log(screenClient);
          if (tokenUrl) {
            screenClient.on("token-privilege-will-expire", function() {
              try {
                console.log("token will expire");
                return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + uid + "/")).then(function(res) {
                  return Promise.resolve(res.json()).then(function(data) {
                    var token = data.rtcToken;
                    screenClient.renewToken(token);
                  });
                });
              } catch (e) {
                return Promise.reject(e);
              }
            });
            screenClient.on("token-privilege-did-expire", function() {
              try {
                return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + uid + "/")).then(function(res) {
                  return Promise.resolve(res.json()).then(function(data) {
                    var token = data.rtcToken;
                    screenClient.renewToken(token);
                  });
                });
              } catch (e) {
                return Promise.reject(e);
              }
            });
          }
          track.on("track-ended", function() {
            screenClient.leave();
            screenClient.removeAllListeners();
          });
        } catch (e) {
          console.log(e);
        }
        return Promise.resolve();
      } catch (e) {
        return Promise.reject(e);
      }
    };
    var join = function join2() {
      try {
        screenClient.setClientRole("host");
        var _temp3 = function() {
          if (tokenUrl) {
            var _temp4 = _catch(function() {
              return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + uid + "/")).then(function(res) {
                return Promise.resolve(res.json()).then(function(data) {
                  var token = data.rtcToken;
                  return Promise.resolve(screenClient.join(appId, channel, token, uid)).then(function(_screenClient$join) {
                    returnedUid = _screenClient$join;
                  });
                });
              });
            }, function(e) {
              console.log(e);
            });
            if (_temp4 && _temp4.then) return _temp4.then(function() {
            });
          } else {
            return Promise.resolve(screenClient.join(appId, channel, screenshareToken || null, uid || 0)).then(function(_screenClient$join2) {
              returnedUid = _screenClient$join2;
            });
          }
        }();
        return Promise.resolve(_temp3 && _temp3.then ? _temp3.then(function() {
        }) : void 0);
      } catch (e) {
        return Promise.reject(e);
      }
    };
    var publish = function publish2() {
      try {
        var _temp10 = function _temp102() {
          var _temp6 = function() {
            if (track.enabled) {
              var _temp9 = function() {
                if (!localVideoTrackHasPublished) {
                  return Promise.resolve(screenClient.publish([track]).then(function() {
                    localVideoTrackHasPublished = true;
                  })).then(function() {
                  });
                }
              }();
              if (_temp9 && _temp9.then) return _temp9.then(function() {
              });
            }
          }();
          if (_temp6 && _temp6.then) return _temp6.then(function() {
          });
        };
        var _temp11 = function() {
          if (enableDualStream) {
            return Promise.resolve(screenClient.enableDualStream()).then(function() {
            });
          }
        }();
        return Promise.resolve(_temp11 && _temp11.then ? _temp11.then(_temp10) : _temp10(_temp11));
      } catch (e) {
        return Promise.reject(e);
      }
    };
    var screenClient = index_modern_default.createClient({
      mode: "live",
      role: "host",
      codec: "vp8"
    });
    var returnedUid = 0;
    var uid = screenshareUid || 1;
    var localVideoTrackHasPublished = false;
    var stop = function stop2() {
      try {
        var _temp13 = _catch(function() {
          track.close();
          return Promise.resolve(screenClient.leave()).then(function() {
            screenClient.removeAllListeners();
          });
        }, function(e) {
          console.log(e);
        });
        return Promise.resolve(_temp13 && _temp13.then ? _temp13.then(function() {
        }) : void 0);
      } catch (e) {
        return Promise.reject(e);
      }
    };
    stopScreenshare = stop;
    return Promise.resolve(init()).then(function() {
      return Promise.resolve(join()).then(function() {
        return Promise.resolve(publish()).then(function() {
          if (returnedUid) console.log(returnedUid);
        });
      });
    });
  } catch (e) {
    return Promise.reject(e);
  }
};
var stopScreenshare = function stopScreenshare2() {
};
var useClient = createClient({
  codec: "vp8",
  mode: "live"
});
var RtcConfigure = function RtcConfigure2(props) {
  var uid = (0, import_react2.useRef)();
  var screenTrack = (0, import_react2.useRef)();
  var isScreensharingRef = (0, import_react2.useRef)(false);
  var _useContext = (0, import_react2.useContext)(TracksContext), localVideoTrack = _useContext.localVideoTrack, localAudioTrack = _useContext.localAudioTrack;
  var _useContext2 = (0, import_react2.useContext)(PropsContext), callbacks = _useContext2.callbacks, rtcProps = _useContext2.rtcProps;
  var _useState = (0, import_react2.useState)(false), ready = _useState[0], setReady = _useState[1];
  var _useState2 = (0, import_react2.useState)(false), channelJoined = _useState2[0], setChannelJoined = _useState2[1];
  var joinRes = null;
  var canJoin = (0, import_react2.useRef)(new Promise(function(resolve, reject) {
    joinRes = resolve;
    console.log(reject);
  }));
  var client = useClient();
  if (rtcProps.customRtcClient) {
    client.removeAllListeners();
    client = rtcProps.customRtcClient;
  }
  var localVideoTrackHasPublished = false;
  var localAudioTrackHasPublished = false;
  var mediaStore = (0, import_react2.useRef)({});
  var callActive = props.callActive;
  if (callActive === void 0) {
    callActive = true;
  }
  var _useReducer = (0, import_react2.useReducer)(reducer, initState), uidState = _useReducer[0], dispatch = _useReducer[1];
  (0, import_react2.useEffect)(function() {
    var init = function init2() {
      try {
        try {
          console.log(client);
          client.on("user-joined", function() {
            try {
              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
              }
              var remoteUser = args[0];
              if (remoteUser.uid === props.screenshareUid && isScreensharingRef.current || remoteUser.uid === 1 && isScreensharingRef.current) {
              } else {
                mediaStore.current[remoteUser.uid] = {};
              }
              dispatch({
                type: "user-joined",
                value: args
              });
              return Promise.resolve();
            } catch (e) {
              return Promise.reject(e);
            }
          });
          client.on("user-published", function() {
            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
              args[_key2] = arguments[_key2];
            }
            try {
              var remoteUser = args[0], mediaType = args[1];
              console.log("user-published", remoteUser.uid);
              if (remoteUser.uid === props.screenshareUid && isScreensharingRef.current || remoteUser.uid === 1 && isScreensharingRef.current) {
                dispatch({
                  type: "user-published",
                  value: args
                });
              } else {
                client.subscribe(remoteUser, mediaType).then(function(_e) {
                  mediaStore.current[remoteUser.uid][mediaType + "Track"] = remoteUser[mediaType + "Track"];
                  if (mediaType === "audio") {
                    var _remoteUser$audioTrac;
                    (_remoteUser$audioTrac = remoteUser.audioTrack) === null || _remoteUser$audioTrac === void 0 ? void 0 : _remoteUser$audioTrac.play();
                  } else {
                    if (rtcProps.enableDualStream && rtcProps.dualStreamMode) {
                      client.setStreamFallbackOption(remoteUser.uid, rtcProps.dualStreamMode);
                    }
                  }
                  dispatch({
                    type: "user-published",
                    value: args
                  });
                })["catch"](function(e) {
                  return console.log(e);
                });
              }
              return Promise.resolve();
            } catch (e) {
              return Promise.reject(e);
            }
          });
          client.on("user-unpublished", function() {
            try {
              for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
                args[_key3] = arguments[_key3];
              }
              var remoteUser = args[0], mediaType = args[1];
              console.log("user-unpublished", remoteUser.uid);
              if (mediaType === "audio") {
                var _remoteUser$audioTrac2;
                (_remoteUser$audioTrac2 = remoteUser.audioTrack) === null || _remoteUser$audioTrac2 === void 0 ? void 0 : _remoteUser$audioTrac2.stop();
              }
              dispatch({
                type: "user-unpublished",
                value: args
              });
              return Promise.resolve();
            } catch (e) {
              return Promise.reject(e);
            }
          });
          client.on("connection-state-change", function() {
            try {
              for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                args[_key4] = arguments[_key4];
              }
              var curState = args[0], prevState = args[1], reason = args[2];
              console.log("connection", prevState, curState, reason);
              if (curState === "CONNECTED") {
                setChannelJoined(true);
              } else if (curState === "DISCONNECTED") {
                try {
                  stopScreenshare();
                  isScreensharingRef.current = false;
                } catch (e) {
                  console.log("stopscreenshare", e);
                }
                dispatch({
                  type: "leave-channel",
                  value: null
                });
              } else {
                setChannelJoined(false);
              }
              return Promise.resolve();
            } catch (e) {
              return Promise.reject(e);
            }
          });
          client.on("user-left", function() {
            for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
              args[_key5] = arguments[_key5];
            }
            dispatch({
              type: "user-left",
              value: args
            });
          });
          if (rtcProps.tokenUrl) {
            var tokenUrl = rtcProps.tokenUrl, channel = rtcProps.channel, _uid = rtcProps.uid;
            client.on("token-privilege-will-expire", function() {
              try {
                console.log("token will expire");
                return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + (_uid || 0) + "/")).then(function(res) {
                  return Promise.resolve(res.json()).then(function(data) {
                    var token = data.rtcToken;
                    client.renewToken(token);
                  });
                });
              } catch (e) {
                return Promise.reject(e);
              }
            });
            client.on("token-privilege-did-expire", function() {
              try {
                return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + (_uid || 0) + "/")).then(function(res) {
                  return Promise.resolve(res.json()).then(function(data) {
                    var token = data.rtcToken;
                    client.renewToken(token);
                  });
                });
              } catch (e) {
                return Promise.reject(e);
              }
            });
          }
          if (callbacks) {
            var events = Object.keys(callbacks);
            events.map(function(e) {
              try {
                client.on(e, function() {
                  ;
                  for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                    args[_key6] = arguments[_key6];
                  }
                  callbacks[e].apply(null, args);
                });
              } catch (e2) {
                console.log(e2);
              }
            });
          }
          ;
          joinRes(true);
          setReady(true);
        } catch (e) {
          console.log("!!!", e);
        }
        return Promise.resolve();
      } catch (e) {
        return Promise.reject(e);
      }
    };
    if (joinRes) {
      init();
      return function() {
        try {
          client.removeAllListeners();
        } catch (e) {
          console.log(e);
        }
      };
    } else return function() {
    };
  }, [rtcProps.appId]);
  (0, import_react2.useEffect)(function() {
    var join = function join2() {
      try {
        return Promise.resolve(canJoin.current).then(function() {
          var tokenUrl = rtcProps.tokenUrl, channel = rtcProps.channel, userUid = rtcProps.uid, appId = rtcProps.appId, token = rtcProps.token;
          var _temp3 = function() {
            if (client && !ignore) {
              if (rtcProps.role === "audience") {
                client.setClientRole(rtcProps.role);
              } else {
                client.setClientRole("host");
              }
              var _temp4 = function() {
                if (tokenUrl) {
                  var _temp5 = _catch(function() {
                    return Promise.resolve(fetch(tokenUrl + "/rtc/" + channel + "/publisher/uid/" + (userUid || 0) + "/")).then(function(res) {
                      return Promise.resolve(res.json()).then(function(data) {
                        var token2 = data.rtcToken;
                        return Promise.resolve(client.join(appId, channel, token2, userUid || 0)).then(function(_client$join) {
                          uid.current = _client$join;
                        });
                      });
                    });
                  }, function(e) {
                    console.log(e);
                  });
                  if (_temp5 && _temp5.then) return _temp5.then(function() {
                  });
                } else {
                  return Promise.resolve(client.join(appId, channel, token || null, userUid || 0)).then(function(_client$join2) {
                    uid.current = _client$join2;
                  });
                }
              }();
              if (_temp4 && _temp4.then) return _temp4.then(function() {
              });
            } else {
              console.error("trying to join before RTC Engine was initialized");
            }
          }();
          if (_temp3 && _temp3.then) return _temp3.then(function() {
          });
        });
      } catch (e) {
        return Promise.reject(e);
      }
    };
    var ignore = false;
    if (callActive) {
      join();
      console.log("Attempted join: ", rtcProps.channel);
    } else {
      console.log("In precall - waiting to join");
    }
    return function() {
      ignore = true;
      if (callActive) {
        console.log("Leaving channel");
        try {
          stopScreenshare();
          isScreensharingRef.current = false;
        } catch (e) {
          console.log(e);
        }
        canJoin.current = client.leave()["catch"](function(err) {
          return console.log(err);
        });
      }
    };
  }, [rtcProps.channel, rtcProps.uid, callActive, rtcProps.tokenUrl]);
  (0, import_react2.useEffect)(function() {
    var publish = function publish2() {
      try {
        var _temp15 = function _temp152() {
          function _temp10() {
            var _temp8 = function() {
              if (localVideoTrack !== null && localVideoTrack !== void 0 && localVideoTrack.enabled && channelJoined) {
                var _temp13 = function() {
                  if (!localVideoTrackHasPublished) {
                    return Promise.resolve(client.publish([localVideoTrack]).then(function() {
                      localVideoTrackHasPublished = true;
                    })).then(function() {
                    });
                  }
                }();
                if (_temp13 && _temp13.then) return _temp13.then(function() {
                });
              }
            }();
            if (_temp8 && _temp8.then) return _temp8.then(function() {
            });
          }
          var _temp9 = function() {
            if (localAudioTrack !== null && localAudioTrack !== void 0 && localAudioTrack.enabled && channelJoined) {
              var _temp14 = function() {
                if (!localAudioTrackHasPublished) {
                  return Promise.resolve(client.publish([localAudioTrack]).then(function() {
                    localAudioTrackHasPublished = true;
                  })).then(function() {
                  });
                }
              }();
              if (_temp14 && _temp14.then) return _temp14.then(function() {
              });
            }
          }();
          return _temp9 && _temp9.then ? _temp9.then(_temp10) : _temp10(_temp9);
        };
        var _temp16 = function() {
          if (rtcProps.enableDualStream) {
            return Promise.resolve(client.enableDualStream()).then(function() {
            });
          }
        }();
        return Promise.resolve(_temp16 && _temp16.then ? _temp16.then(_temp15) : _temp15(_temp16));
      } catch (e) {
        return Promise.reject(e);
      }
    };
    console.log("Publish", localVideoTrack, localAudioTrack, callActive);
    if (callActive) {
      publish();
    }
  }, [callActive, localVideoTrack === null || localVideoTrack === void 0 ? void 0 : localVideoTrack.enabled, localAudioTrack === null || localAudioTrack === void 0 ? void 0 : localAudioTrack.enabled, channelJoined]);
  (0, import_react2.useEffect)(function() {
    if (localVideoTrack && localAudioTrack !== null) {
      mediaStore.current[0] = {
        audioTrack: localAudioTrack,
        videoTrack: localVideoTrack
      };
      dispatch({
        type: "update-user-video",
        value: [localAudioTrack, localVideoTrack]
      });
    }
  }, [rtcProps.channel, channelJoined]);
  (0, import_react2.useEffect)(function() {
    if (channelJoined && rtcProps.token) {
      client.renewToken(rtcProps.token).then(function(e) {
        return console.log("renewed token", e);
      });
    }
  }, [rtcProps.token, channelJoined]);
  (0, import_react2.useEffect)(function() {
    if (rtcProps.role) {
      client.setClientRole(rtcProps.role).then(function(e) {
        return console.log("changed role", e);
      });
    }
  }, [rtcProps.role, channelJoined]);
  (0, import_react2.useEffect)(function() {
    var enableActiveSpeaker = function enableActiveSpeaker2() {
      try {
        var _temp18 = function() {
          if (rtcProps.activeSpeaker && rtcProps.layout !== layout.grid) {
            client.on("volume-indicator", function(volumes) {
              var highestvolumeObj = volumes.reduce(function(highestVolume, volume) {
                if (highestVolume === null) {
                  return volume;
                } else {
                  if (volume.level > highestVolume.level) {
                    return volume;
                  }
                  return highestVolume;
                }
              }, null);
              var activeSpeaker = highestvolumeObj ? highestvolumeObj.uid : void 0;
              var mapActiveSpeakerToZero = activeSpeaker === uid.current ? 0 : activeSpeaker;
              if (activeSpeaker !== void 0) {
                dispatch({
                  type: "ActiveSpeaker",
                  value: [mapActiveSpeakerToZero]
                });
              }
            });
            return Promise.resolve(client.enableAudioVolumeIndicator()).then(function() {
            });
          }
        }();
        return Promise.resolve(_temp18 && _temp18.then ? _temp18.then(function() {
        }) : void 0);
      } catch (e) {
        return Promise.reject(e);
      }
    };
    if (callActive) {
      enableActiveSpeaker();
    }
    return function() {
      client.removeAllListeners("volume-indicator");
    };
  }, [rtcProps.activeSpeaker, rtcProps.layout]);
  var toggleScreensharing = function toggleScreensharing2() {
    try {
      var start = function start2() {
        try {
          dispatch({
            type: "Screensharing",
            value: [true]
          });
          return Promise.resolve(index_modern_default.createScreenVideoTrack({}, "disable")).then(function(_AgoraRTC$createScree) {
            screenTrack.current = _AgoraRTC$createScree;
            var uid2 = rtcProps.screenshareUid || 1;
            mediaStore.current[uid2] = {
              videoTrack: screenTrack.current
            };
            screenTrack.current.on("track-ended", function() {
              isScreensharingRef.current = false;
              dispatch({
                type: "Screensharing",
                value: [false]
              });
            });
            isScreensharingRef.current = true;
            return Promise.resolve(startScreenshare(rtcProps.appId, rtcProps.channel, screenTrack.current, rtcProps.screenshareToken, rtcProps.screenshareUid, rtcProps.tokenUrl, rtcProps.enableDualStream)).then(function() {
            });
          });
        } catch (e) {
          return Promise.reject(e);
        }
      };
      var stop = function stop2() {
        stopScreenshare();
        isScreensharingRef.current = false;
      };
      if (isScreensharingRef.current) {
        stop();
      } else {
        start();
      }
      return Promise.resolve();
    } catch (e) {
      return Promise.reject(e);
    }
  };
  return import_react2.default.createElement(RtcProvider, {
    value: {
      client,
      mediaStore: mediaStore.current,
      localVideoTrack,
      localAudioTrack,
      dispatch,
      localUid: uid,
      channelJoined,
      toggleScreensharing,
      isScreensharing: isScreensharingRef.current
    }
  }, import_react2.default.createElement(MaxUidProvider, {
    value: uidState.max
  }, import_react2.default.createElement(MinUidProvider, {
    value: uidState.min
  }, ready ? props.children : null)));
};
var icons = {
  videocam: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("polygon", {
    points: "23 7 16 12 23 17 23 7"
  }), import_react2.default.createElement("rect", {
    x: "1",
    y: "5",
    width: "15",
    height: "14",
    rx: "2",
    ry: "2"
  })),
  videocamOff: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("path", {
    d: "M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"
  }), import_react2.default.createElement("line", {
    x1: "1",
    y1: "1",
    x2: "23",
    y2: "23"
  })),
  remoteSwap: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("polyline", {
    points: "15 3 21 3 21 9"
  }), import_react2.default.createElement("polyline", {
    points: "9 21 3 21 3 15"
  }), import_react2.default.createElement("line", {
    x1: "21",
    y1: "3",
    x2: "14",
    y2: "10"
  }), import_react2.default.createElement("line", {
    x1: "3",
    y1: "21",
    x2: "10",
    y2: "14"
  })),
  callEnd: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("path", {
    d: "M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"
  }), import_react2.default.createElement("line", {
    x1: "23",
    y1: "1",
    x2: "1",
    y2: "23"
  })),
  mic: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("path", {
    d: "M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"
  }), import_react2.default.createElement("path", {
    d: "M19 10v2a7 7 0 0 1-14 0v-2"
  }), import_react2.default.createElement("line", {
    x1: "12",
    y1: "19",
    x2: "12",
    y2: "23"
  }), import_react2.default.createElement("line", {
    x1: "8",
    y1: "23",
    x2: "16",
    y2: "23"
  })),
  micOff: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("line", {
    x1: "1",
    y1: "1",
    x2: "23",
    y2: "23"
  }), import_react2.default.createElement("path", {
    d: "M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"
  }), import_react2.default.createElement("path", {
    d: "M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"
  }), import_react2.default.createElement("line", {
    x1: "12",
    y1: "19",
    x2: "12",
    y2: "23"
  }), import_react2.default.createElement("line", {
    x1: "8",
    y1: "23",
    x2: "16",
    y2: "23"
  })),
  screen: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("rect", {
    x: "2",
    y: "3",
    width: "20",
    height: "14",
    rx: "2",
    ry: "2"
  }), import_react2.default.createElement("line", {
    x1: "8",
    y1: "21",
    x2: "16",
    y2: "21"
  }), import_react2.default.createElement("line", {
    x1: "12",
    y1: "17",
    x2: "12",
    y2: "21"
  })),
  stop: import_react2.default.createElement(import_react2.default.Fragment, null, import_react2.default.createElement("line", {
    x1: "18",
    y1: "6",
    x2: "6",
    y2: "18"
  }), import_react2.default.createElement("line", {
    x1: "6",
    y1: "6",
    x2: "18",
    y2: "18"
  }))
};
var BtnTemplate = function BtnTemplate2(props) {
  var onClick = props.onClick, name = props.name, disabled = props.disabled, style2 = props.style;
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps;
  var _ref = styleProps || {}, theme = _ref.theme, BtnTemplateStyles = _ref.BtnTemplateStyles, iconSize = _ref.iconSize, customIcon = _ref.customIcon;
  return import_react2.default.createElement("div", {
    style: _extends({}, {
      width: 35,
      height: 35,
      borderRadius: "100%",
      borderWidth: 2,
      borderStyle: "solid",
      borderColor: "#fff",
      backgroundColor: "rgba(0,80,180,0.2)",
      alignItems: "center",
      justifyContent: "center",
      display: "flex",
      cursor: disabled ? "auto" : "pointer",
      margin: 4
    }, BtnTemplateStyles, style2),
    onClick
  }, customIcon ? import_react2.default.createElement("img", {
    src: customIcon[name],
    alt: name
  }) : import_react2.default.createElement("svg", {
    style: {
      width: iconSize || 24,
      height: iconSize || 24
    },
    xmlns: "http://www.w3.org/2000/svg",
    width: "24",
    height: "24",
    viewBox: "0 0 24 24",
    fill: "none",
    opacity: disabled ? "0.5" : "1",
    stroke: theme || "#fff",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, icons[name]));
};
function EndCall() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, callbacks = _useContext.callbacks;
  var _ref = styleProps || {}, localBtnStyles = _ref.localBtnStyles;
  var _ref2 = localBtnStyles || {}, endCall = _ref2.endCall;
  return import_react2.default.createElement(BtnTemplate, {
    style: endCall || {
      backgroundColor: "#ef5588",
      borderColor: "#f00"
    },
    name: "callEnd",
    onClick: function onClick() {
      return (callbacks === null || callbacks === void 0 ? void 0 : callbacks.EndCall) && callbacks.EndCall();
    }
  });
}
var LocalContext = (0, import_react2.createContext)({});
var LocalUserContext = function LocalUserContext2(props) {
  var max = (0, import_react2.useContext)(MaxUidContext);
  var min = (0, import_react2.useContext)(MinUidContext);
  var localUser;
  if (max[0].uid === 0) {
    localUser = max[0];
  } else {
    localUser = min.find(function(u2) {
      return u2.uid === 0;
    });
  }
  return import_react2.default.createElement(LocalContext.Provider, {
    value: localUser
  }, props.children);
};
var muteAudio = function(user, dispatch, localAudioTrack, callbacks) {
  try {
    var _temp4 = function() {
      if (user.uid === 0) {
        var localState = user.hasAudio;
        var _temp5 = function() {
          if (localState === ToggleState.enabled || localState === ToggleState.disabled) {
            var newState = localState === ToggleState.enabled ? ToggleState.disabling : ToggleState.enabling;
            dispatch({
              type: "local-user-mute-audio",
              value: [newState]
            });
            callbacks && callbacks["local-user-mute-audio"] && callbacks["local-user-mute-audio"](newState);
            var _temp6 = _catch(function() {
              return Promise.resolve(localAudioTrack === null || localAudioTrack === void 0 ? void 0 : localAudioTrack.setEnabled(localState !== ToggleState.enabled)).then(function() {
                newState = localState === ToggleState.enabled ? ToggleState.disabled : ToggleState.enabled;
                callbacks && callbacks["local-user-mute-audio"] && callbacks["local-user-mute-audio"](newState);
                dispatch({
                  type: "local-user-mute-audio",
                  value: [localState === ToggleState.enabled ? ToggleState.disabled : ToggleState.enabled]
                });
              });
            }, function() {
              dispatch({
                type: "local-user-mute-audio",
                value: [localState]
              });
            });
            if (_temp6 && _temp6.then) return _temp6.then(function() {
            });
          }
        }();
        if (_temp5 && _temp5.then) return _temp5.then(function() {
        });
      }
    }();
    return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(function() {
    }) : void 0);
  } catch (e) {
    return Promise.reject(e);
  }
};
function LocalAudioMute() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, callbacks = _useContext.callbacks;
  var _ref = styleProps || {}, localBtnStyles = _ref.localBtnStyles;
  var _ref2 = localBtnStyles || {}, muteLocalAudio = _ref2.muteLocalAudio;
  var _useContext2 = (0, import_react2.useContext)(RtcContext), dispatch = _useContext2.dispatch, localAudioTrack = _useContext2.localAudioTrack;
  var local = (0, import_react2.useContext)(LocalContext);
  return import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    style: muteLocalAudio,
    name: local.hasAudio === ToggleState.enabled ? "mic" : "micOff",
    onClick: function onClick() {
      return localAudioTrack && muteAudio(local, dispatch, localAudioTrack, callbacks);
    }
  }));
}
function Screenshare() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps;
  var _ref = styleProps || {}, localBtnStyles = _ref.localBtnStyles;
  var _ref2 = localBtnStyles || {}, screenshare = _ref2.screenshare;
  var _useContext2 = (0, import_react2.useContext)(RtcContext), toggleScreensharing = _useContext2.toggleScreensharing, isScreensharing = _useContext2.isScreensharing;
  return import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    style: screenshare,
    name: isScreensharing ? "stop" : "screen",
    onClick: function onClick() {
      return toggleScreensharing();
    }
  }));
}
var muteVideo = function(user, dispatch, localVideoTrack, callbacks) {
  try {
    var _temp4 = function() {
      if (user.uid === 0) {
        var localState = user.hasVideo;
        var _temp5 = function() {
          if (localState === ToggleState.enabled || localState === ToggleState.disabled) {
            var newState = localState === ToggleState.enabled ? ToggleState.disabling : ToggleState.enabling;
            dispatch({
              type: "local-user-mute-video",
              value: [newState]
            });
            callbacks && callbacks["local-user-mute-video"] && callbacks["local-user-mute-video"](newState);
            var _temp6 = _catch(function() {
              return Promise.resolve(localVideoTrack === null || localVideoTrack === void 0 ? void 0 : localVideoTrack.setEnabled(localState !== ToggleState.enabled)).then(function() {
                newState = localState === ToggleState.enabled ? ToggleState.disabled : ToggleState.enabled;
                callbacks && callbacks["local-user-mute-video"] && callbacks["local-user-mute-video"](newState);
                dispatch({
                  type: "local-user-mute-video",
                  value: [newState]
                });
              });
            }, function() {
              dispatch({
                type: "local-user-mute-video",
                value: [localState]
              });
            });
            if (_temp6 && _temp6.then) return _temp6.then(function() {
            });
          }
        }();
        if (_temp5 && _temp5.then) return _temp5.then(function() {
        });
      }
    }();
    return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(function() {
    }) : void 0);
  } catch (e) {
    return Promise.reject(e);
  }
};
function LocalVideoMute() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, callbacks = _useContext.callbacks;
  var _ref = styleProps || {}, localBtnStyles = _ref.localBtnStyles;
  var _ref2 = localBtnStyles || {}, muteLocalVideo = _ref2.muteLocalVideo;
  var _useContext2 = (0, import_react2.useContext)(RtcContext), dispatch = _useContext2.dispatch, localVideoTrack = _useContext2.localVideoTrack;
  var local = (0, import_react2.useContext)(LocalContext);
  return import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    style: muteLocalVideo,
    name: local.hasVideo === ToggleState.enabled ? "videocam" : "videocamOff",
    onClick: function onClick() {
      return localVideoTrack && muteVideo(local, dispatch, localVideoTrack, callbacks);
    }
  }));
}
function LocalControls() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, rtcProps = _useContext.rtcProps;
  var _ref = styleProps || {}, localBtnContainer = _ref.localBtnContainer;
  return import_react2.default.createElement("div", {
    style: _extends({}, {
      backgroundColor: "#007bff",
      width: "100%",
      height: 70,
      zIndex: 10,
      display: "flex",
      flexDirection: "row",
      justifyContent: "space-evenly",
      alignItems: "center"
    }, localBtnContainer)
  }, rtcProps.role !== "audience" && import_react2.default.createElement(LocalVideoMute, null), rtcProps.role !== "audience" && import_react2.default.createElement(LocalAudioMute, null), rtcProps.role !== "audience" && rtcProps.enableScreensharing && import_react2.default.createElement(Screenshare, null), import_react2.default.createElement(EndCall, null));
}
var rtmStatusEnum;
(function(rtmStatusEnum2) {
  rtmStatusEnum2[rtmStatusEnum2["initFailed"] = 0] = "initFailed";
  rtmStatusEnum2[rtmStatusEnum2["offline"] = 1] = "offline";
  rtmStatusEnum2[rtmStatusEnum2["initialising"] = 2] = "initialising";
  rtmStatusEnum2[rtmStatusEnum2["loggingIn"] = 3] = "loggingIn";
  rtmStatusEnum2[rtmStatusEnum2["loggedIn"] = 4] = "loggedIn";
  rtmStatusEnum2[rtmStatusEnum2["connected"] = 5] = "connected";
  rtmStatusEnum2[rtmStatusEnum2["loginFailed"] = 6] = "loginFailed";
})(rtmStatusEnum || (rtmStatusEnum = {}));
var clientRoleRaw;
(function(clientRoleRaw2) {
  clientRoleRaw2[clientRoleRaw2["broadcaster"] = 0] = "broadcaster";
  clientRoleRaw2[clientRoleRaw2["audience"] = 1] = "audience";
})(clientRoleRaw || (clientRoleRaw = {}));
var mutingDevice;
(function(mutingDevice2) {
  mutingDevice2[mutingDevice2["camera"] = 0] = "camera";
  mutingDevice2[mutingDevice2["microphone"] = 1] = "microphone";
})(mutingDevice || (mutingDevice = {}));
var popUpStateEnum;
(function(popUpStateEnum2) {
  popUpStateEnum2[popUpStateEnum2["closed"] = 0] = "closed";
  popUpStateEnum2[popUpStateEnum2["muteMic"] = 1] = "muteMic";
  popUpStateEnum2[popUpStateEnum2["muteCamera"] = 2] = "muteCamera";
  popUpStateEnum2[popUpStateEnum2["unmuteMic"] = 3] = "unmuteMic";
  popUpStateEnum2[popUpStateEnum2["unmuteCamera"] = 4] = "unmuteCamera";
})(popUpStateEnum || (popUpStateEnum = {}));
var RtmContext = (0, import_react2.createContext)(null);
var RtmProvider = RtmContext.Provider;
var RtmConsumer = RtmContext.Consumer;
function RemoteVideoMute(props) {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps;
  var _useContext2 = (0, import_react2.useContext)(RtmContext), sendMuteRequest = _useContext2.sendMuteRequest, uidMap = _useContext2.uidMap;
  var _ref = styleProps || {}, remoteBtnStyles = _ref.remoteBtnStyles;
  var _ref2 = remoteBtnStyles || {}, muteRemoteVideo = _ref2.muteRemoteVideo;
  var UIKitUser = props.UIKitUser;
  var isMuted = UIKitUser.hasVideo === remoteTrackState.no;
  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    name: UIKitUser.hasVideo === remoteTrackState.subbed ? "videocam" : "videocamOff",
    style: muteRemoteVideo,
    onClick: function onClick() {
      return sendMuteRequest(mutingDevice.camera, UIKitUser.uid, !isMuted);
    }
  })) : null;
}
function RemoteAudioMute(props) {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps;
  var _ref = styleProps || {}, remoteBtnStyles = _ref.remoteBtnStyles;
  var _useContext2 = (0, import_react2.useContext)(RtmContext), sendMuteRequest = _useContext2.sendMuteRequest, uidMap = _useContext2.uidMap;
  var _ref2 = remoteBtnStyles || {}, muteRemoteAudio = _ref2.muteRemoteAudio;
  var UIKitUser = props.UIKitUser;
  var isMuted = UIKitUser.hasAudio === remoteTrackState.no;
  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    style: muteRemoteAudio,
    name: UIKitUser.hasAudio === remoteTrackState.subbed ? "mic" : "micOff",
    onClick: function onClick() {
      return sendMuteRequest(mutingDevice.microphone, UIKitUser.uid, !isMuted);
    }
  })) : null;
}
function SwapUser(props) {
  var _useContext = (0, import_react2.useContext)(RtcContext), dispatch = _useContext.dispatch;
  var UIKitUser = props.UIKitUser;
  return import_react2.default.createElement("div", null, import_react2.default.createElement(BtnTemplate, {
    name: "remoteSwap",
    onClick: function onClick() {
      return dispatch({
        type: "user-swap",
        value: [UIKitUser]
      });
    }
  }));
}
var VideoPlaceholder = function VideoPlaceholder2(props) {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, rtcProps = _useContext.rtcProps;
  var _ref = styleProps || {}, maxViewStyles = _ref.maxViewStyles, maxViewOverlayContainer = _ref.maxViewOverlayContainer;
  var user = props.user;
  var CustomVideoPlaceholder = rtcProps.CustomVideoPlaceholder;
  return !CustomVideoPlaceholder ? import_react2.default.createElement("div", {
    key: user.uid,
    style: _extends({}, style.max, maxViewStyles)
  }, import_react2.default.createElement("div", {
    style: style.imgContainer
  }, import_react2.default.createElement("img", {
    style: style.img,
    src: "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItdXNlciI+PHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiPjwvY2lyY2xlPjwvc3ZnPg=="
  })), props.isShown && import_react2.default.createElement("div", {
    style: _extends({}, style.btnContainer, maxViewOverlayContainer)
  }, props.showButtons && import_react2.default.createElement(import_react2.default.Fragment, null, !rtcProps.disableRtm && import_react2.default.createElement(RemoteVideoMute, {
    UIKitUser: user
  }), !rtcProps.disableRtm && import_react2.default.createElement(RemoteAudioMute, {
    UIKitUser: user
  }), props.showSwap && import_react2.default.createElement(SwapUser, {
    UIKitUser: user
  })))) : CustomVideoPlaceholder && CustomVideoPlaceholder(_extends({}, props), null);
};
var style = {
  max: {
    flex: 1,
    display: "flex",
    backgroundColor: "#007bff33",
    flexDirection: "row",
    position: "relative"
  },
  imgContainer: {
    flex: 10,
    display: "flex",
    justifyContent: "center"
  },
  img: {
    width: 100,
    height: 100,
    position: "absolute",
    alignSelf: "center",
    justifySelf: "center",
    margin: "auto",
    display: "flex"
  },
  btnContainer: {
    position: "absolute",
    margin: 5,
    flexDirection: "column",
    display: "flex"
  }
};
var Username = function Username2(props) {
  var _useContext = (0, import_react2.useContext)(RtmContext), usernames = _useContext.usernames;
  var _useContext2 = (0, import_react2.useContext)(PropsContext), rtmProps = _useContext2.rtmProps, styleProps = _useContext2.styleProps;
  var user = props.user;
  return rtmProps !== null && rtmProps !== void 0 && rtmProps.displayUsername ? import_react2.default.createElement("p", {
    style: _extends({}, styles.username, styleProps === null || styleProps === void 0 ? void 0 : styleProps.usernameText)
  }, user.uid === 1 ? "Screenshare" : usernames[user.uid]) : import_react2.default.createElement(import_react2.default.Fragment, null);
};
var styles = {
  username: {
    position: "absolute",
    background: "#007bffaa",
    padding: "2px 8px",
    color: "#fff",
    margin: 0,
    bottom: 0,
    right: 0,
    zIndex: 90
  }
};
var MaxVideoView = function MaxVideoView2(props) {
  var _useContext = (0, import_react2.useContext)(RtcContext), mediaStore = _useContext.mediaStore;
  var _useContext2 = (0, import_react2.useContext)(PropsContext), styleProps = _useContext2.styleProps, rtcProps = _useContext2.rtcProps;
  var _ref = styleProps || {}, maxViewStyles = _ref.maxViewStyles, videoMode = _ref.videoMode, maxViewOverlayContainer = _ref.maxViewOverlayContainer;
  var renderModeProp = videoMode === null || videoMode === void 0 ? void 0 : videoMode.max;
  var _useState = (0, import_react2.useState)(false), isShown = _useState[0], setIsShown = _useState[1];
  var user = props.user;
  return import_react2.default.createElement("div", {
    style: _extends({}, styles$1.container, props.style, maxViewStyles),
    onMouseEnter: function onMouseEnter() {
      return setIsShown(true);
    },
    onMouseLeave: function onMouseLeave() {
      return setIsShown(false);
    }
  }, user.hasVideo === 1 ? import_react2.default.createElement("div", {
    style: styles$1.videoContainer
  }, !rtcProps.disableRtm && import_react2.default.createElement(Username, {
    user
  }), import_react2.default.createElement(AgoraVideoPlayer, {
    style: styles$1.videoplayer,
    config: {
      fit: renderModeProp || "cover"
    },
    videoTrack: mediaStore[user.uid].videoTrack
  }), isShown && import_react2.default.createElement("div", {
    style: _extends({}, styles$1.overlay, maxViewOverlayContainer)
  }, !rtcProps.disableRtm && import_react2.default.createElement(RemoteVideoMute, {
    UIKitUser: user
  }), !rtcProps.disableRtm && import_react2.default.createElement(RemoteAudioMute, {
    UIKitUser: user
  }))) : import_react2.default.createElement("div", {
    style: styles$1.videoContainer
  }, !rtcProps.disableRtm && import_react2.default.createElement(Username, {
    user
  }), import_react2.default.createElement(VideoPlaceholder, {
    user,
    isShown,
    showButtons: true
  })));
};
var styles$1 = {
  container: {
    display: "flex",
    flex: 1
  },
  videoContainer: {
    display: "flex",
    flex: 1,
    position: "relative"
  },
  videoplayer: {
    width: "100%",
    display: "flex",
    flex: 1
  },
  overlay: {
    position: "absolute",
    margin: 5,
    flexDirection: "column",
    display: "flex"
  },
  username: {
    position: "absolute",
    background: "#007bffaa",
    padding: "2px 8px",
    color: "#fff",
    margin: 0,
    bottom: 0,
    right: 0,
    zIndex: 90
  }
};
var MinVideoView = function MinVideoView2(props) {
  var _useContext = (0, import_react2.useContext)(RtcContext), mediaStore = _useContext.mediaStore;
  var _useContext2 = (0, import_react2.useContext)(PropsContext), styleProps = _useContext2.styleProps, rtcProps = _useContext2.rtcProps;
  var _ref = styleProps || {}, minViewStyles = _ref.minViewStyles, videoMode = _ref.videoMode, minViewOverlayContainer = _ref.minViewOverlayContainer;
  var renderModeProp = videoMode === null || videoMode === void 0 ? void 0 : videoMode.min;
  var _useState = (0, import_react2.useState)(false), isShown = _useState[0], setIsShown = _useState[1];
  var user = props.user;
  return import_react2.default.createElement("div", {
    style: _extends({}, {
      display: "flex",
      flex: 1
    }, minViewStyles),
    onMouseEnter: function onMouseEnter() {
      return setIsShown(true);
    },
    onMouseLeave: function onMouseLeave() {
      return setIsShown(false);
    }
  }, user.hasVideo === 1 ? import_react2.default.createElement("div", {
    style: _extends({}, {
      display: "flex",
      flex: 1,
      position: "relative"
    })
  }, import_react2.default.createElement(AgoraVideoPlayer, {
    style: {
      flex: 10,
      display: "flex"
    },
    config: {
      fit: renderModeProp !== void 0 ? renderModeProp : "cover"
    },
    videoTrack: mediaStore[user.uid].videoTrack
  }), isShown && import_react2.default.createElement("div", {
    style: _extends({}, {
      margin: 4,
      position: "absolute",
      flex: 1,
      display: "flex",
      flexDirection: "column"
    }, minViewOverlayContainer)
  }, !rtcProps.disableRtm && import_react2.default.createElement(RemoteVideoMute, {
    UIKitUser: user
  }), !rtcProps.disableRtm && import_react2.default.createElement(RemoteAudioMute, {
    UIKitUser: user
  }), import_react2.default.createElement(SwapUser, {
    UIKitUser: user
  }))) : import_react2.default.createElement(VideoPlaceholder, {
    user,
    isShown,
    showButtons: true,
    showSwap: true
  }));
};
var styles$2 = { "test": "_3ybTi", "scrollbar": "_3Sxu7" };
var PinnedVideo = function PinnedVideo2() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, rtcProps = _useContext.rtcProps;
  var _ref = styleProps || {}, minViewContainer = _ref.minViewContainer, pinnedVideoContainer = _ref.pinnedVideoContainer, maxViewContainer = _ref.maxViewContainer, scrollViewContainer = _ref.scrollViewContainer;
  var parentRef = (0, import_react2.useRef)(null);
  var _useState = (0, import_react2.useState)(0), width = _useState[0], setWidth = _useState[1];
  var _useState2 = (0, import_react2.useState)(0), height = _useState2[0], setHeight = _useState2[1];
  var isLandscape = width > height;
  (0, import_react2.useEffect)(function() {
    var handleResize = function handleResize2() {
      if (parentRef.current) {
        setWidth(parentRef.current.offsetWidth);
        setHeight(parentRef.current.offsetHeight);
      }
    };
    window.addEventListener("resize", handleResize);
    if (parentRef.current) {
      setWidth(parentRef.current.offsetWidth);
      setHeight(parentRef.current.offsetHeight);
    }
    return function() {
      window.removeEventListener("resize", handleResize);
    };
  }, []);
  return import_react2.default.createElement("div", {
    ref: parentRef,
    style: _extends({}, {
      display: "flex",
      flex: 1,
      flexDirection: isLandscape ? "row" : "column-reverse",
      overflow: "hidden"
    }, pinnedVideoContainer)
  }, import_react2.default.createElement("div", {
    style: _extends({}, {
      display: "flex",
      flex: isLandscape ? 5 : 4
    }, maxViewContainer)
  }, import_react2.default.createElement(MaxUidConsumer, null, function(maxUsers) {
    return rtcProps.role === "audience" && maxUsers[0].uid === 0 ? null : import_react2.default.createElement(MaxVideoView, {
      user: maxUsers[0]
    });
  })), import_react2.default.createElement("div", {
    className: styles$2.scrollbar,
    style: _extends({}, {
      overflowY: isLandscape ? "scroll" : "hidden",
      overflowX: !isLandscape ? "scroll" : "hidden",
      display: "flex",
      flex: 1,
      flexDirection: isLandscape ? "column" : "row"
    }, scrollViewContainer)
  }, import_react2.default.createElement(MinUidConsumer, null, function(minUsers) {
    return minUsers.map(function(user) {
      return rtcProps.role === "audience" && user.uid === 0 ? null : import_react2.default.createElement("div", {
        style: _extends({}, {
          minHeight: isLandscape ? "35vh" : "99%",
          minWidth: isLandscape ? "99%" : "40vw",
          margin: 2,
          display: "flex"
        }, minViewContainer),
        key: user.uid
      }, import_react2.default.createElement(MinVideoView, {
        user
      }));
    });
  })));
};
var GridVideo = function GridVideo2() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps, rtcProps = _useContext.rtcProps;
  var _ref = styleProps || {}, gridVideoCells = _ref.gridVideoCells, gridVideoContainer = _ref.gridVideoContainer;
  var max = (0, import_react2.useContext)(MaxUidContext);
  var min = (0, import_react2.useContext)(MinUidContext);
  var users = rtcProps.role === "audience" ? [].concat(max, min).filter(function(user) {
    return user.uid !== 0;
  }) : [].concat(max, min);
  var parentRef = (0, import_react2.useRef)(null);
  var _useState = (0, import_react2.useState)(window.innerWidth), width = _useState[0], setWidth = _useState[1];
  var _useState2 = (0, import_react2.useState)(window.innerHeight), height = _useState2[0], setHeight = _useState2[1];
  var isLandscape = width > height;
  var unit = "minmax(0, 1fr) ";
  (0, import_react2.useEffect)(function() {
    var handleResize = function handleResize2() {
      if (parentRef.current) {
        setWidth(parentRef.current.offsetWidth);
        setHeight(parentRef.current.offsetHeight);
      }
    };
    window.addEventListener("resize", handleResize);
    if (parentRef.current) {
      setWidth(parentRef.current.offsetWidth);
      setHeight(parentRef.current.offsetHeight);
    }
    return function() {
      window.removeEventListener("resize", handleResize);
    };
  }, []);
  return import_react2.default.createElement("div", {
    ref: parentRef,
    style: _extends({}, {
      width: "100%",
      height: "100%",
      display: "grid",
      gridTemplateColumns: isLandscape ? users.length > 9 ? unit.repeat(4) : users.length > 4 ? unit.repeat(3) : users.length > 1 ? unit.repeat(2) : unit : users.length > 8 ? unit.repeat(3) : users.length > 2 ? unit.repeat(2) : unit
    }, gridVideoContainer)
  }, users.map(function(user) {
    return import_react2.default.createElement(MaxVideoView, {
      user,
      style: _extends({}, {
        height: "100%",
        width: "100%"
      }, gridVideoCells),
      key: user.uid
    });
  }));
};
var useTracks = createMicrophoneAndCameraTracks({
  encoderConfig: {}
}, {
  encoderConfig: {}
});
var TracksConfigure = function TracksConfigure2(props) {
  var _useState = (0, import_react2.useState)(false), ready = _useState[0], setReady = _useState[1];
  var _useState2 = (0, import_react2.useState)(null), localVideoTrack = _useState2[0], setLocalVideoTrack = _useState2[1];
  var _useState3 = (0, import_react2.useState)(null), localAudioTrack = _useState3[0], setLocalAudioTrack = _useState3[1];
  var _useTracks = useTracks(), trackReady = _useTracks.ready, tracks = _useTracks.tracks, error = _useTracks.error;
  var mediaStore = (0, import_react2.useRef)({});
  (0, import_react2.useEffect)(function() {
    if (tracks !== null) {
      setLocalAudioTrack(tracks[0]);
      setLocalVideoTrack(tracks[1]);
      mediaStore.current[0] = {
        audioTrack: tracks[0],
        videoTrack: tracks[1]
      };
      setReady(true);
    } else if (error) {
      console.error(error);
      setReady(false);
    }
    return function() {
      if (tracks) {
        var _tracks$, _tracks$2;
        (_tracks$ = tracks[0]) === null || _tracks$ === void 0 ? void 0 : _tracks$.close();
        (_tracks$2 = tracks[1]) === null || _tracks$2 === void 0 ? void 0 : _tracks$2.close();
      }
    };
  }, [trackReady, error]);
  return import_react2.default.createElement(TracksProvider, {
    value: {
      localVideoTrack,
      localAudioTrack
    }
  }, ready ? props.children : null);
};
var timeNow = function timeNow2() {
  return (/* @__PURE__ */ new Date()).getTime();
};
var useChannel = createLazyChannel();
var useClient$1 = createLazyClient();
var RtmConfigure = function RtmConfigure2(props) {
  var _useContext = (0, import_react2.useContext)(PropsContext), rtcProps = _useContext.rtcProps, rtmProps = _useContext.rtmProps;
  var _useState = (0, import_react2.useState)(false), isLoggedIn = _useState[0], setLoggedIn = _useState[1];
  var rtmClient = useClient$1(rtcProps.appId);
  var channel = useChannel(rtmClient, rtcProps.channel);
  var localUid = (0, import_react2.useRef)("");
  var timerValueRef = (0, import_react2.useRef)(5);
  var local = (0, import_react2.useContext)(LocalContext);
  var _useContext2 = (0, import_react2.useContext)(PropsContext), rtmCallbacks = _useContext2.rtmCallbacks;
  var _useState2 = (0, import_react2.useState)({}), uidMap = _useState2[0], setUidMap = _useState2[1];
  var _useState3 = (0, import_react2.useState)({}), usernames = _useState3[0], setUsernames = _useState3[1];
  var _useState4 = (0, import_react2.useState)({}), userDataMap = _useState4[0], setUserDataMap = _useState4[1];
  var _useState5 = (0, import_react2.useState)(popUpStateEnum.closed), popUpState = _useState5[0], setPopUpState = _useState5[1];
  var _useState6 = (0, import_react2.useState)(rtmStatusEnum.offline), rtmStatus = _useState6[0], setRtmStatus = _useState6[1];
  var _useContext3 = (0, import_react2.useContext)(RtcContext), rtcUid = _useContext3.localUid, localAudioTrack = _useContext3.localAudioTrack, localVideoTrack = _useContext3.localVideoTrack, dispatch = _useContext3.dispatch, channelJoined = _useContext3.channelJoined;
  var login = function login2() {
    try {
      var tokenUrl = rtcProps.tokenUrl;
      var _temp4 = function() {
        if (tokenUrl) {
          var _temp5 = _catch(function() {
            return Promise.resolve(fetch(tokenUrl + "/rtm/" + ((rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.uid) || localUid.current))).then(function(res) {
              return Promise.resolve(res.json()).then(function(data) {
                var serverToken = data.rtmToken;
                return Promise.resolve(rtmClient.login({
                  uid: (rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.uid) || localUid.current,
                  token: serverToken
                })).then(function() {
                  timerValueRef.current = 5;
                });
              });
            });
          }, function() {
            setTimeout(function() {
              try {
                timerValueRef.current = timerValueRef.current + timerValueRef.current;
                login2();
                return Promise.resolve();
              } catch (e) {
                return Promise.reject(e);
              }
            }, timerValueRef.current * 1e3);
          });
          if (_temp5 && _temp5.then) return _temp5.then(function() {
          });
        } else {
          var _temp6 = _catch(function() {
            return Promise.resolve(rtmClient.login({
              uid: (rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.uid) || localUid.current,
              token: (rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.token) || void 0
            })).then(function() {
              timerValueRef.current = 5;
            });
          }, function() {
            setTimeout(function() {
              try {
                timerValueRef.current = timerValueRef.current + timerValueRef.current;
                login2();
                return Promise.resolve();
              } catch (e) {
                return Promise.reject(e);
              }
            }, timerValueRef.current * 1e3);
          });
          if (_temp6 && _temp6.then) return _temp6.then(function() {
          });
        }
      }();
      return Promise.resolve(_temp4 && _temp4.then ? _temp4.then(function() {
      }) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var joinChannel = function joinChannel2() {
    try {
      var _temp8 = _catch(function() {
        return Promise.resolve(channel.join()).then(function() {
          timerValueRef.current = 5;
        });
      }, function() {
        setTimeout(function() {
          try {
            timerValueRef.current = timerValueRef.current + timerValueRef.current;
            joinChannel2();
            return Promise.resolve();
          } catch (e) {
            return Promise.reject(e);
          }
        }, timerValueRef.current * 1e3);
      });
      return Promise.resolve(_temp8 && _temp8.then ? _temp8.then(function() {
      }) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var init = function init2() {
    try {
      setRtmStatus(rtmStatusEnum.initialising);
      rtcProps.uid ? localUid.current = String(rtcProps.uid) : localUid.current = String(timeNow());
      rtmClient.on("ConnectionStateChanged", function(state, reason) {
        console.log(state, reason);
      });
      rtmClient.on("TokenExpired", function() {
        try {
          var tokenUrl2 = rtcProps.tokenUrl;
          console.log("token expired - renewing");
          var _temp11 = function() {
            if (tokenUrl2) {
              var _temp12 = _catch(function() {
                return Promise.resolve(fetch(tokenUrl2 + "/rtm/" + ((rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.uid) || localUid.current))).then(function(res) {
                  return Promise.resolve(res.json()).then(function(data) {
                    var serverToken = data.rtmToken;
                    return Promise.resolve(rtmClient.renewToken(serverToken)).then(function() {
                      timerValueRef.current = 5;
                    });
                  });
                });
              }, function(error) {
                console.error("TokenExpiredError", error);
              });
              if (_temp12 && _temp12.then) return _temp12.then(function() {
              });
            }
          }();
          return Promise.resolve(_temp11 && _temp11.then ? _temp11.then(function() {
          }) : void 0);
        } catch (e) {
          return Promise.reject(e);
        }
      });
      rtmClient.on("MessageFromPeer", function(message, peerId) {
        handleReceivedMessage(message, peerId);
      });
      channel.on("ChannelMessage", function(message, peerId) {
        handleReceivedMessage(message, peerId);
      });
      channel.on("MemberJoined", function(peerId) {
        try {
          return Promise.resolve(sendPeerMessage(createUserData(), peerId)).then(function() {
          });
        } catch (e) {
          return Promise.reject(e);
        }
      });
      channel.on("MemberCountUpdated", function(count) {
        try {
          console.log("RTM-MemberCountUpdated: ", count);
          return Promise.resolve();
        } catch (e) {
          return Promise.reject(e);
        }
      });
      if (rtmCallbacks !== null && rtmCallbacks !== void 0 && rtmCallbacks.channel) {
        Object.keys(rtmCallbacks.channel).map(function(callback) {
          if (rtmCallbacks.channel) {
            channel.on(callback, rtmCallbacks.channel[callback]);
          }
        });
      } else if (rtmCallbacks !== null && rtmCallbacks !== void 0 && rtmCallbacks.client) {
        Object.keys(rtmCallbacks.client).map(function(callback) {
          if (rtmCallbacks.client) {
            rtmClient.on(callback, rtmCallbacks.client[callback]);
          }
        });
      }
      if (rtcProps.tokenUrl) {
        var tokenUrl = rtcProps.tokenUrl, uid = rtcProps.uid;
        rtmClient.on("TokenExpired", function() {
          try {
            console.log("token expired");
            return Promise.resolve(fetch(tokenUrl + "/rtm/" + (uid || 0) + "/")).then(function(res) {
              return Promise.resolve(res.json()).then(function(data) {
                var token = data.rtmToken;
                rtmClient.renewToken(token);
              });
            });
          } catch (e) {
            return Promise.reject(e);
          }
        });
      }
      setRtmStatus(rtmStatusEnum.loggingIn);
      return Promise.resolve(login()).then(function() {
        setRtmStatus(rtmStatusEnum.loggedIn);
        return Promise.resolve(joinChannel()).then(function() {
          setRtmStatus(rtmStatusEnum.connected);
          setUsernames(function(p) {
            return _extends({}, p, {
              0: rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.username
            });
          });
          sendChannelMessage(createUserData());
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var createUserData = function createUserData2() {
    return {
      messageType: "UserData",
      rtmId: (rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.uid) || localUid.current,
      rtcId: rtcUid.current,
      username: rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.username,
      role: rtcProps.role === "audience" ? 1 : 0,
      uikit: {
        platform: "web",
        framework: "react",
        version: "1.2.0"
      },
      agora: {
        rtm: index_modern_default2.VERSION,
        rtc: index_modern_default.VERSION
      }
    };
  };
  var sendMuteRequest = function sendMuteRequest2(device, rtcId, mute) {
    var forced = (rtmProps === null || rtmProps === void 0 ? void 0 : rtmProps.showPopUpBeforeRemoteMute) === false;
    var payload = {
      messageType: "MuteRequest",
      device,
      rtcId,
      mute,
      isForceful: forced
    };
    var peerId = uidMap[rtcId];
    if (forced && !mute) {
      console.log("cannot send force unmute request");
    } else if (peerId) {
      sendPeerMessage(payload, peerId);
    } else {
      console.log("peer not found");
    }
  };
  var handleReceivedMessage = function handleReceivedMessage2(message, peerId) {
    var messageObject;
    if (message.messageType === "RAW") {
      messageObject = parsePayload(message.rawMessage);
    } else if (message.messageType === "TEXT") {
      messageObject = JSON.parse(message.text);
    }
    console.log(messageObject, peerId);
    if (messageObject) {
      switch (messageObject.messageType) {
        case "UserData":
          handleReceivedUserDataMessage(messageObject);
          break;
        case "MuteRequest":
          handleReceivedMuteMessage(messageObject);
          break;
        case "RtmDataRequest":
          switch (messageObject.type) {
            case "ping":
              handlePing(peerId);
              break;
            case "userData":
              handleUserDataRequest(peerId);
              break;
            default:
              console.log(peerId);
          }
          break;
        default:
          console.log("unknown message content");
      }
    } else {
      console.log("unknown rtm message type");
    }
  };
  var handleReceivedUserDataMessage = function handleReceivedUserDataMessage2(userData) {
    setUidMap(function(p) {
      var _extends2;
      return _extends({}, p, (_extends2 = {}, _extends2[userData.rtcId] = userData.rtmId, _extends2));
    });
    setUsernames(function(p) {
      var _extends3;
      return _extends({}, p, (_extends3 = {}, _extends3[userData.rtcId] = userData.username, _extends3));
    });
    setUserDataMap(function(p) {
      var _extends4;
      return _extends({}, p, (_extends4 = {}, _extends4[userData.rtmId] = userData, _extends4));
    });
  };
  var handleReceivedMuteMessage = function handleReceivedMuteMessage2(muteRequest) {
    if (rtcUid.current === muteRequest.rtcId) {
      if (muteRequest.isForceful) {
        if (muteRequest.mute) {
          if (muteRequest.device === mutingDevice.microphone) {
            localAudioTrack && muteAudio(local, dispatch, localAudioTrack);
          } else if (muteRequest.device === mutingDevice.camera) {
            localVideoTrack && muteVideo(local, dispatch, localVideoTrack);
          }
        } else console.error("cannot force unmute");
      } else {
        if (muteRequest.device === mutingDevice.microphone) {
          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteMic);
          else setPopUpState(popUpStateEnum.unmuteMic);
        } else if (muteRequest.device === mutingDevice.camera) {
          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteCamera);
          else setPopUpState(popUpStateEnum.unmuteCamera);
        }
      }
    }
  };
  var handlePing = function handlePing2(peerId) {
    sendPeerMessage({
      messageType: "RtmDataRequest",
      type: "pong"
    }, peerId);
  };
  var handleUserDataRequest = function handleUserDataRequest2(peerId) {
    sendPeerMessage(createUserData(), peerId);
  };
  var sendChannelMessage = function sendChannelMessage2(payload) {
    try {
      var message = rtmClient.createMessage({
        text: JSON.stringify(payload),
        messageType: index_modern_default2.MessageType.TEXT
      });
      var _temp14 = _catch(function() {
        return Promise.resolve(channel.sendMessage(message)).then(function() {
        });
      }, function(e) {
        console.error(e);
      });
      return Promise.resolve(_temp14 && _temp14.then ? _temp14.then(function() {
      }) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var sendPeerMessage = function sendPeerMessage2(payload, peerId) {
    try {
      var message = rtmClient.createMessage({
        text: JSON.stringify(payload),
        messageType: index_modern_default2.MessageType.TEXT
      });
      var _temp16 = _catch(function() {
        return Promise.resolve(rtmClient.sendMessageToPeer(message, String(peerId))).then(function() {
        });
      }, function(e) {
        console.error(e);
      });
      return Promise.resolve(_temp16 && _temp16.then ? _temp16.then(function() {
      }) : void 0);
    } catch (e) {
      return Promise.reject(e);
    }
  };
  var end = function end2() {
    try {
      return Promise.resolve(rtmClient.logout()).then(function() {
        return Promise.resolve(rtmClient.removeAllListeners()).then(function() {
        });
      });
    } catch (e) {
      return Promise.reject(e);
    }
  };
  (0, import_react2.useEffect)(function() {
    if (channelJoined) {
      init();
      setLoggedIn(true);
    }
    return function() {
      if (channelJoined) {
        end();
      }
    };
  }, [rtcProps.channel, rtcProps.appId, channelJoined]);
  return import_react2.default.createElement(RtmProvider, {
    value: {
      rtmStatus,
      sendPeerMessage,
      sendChannelMessage,
      sendMuteRequest,
      rtmClient,
      uidMap,
      usernames,
      userDataMap,
      popUpState,
      setPopUpState
    }
  }, isLoggedIn ? props.children : import_react2.default.createElement(import_react2.default.Fragment, null));
};
var enc = new TextEncoder();
var dec = new TextDecoder();
var createRawMessage = function createRawMessage2(msg) {
  return enc.encode(JSON.stringify(msg));
};
var parsePayload = function parsePayload2(data) {
  return JSON.parse(dec.decode(data));
};
function PopUp() {
  var _useContext = (0, import_react2.useContext)(PropsContext), styleProps = _useContext.styleProps;
  var _useContext2 = (0, import_react2.useContext)(RtmContext), popUpState = _useContext2.popUpState, setPopUpState = _useContext2.setPopUpState;
  var _ref = styleProps || {}, popUpContainer = _ref.popUpContainer;
  var _useContext3 = (0, import_react2.useContext)(RtcContext), dispatch = _useContext3.dispatch, localVideoTrack = _useContext3.localVideoTrack, localAudioTrack = _useContext3.localAudioTrack;
  var local = (0, import_react2.useContext)(LocalContext);
  return popUpState !== popUpStateEnum.closed ? import_react2.default.createElement("div", {
    style: _extends({}, styles$3.container, popUpContainer)
  }, import_react2.default.createElement("div", {
    style: {
      color: "#fff",
      fontSize: 18,
      fontWeight: 700
    }
  }, popUpState === popUpStateEnum.muteCamera || popUpState === popUpStateEnum.muteMic ? "Mute " : "Unmute ", popUpState === popUpStateEnum.muteCamera || popUpState === popUpStateEnum.unmuteCamera ? "Camera" : "Mic", "?"), import_react2.default.createElement("div", {
    style: {
      flexDirection: "row",
      display: "flex",
      width: "100%",
      justifyContent: "space-around"
    }
  }, import_react2.default.createElement("div", {
    onClick: function onClick() {
      switch (popUpState) {
        case popUpStateEnum.muteCamera:
          local.hasVideo && localVideoTrack && muteVideo(local, dispatch, localVideoTrack);
          break;
        case popUpStateEnum.muteMic:
          local.hasAudio && localAudioTrack && muteAudio(local, dispatch, localAudioTrack);
          break;
        case popUpStateEnum.unmuteCamera:
          !local.hasVideo && localVideoTrack && muteVideo(local, dispatch, localVideoTrack);
          break;
        case popUpStateEnum.unmuteMic:
          !local.hasAudio && localAudioTrack && muteAudio(local, dispatch, localAudioTrack);
          break;
      }
      setPopUpState(popUpStateEnum.closed);
    },
    style: styles$3.button
  }, "Confirm"), import_react2.default.createElement("div", {
    style: styles$3.buttonClose,
    onClick: function onClick() {
      return setPopUpState(popUpStateEnum.closed);
    }
  }, "Close"))) : null;
}
var styles$3 = {
  button: {
    color: "#fff",
    cursor: "pointer",
    borderWidth: 2,
    borderStyle: "solid",
    borderColor: "#fff",
    padding: "2px 4px",
    borderRadius: 4
  },
  buttonClose: {
    color: "#fff",
    cursor: "pointer",
    borderWidth: 2,
    borderStyle: "solid",
    borderColor: "#fff",
    padding: "2px 4px",
    borderRadius: 4
  },
  container: {
    backgroundColor: "#007bffaa",
    position: "absolute",
    width: 240,
    height: 80,
    top: "50%",
    left: "50%",
    transform: "translate(-50%, -50%)",
    zIndex: 100,
    display: "flex",
    flexDirection: "column",
    justifyContent: "space-evenly",
    alignItems: "center"
  }
};
var AgoraUIKit = function AgoraUIKit2(props) {
  var styleProps = props.styleProps, rtcProps = props.rtcProps;
  var _ref = styleProps || {}, UIKitContainer = _ref.UIKitContainer;
  return import_react2.default.createElement(PropsProvider, {
    value: props
  }, import_react2.default.createElement("div", {
    style: _extends({}, style$1, UIKitContainer)
  }, rtcProps.role === "audience" ? import_react2.default.createElement(VideocallUI, null) : import_react2.default.createElement(TracksConfigure, null, import_react2.default.createElement(VideocallUI, null))));
};
var VideocallUI = function VideocallUI2() {
  var _useContext = (0, import_react2.useContext)(PropsContext), rtcProps = _useContext.rtcProps;
  return import_react2.default.createElement(RtcConfigure, {
    callActive: rtcProps.callActive
  }, import_react2.default.createElement(LocalUserContext, null, rtcProps.disableRtm ? import_react2.default.createElement(import_react2.default.Fragment, null, (rtcProps === null || rtcProps === void 0 ? void 0 : rtcProps.layout) === layout.grid ? import_react2.default.createElement(GridVideo, null) : import_react2.default.createElement(PinnedVideo, null), import_react2.default.createElement(LocalControls, null)) : import_react2.default.createElement(RtmConfigure, null, import_react2.default.createElement(PopUp, null), (rtcProps === null || rtcProps === void 0 ? void 0 : rtcProps.layout) === layout.grid ? import_react2.default.createElement(GridVideo, null) : import_react2.default.createElement(PinnedVideo, null), import_react2.default.createElement(LocalControls, null))));
};
var style$1 = {
  display: "flex",
  flex: 1,
  minHeight: 0,
  flexDirection: "column"
};
var index_modern_default3 = AgoraUIKit;
export {
  BtnTemplate,
  EndCall,
  GridVideo,
  LocalAudioMute,
  LocalControls,
  LocalUserContext,
  LocalVideoMute,
  MaxUidContext,
  MaxVideoView,
  MinUidContext,
  MinVideoView,
  PinnedVideo,
  PropsContext,
  RemoteAudioMute,
  PopUp as RemoteMutePopUp,
  RemoteVideoMute,
  RtcConfigure,
  RtcConsumer,
  RtcContext,
  RtcProvider,
  RtmConfigure,
  RtmConsumer,
  RtmContext,
  RtmProvider,
  SwapUser,
  ToggleState,
  TracksConfigure,
  TracksContext,
  VideoPlaceholder,
  VideocallUI,
  createRawMessage,
  index_modern_default3 as default,
  icons,
  layout,
  muteAudio,
  muteVideo,
  mutingDevice,
  parsePayload,
  popUpStateEnum,
  rtmStatusEnum
};
/*! Bundled license information:

agora-rtm-sdk/index.js:
  (*
   @preserve
   AgoraRTM Web SDK 1.4.3-203 - commit: v1.4.3-17-g1e27aa38
   Copyright (C) 2018-2021 Agora Lab.
   This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
   A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
  *)
*/
//# sourceMappingURL=agora-react-uikit.js.map
